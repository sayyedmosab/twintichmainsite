# Intro and General: Technical Architecture

## 1.0 Overview

The technical architecture of the "Intro and General" section is designed to be simple, robust, and scalable. It uses a modern tech stack that is well-suited for building interactive and visually rich web applications.

## 2.0 Frontend

*   **Framework:** The frontend is built using **React 18** with **Vite** as the build tool. This provides a fast and efficient development experience.
    *   **Why Vite?** Chosen for its extremely fast cold start times, instant hot module replacement (HMR), and optimized build performance, significantly improving developer productivity.
*   **Language:** The code is written in **TypeScript**, which provides static typing and improved code quality.
*   **Styling:** **Tailwind CSS** is used for styling, which allows for rapid development of custom user interfaces. The `shadcn/ui` library is used for some UI components.
*   **Routing:** **React Router** is used for client-side routing, with `HashRouter` being the chosen implementation.
    *   **Why HashRouter?** Selected for its compatibility with static hosting environments (like GitHub Pages or certain Vercel configurations) where server-side routing configuration might be limited or undesirable. It ensures routing works reliably without requiring server-side rewrites.
*   **State Management:** For authentication, a custom **React Context** (`AuthContext`) is used. For server state, **TanStack Query** is available but not heavily used in this section.
    *   **Why TanStack Query?** While not extensively used in this introductory section, its inclusion provides a robust solution for server state management, caching, and data synchronization across the application, ensuring a consistent and performant data layer for future features.

## 3.0 Backend

*   **Framework:** The backend is a simple **Express** server written in **TypeScript**.
*   **Primary Function:** The main purpose of the backend in this section is to handle user authentication (login and registration).
*   **API:** The backend exposes a set of RESTful API endpoints for authentication.

## 4.0 Database

*   **Database:** The application uses a **Supabase PostgreSQL** database.
*   **Schema:** For the "Intro and General" section, the main table is the `users` table, which stores user credentials. A detailed schema is as follows:

    ```sql
    CREATE TABLE users (
        id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
        email TEXT UNIQUE NOT NULL,
        password_hash TEXT NOT NULL,
        created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW() NOT NULL,
        last_login TIMESTAMP WITH TIME ZONE
    );

    -- Optional: For session management if not using JWTs directly
    CREATE TABLE sessions (
        id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
        user_id UUID REFERENCES users(id) ON DELETE CASCADE NOT NULL,
        session_token TEXT UNIQUE NOT NULL,
        expires_at TIMESTAMP WITH TIME ZONE NOT NULL,
        created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW() NOT NULL
    );
    ```

## 5.0 Infrastructure

*   **Frontend Deployment:** The frontend is deployed on **Vercel**, which provides a seamless deployment experience and a global CDN.
*   **Backend Deployment:** The backend is containerized using **Docker** and deployed on **AWS ECS/Fargate** in the Saudi region.
*   **Database Hosting:** The Supabase database is hosted on **AWS** in the Saudi region to ensure data sovereignty.

## 6.0 Security & Compliance

*   **User Data Handling:** User email addresses are stored securely. Passwords are never stored in plain text.
*   **Password Hashing:** Passwords are hashed using a strong, industry-standard algorithm (e.g., **bcrypt**) with a sufficient salt factor before being stored in the `password_hash` column. This protects against brute-force attacks and rainbow table attacks.
*   **Session Management:** User sessions are managed securely. Upon successful authentication, a unique, cryptographically secure session token is generated and associated with the user. This token is stored securely (e.g., in an HTTP-only cookie) and validated on subsequent requests.
*   **Data Transmission:** All communication between the client and server (and between application components) is encrypted using **HTTPS/SSL/TLS** to prevent eavesdropping and man-in-the-middle attacks.
*   **Access Control:** Access to sensitive API endpoints is restricted to authenticated and authorized users. Role-based access control (RBAC) can be implemented for more granular permissions.
*   **Input Validation:** All user inputs are rigorously validated on both the client and server sides to prevent common vulnerabilities such as SQL injection, cross-site scripting (XSS), and other injection attacks.
*   **Compliance:** The deployment in the Saudi AWS region helps in addressing data residency requirements relevant to Saudi Arabian regulations. Further compliance (e.g., NCA, CITC standards) would involve specific audits and adherence to their guidelines.
