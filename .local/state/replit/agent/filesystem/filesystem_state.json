{"file_contents":{"3D Animation Requirements.md":{"content":"# Instructions to the coding\n\nThe below are complex and sophisticated requirements. In order to be able to develop them correctly from the first round, make sure to perform the following:  \n1- Save these specifications in a folder called Animation Specifications  \n2- Split the file into 10 files: \n\n- 1 requirements file for each of the 9 phases containing all the phase-specific requirements  \n- 1 master file containing the global requirements applied everywhere and the the sequence and transition between them\n\n3- Always use the master file to start, create the full container canvas, then start with the first phase, once the phase is done, always remember to return to the master file and continue to the next phase and continue till all phases are completed.  \n4- Once the last phase 9 is done, perform a quality check by going through the master file requirements and compare the final product against the requirements including the phase requirements to ensure they are met. If not, log them in a file as bugs  \n5- Once step 4 is done, open the bugs file created in step 4 and proceed to fixing them. Once a bug is fixed, remove that bug only from the bugs file  \n6- continue iterating steps 4 and step 5 until the bugs report is empty, then you can declare the work is done\n\n# 1.0 Global Requirements \\- DETAILED SCROLL-BY-SCROLL REQUIREMENTS \n\n**Total Scroll Length**: 18000px (18000px spacer div)   \n**THREE.js Version**: use latest \n\n## 1.1 PHASE TIMING BREAKDOWN\n\n| Phase | Progress Start | Progress End | Scroll Pixels Start | Scroll Pixels End | Duration (pixels) | Percentage of Total |\n| :---- | :---- | :---- | :---- | :---- | :---- | :---- |\n| **Phase 1** | 0.00 | 0.0201 | 0px | 362px | 362px | 2.01% |\n| **Phase 2** | 0.0201 | 0.1206 | 362px | 2171px | 1809px | 10.05% |\n| **Phase 3** | 0.1206 | 0.1448 | 2171px | 2606px | 435px | 2.42% |\n| **Phase 4** | 0.1448 | 0.3138 | 2606px | 5648px | 3042px | 16.9% |\n| **Phase 5** | 0.3138 | 0.43 | 5648px | 7740px | 2092px | 11.62% |\n| **Phase 6** | 0.43 | 0.52 | 7740px | 9360px | 1620px | 9% |\n| **Phase 7** | 0.52 | 0.62 | 9360px | 11160px | 1800px | 10% |\n| **Phase 8** | 0.62 | 0.70 | 11160px | 12600px | 1440px | 8% |\n| **Phase 9** | 0.70 | 1.0 | 12600px | 18000px | 5400px | 30% |\n\n## 1.2 CUBE SPECIFICATIONS\n\n### Large Cubes (Phase 1-3)\n\n- **Count**: 27 cubes (3x3x3 formation)  \n- **Size**: `LARGE_SIZE = 1.0`  \n- **Gap**: `GAP = 0.08`  \n- **Step**: `STEP = 1.08` (size \\+ gap)  \n- **Initial Scale**: `1.5x` (PHASE1\\_INITIAL\\_SCALE)  \n- **Color**: `0x1f2937` (DARK NAVY BLUE)  \n- **Edge Color**: `0xffffff` (white)  \n- **Face Patterns**: Applied via faces.json with 6 patterns. Each pattern has exactly 9 instances distributed randomly once and then fixed for consistency.  \n- **Visual Properties**:  \n  - Metallic feel with reflective surfaces  \n  - Shifting lighting that moves across faces  \n  - Raised pattern appearance with depth  \n- **Critical**: Phase handover maintenance \\- Each phase starts from the exact last position/state of cubes from the previous phase. No resets or jumps.\n\n### Mini Cubes (Phase 4+)\n\n- **Count**: 729 cubes (27 large × 27 mini each)  \n- **Size**: `MINI_SIZE = 0.28`  \n- **Gap**: `MINI_GAP = 0.06`  \n- **Step**: `MINI_STEP = 0.34`  \n- **Initial Color**: `0x1f2937` (dark navy)  \n- **Target Color**: `0x9f7bff` (glowing purple)  \n- **Face Patterns**: Mini cubes use NO face patterns \\- they will not appear and only impact performance.  \n- **Edge Colors**:  \n  - White edges when dark navy (`0x1f2937`)  \n  - Light gray edges when glowing purple (`0x9f7bff`)\n\n## 1.3 FACE PATTERNS SYSTEM\n\n### faces.json Structure\n\n**Pattern Specifications**:\n\n- All patterns cover the entire face completely  \n- Patterns appear raised with 3D depth effect  \n- Metallic feel with reflective properties  \n- **Canvas Implementation**: Each pattern is generated on a 256x256 pixel texture canvas that maps to cube faces\n\n{\n\n  \"version\": \"v1\",\n\n  \"palette\": \\[\"\\#00F0FF\", \"\\#22D3EE\", \"\\#38BDF8\", \"\\#60A5FA\", \"\\#3B82F6\", \"\\#2563EB\"\\],\n\n  \"faces\": \\[\n\n    { \"id\": 0, \"pattern\": \"grid\", \"description\": \"Subtle grid with white lines on blue gradient\" },\n\n    { \"id\": 1, \"pattern\": \"stripes\", \"description\": \"Diagonal stripes with white strokes\" },\n\n    { \"id\": 2, \"pattern\": \"ring\", \"description\": \"Concentric rings with white outlines\" },\n\n    { \"id\": 3, \"pattern\": \"chevron\", \"description\": \"Chevron patterns with white lines\" },\n\n    { \"id\": 4, \"pattern\": \"hex\", \"description\": \"Hexagonal grid with white edges\" },\n\n    { \"id\": 5, \"pattern\": \"wave\", \"description\": \"Sinusoidal waves with white strokes\" }\n\n  \\]\n\n}\n\n### Pattern Implementation Details\n\n- **Canvas Size**: 256x256 pixels (texture canvas for each cube face)  \n- **Base Color**: Gradient from palette\\[0\\] to palette\\[2\\]  \n- **Stroke Style**: `rgba(255,255,255,0.8)` with `lineWidth: 2`  \n- **Patterns Applied**: Only to large cubes in Phase 1-3, mini cubes have no patterns for performance\n\n## 1.4 LIGHTING & RENDERING SPECIFICATIONS\n\n### Lighting Setup\n\n- **Hemisphere Light**: `color: 0x8aa4ff, groundColor: 0x0e0f15, intensity: 0.7`  \n- **Directional Light**: `color: 0xffffff, intensity: 1.0, position: (6, 10, 8), castShadow: true`  \n- **Core Light**: `color: 0x9f7bff, intensity: 2.0` (activated in Phase 8\\)\n\n### Post-Processing\n\n- **Effect Composer**: UnrealBloomPass enabled  \n- **Bloom Settings**: `threshold: 0.7, strength: 0.7, radius: 0.2`  \n- **Tone Mapping**: ACESFilmicToneMapping  \n- **Exposure**: 1.0\n\n### Camera Settings\n\n- **Type**: PerspectiveCamera  \n- **FOV**: 60 degrees  \n- **Position**: `(6, 4, 12)`  \n- **Near**: 0.1  \n- **Far**: 500\n\n## 1.5 MOUSE INTERACTION SPECIFICATIONS\n\n### Phase 1 & 9 Mouse Control\n\n- **X-axis**: `pointer.x * 0.6` → rotation.y  \n- **Y-axis**: `pointer.y * 0.4` → rotation.x  \n- **Smooth Interpolation**: Target rotation with lerp  \n- **Active Phases**: Phase 1 (0-2.01%) and Phase 9 (70-100%)\n\n### Disabled Phases\n\n- **Phases 2-8**: Mouse rotation disabled  \n- **Override**: Animation takes full control  \n- **Restoration**: Mouse control returns in Phase 9\n\n## 1.6 BACKGROUND & VISUAL EFFECTS\n\n### Background\n\n- **Base**: A gray color  \n- **Tinting**: Gradual black overlay in Phase 8  \n- **Final**: Full black in final morph sequence\n\n### Shadow Mapping\n\n- **Enabled**: All cubes cast and receive shadows  \n- **Type**: PCFSoftShadowMap  \n- **Light Source**: Directional light from (6, 10, 8\\)\n\n## 1.7 PERFORMANCE SPECIFICATIONS\n\n### Frame Rate\n\n- **Target**: 60 FPS  \n- **Animation**: requestAnimationFrame loop  \n- **Pixel Ratio**: Clamped to max 2.0\n\n### Optimization\n\n- **Frustum Culling**: Automatic via THREE.js  \n- **Geometry Instancing**: Individual cube objects  \n- **Texture Caching**: Face patterns cached on creation\n\n## 1.8 TEXT OVERLAY INTEGRATION REQUIREMENTS\n\n### Typography Specifications\n\n- **Title Font**: Allerta Stencil  \n  - Block 1 (Phase 1): 66pts, bright white with light blue glow  \n  - All other blocks: 44pts, bright white with light blue glow  \n- **Subtitle Font**: Inter, 24pts, blue color  \n- **Body Font**: Inter, 18pts, bright white\n\n### Text Block Widths\n\n- **Block 1** (Phase 1): 650px width  \n- **All other blocks**: 560px width\n\n### Animation Requirements\n\n- **No fading** \\- Text scrolls out of screen to imitate natural scrolling  \n- **Entry**: Vertical slide in  \n- **Exit**: Vertical slide out  \n- **Timing**: Phase-synchronized  \n- **Smoothness**: Hardware-accelerated transforms\n\n### Text Blocks Transition\n\n* Vertical slide in/out \\- must not overlap, must give feeling of scrolling, happens at transition points and remains still while cubes animate\n\n## 1.9 Overall View\n\nThe visible screen is split virtually into 3 equal columns, from left to right:\n\n- 1/3: contains the text overlay, left-aligned and vertically centered. The text can overlap the area if needed   \n- 2/3: contains the cube animation which is centered to it and vertically top-aligned \n\n# 2.0 Phase Requirements\n\n## 2.1 PHASE 1: Idle / Mouse Rotation (0px \\- 362px)\n\n**Face patterns are set from the start** **Duration**: 362 pixels (2.01% of scroll)\n\n| Scroll Range | Animation Behavior | Visual State | Mouse Interaction |\n| :---- | :---- | :---- | :---- |\n| 0px \\- 90px | Cube at 1.5x scale, gentle floating | 27 large cubes with face patterns organized as one Rubiks Cube | Mouse can spin in all directions |\n| 90px \\- 180px | Gradual scale reduction begins | Cube shrinking towards 1.0x | Mouse can spin in all directions |\n| 180px \\- 270px | Continued shrinking | Scale approaching target | Smooth rotation interpolation |\n| 270px \\- 362px | Final positioning for Phase 2 | Ready for dismantle | Mouse control maintained |\n\n**Text Display**: 3 TEXT BLOCKS THAT SCROLL WHILE CUBE IS SHRINKING:  \n**Block 1**\n\n- **Title**: \"Transforming Strategy Execution\" (66pts, Allerta Stencil, bright white with light blue glow)  \n- **Subtitle**: \"COMPLEXITY AS AN ASSET\" (24pts, Inter, blue)  \n- **Body**: \"Most transformations fail because complexity overwhelms. We turned that complexity into an advantage—redefining planning, risks, and dashboards inside one integrated model.\" (18pts, Inter, bright white)  \n- **Text Block Width**: 650px\n\nBlock 2\n\n- **Title**: \"Imagine a Parallel Universe\" (44pts, Allerta Stencil, bright white with light blue glow)  \n- **Subtitle**: \"WHERE TRANSFORMATIONS FLOW\" (24pts, Inter, blue)  \n- **Body**: \"Let us show you a week in that universe — A Week in the Life of a Transformation Team . Farfetched? It's here. We built the MVP: a Net.js web app with a Supabase database and a Gemini Assistant, built on a five-year scenario dataset inspired by real transformation events.\" (18pts, Inter, bright white)  \n- **Text Block Width**: 560px\n\nBlock 3\n\n- **Title**: \"So How Did We Do It?\" (44pts, Allerta Stencil, bright white with light blue glow)  \n- **Subtitle**: \"THE RIGHT QUESTIONS FIRST\" (24pts, Inter, blue)  \n- **Body**: \"Before answers, you need the right questions. This journey begins by uncovering the questions that matter most—the ones that unlock how complexity really works.\" (18pts, Inter, bright white)  \n- **Text Block Width**: 560px\n\n## 2.2 PHASE 2: First Dismantle / Dramatic Cloud (362px \\- 2171px)\n\n**Duration**: 1809 pixels (10.05% of scroll)\n\n| Scroll Range | Animation Behavior | Cube Movement | Color Changes |\n| :---- | :---- | :---- | :---- |\n| 362px \\- 600px | Dismantle begins | Cubes start separating | DARK NAVY BLUE maintained |\n| 600px \\- 1000px | Cloud formation | Radius expansion to PHASE2\\_RADIUS (8.0) | Face patterns visible \\- each of the 27 cubes has fixed pattern faces on all sides |\n| 1000px \\- 1500px | Full cloud spread | Maximum separation achieved | Edge lines white |\n| 1500px \\- 2171px | Hovering cloud state | Gentle random rotations | Prepare for settle |\n\n**Critical**: Cubes must remain in visible window while considering camera zoom state \\- this is what user observes\n\n**Text Display**:\n\n- **Title**: \"The Anatomy of an Organization\" (44pts, Allerta Stencil, bright white with light blue glow)  \n- **Subtitle**: \"WHAT MAKES AN ORGANIZATION?\" (24pts, Inter, blue)  \n- **Body**: \"Many things, like a living system of systems—Strategy, Policies, Processes, Digital—shaped by external forces such as markets and global events. Real transformation means understanding how these components interact, not treating them in isolation.\" (18pts, Inter, bright white)  \n- **Text Block Width**: 560px\n\n**Technical Notes**:\n\n- Large cubes separate along fixed paths that appear random (not truly random each time)  \n- This is an implosion effect \\- add perspective where top appears smaller and bottom bigger for depth  \n- Fixed radius of 8.0 world units  \n- Root rotation neutralized during cloud phase  \n- Individual cube rotations applied\n\n## 2.3 PHASE 3: Settle with Perspective (2171px \\- 2606px)\n\n**Duration**: 435 pixels (2.42% of scroll)\n\n| Scroll Range | Animation Behavior | Movement Pattern | Preparation |\n| :---- | :---- | :---- | :---- |\n| 2171px \\- 2300px | Cloud settling begins | Slow random rotations continue | Position anchoring |\n| 2300px \\- 2450px | Perspective adjustment | Hover effects with sine waves | Scale preparation |\n| 2450px \\- 2606px | Final settle state | Ready for transformation | Mini cube spawn prep |\n\n\\`  \n**Text Display**:\n\n* **Same text from phase 2 continues appearing \\- no transition into this phase**\n\n## 2.4 PHASE 4: Rubik Transform (2606px \\- 5648px)\n\n**Duration**: 3042 pixels (16.9% of scroll)\n\n| Scroll Range | Animation Behavior | Cube Generation | Color Transition |\n| :---- | :---- | :---- | :---- |\n| 2606px \\- 3200px | Synchronized transformation | Existing cubes shrink while new cubes grow \\- new cubes are Rubik cubes so each 27 cubes formed as a Rubik cube are replacing a single solid cube. Cube 13 in the Rubik constellation which is in the center of the Rubik cube is the anchor. The anchor has the same center point as the normal cube. When the shrink/grow starts, the solid cube starts going transparent so we see the new cube coming out. | Start at 0x1f2937 (dark navy) |\n| 3200px \\- 4200px | Scale growth | Mini cubes grow from 0.0001 to full size | Maintain dark navy |\n| 4200px \\- 5200px | Large cubes fade | Large cubes become transparent | Mini cubes visible |\n| 5200px \\- 5648px | Transformation complete | Let them settle \\- 27 Rubiks formed from 729 minis | Ready for recolor |\n\n**Text Display**:\n\n- **Title**: \"The Hidden Relations\" (44pts, Allerta Stencil, bright white with light blue glow)  \n- **Subtitle**: \"HOW DEEP DOES IT GO?\" (24pts, Inter, blue)  \n- **Body**: \"Each component has its own inputs, outputs, and hidden ties to others. When those ties are mapped, patterns emerge—a structure that shows why small changes ripple across the whole system.\" (18pts, Inter, bright white)  \n- **Text Block Width**: 560px\n\n**Technical Details**:\n\n- Each large cube spawns 27 mini cubes (3x3x3 local grid)  \n- Mini cubes tagged with ownerIndex and local coordinates  \n- No face patterns \\- just solid navy color for performance  \n- Initial scale `0.0001` grows with eased interpolation\n\n## 2.5 PHASE 5: Second Dismantle (5648px \\- 7740px)\n\n**Duration**: 2092 pixels (11.62% of scroll)\n\n| Scroll Range | Animation Behavior | Movement Pattern | State Changes |\n| :---- | :---- | :---- | :---- |\n| 5648px \\- 6200px | Second expansion begins | Mini cubes separate further | Maintain navy color |\n| 6200px \\- 7000px | Cloud reformation | Larger radius for 729 cubes | Prepare for recolor |\n| 7000px \\- 7740px | Maximum expansion | Full separation achieved | Ready for popcorn effect |\n\n**Critical**: Cubes must remain in visible window while considering camera zoom state \\- this is what user observes\n\n**Text Display**:\n\n- **Title**: \"The Moment of Truth\" (44pts, Allerta Stencil, bright white with light blue glow)  \n- **Subtitle**: \"SHOULD YOU WALK THIS JOURNEY?\" (24pts, Inter, blue)  \n- **Body**: \"We already did—and the answer is yes. But do it with eyes open. Complexity runs deeper than expected, and guidance is scarce. That's why we built a model that captures the whole picture and makes the path navigable.\" (18pts, Inter, bright white)  \n- **Text Block Width**: 560px\n\n## 2.6 PHASE 6: Popcorn Recolor (7740px \\- 9360px)\n\n**Duration**: 1620 pixels (9% of scroll)\n\n| Scroll Range | Animation Behavior | Color Transition | Speed Pattern |\n| :---- | :---- | :---- | :---- |\n| 7740px \\- 8200px | Recolor begins sequentially | First 15 cubes turn purple slowly | Cubes change one by one, they start slow for the first 15 then accelerate while still sequential, speed must still be visible for the user |\n| 8200px \\- 8800px | Acceleration | More cubes change color | Speed increases |\n| 8800px \\- 9360px | Rapid completion | All cubes become 0x9f7bff | Make sure all cubes finish recoloring before moving |\n\n**Text Display**:\n\n- **Title**: \"Locks, Locks Everywhere\" (44pts, Allerta Stencil, bright white with light blue glow)  \n- **Subtitle**: \"WHAT DID TWO YEARS REVEAL?\" (24pts, Inter, blue)  \n- **Body**: \"Two years of relentless work, unlocking barrier after barrier. Each layer exposed new dependencies, each cube revealed hidden ties. Piece by piece, the digital twin took shape—a living map of complexity. And just as it came together, AI leapt forward, suddenly powerful and accessible, turning years of struggle into a working reality.\" (18pts, Inter, bright white)  \n- **Text Block Width**: 560px  \n- \n\n**Technical Notes**:\n\n- Color transition from `0x1f2937` to `0x9f7bff` (glowing purple)  \n- \"Popcorn\" effect: cubes change color one by one, slow then fast  \n- Random selection algorithm for color change order\n\n## 2.7 PHASE 7: Dance (9360px \\- 11160px)\n\n**Duration**: 1800 pixels (10% of scroll)\n\n| Scroll Range | Animation Behavior | Movement Pattern | Visual Effects |\n| :---- | :---- | :---- | :---- |\n| 9360px \\- 9800px | Dance begins | They rotate randomly and settle into small groups formed as rotating circles  | Purple color maintained |\n| 9800px \\- 10500px | Circle formations | Orbital movements around anchors | Rotating circle groups floating in place  |\n| 10500px \\- 11160px | Choreographed motion | Let them settle and float/rotate | Prepare for morphing |\n\n**Text Display**:\n\n- **Same text from phase 6 continues appearing \\- no transition into this phase**\n\n**Technical Details**:\n\n- Swirl radius: `MINI_STEP * 2.0`  \n- Orbital motion with sine/cosine calculations  \n- Hover effects with phase offsets  \n- Individual cube rotations continue\n\n## 2.8 PHASE 8: Final Morph (11160px \\- 12600px)\n\n**Duration**: 1440 pixels (8% of scroll)\n\n| Scroll Range | Animation Behavior | Morphing Process | Visual Effects |\n| :---- | :---- | :---- | :---- |\n| 11160px \\- 11600px | Morph begins | Glowing sphere appears in center of scene Cubes move to sculpture positions around the sphere.  | Purple maintained |\n| 11600px \\- 12200px | Shape formation | Complex 3D sculpture emerges around the glowing sphere.  Sculpture is every 5 cubes form a pillar placed on the faces of the sphere The sculptures cover the entire surface of the glowing sphere with reasonable spacing | Tint increases from previous phase |\n| 12200px \\- 12600px | Final sculpture | Complete morph with appearance of a single large cube with glowing light purple solid edges containing the glowing sphere and the sculptures | Tint ends here, container cube frame is solid, metallic and glowing with shifting lighting |\n\n**Text Display**:\n\n- **Title**: \"The Future, Ready Today\" (44pts, Allerta Stencil, bright white with light blue glow)  \n- **Subtitle**: \"WHICH PATH WILL YOU CHOOSE?\" (24pts, Inter, blue)  \n- **Body**: \"With the final piece in place—the very heart of the solution—the AI breathed life into the Digital Twin, reigniting hope for true transformation. The journey is not over for us or you, it continues through two distinct hubs: TwinLab \\- Access our multi-media knowledge base and contribute to it in Wiki style. Help shape the future of transformations. TwinStudio \\- Take real steps towards your first use case and prototype V0 of your twin using our free tools. Start shaping your own transformation\" (18pts, Inter, bright white)  \n- **Text Block Width**: 560px\n\n\n  \n**Technical Notes**:\n\n- Core sphere and frame group become visible  \n- Core light (purple point light) activates  \n- Gradual black tint overlay increases  \n- Sculpture positions pre-calculated\n\n## 2.9 PHASE 9: Final Formation (12600px \\- 18000px)\n\n**Duration**: 5400 pixels (30% of scroll)\n\n| Scroll Range | Animation Behavior | Final State | Interaction |\n| :---- | :---- | :---- | :---- |\n| 12600px \\- 14000px | Formation solidifies | Sculpture complete | Mouse control returns |\n| 14000px \\- 16000px | Gentle rotation | Whole sculpture rotates | Full 360° spin capability |\n| 16000px \\- 18000px | Final idle state | Ready for interaction | Mouse can spin in all directions |\n\n**Text Display**:\n\n- **Same text from phase 8 continues appearing \\- no transition into this phase**\n\n**Critical Requirement**: Scrolling must work in reverse in the exact sequence  \n","size_bytes":20020},"TEXT_OVERLAY_ARCHITECTURE.md":{"content":"# Text Overlay System Architecture Design\n\n## Overview\nThis document outlines the complete architectural design for implementing the missing text overlay system that renders scrolling text content synchronized with the 9-phase Rubik's cube animation.\n\n## Current State\n- ✅ **Animation System**: RubiksIframe with 9-phase cube transformation working\n- ✅ **Text Content**: scrollingSections array with 8 transformation narrative sections\n- ❌ **Text Rendering**: scrollingSections defined but never used in JSX\n- ❌ **Text Overlay**: No component to display text over animation\n- ❌ **Slide Animations**: No slide in/out transitions implemented\n\n## 1. Component Architecture\n\n```\nHomePage.tsx\n├── RubiksIframe (existing)\n│   ├── Handles 3D animation\n│   ├── Emits progress/phase events via postMessage\n│   └── Provides onProgress & onPhaseChange callbacks\n└── ScrollingTextOverlay (NEW)\n    ├── Receives progress from RubiksIframe\n    ├── Maps progress to text sections\n    ├── Handles slide animations\n    └── Renders text content over iframe\n```\n\n## 2. Data Flow Architecture\n\n```\niframe scroll → globalProgress() → postMessage → RubiksIframe → \nonProgress callback → ScrollingTextOverlay → calculate visible section → \nslide transition → render text\n```\n\n## 3. Integration Points\n\n### Existing Infrastructure (Keep)\n- `RubiksIframe` component with postMessage communication\n- `scrollingSections` data array (8 text sections)\n- Progress calculation (0-1 range)\n- Phase detection system (9 phases)\n\n### New Components Needed\n```typescript\ninterface ScrollingTextOverlayProps {\n  progress: number;\n  currentPhase: number;\n  sections: ScrollingSection[];\n}\n\ninterface ScrollingSection {\n  title: string;\n  subtitle: string;\n  text: string;\n  startProgress: number;  // When this section appears\n  endProgress: number;    // When this section disappears\n}\n```\n\n## 4. Progress Mapping Design\n\n### Current System\n- Animation has 9 phases with specific progress ranges\n- Example: Phase 1 (0-2.01%), Phase 2 (2.01-12.06%), etc.\n\n### Text Section Mapping\n```typescript\nconst textSectionMap = [\n  { section: 0, startProgress: 0.00, endProgress: 0.125 },   // 0-12.5%\n  { section: 1, startProgress: 0.125, endProgress: 0.25 },  // 12.5-25%\n  { section: 2, startProgress: 0.25, endProgress: 0.375 },  // 25-37.5%\n  { section: 3, startProgress: 0.375, endProgress: 0.50 },  // 37.5-50%\n  { section: 4, startProgress: 0.50, endProgress: 0.625 },  // 50-62.5%\n  { section: 5, startProgress: 0.625, endProgress: 0.75 },  // 62.5-75%\n  { section: 6, startProgress: 0.75, endProgress: 0.875 },  // 75-87.5%\n  { section: 7, startProgress: 0.875, endProgress: 1.0 },   // 87.5-100%\n];\n```\n\n## 5. Animation Architecture\n\n### Slide Transition System\n```css\n.text-overlay {\n  position: absolute;\n  z-index: 10;\n  /* Positioned over iframe */\n}\n\n.text-section {\n  transform: translateX(-100%);  /* Start off-screen */\n  transition: transform 0.8s ease-in-out, opacity 0.8s ease-in-out;\n}\n\n.text-section.active {\n  transform: translateX(0);      /* Slide in */\n  opacity: 1;\n}\n\n.text-section.exiting {\n  transform: translateX(100%);   /* Slide out */\n  opacity: 0;\n}\n```\n\n## 6. State Management Design\n\n```typescript\nconst ScrollingTextOverlay = ({ progress, sections }) => {\n  const [currentSection, setCurrentSection] = useState(0);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [previousSection, setPreviousSection] = useState(-1);\n\n  useEffect(() => {\n    const newSection = calculateCurrentSection(progress);\n    if (newSection !== currentSection) {\n      handleSectionTransition(newSection);\n    }\n  }, [progress]);\n};\n```\n\n## 7. Positioning Architecture\n\n### Layout Strategy\n```jsx\n<div className=\"relative w-full h-full\">\n  {/* Iframe (background) */}\n  <RubiksIframe onProgress={handleProgress} onPhaseChange={handlePhase} />\n  \n  {/* Text overlay (foreground) */}\n  <div className=\"absolute inset-0 pointer-events-none z-10\">\n    <ScrollingTextOverlay \n      progress={progress} \n      sections={scrollingSections} \n    />\n  </div>\n</div>\n```\n\n## 8. Performance Considerations\n\n### Optimization Strategy\n- **Debounced Updates**: Avoid re-rendering on every progress change\n- **Section Pre-loading**: Prepare next/previous sections for smooth transitions\n- **CSS Transforms**: Use transform3d for hardware acceleration\n- **Conditional Rendering**: Only render visible + adjacent sections\n\n```typescript\nconst debouncedProgress = useDebounce(progress, 16); // ~60fps\nconst visibleSections = useMemo(() => \n  getVisibleSections(debouncedProgress), [debouncedProgress]\n);\n```\n\n## 9. Responsive Design Architecture\n\n### Multi-Device Strategy\n```css\n.text-overlay {\n  /* Desktop: Side overlay */\n  @media (min-width: 1024px) {\n    left: 5%;\n    width: 40%;\n    top: 20%;\n  }\n  \n  /* Mobile: Bottom overlay */\n  @media (max-width: 1023px) {\n    bottom: 10%;\n    left: 5%;\n    right: 5%;\n  }\n}\n```\n\n## 10. Error Handling Architecture\n\n### Fallback Strategy\n- **Progress Bounds**: Clamp progress to 0-1 range\n- **Section Fallback**: Default to section 0 if calculation fails\n- **Animation Fallback**: CSS transitions with fallback to opacity-only\n- **Content Fallback**: Show static text if dynamic system fails\n\n## 11. Testing Architecture\n\n### Component Testing\n- Mock progress values and verify correct section display\n- Test transition animations with progress changes\n- Verify text content matches scrollingSections data\n- Test responsive behavior across screen sizes\n\n### Integration Testing\n- Test RubiksIframe → ScrollingTextOverlay communication\n- Verify progress mapping accuracy\n- Test slide timing with animation phases\n\n## 12. Code Organization\n\n```\nsrc/components/\n├── RubiksIframe.tsx (existing)\n├── ScrollingTextOverlay/\n│   ├── index.tsx\n│   ├── TextSection.tsx\n│   ├── useProgressMapping.ts\n│   ├── useSlideAnimation.ts\n│   └── styles.css\n└── HomePage.tsx (modified)\n```\n\n## Implementation Priority\n\n1. **Phase 1**: Create ScrollingTextOverlay component with basic text rendering\n2. **Phase 2**: Implement progress mapping and section switching\n3. **Phase 3**: Add slide animations and transitions\n4. **Phase 4**: Optimize performance and add error handling\n5. **Phase 5**: Add responsive design and testing\n\n## Key Benefits\n\n- **Preserves Existing**: Leverages current RubiksIframe infrastructure\n- **Maintainable**: Clean separation of concerns\n- **Performant**: Hardware-accelerated animations with debouncing\n- **Responsive**: Works across all device sizes\n- **Extensible**: Easy to modify text content or add new sections\n\nThis architecture restores the sophisticated text overlay system that synchronizes with your beautiful 9-phase cube transformation animation.\n","size_bytes":6834},"postcss.config.js":{"content":"export default {\n  plugins: {\n    \"postcss-import\": {},\n    \"@tailwindcss/postcss\": {},\n    \"postcss-preset-env\": { stage: 3, preserve: true },\n  },\n};\n","size_bytes":152},"tailwind.config.js":{"content":"module.exports = {\n  content: [\n    \"./pages/**/*.{js,ts,jsx,tsx}\",\n    \"./components/**/*.{js,ts,jsx,tsx}\",\n    \"./app/**/*.{js,ts,jsx,tsx}\",\n    \"./src/**/*.{js,ts,jsx,tsx}\",\n  ],\n  theme: {\n    extend: {\n      fontFamily: {\n        'sans': ['Poppins', 'sans-serif'],\n        'mono': ['JetBrains Mono', 'monospace'],\n      }\n    }\n  },\n  plugins: [],\n};\n","size_bytes":356},"vite.config.ts":{"content":"import path from 'path';\nimport { defineConfig } from 'vite';\n\nexport default defineConfig({\n  // Main app runs on port 5000 for Replit\n  server: {\n    port: 5000,\n    host: '0.0.0.0',\n    strictPort: true,\n    hmr: {\n      overlay: false\n    }\n  },\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, '.'),\n    }\n  }\n});\n","size_bytes":331},"src/App.tsx":{"content":"import React from 'react';\nimport { HashRouter, Routes, Route, Outlet, Navigate } from 'react-router-dom';\nimport { AuthProvider } from './context/AuthContext';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport ProtectedRoute from './components/ProtectedRoute';\n\n// Import Pages\nimport HomePage from './pages/HomePage';\nimport ThreeDAnimationPage from './pages/ThreeDAnimationPage';\n// Import Architect app from workspace package\nimport ArchitectLessonsPage from './pages/ArchitectLessonsPage';\nimport LoginPage from './pages/auth/LoginPage';\nimport RegisterPage from './pages/auth/RegisterPage';\nimport JosoorVisionPage from './pages/josoor/JosoorVisionPage';\nimport RoadmapPage from './pages/RoadmapPage';\nimport ArchitectsForumPage from './pages/ArchitectsForumPage';\nimport SimpleTestPage from './pages/SimpleTestPage';\n\n// Simple test component to verify routing\nconst TestRoute = () => {\n  return (\n    <div style={{ padding: '20px', background: 'yellow', minHeight: '100vh' }}>\n      <h1>TEST ROUTE WORKING!</h1>\n      <p>If you can see this, routing is working correctly.</p>\n      <p>The /test route is loading this component instead of SimpleTestPage.</p>\n    </div>\n  );\n};\n\nconst AppLayout: React.FC = () => {\n  return (\n    <div className=\"grid grid-rows-[auto,1fr,auto] h-screen bg-gray-100 text-gray-800\">\n      <Header />\n      <main className=\"overflow-y-auto min-h-0\">\n        <Outlet />\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nconst App: React.FC = () => {\n  return (\n    <AuthProvider>\n      <HashRouter>\n        <Routes>\n          <Route element={<AppLayout />}>\n            <Route path=\"/\" element={<HomePage />} />\n            <Route path=\"/login\" element={<LoginPage />} />\n            <Route path=\"/register\" element={<RegisterPage />} />\n            \n\n            {/* Main Navigation Routes (existing only) */}\n            <Route path=\"/about\" element={<JosoorVisionPage />} />\n            <Route path=\"/roadmap\" element={<RoadmapPage />} />\n            <Route path=\"/forum\" element={<ArchitectsForumPage />} />\n            <Route path=\"/test\" element={<SimpleTestPage />} />\n            <Route path=\"/architect\" element={<ArchitectLessonsPage />} />\n            <Route path=\"/3danimation\" element={<ThreeDAnimationPage />} />\n\n            <Route path=\"*\" element={<Navigate to=\"/\" />} />\n          </Route>\n        </Routes>\n      </HashRouter>\n    </AuthProvider>\n  );\n};\n\nexport default App;\n","size_bytes":2473},"src/index.css":{"content":"/* Simple, direct CSS without Tailwind complexity */\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');\n\n/* Reset and base styles */\n* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\nhtml, body {\n  height: 100%;\n  overflow: auto;\n  font-family: 'Poppins', sans-serif;\n  font-synthesis: none;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#root {\n  min-height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n/* Layout containers */\n.app-container {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.main-content {\n  flex: 1;\n  overflow: hidden;\n}\n\n/* Three-column layout */\n.three-column-layout {\n  height: 100%;\n  display: flex;\n  overflow: hidden;\n}\n\n.left-panel {\n  width: 20%;\n  height: 100%;\n  flex-shrink: 0;\n  overflow-y: auto;\n  background: white;\n  border-right: 1px solid #e5e7eb;\n}\n\n.middle-panel {\n  width: 60%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.right-panel {\n  width: 20%;\n  height: 100%;\n  flex-shrink: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background: white;\n  border-left: 1px solid #e5e7eb;\n}\n\n/* Content areas */\n.content-area {\n  flex: 1;\n  min-height: 0;\n  overflow-y: auto;\n  background: white;\n  padding: 16px;\n}\n\n.supporting-content {\n  flex-shrink: 0;\n  background: white;\n  border-bottom: 1px solid #e5e7eb;\n  padding: 16px;\n}\n\n/* Header and Footer */\n.app-header {\n  background: #00122d;\n  color: white;\n  padding: 0 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 80px;\n  flex-shrink: 0;\n}\n\n.app-footer {\n  background: #374151;\n  color: white;\n  padding: 1rem;\n  text-align: center;\n  flex-shrink: 0;\n}\n\n/* Typography */\nh1, h2, h3, h4, h5, h6 {\n  font-family: 'Poppins', sans-serif;\n  font-weight: 700;\n  letter-spacing: -0.025em;\n}\n\np {\n  line-height: 1.7;\n  color: #374151;\n}\n\n/* Scrollbar styling */\n.left-panel::-webkit-scrollbar,\n.right-panel::-webkit-scrollbar,\n.content-area::-webkit-scrollbar {\n  width: 8px;\n}\n\n.left-panel::-webkit-scrollbar-track,\n.right-panel::-webkit-scrollbar-track,\n.content-area::-webkit-scrollbar-track {\n  background: #f3f4f6;\n}\n\n.left-panel::-webkit-scrollbar-thumb,\n.right-panel::-webkit-scrollbar-thumb,\n.content-area::-webkit-scrollbar-thumb {\n  background: #111827;\n}\n\n.left-panel::-webkit-scrollbar-thumb:hover,\n.right-panel::-webkit-scrollbar-thumb:hover,\n.content-area::-webkit-scrollbar-thumb:hover {\n  background: #374151;\n}\n/* Sharp, professional styling */\n* {\n  border-radius: 0 !important;\n}\n\nbutton, input, textarea, select {\n  border-radius: 0 !important;\n}\n\n/* Custom font families - Sharp, non-bendy fonts */\n.font-mono {\n  font-family: 'JetBrains Mono', 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Droid Sans Mono', 'Source Code Pro', monospace;\n  font-feature-settings: \"liga\" 0;\n  font-variant-ligatures: none;\n}\n\nbody {\n  font-family: 'Poppins', 'SF Pro Display', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;\n  font-feature-settings: \"liga\" 0;\n  font-variant-ligatures: none;\n}\n\n/* Ensure sharp, geometric text rendering */\nh1, h2, h3, h4, h5, h6 {\n  font-family: 'Poppins', sans-serif;\n  font-weight: 700;\n  letter-spacing: -0.025em;\n}\n\n/* Custom styles for better webapp appearance */\n.prose {\n  max-width: none;\n}\n\n.prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {\n  color: #111827;\n  font-weight: 700;\n  font-family: 'Poppins', sans-serif;\n}\n\n.prose p {\n  color: #374151;\n  line-height: 1.7;\n  font-family: 'Poppins', sans-serif;\n}\n\n.prose img {\n  border: 1px solid #d1d5db;\n  box-shadow: none;\n}\n\n/* Sharp scrollbar styling */\n::-webkit-scrollbar {\n  width: 8px;\n}\n\n::-webkit-scrollbar-track {\n  background: #f3f4f6;\n}\n\n::-webkit-scrollbar-thumb {\n  background: #111827;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: #374151;\n}\n\n/* Remove all rounded corners */\n.rounded, .rounded-sm, .rounded-md, .rounded-lg, .rounded-xl, .rounded-2xl, .rounded-full {\n  border-radius: 0 !important;\n}\n\n/* Prevent header wrapping in episode content tables */\n.content-area table th {\n  white-space: nowrap;\n}\n\n/* Smooth scrolling for landing page */\nhtml {\n  scroll-behavior: smooth;\n}\n\n/* Landing page section styling */\n.landing-section {\n  background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(248,250,252,0.95) 100%);\n  backdrop-filter: blur(10px);\n  transition: all 0.6s ease-in-out;\n}\n\n.landing-section:nth-child(even) {\n  background: linear-gradient(135deg, rgba(241,245,249,0.95) 0%, rgba(255,255,255,0.95) 100%);\n}\n\n.landing-title {\n  background: linear-gradient(135deg, #1f2937 0%, #374151 50%, #111827 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.landing-subtitle {\n  color: #4b5563;\n  letter-spacing: 0.1em;\n}\n\n.landing-text {\n  color: #6b7280;\n}\n\n/* Professional button styling */\nbutton {\n  font-family: 'Poppins', sans-serif;\n  font-weight: 500;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  transition: all 0.2s ease;\n}\n\n/* Professional input styling */\ninput, textarea, select {\n  font-family: 'Poppins', sans-serif;\n  border: 1px solid #d1d5db;\n}\n\ninput:focus, textarea:focus, select:focus {\n  border-color: #111827;\n  box-shadow: 0 0 0 2px rgba(17, 24, 39, 0.1);\n}\n\n/* Counter styles for ordered lists */\n.counter-reset-\\[item\\] {\n  counter-reset: item;\n}\n\n.counter-increment-\\[item\\] {\n  counter-increment: item;\n}\n\n.before\\:content-\\[counter\\(item\\)\\\".\\\"\\]:before {\n  content: counter(item) \".\";\n}\n","size_bytes":5615},"src/index.tsx":{"content":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) {\n  throw new Error(\"Could not find root element to mount to\");\n}\n\nconst root = ReactDOM.createRoot(rootElement);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n","size_bytes":350},"src/main.tsx":{"content":"import React, { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport App from './App'\nimport './index.css'\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n)","size_bytes":232},"src/types.ts":{"content":"// import type { User as SupabaseUser, AuthError as SupabaseAuthError } from '@supabase/supabase-js';\n\n// Mock User and AuthError for local development without Supabase\nexport interface User {\n  id: string;\n  email?: string;\n  // Add any other user properties your app uses\n}\nexport interface AuthError {\n  message: string;\n  name: string;\n}\n\n\nexport interface SubNavLink {\n  id: number | string;\n  text: string;\n  href: string;\n  icon?: React.ComponentType<any>;\n}\n\nexport interface NavLink {\n  id: number | string;\n  text: string;\n  href: string;\n  icon?: React.ComponentType<any>;\n  subLinks?: SubNavLink[];\n}\n\nexport interface AuthContextType {\n  user: User | null;\n  loading: boolean;\n  login: (email: string, password: string) => Promise<{ error: AuthError | null }>;\n  register: (email: string, password: string) => Promise<{ error: AuthError | null }>;\n  loginWithGoogle: () => Promise<{ error: AuthError | null }>;\n  loginWithApple: () => Promise<{ error: AuthError | null }>;\n  logout: () => Promise<{ error: AuthError | null }>;\n}\n","size_bytes":1042},"src/vite-env.d.ts":{"content":"/// <reference types=\"vite/client\" />\n\ninterface ImportMetaEnv {\n  readonly VITE_SUPABASE_URL: string\n  readonly VITE_SUPABASE_ANON_KEY: string\n  readonly VITE_GOOGLE_AI_API_KEY: string\n}\n\ninterface ImportMeta {\n  readonly env: ImportMetaEnv\n}\n","size_bytes":244},"THREE.examples/controls/ArcballControls.js":{"content":"import {\n\tControls,\n\tGridHelper,\n\tEllipseCurve,\n\tBufferGeometry,\n\tLine,\n\tLineBasicMaterial,\n\tRaycaster,\n\tGroup,\n\tBox3,\n\tSphere,\n\tQuaternion,\n\tVector2,\n\tVector3,\n\tMatrix4,\n\tMathUtils\n} from 'three';\n\n//trackball state\nconst STATE = {\n\n\tIDLE: Symbol(),\n\tROTATE: Symbol(),\n\tPAN: Symbol(),\n\tSCALE: Symbol(),\n\tFOV: Symbol(),\n\tFOCUS: Symbol(),\n\tZROTATE: Symbol(),\n\tTOUCH_MULTI: Symbol(),\n\tANIMATION_FOCUS: Symbol(),\n\tANIMATION_ROTATE: Symbol()\n\n};\n\nconst INPUT = {\n\n\tNONE: Symbol(),\n\tONE_FINGER: Symbol(),\n\tONE_FINGER_SWITCHED: Symbol(),\n\tTWO_FINGER: Symbol(),\n\tMULT_FINGER: Symbol(),\n\tCURSOR: Symbol()\n\n};\n\n//cursor center coordinates\nconst _center = {\n\n\tx: 0,\n\ty: 0\n\n};\n\n//transformation matrices for gizmos and camera\nconst _transformation = {\n\n\tcamera: new Matrix4(),\n\tgizmos: new Matrix4()\n\n};\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event ArcballControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when an interaction was initiated.\n *\n * @event ArcballControls#start\n * @type {Object}\n */\nconst _startEvent = { type: 'start' };\n\n/**\n * Fires when an interaction has finished.\n *\n * @event ArcballControls#end\n * @type {Object}\n */\nconst _endEvent = { type: 'end' };\n\nconst _raycaster = new Raycaster();\nconst _offset = new Vector3();\n\nconst _gizmoMatrixStateTemp = new Matrix4();\nconst _cameraMatrixStateTemp = new Matrix4();\nconst _scalePointTemp = new Vector3();\n\nconst _EPS = 0.000001;\n\n/**\n * Arcball controls allow the camera to be controlled by a virtual trackball with full touch support and advanced navigation functionality.\n * Cursor/finger positions and movements are mapped over a virtual trackball surface represented by a gizmo and mapped in intuitive and\n * consistent camera movements. Dragging cursor/fingers will cause camera to orbit around the center of the trackball in a conservative\n * way (returning to the starting point will make the camera return to its starting orientation).\n *\n * In addition to supporting pan, zoom and pinch gestures, Arcball controls provide focus< functionality with a double click/tap for intuitively\n * moving the object's point of interest in the center of the virtual trackball. Focus allows a much better inspection and navigation in complex\n * environment. Moreover Arcball controls allow FOV manipulation (in a vertigo-style method) and z-rotation. Saving and restoring of Camera State\n * is supported also through clipboard (use ctrl+c and ctrl+v shortcuts for copy and paste the state).\n *\n * Unlike {@link OrbitControls} and {@link TrackballControls}, `ArcballControls` doesn't require `update()` to be called externally in an\n * animation loop when animations are on.\n *\n * @augments Controls\n * @three_import import { ArcballControls } from 'three/addons/controls/ArcballControls.js';\n */\nclass ArcballControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Camera} camera - The camera to be controlled. The camera must not be a child of another object, unless that object is the scene itself.\n\t * @param {?HTMLElement} [domElement=null] - The HTML element used for event listeners.\n\t * @param {?Scene} [scene=null] The scene rendered by the camera. If not given, gizmos cannot be shown.\n\t */\n\tconstructor( camera, domElement = null, scene = null ) {\n\n\t\tsuper( camera, domElement );\n\n\t\t/**\n\t\t * The scene rendered by the camera. If not given, gizmos cannot be shown.\n\t\t *\n\t\t * @type {?Scene}\n\t\t * @default null\n\t\t */\n\t\tthis.scene = scene;\n\n\t\t/**\n\t\t * The control's focus point.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target = new Vector3();\n\t\tthis._currentTarget = new Vector3();\n\n\t\t/**\n\t\t * The size of the gizmo relative to the screen width and height.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.67\n\t\t */\n\t\tthis.radiusFactor = 0.67;\n\n\t\t/**\n\t\t * Holds the mouse actions of this controls. This property is maintained by the methods\n\t\t * `setMouseAction()` and `unsetMouseAction()`.\n\t\t *\n\t\t * @type {Array<Object>}\n\t\t */\n\t\tthis.mouseActions = [];\n\t\tthis._mouseOp = null;\n\n\n\t\t//global vectors and matrices that are used in some operations to avoid creating new objects every time (e.g. every time cursor moves)\n\t\tthis._v2_1 = new Vector2();\n\t\tthis._v3_1 = new Vector3();\n\t\tthis._v3_2 = new Vector3();\n\n\t\tthis._m4_1 = new Matrix4();\n\t\tthis._m4_2 = new Matrix4();\n\n\t\tthis._quat = new Quaternion();\n\n\t\t//transformation matrices\n\t\tthis._translationMatrix = new Matrix4(); //matrix for translation operation\n\t\tthis._rotationMatrix = new Matrix4(); //matrix for rotation operation\n\t\tthis._scaleMatrix = new Matrix4(); //matrix for scaling operation\n\n\t\tthis._rotationAxis = new Vector3(); //axis for rotate operation\n\n\n\t\t//camera state\n\t\tthis._cameraMatrixState = new Matrix4();\n\t\tthis._cameraProjectionState = new Matrix4();\n\n\t\tthis._fovState = 1;\n\t\tthis._upState = new Vector3();\n\t\tthis._zoomState = 1;\n\t\tthis._nearPos = 0;\n\t\tthis._farPos = 0;\n\n\t\tthis._gizmoMatrixState = new Matrix4();\n\n\t\t//initial values\n\t\tthis._up0 = new Vector3();\n\t\tthis._zoom0 = 1;\n\t\tthis._fov0 = 0;\n\t\tthis._initialNear = 0;\n\t\tthis._nearPos0 = 0;\n\t\tthis._initialFar = 0;\n\t\tthis._farPos0 = 0;\n\t\tthis._cameraMatrixState0 = new Matrix4();\n\t\tthis._gizmoMatrixState0 = new Matrix4();\n\t\tthis._target0 = new Vector3();\n\n\t\t//pointers array\n\t\tthis._button = - 1;\n\t\tthis._touchStart = [];\n\t\tthis._touchCurrent = [];\n\t\tthis._input = INPUT.NONE;\n\n\t\t//two fingers touch interaction\n\t\tthis._switchSensibility = 32;\t//minimum movement to be performed to fire single pan start after the second finger has been released\n\t\tthis._startFingerDistance = 0; //distance between two fingers\n\t\tthis._currentFingerDistance = 0;\n\t\tthis._startFingerRotation = 0; //amount of rotation performed with two fingers\n\t\tthis._currentFingerRotation = 0;\n\n\t\t//double tap\n\t\tthis._devPxRatio = 0;\n\t\tthis._downValid = true;\n\t\tthis._nclicks = 0;\n\t\tthis._downEvents = [];\n\t\tthis._downStart = 0;\t//pointerDown time\n\t\tthis._clickStart = 0;\t//first click time\n\t\tthis._maxDownTime = 250;\n\t\tthis._maxInterval = 300;\n\t\tthis._posThreshold = 24;\n\t\tthis._movementThreshold = 24;\n\n\t\t//cursor positions\n\t\tthis._currentCursorPosition = new Vector3();\n\t\tthis._startCursorPosition = new Vector3();\n\n\t\t//grid\n\t\tthis._grid = null; //grid to be visualized during pan operation\n\t\tthis._gridPosition = new Vector3();\n\n\t\t//gizmos\n\t\tthis._gizmos = new Group();\n\t\tthis._curvePts = 128;\n\n\n\t\t//animations\n\t\tthis._timeStart = - 1; //initial time\n\t\tthis._animationId = - 1;\n\n\t\t/**\n\t\t * Duration of focus animations in ms.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 500\n\t\t */\n\t\tthis.focusAnimationTime = 500;\n\n\t\t//rotate animation\n\t\tthis._timePrev = 0; //time at which previous rotate operation has been detected\n\t\tthis._timeCurrent = 0; //time at which current rotate operation has been detected\n\t\tthis._anglePrev = 0; //angle of previous rotation\n\t\tthis._angleCurrent = 0; //angle of current rotation\n\t\tthis._cursorPosPrev = new Vector3();\t//cursor position when previous rotate operation has been detected\n\t\tthis._cursorPosCurr = new Vector3();//cursor position when current rotate operation has been detected\n\t\tthis._wPrev = 0; //angular velocity of the previous rotate operation\n\t\tthis._wCurr = 0; //angular velocity of the current rotate operation\n\n\t\t//parameters\n\n\t\t/**\n\t\t * If set to `true`, the camera's near and far values will be adjusted every time zoom is\n\t\t * performed trying to maintain the same visible portion given by initial near and far\n\t\t * values. Only works with perspective cameras.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.adjustNearFar = false;\n\n\t\t/**\n\t\t * The scaling factor used when performing zoom operation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1.1\n\t\t */\n\t\tthis.scaleFactor = 1.1;\n\n\t\t/**\n\t\t * The damping inertia used if 'enableAnimations` is set to `true`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 25\n\t\t */\n\t\tthis.dampingFactor = 25;\n\n\t\t/**\n\t\t * Maximum angular velocity allowed on rotation animation start.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 20\n\t\t */\n\t\tthis.wMax = 20;\n\n\t\t/**\n\t\t * Set to `true` to enable animations for rotation (damping) and focus operation.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableAnimations = true;\n\n\t\t/**\n\t\t * If set to `true`, a grid will appear when panning operation is being performed\n\t\t * (desktop interaction only).\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.enableGrid = false;\n\n\t\t/**\n\t\t * Set to `true` to make zoom become cursor centered.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.cursorZoom = false;\n\n\t\t/**\n\t\t * The minimum FOV in degrees.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 5\n\t\t */\n\t\tthis.minFov = 5;\n\n\t\t/**\n\t\t * The maximum FOV in degrees.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 90\n\t\t */\n\t\tthis.maxFov = 90;\n\n\t\t/**\n\t\t * Speed of rotation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1;\n\n\t\t/**\n\t\t * Enable or disable camera panning.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enablePan = true;\n\n\t\t/**\n\t\t * Enable or disable camera rotation.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableRotate = true;\n\n\t\t/**\n\t\t * Enable or disable camera zoom.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableZoom = true;\n\n\t\t/**\n\t\t * Enable or disable gizmos.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableGizmos = true;\n\n\t\t/**\n\t\t * Enable or disable camera focusing on double-tap (or click) operations.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableFocus = true;\n\n\t\t/**\n\t\t * How far you can dolly in. For perspective cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minDistance = 0;\n\n\t\t/**\n\t\t * How far you can dolly out. For perspective cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxDistance = Infinity;\n\n\t\t/**\n\t\t * How far you can zoom in. For orthographic cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minZoom = 0;\n\n\t\t/**\n\t\t * How far you can zoom out. For orthographic cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxZoom = Infinity;\n\n\t\t//trackball parameters\n\t\tthis._tbRadius = 1;\n\n\t\t//FSA\n\t\tthis._state = STATE.IDLE;\n\n\t\tthis.setCamera( camera );\n\n\t\tif ( this.scene != null ) {\n\n\t\t\tthis.scene.add( this._gizmos );\n\n\t\t}\n\n\t\tthis.initializeMouseActions();\n\n\t\t// event listeners\n\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onWheel = onWheel.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerCancel = onPointerCancel.bind( this );\n\t\tthis._onWindowResize = onWindowResize.bind( this );\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t}\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.style.touchAction = 'none';\n\t\tthis._devPxRatio = window.devicePixelRatio;\n\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\t\tthis.domElement.addEventListener( 'wheel', this._onWheel, { passive: false } );\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerCancel );\n\n\t\twindow.addEventListener( 'resize', this._onWindowResize );\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.removeEventListener( 'wheel', this._onWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\twindow.removeEventListener( 'resize', this._onWindowResize );\n\n\t}\n\n\tonSinglePanStart( event, operation ) {\n\n\t\tif ( this.enabled ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.setCenter( event.clientX, event.clientY );\n\n\t\t\tswitch ( operation ) {\n\n\t\t\t\tcase 'PAN':\n\n\t\t\t\t\tif ( ! this.enablePan ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.PAN, true );\n\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ) );\n\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\tthis.drawGrid();\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ROTATE':\n\n\t\t\t\t\tif ( ! this.enableRotate ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.ROTATE, true );\n\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbSurface( this.object, _center.x, _center.y, this.domElement, this._tbRadius ) );\n\t\t\t\t\tthis.activateGizmos( true );\n\t\t\t\t\tif ( this.enableAnimations ) {\n\n\t\t\t\t\t\tthis._timePrev = this._timeCurrent = performance.now();\n\t\t\t\t\t\tthis._angleCurrent = this._anglePrev = 0;\n\t\t\t\t\t\tthis._cursorPosPrev.copy( this._startCursorPosition );\n\t\t\t\t\t\tthis._cursorPosCurr.copy( this._cursorPosPrev );\n\t\t\t\t\t\tthis._wCurr = 0;\n\t\t\t\t\t\tthis._wPrev = this._wCurr;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'FOV':\n\n\t\t\t\t\tif ( ! this.object.isPerspectiveCamera || ! this.enableZoom ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.FOV, true );\n\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ZOOM':\n\n\t\t\t\t\tif ( ! this.enableZoom ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.SCALE, true );\n\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tonSinglePanMove( event, opState ) {\n\n\t\tif ( this.enabled ) {\n\n\t\t\tconst restart = opState != this._state;\n\t\t\tthis.setCenter( event.clientX, event.clientY );\n\n\t\t\tswitch ( opState ) {\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to pan operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ) );\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.drawGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with pan operation\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ) );\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.pan( this._startCursorPosition, this._currentCursorPosition ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to rotate operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbSurface( this.object, _center.x, _center.y, this.domElement, this._tbRadius ) );\n\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.disposeGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( true );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with rotate operation\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this.unprojectOnTbSurface( this.object, _center.x, _center.y, this.domElement, this._tbRadius ) );\n\n\t\t\t\t\t\t\tconst distance = this._startCursorPosition.distanceTo( this._currentCursorPosition );\n\t\t\t\t\t\t\tconst angle = this._startCursorPosition.angleTo( this._currentCursorPosition );\n\t\t\t\t\t\t\tconst amount = Math.max( distance / this._tbRadius, angle ) * this.rotateSpeed; //effective rotation angle\n\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.rotate( this.calculateRotationAxis( this._startCursorPosition, this._currentCursorPosition ), amount ) );\n\n\t\t\t\t\t\t\tif ( this.enableAnimations ) {\n\n\t\t\t\t\t\t\t\tthis._timePrev = this._timeCurrent;\n\t\t\t\t\t\t\t\tthis._timeCurrent = performance.now();\n\t\t\t\t\t\t\t\tthis._anglePrev = this._angleCurrent;\n\t\t\t\t\t\t\t\tthis._angleCurrent = amount;\n\t\t\t\t\t\t\t\tthis._cursorPosPrev.copy( this._cursorPosCurr );\n\t\t\t\t\t\t\t\tthis._cursorPosCurr.copy( this._currentCursorPosition );\n\t\t\t\t\t\t\t\tthis._wPrev = this._wCurr;\n\t\t\t\t\t\t\t\tthis._wCurr = this.calculateAngularSpeed( this._anglePrev, this._angleCurrent, this._timePrev, this._timeCurrent );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.SCALE:\n\n\t\t\t\t\tif ( this.enableZoom ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to zoom operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.disposeGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with zoom operation\n\t\t\t\t\t\t\tconst screenNotches = 8;\t//how many wheel notches corresponds to a full screen pan\n\t\t\t\t\t\t\tthis._currentCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\n\t\t\t\t\t\t\tconst movement = this._currentCursorPosition.y - this._startCursorPosition.y;\n\n\t\t\t\t\t\t\tlet size = 1;\n\n\t\t\t\t\t\t\tif ( movement < 0 ) {\n\n\t\t\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, - movement * screenNotches ) );\n\n\t\t\t\t\t\t\t} else if ( movement > 0 ) {\n\n\t\t\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, movement * screenNotches );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis._v3_1.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._v3_1 ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.FOV:\n\n\t\t\t\t\tif ( this.enableZoom && this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to fov operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.disposeGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with fov operation\n\t\t\t\t\t\t\tconst screenNotches = 8;\t//how many wheel notches corresponds to a full screen pan\n\t\t\t\t\t\t\tthis._currentCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\n\t\t\t\t\t\t\tconst movement = this._currentCursorPosition.y - this._startCursorPosition.y;\n\n\t\t\t\t\t\t\tlet size = 1;\n\n\t\t\t\t\t\t\tif ( movement < 0 ) {\n\n\t\t\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, - movement * screenNotches ) );\n\n\t\t\t\t\t\t\t} else if ( movement > 0 ) {\n\n\t\t\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, movement * screenNotches );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\t\t\t\t\tconst x = this._v3_1.distanceTo( this._gizmos.position );\n\t\t\t\t\t\t\tlet xNew = x / size; //distance between camera and gizmos if scale(size, scalepoint) would be performed\n\n\t\t\t\t\t\t\t//check min and max distance\n\t\t\t\t\t\t\txNew = MathUtils.clamp( xNew, this.minDistance, this.maxDistance );\n\n\t\t\t\t\t\t\tconst y = x * Math.tan( MathUtils.DEG2RAD * this._fovState * 0.5 );\n\n\t\t\t\t\t\t\t//calculate new fov\n\t\t\t\t\t\t\tlet newFov = MathUtils.RAD2DEG * ( Math.atan( y / xNew ) * 2 );\n\n\t\t\t\t\t\t\t//check min and max fov\n\t\t\t\t\t\t\tnewFov = MathUtils.clamp( newFov, this.minFov, this.maxFov );\n\n\t\t\t\t\t\t\tconst newDistance = y / Math.tan( MathUtils.DEG2RAD * ( newFov / 2 ) );\n\t\t\t\t\t\t\tsize = x / newDistance;\n\t\t\t\t\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t\t\t\t\tthis.setFov( newFov );\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._v3_2, false ) );\n\n\t\t\t\t\t\t\t//adjusting distance\n\t\t\t\t\t\t\t_offset.copy( this._gizmos.position ).sub( this.object.position ).normalize().multiplyScalar( newDistance / x );\n\t\t\t\t\t\t\tthis._m4_1.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonSinglePanEnd() {\n\n\t\tif ( this._state == STATE.ROTATE ) {\n\n\n\t\t\tif ( ! this.enableRotate ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( this.enableAnimations ) {\n\n\t\t\t\t//perform rotation animation\n\t\t\t\tconst deltaTime = ( performance.now() - this._timeCurrent );\n\t\t\t\tif ( deltaTime < 120 ) {\n\n\t\t\t\t\tconst w = Math.abs( ( this._wPrev + this._wCurr ) / 2 );\n\n\t\t\t\t\tconst self = this;\n\t\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\t\tself.updateTbState( STATE.ANIMATION_ROTATE, true );\n\t\t\t\t\t\tconst rotationAxis = self.calculateRotationAxis( self._cursorPosPrev, self._cursorPosCurr );\n\n\t\t\t\t\t\tself.onRotationAnim( t, rotationAxis, Math.min( w, self.wMax ) );\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//cursor has been standing still for over 120 ms since last movement\n\t\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.activateGizmos( false );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t} else if ( this._state == STATE.PAN || this._state == STATE.IDLE ) {\n\n\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\tthis.disposeGrid();\n\n\t\t\t}\n\n\t\t\tthis.activateGizmos( false );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\n\t\t}\n\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonDoubleTap( event ) {\n\n\t\tif ( this.enabled && this.enablePan && this.enableFocus && this.scene != null ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.setCenter( event.clientX, event.clientY );\n\t\t\tconst hitP = this.unprojectOnObj( this.getCursorNDC( _center.x, _center.y, this.domElement ), this.object );\n\n\t\t\tif ( hitP != null && this.enableAnimations ) {\n\n\t\t\t\tconst self = this;\n\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\twindow.cancelAnimationFrame( this._animationId );\n\n\t\t\t\t}\n\n\t\t\t\tthis._timeStart = - 1;\n\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\tself.updateTbState( STATE.ANIMATION_FOCUS, true );\n\t\t\t\t\tself.onFocusAnim( t, hitP, self._cameraMatrixState, self._gizmoMatrixState );\n\n\t\t\t\t} );\n\n\t\t\t} else if ( hitP != null && ! this.enableAnimations ) {\n\n\t\t\t\tthis.updateTbState( STATE.FOCUS, true );\n\t\t\t\tthis.focus( hitP, this.scaleFactor );\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonDoublePanStart() {\n\n\t\tif ( this.enabled && this.enablePan ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.updateTbState( STATE.PAN, true );\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement, true ) );\n\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t\tthis.activateGizmos( false );\n\n\t\t}\n\n\t}\n\n\tonDoublePanMove() {\n\n\t\tif ( this.enabled && this.enablePan ) {\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\n\t\t\tif ( this._state != STATE.PAN ) {\n\n\t\t\t\tthis.updateTbState( STATE.PAN, true );\n\t\t\t\tthis._startCursorPosition.copy( this._currentCursorPosition );\n\n\t\t\t}\n\n\t\t\tthis._currentCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement, true ) );\n\t\t\tthis.applyTransformMatrix( this.pan( this._startCursorPosition, this._currentCursorPosition, true ) );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonDoublePanEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonRotateStart() {\n\n\t\tif ( this.enabled && this.enableRotate ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.updateTbState( STATE.ZROTATE, true );\n\n\t\t\t//this._startFingerRotation = event.rotation;\n\n\t\t\tthis._startFingerRotation = this.getAngle( this._touchCurrent[ 1 ], this._touchCurrent[ 0 ] ) + this.getAngle( this._touchStart[ 1 ], this._touchStart[ 0 ] );\n\t\t\tthis._currentFingerRotation = this._startFingerRotation;\n\n\t\t\tthis.object.getWorldDirection( this._rotationAxis ); //rotation axis\n\n\t\t\tif ( ! this.enablePan && ! this.enableZoom ) {\n\n\t\t\t\tthis.activateGizmos( true );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tonRotateMove() {\n\n\t\tif ( this.enabled && this.enableRotate ) {\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\t\t\tlet rotationPoint;\n\n\t\t\tif ( this._state != STATE.ZROTATE ) {\n\n\t\t\t\tthis.updateTbState( STATE.ZROTATE, true );\n\t\t\t\tthis._startFingerRotation = this._currentFingerRotation;\n\n\t\t\t}\n\n\t\t\t//this._currentFingerRotation = event.rotation;\n\t\t\tthis._currentFingerRotation = this.getAngle( this._touchCurrent[ 1 ], this._touchCurrent[ 0 ] ) + this.getAngle( this._touchStart[ 1 ], this._touchStart[ 0 ] );\n\n\t\t\tif ( ! this.enablePan ) {\n\n\t\t\t\trotationPoint = new Vector3().setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t} else {\n\n\t\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\t\t\t\trotationPoint = this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ).applyQuaternion( this.object.quaternion ).multiplyScalar( 1 / this.object.zoom ).add( this._v3_2 );\n\n\t\t\t}\n\n\t\t\tconst amount = MathUtils.DEG2RAD * ( this._startFingerRotation - this._currentFingerRotation );\n\n\t\t\tthis.applyTransformMatrix( this.zRotate( rotationPoint, amount ) );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonRotateEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.activateGizmos( false );\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonPinchStart() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\tthis._startFingerDistance = this.calculatePointersDistance( this._touchCurrent[ 0 ], this._touchCurrent[ 1 ] );\n\t\t\tthis._currentFingerDistance = this._startFingerDistance;\n\n\t\t\tthis.activateGizmos( false );\n\n\t\t}\n\n\t}\n\n\tonPinchMove() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\t\t\tconst minDistance = 12; //minimum distance between fingers (in css pixels)\n\n\t\t\tif ( this._state != STATE.SCALE ) {\n\n\t\t\t\tthis._startFingerDistance = this._currentFingerDistance;\n\t\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\t}\n\n\t\t\tthis._currentFingerDistance = Math.max( this.calculatePointersDistance( this._touchCurrent[ 0 ], this._touchCurrent[ 1 ] ), minDistance * this._devPxRatio );\n\t\t\tconst amount = this._currentFingerDistance / this._startFingerDistance;\n\n\t\t\tlet scalePoint;\n\n\t\t\tif ( ! this.enablePan ) {\n\n\t\t\t\tscalePoint = this._gizmos.position;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement )\n\t\t\t\t\t\t.applyQuaternion( this.object.quaternion )\n\t\t\t\t\t\t.multiplyScalar( 1 / this.object.zoom )\n\t\t\t\t\t\t.add( this._gizmos.position );\n\n\t\t\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement )\n\t\t\t\t\t\t.applyQuaternion( this.object.quaternion )\n\t\t\t\t\t\t.add( this._gizmos.position );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.applyTransformMatrix( this.scale( amount, scalePoint ) );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonPinchEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonTriplePanStart() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\t//const center = event.center;\n\t\t\tlet clientX = 0;\n\t\t\tlet clientY = 0;\n\t\t\tconst nFingers = this._touchCurrent.length;\n\n\t\t\tfor ( let i = 0; i < nFingers; i ++ ) {\n\n\t\t\t\tclientX += this._touchCurrent[ i ].clientX;\n\t\t\t\tclientY += this._touchCurrent[ i ].clientY;\n\n\t\t\t}\n\n\t\t\tthis.setCenter( clientX / nFingers, clientY / nFingers );\n\n\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t}\n\n\t}\n\n\tonTriplePanMove() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\t//\t  fov / 2\n\t\t\t//\t\t|\\\n\t\t\t//\t\t| \\\n\t\t\t//\t\t|  \\\n\t\t\t//\tx\t|\t\\\n\t\t\t//\t\t| \t \\\n\t\t\t//\t\t| \t  \\\n\t\t\t//\t\t| _ _ _\\\n\t\t\t//\t\t\ty\n\n\t\t\t//const center = event.center;\n\t\t\tlet clientX = 0;\n\t\t\tlet clientY = 0;\n\t\t\tconst nFingers = this._touchCurrent.length;\n\n\t\t\tfor ( let i = 0; i < nFingers; i ++ ) {\n\n\t\t\t\tclientX += this._touchCurrent[ i ].clientX;\n\t\t\t\tclientY += this._touchCurrent[ i ].clientY;\n\n\t\t\t}\n\n\t\t\tthis.setCenter( clientX / nFingers, clientY / nFingers );\n\n\t\t\tconst screenNotches = 8;\t//how many wheel notches corresponds to a full screen pan\n\t\t\tthis._currentCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\n\t\t\tconst movement = this._currentCursorPosition.y - this._startCursorPosition.y;\n\n\t\t\tlet size = 1;\n\n\t\t\tif ( movement < 0 ) {\n\n\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, - movement * screenNotches ) );\n\n\t\t\t} else if ( movement > 0 ) {\n\n\t\t\t\tsize = Math.pow( this.scaleFactor, movement * screenNotches );\n\n\t\t\t}\n\n\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\tconst x = this._v3_1.distanceTo( this._gizmos.position );\n\t\t\tlet xNew = x / size; //distance between camera and gizmos if scale(size, scalepoint) would be performed\n\n\t\t\t//check min and max distance\n\t\t\txNew = MathUtils.clamp( xNew, this.minDistance, this.maxDistance );\n\n\t\t\tconst y = x * Math.tan( MathUtils.DEG2RAD * this._fovState * 0.5 );\n\n\t\t\t//calculate new fov\n\t\t\tlet newFov = MathUtils.RAD2DEG * ( Math.atan( y / xNew ) * 2 );\n\n\t\t\t//check min and max fov\n\t\t\tnewFov = MathUtils.clamp( newFov, this.minFov, this.maxFov );\n\n\t\t\tconst newDistance = y / Math.tan( MathUtils.DEG2RAD * ( newFov / 2 ) );\n\t\t\tsize = x / newDistance;\n\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\tthis.setFov( newFov );\n\t\t\tthis.applyTransformMatrix( this.scale( size, this._v3_2, false ) );\n\n\t\t\t//adjusting distance\n\t\t\t_offset.copy( this._gizmos.position ).sub( this.object.position ).normalize().multiplyScalar( newDistance / x );\n\t\t\tthis._m4_1.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonTriplePanEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.dispatchEvent( _endEvent );\n\t\t//this.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Set _center's x/y coordinates.\n\t *\n\t * @private\n\t * @param {number} clientX - The x coordinate.\n\t * @param {number} clientY - The y coordinate.\n\t */\n\tsetCenter( clientX, clientY ) {\n\n\t\t_center.x = clientX;\n\t\t_center.y = clientY;\n\n\t}\n\n\t/**\n\t * Set default mouse actions.\n\t *\n\t * @private\n\t */\n\tinitializeMouseActions() {\n\n\t\tthis.setMouseAction( 'PAN', 0, 'CTRL' );\n\t\tthis.setMouseAction( 'PAN', 2 );\n\n\t\tthis.setMouseAction( 'ROTATE', 0 );\n\n\t\tthis.setMouseAction( 'ZOOM', 'WHEEL' );\n\t\tthis.setMouseAction( 'ZOOM', 1 );\n\n\t\tthis.setMouseAction( 'FOV', 'WHEEL', 'SHIFT' );\n\t\tthis.setMouseAction( 'FOV', 1, 'SHIFT' );\n\n\n\t}\n\n\t/**\n\t * Compare two mouse actions.\n\t *\n\t * @private\n\t * @param {Object} action1 - The first mouse action.\n\t * @param {Object} action2 - The second mouse action.\n\t * @returns {boolean} `true` if action1 and action 2 are the same mouse action, `false` otherwise.\n\t */\n\tcompareMouseAction( action1, action2 ) {\n\n\t\tif ( action1.operation == action2.operation ) {\n\n\t\t\tif ( action1.mouse == action2.mouse && action1.key == action2.key ) {\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Set a new mouse action by specifying the operation to be performed and a mouse/key combination. In case of conflict, replaces the existing one.\n\t *\n\t * @param {'PAN'|'ROTATE'|'ZOOM'|'FOV'} operation - The operation to be performed ('PAN', 'ROTATE', 'ZOOM', 'FOV').\n\t * @param {0|1|2|'WHEEL'} mouse - A mouse button (0, 1, 2) or 'WHEEL' for wheel notches.\n\t * @param {?('CTRL'|'SHIFT')} [key=null] - The keyboard modifier ('CTRL', 'SHIFT') or null if key is not needed.\n\t * @returns {boolean} `true` if the mouse action has been successfully added, `false` otherwise.\n\t */\n\tsetMouseAction( operation, mouse, key = null ) {\n\n\t\tconst operationInput = [ 'PAN', 'ROTATE', 'ZOOM', 'FOV' ];\n\t\tconst mouseInput = [ 0, 1, 2, 'WHEEL' ];\n\t\tconst keyInput = [ 'CTRL', 'SHIFT', null ];\n\t\tlet state;\n\n\t\tif ( ! operationInput.includes( operation ) || ! mouseInput.includes( mouse ) || ! keyInput.includes( key ) ) {\n\n\t\t\t//invalid parameters\n\t\t\treturn false;\n\n\t\t}\n\n\t\tif ( mouse == 'WHEEL' ) {\n\n\t\t\tif ( operation != 'ZOOM' && operation != 'FOV' ) {\n\n\t\t\t\t//cannot associate 2D operation to 1D input\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tswitch ( operation ) {\n\n\t\t\tcase 'PAN':\n\n\t\t\t\tstate = STATE.PAN;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ROTATE':\n\n\t\t\t\tstate = STATE.ROTATE;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZOOM':\n\n\t\t\t\tstate = STATE.SCALE;\n\t\t\t\tbreak;\n\n\t\t\tcase 'FOV':\n\n\t\t\t\tstate = STATE.FOV;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tconst action = {\n\n\t\t\toperation: operation,\n\t\t\tmouse: mouse,\n\t\t\tkey: key,\n\t\t\tstate: state\n\n\t\t};\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\tif ( this.mouseActions[ i ].mouse == action.mouse && this.mouseActions[ i ].key == action.key ) {\n\n\t\t\t\tthis.mouseActions.splice( i, 1, action );\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.mouseActions.push( action );\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Remove a mouse action by specifying its mouse/key combination.\n\t *\n\t * @param {0|1|2|'WHEEL'} mouse - A mouse button (0, 1, 2) or 'WHEEL' for wheel notches.\n\t * @param {?('CTRL'|'SHIFT')} key - The keyboard modifier ('CTRL', 'SHIFT') or null if key is not needed.\n\t * @returns {boolean} `true` if the operation has been successfully removed, `false` otherwise.\n\t */\n\tunsetMouseAction( mouse, key = null ) {\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\tif ( this.mouseActions[ i ].mouse == mouse && this.mouseActions[ i ].key == key ) {\n\n\t\t\t\tthis.mouseActions.splice( i, 1 );\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * Return the operation associated to a mouse/keyboard combination.\n\t *\n\t * @private\n\t * @param {0|1|2|'WHEEL'} mouse - Mouse button index (0, 1, 2) or 'WHEEL' for wheel notches.\n\t * @param {?('CTRL'|'SHIFT')} key - Keyboard modifier.\n\t * @returns {?('PAN'|'ROTATE'|'ZOOM'|'FOV')} The operation if it has been found, `null` otherwise.\n\t */\n\tgetOpFromAction( mouse, key ) {\n\n\t\tlet action;\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\taction = this.mouseActions[ i ];\n\t\t\tif ( action.mouse == mouse && action.key == key ) {\n\n\t\t\t\treturn action.operation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( key != null ) {\n\n\t\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\t\taction = this.mouseActions[ i ];\n\t\t\t\tif ( action.mouse == mouse && action.key == null ) {\n\n\t\t\t\t\treturn action.operation;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Get the operation associated to mouse and key combination and returns the corresponding FSA state.\n\t *\n\t * @private\n\t * @param {0|1|2} mouse - Mouse button index (0, 1, 2)\n\t * @param {?('CTRL'|'SHIFT')} key - Keyboard modifier\n\t * @returns {?STATE} The FSA state obtained from the operation associated to mouse/keyboard combination.\n\t */\n\tgetOpStateFromAction( mouse, key ) {\n\n\t\tlet action;\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\taction = this.mouseActions[ i ];\n\t\t\tif ( action.mouse == mouse && action.key == key ) {\n\n\t\t\t\treturn action.state;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( key != null ) {\n\n\t\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\t\taction = this.mouseActions[ i ];\n\t\t\t\tif ( action.mouse == mouse && action.key == null ) {\n\n\t\t\t\t\treturn action.state;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Calculate the angle between two pointers.\n\t *\n\t * @private\n\t * @param {PointerEvent} p1 - The first pointer event.\n\t * @param {PointerEvent} p2 - The second pointer event.\n\t * @returns {number} The angle between two pointers in degrees.\n\t */\n\tgetAngle( p1, p2 ) {\n\n\t\treturn Math.atan2( p2.clientY - p1.clientY, p2.clientX - p1.clientX ) * 180 / Math.PI;\n\n\t}\n\n\t/**\n\t * Updates a PointerEvent inside current pointerevents array.\n\t *\n\t * @private\n\t * @param {PointerEvent} event - The pointer event.\n\t */\n\tupdateTouchEvent( event ) {\n\n\t\tfor ( let i = 0; i < this._touchCurrent.length; i ++ ) {\n\n\t\t\tif ( this._touchCurrent[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\tthis._touchCurrent.splice( i, 1, event );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies a transformation matrix, to the camera and gizmos.\n\t *\n\t * @private\n\t * @param {Object} transformation - Object containing matrices to apply to camera and gizmos.\n\t */\n\tapplyTransformMatrix( transformation ) {\n\n\t\tif ( transformation.camera != null ) {\n\n\t\t\tthis._m4_1.copy( this._cameraMatrixState ).premultiply( transformation.camera );\n\t\t\tthis._m4_1.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\t\t\tthis.object.updateMatrix();\n\n\t\t\t//update camera up vector\n\t\t\tif ( this._state == STATE.ROTATE || this._state == STATE.ZROTATE || this._state == STATE.ANIMATION_ROTATE ) {\n\n\t\t\t\tthis.object.up.copy( this._upState ).applyQuaternion( this.object.quaternion );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( transformation.gizmos != null ) {\n\n\t\t\tthis._m4_1.copy( this._gizmoMatrixState ).premultiply( transformation.gizmos );\n\t\t\tthis._m4_1.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\t\t\tthis._gizmos.updateMatrix();\n\n\t\t}\n\n\t\tif ( this._state == STATE.SCALE || this._state == STATE.FOCUS || this._state == STATE.ANIMATION_FOCUS ) {\n\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\t\t\tif ( this.adjustNearFar ) {\n\n\t\t\t\tconst cameraDistance = this.object.position.distanceTo( this._gizmos.position );\n\n\t\t\t\tconst bb = new Box3();\n\t\t\t\tbb.setFromObject( this._gizmos );\n\t\t\t\tconst sphere = new Sphere();\n\t\t\t\tbb.getBoundingSphere( sphere );\n\n\t\t\t\tconst adjustedNearPosition = Math.max( this._nearPos0, sphere.radius + sphere.center.length() );\n\t\t\t\tconst regularNearPosition = cameraDistance - this._initialNear;\n\n\t\t\t\tconst minNearPos = Math.min( adjustedNearPosition, regularNearPosition );\n\t\t\t\tthis.object.near = cameraDistance - minNearPos;\n\n\n\t\t\t\tconst adjustedFarPosition = Math.min( this._farPos0, - sphere.radius + sphere.center.length() );\n\t\t\t\tconst regularFarPosition = cameraDistance - this._initialFar;\n\n\t\t\t\tconst minFarPos = Math.min( adjustedFarPosition, regularFarPosition );\n\t\t\t\tthis.object.far = cameraDistance - minFarPos;\n\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t} else {\n\n\t\t\t\tlet update = false;\n\n\t\t\t\tif ( this.object.near != this._initialNear ) {\n\n\t\t\t\t\tthis.object.near = this._initialNear;\n\t\t\t\t\tupdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.object.far != this._initialFar ) {\n\n\t\t\t\t\tthis.object.far = this._initialFar;\n\t\t\t\t\tupdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( update ) {\n\n\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Calculates the angular speed.\n\t *\n\t * @private\n\t * @param {number} p0 - Position at t0.\n\t * @param {number} p1 - Position at t1.\n\t * @param {number} t0 - Initial time in milliseconds.\n\t * @param {number} t1 - Ending time in milliseconds.\n\t * @returns {number} The angular speed.\n\t */\n\tcalculateAngularSpeed( p0, p1, t0, t1 ) {\n\n\t\tconst s = p1 - p0;\n\t\tconst t = ( t1 - t0 ) / 1000;\n\t\tif ( t == 0 ) {\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t\treturn s / t;\n\n\t}\n\n\t/**\n\t * Calculates the distance between two pointers.\n\t *\n\t * @private\n\t * @param {PointerEvent} p0 - The first pointer.\n\t * @param {PointerEvent} p1 - The second pointer.\n\t * @returns {number} The distance between the two pointers.\n\t */\n\tcalculatePointersDistance( p0, p1 ) {\n\n\t\treturn Math.sqrt( Math.pow( p1.clientX - p0.clientX, 2 ) + Math.pow( p1.clientY - p0.clientY, 2 ) );\n\n\t}\n\n\t/**\n\t * Calculates the rotation axis as the vector perpendicular between two vectors.\n\t *\n\t * @private\n\t * @param {Vector3} vec1 - The first vector.\n\t * @param {Vector3} vec2 - The second vector.\n\t * @returns {Vector3} The normalized rotation axis.\n\t */\n\tcalculateRotationAxis( vec1, vec2 ) {\n\n\t\tthis._rotationMatrix.extractRotation( this._cameraMatrixState );\n\t\tthis._quat.setFromRotationMatrix( this._rotationMatrix );\n\n\t\tthis._rotationAxis.crossVectors( vec1, vec2 ).applyQuaternion( this._quat );\n\t\treturn this._rotationAxis.normalize().clone();\n\n\t}\n\n\t/**\n\t * Calculates the trackball radius so that gizmo's diameter will be 2/3 of the minimum side of the camera frustum.\n\t *\n\t * @private\n\t * @param {Camera} camera - The camera.\n\t * @returns {number} The trackball radius.\n\t */\n\tcalculateTbRadius( camera ) {\n\n\t\tconst distance = camera.position.distanceTo( this._gizmos.position );\n\n\t\tif ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\tconst halfFovV = MathUtils.DEG2RAD * camera.fov * 0.5; //vertical fov/2 in radians\n\t\t\tconst halfFovH = Math.atan( ( camera.aspect ) * Math.tan( halfFovV ) ); //horizontal fov/2 in radians\n\t\t\treturn Math.tan( Math.min( halfFovV, halfFovH ) ) * distance * this.radiusFactor;\n\n\t\t} else if ( camera.type == 'OrthographicCamera' ) {\n\n\t\t\treturn Math.min( camera.top, camera.right ) * this.radiusFactor;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Focus operation consist of positioning the point of interest in front of the camera and a slightly zoom in.\n\t *\n\t * @private\n\t * @param {Vector3} point - The point of interest.\n\t * @param {number} size - Scale factor.\n\t * @param {number} [amount=1] - Amount of operation to be completed (used for focus animations, default is complete full operation).\n\t */\n\tfocus( point, size, amount = 1 ) {\n\n\t\t//move center of camera (along with gizmos) towards point of interest\n\t\t_offset.copy( point ).sub( this._gizmos.position ).multiplyScalar( amount );\n\t\tthis._translationMatrix.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\t\t_gizmoMatrixStateTemp.copy( this._gizmoMatrixState );\n\t\tthis._gizmoMatrixState.premultiply( this._translationMatrix );\n\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t_cameraMatrixStateTemp.copy( this._cameraMatrixState );\n\t\tthis._cameraMatrixState.premultiply( this._translationMatrix );\n\t\tthis._cameraMatrixState.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\n\t\t//apply zoom\n\t\tif ( this.enableZoom ) {\n\n\t\t\tthis.applyTransformMatrix( this.scale( size, this._gizmos.position ) );\n\n\t\t}\n\n\t\tthis._gizmoMatrixState.copy( _gizmoMatrixStateTemp );\n\t\tthis._cameraMatrixState.copy( _cameraMatrixStateTemp );\n\n\t}\n\n\t/**\n\t * Creates a grid if necessary and adds it to the scene.\n\t *\n\t * @private\n\t */\n\tdrawGrid() {\n\n\t\tif ( this.scene != null ) {\n\n\t\t\tconst color = 0x888888;\n\t\t\tconst multiplier = 3;\n\t\t\tlet size, divisions, maxLength, tick;\n\n\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tconst width = this.object.right - this.object.left;\n\t\t\t\tconst height = this.object.bottom - this.object.top;\n\n\t\t\t\tmaxLength = Math.max( width, height );\n\t\t\t\ttick = maxLength / 20;\n\n\t\t\t\tsize = maxLength / this.object.zoom * multiplier;\n\t\t\t\tdivisions = size / tick * this.object.zoom;\n\n\t\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\tconst distance = this.object.position.distanceTo( this._gizmos.position );\n\t\t\t\tconst halfFovV = MathUtils.DEG2RAD * this.object.fov * 0.5;\n\t\t\t\tconst halfFovH = Math.atan( ( this.object.aspect ) * Math.tan( halfFovV ) );\n\n\t\t\t\tmaxLength = Math.tan( Math.max( halfFovV, halfFovH ) ) * distance * 2;\n\t\t\t\ttick = maxLength / 20;\n\n\t\t\t\tsize = maxLength * multiplier;\n\t\t\t\tdivisions = size / tick;\n\n\t\t\t}\n\n\t\t\tif ( this._grid == null ) {\n\n\t\t\t\tthis._grid = new GridHelper( size, divisions, color, color );\n\t\t\t\tthis._grid.position.copy( this._gizmos.position );\n\t\t\t\tthis._gridPosition.copy( this._grid.position );\n\t\t\t\tthis._grid.quaternion.copy( this.object.quaternion );\n\t\t\t\tthis._grid.rotateX( Math.PI * 0.5 );\n\n\t\t\t\tthis.scene.add( this._grid );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tdispose() {\n\n\t\tif ( this._animationId != - 1 ) {\n\n\t\t\twindow.cancelAnimationFrame( this._animationId );\n\n\t\t}\n\n\t\tthis.disconnect();\n\n\t\tif ( this.scene !== null ) this.scene.remove( this._gizmos );\n\t\tthis.disposeGrid();\n\n\t}\n\n\t/**\n\t * Removes the grid from the scene.\n\t */\n\tdisposeGrid() {\n\n\t\tif ( this._grid != null && this.scene != null ) {\n\n\t\t\tthis.scene.remove( this._grid );\n\t\t\tthis._grid = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Computes the easing out cubic function for ease out effect in animation.\n\t *\n\t * @private\n\t * @param {number} t - The absolute progress of the animation in the bound of `0` (beginning of the) and `1` (ending of animation).\n\t * @returns {number} Result of easing out cubic at time `t`.\n\t */\n\teaseOutCubic( t ) {\n\n\t\treturn 1 - Math.pow( 1 - t, 3 );\n\n\t}\n\n\t/**\n\t * Makes rotation gizmos more or less visible.\n\t *\n\t * @param {boolean} isActive - If set to `true`, gizmos are more visible.\n\t */\n\tactivateGizmos( isActive ) {\n\n\t\tconst gizmoX = this._gizmos.children[ 0 ];\n\t\tconst gizmoY = this._gizmos.children[ 1 ];\n\t\tconst gizmoZ = this._gizmos.children[ 2 ];\n\n\t\tif ( isActive ) {\n\n\t\t\tgizmoX.material.setValues( { opacity: 1 } );\n\t\t\tgizmoY.material.setValues( { opacity: 1 } );\n\t\t\tgizmoZ.material.setValues( { opacity: 1 } );\n\n\t\t} else {\n\n\t\t\tgizmoX.material.setValues( { opacity: 0.6 } );\n\t\t\tgizmoY.material.setValues( { opacity: 0.6 } );\n\t\t\tgizmoZ.material.setValues( { opacity: 0.6 } );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Calculates the cursor position in NDC.\n\t *\n\t * @private\n\t * @param {number} cursorX - Cursor horizontal coordinate within the canvas.\n\t * @param {number} cursorY - Cursor vertical coordinate within the canvas.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @returns {Vector2} Cursor normalized position inside the canvas.\n\t */\n\tgetCursorNDC( cursorX, cursorY, canvas ) {\n\n\t\tconst canvasRect = canvas.getBoundingClientRect();\n\t\tthis._v2_1.setX( ( ( cursorX - canvasRect.left ) / canvasRect.width ) * 2 - 1 );\n\t\tthis._v2_1.setY( ( ( canvasRect.bottom - cursorY ) / canvasRect.height ) * 2 - 1 );\n\t\treturn this._v2_1.clone();\n\n\t}\n\n\t/**\n\t * Calculates the cursor position inside the canvas x/y coordinates with the origin being in the center of the canvas.\n\t *\n\t * @private\n\t * @param {number} cursorX - Cursor horizontal coordinate within the canvas.\n\t * @param {number} cursorY - Cursor vertical coordinate within the canvas.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @returns {Vector2} Cursor position inside the canvas.\n\t */\n\tgetCursorPosition( cursorX, cursorY, canvas ) {\n\n\t\tthis._v2_1.copy( this.getCursorNDC( cursorX, cursorY, canvas ) );\n\t\tthis._v2_1.x *= ( this.object.right - this.object.left ) * 0.5;\n\t\tthis._v2_1.y *= ( this.object.top - this.object.bottom ) * 0.5;\n\t\treturn this._v2_1.clone();\n\n\t}\n\n\t/**\n\t * Sets the camera to be controlled.  Must be called in order to set a new camera to be controlled.\n\t *\n\t * @param {Camera} camera - The camera to be controlled.\n\t */\n\tsetCamera( camera ) {\n\n\t\tcamera.lookAt( this.target );\n\t\tcamera.updateMatrix();\n\n\t\t//setting state\n\t\tif ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\tthis._fov0 = camera.fov;\n\t\t\tthis._fovState = camera.fov;\n\n\t\t}\n\n\t\tthis._cameraMatrixState0.copy( camera.matrix );\n\t\tthis._cameraMatrixState.copy( this._cameraMatrixState0 );\n\t\tthis._cameraProjectionState.copy( camera.projectionMatrix );\n\t\tthis._zoom0 = camera.zoom;\n\t\tthis._zoomState = this._zoom0;\n\n\t\tthis._initialNear = camera.near;\n\t\tthis._nearPos0 = camera.position.distanceTo( this.target ) - camera.near;\n\t\tthis._nearPos = this._initialNear;\n\n\t\tthis._initialFar = camera.far;\n\t\tthis._farPos0 = camera.position.distanceTo( this.target ) - camera.far;\n\t\tthis._farPos = this._initialFar;\n\n\t\tthis._up0.copy( camera.up );\n\t\tthis._upState.copy( camera.up );\n\n\t\tthis.object = camera;\n\t\tthis.object.updateProjectionMatrix();\n\n\t\t//making gizmos\n\t\tthis._tbRadius = this.calculateTbRadius( camera );\n\t\tthis.makeGizmos( this.target, this._tbRadius );\n\n\t}\n\n\t/**\n\t * Sets gizmos visibility.\n\t *\n\t * @param {boolean} value - Value of gizmos visibility.\n\t */\n\tsetGizmosVisible( value ) {\n\n\t\tthis._gizmos.visible = value;\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Sets gizmos radius factor and redraws gizmos.\n\t *\n\t * @param {number} value - Value of radius factor.\n\t */\n\tsetTbRadius( value ) {\n\n\t\tthis.radiusFactor = value;\n\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\t\tconst curve = new EllipseCurve( 0, 0, this._tbRadius, this._tbRadius );\n\t\tconst points = curve.getPoints( this._curvePts );\n\t\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\n\t\tfor ( const gizmo in this._gizmos.children ) {\n\n\t\t\tthis._gizmos.children[ gizmo ].geometry = curveGeometry;\n\n\t\t}\n\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Creates the rotation gizmos matching trackball center and radius.\n\t *\n\t * @private\n\t * @param {Vector3} tbCenter - The trackball center.\n\t * @param {number} tbRadius - The trackball radius.\n\t */\n\tmakeGizmos( tbCenter, tbRadius ) {\n\n\t\tconst curve = new EllipseCurve( 0, 0, tbRadius, tbRadius );\n\t\tconst points = curve.getPoints( this._curvePts );\n\n\t\t//geometry\n\t\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\t\t//material\n\t\tconst curveMaterialX = new LineBasicMaterial( { color: 0xff8080, fog: false, transparent: true, opacity: 0.6 } );\n\t\tconst curveMaterialY = new LineBasicMaterial( { color: 0x80ff80, fog: false, transparent: true, opacity: 0.6 } );\n\t\tconst curveMaterialZ = new LineBasicMaterial( { color: 0x8080ff, fog: false, transparent: true, opacity: 0.6 } );\n\n\t\t//line\n\t\tconst gizmoX = new Line( curveGeometry, curveMaterialX );\n\t\tconst gizmoY = new Line( curveGeometry, curveMaterialY );\n\t\tconst gizmoZ = new Line( curveGeometry, curveMaterialZ );\n\n\t\tconst rotation = Math.PI * 0.5;\n\t\tgizmoX.rotation.x = rotation;\n\t\tgizmoY.rotation.y = rotation;\n\n\n\t\t//setting state\n\t\tthis._gizmoMatrixState0.identity().setPosition( tbCenter );\n\t\tthis._gizmoMatrixState.copy( this._gizmoMatrixState0 );\n\n\t\tif ( this.object.zoom !== 1 ) {\n\n\t\t\t//adapt gizmos size to camera zoom\n\t\t\tconst size = 1 / this.object.zoom;\n\t\t\tthis._scaleMatrix.makeScale( size, size, size );\n\t\t\tthis._translationMatrix.makeTranslation( - tbCenter.x, - tbCenter.y, - tbCenter.z );\n\n\t\t\tthis._gizmoMatrixState.premultiply( this._translationMatrix ).premultiply( this._scaleMatrix );\n\t\t\tthis._translationMatrix.makeTranslation( tbCenter.x, tbCenter.y, tbCenter.z );\n\t\t\tthis._gizmoMatrixState.premultiply( this._translationMatrix );\n\n\t\t}\n\n\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t//\n\n\t\tthis._gizmos.traverse( function ( object ) {\n\n\t\t\tif ( object.isLine ) {\n\n\t\t\t\tobject.geometry.dispose();\n\t\t\t\tobject.material.dispose();\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis._gizmos.clear();\n\n\t\t//\n\n\t\tthis._gizmos.add( gizmoX );\n\t\tthis._gizmos.add( gizmoY );\n\t\tthis._gizmos.add( gizmoZ );\n\n\t}\n\n\t/**\n\t * Performs animation for focus operation.\n\t *\n\t * @private\n\t * @param {number} time - Instant in which this function is called as performance.now().\n\t * @param {Vector3} point - Point of interest for focus operation.\n\t * @param {Matrix4} cameraMatrix - Camera matrix.\n\t * @param {Matrix4} gizmoMatrix - Gizmos matrix.\n\t */\n\tonFocusAnim( time, point, cameraMatrix, gizmoMatrix ) {\n\n\t\tif ( this._timeStart == - 1 ) {\n\n\t\t\t//animation start\n\t\t\tthis._timeStart = time;\n\n\t\t}\n\n\t\tif ( this._state == STATE.ANIMATION_FOCUS ) {\n\n\t\t\tconst deltaTime = time - this._timeStart;\n\t\t\tconst animTime = deltaTime / this.focusAnimationTime;\n\n\t\t\tthis._gizmoMatrixState.copy( gizmoMatrix );\n\n\t\t\tif ( animTime >= 1 ) {\n\n\t\t\t\t//animation end\n\n\t\t\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t\t\tthis.focus( point, this.scaleFactor );\n\n\t\t\t\tthis._timeStart = - 1;\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t} else {\n\n\t\t\t\tconst amount = this.easeOutCubic( animTime );\n\t\t\t\tconst size = ( ( 1 - amount ) + ( this.scaleFactor * amount ) );\n\n\t\t\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\t\t\t\tthis.focus( point, size, amount );\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\tconst self = this;\n\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\tself.onFocusAnim( t, point, cameraMatrix, gizmoMatrix.clone() );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t//interrupt animation\n\n\t\t\tthis._animationId = - 1;\n\t\t\tthis._timeStart = - 1;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs animation for rotation operation.\n\t *\n\t * @private\n\t * @param {number} time - Instant in which this function is called as performance.now().\n\t * @param {Vector3} rotationAxis - Rotation axis.\n\t * @param {number} w0 - Initial angular velocity.\n\t */\n\tonRotationAnim( time, rotationAxis, w0 ) {\n\n\t\tif ( this._timeStart == - 1 ) {\n\n\t\t\t//animation start\n\t\t\tthis._anglePrev = 0;\n\t\t\tthis._angleCurrent = 0;\n\t\t\tthis._timeStart = time;\n\n\t\t}\n\n\t\tif ( this._state == STATE.ANIMATION_ROTATE ) {\n\n\t\t\t//w = w0 + alpha * t\n\t\t\tconst deltaTime = ( time - this._timeStart ) / 1000;\n\t\t\tconst w = w0 + ( ( - this.dampingFactor ) * deltaTime );\n\n\t\t\tif ( w > 0 ) {\n\n\t\t\t\t//tetha = 0.5 * alpha * t^2 + w0 * t + tetha0\n\t\t\t\tthis._angleCurrent = 0.5 * ( - this.dampingFactor ) * Math.pow( deltaTime, 2 ) + w0 * deltaTime + 0;\n\t\t\t\tthis.applyTransformMatrix( this.rotate( rotationAxis, this._angleCurrent ) );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\tconst self = this;\n\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\tself.onRotationAnim( t, rotationAxis, w0 );\n\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\tthis._animationId = - 1;\n\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t//interrupt animation\n\n\t\t\tthis._animationId = - 1;\n\t\t\tthis._timeStart = - 1;\n\n\t\t\tif ( this._state != STATE.ROTATE ) {\n\n\t\t\t\tthis.activateGizmos( false );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Performs pan operation moving camera between two points.\n\t *\n\t * @private\n\t * @param {Vector3} p0 - Initial point.\n\t * @param {Vector3} p1 - Ending point.\n\t * @param {boolean} [adjust=false] - If movement should be adjusted considering camera distance (Perspective only).\n\t * @returns {Object}\n\t */\n\tpan( p0, p1, adjust = false ) {\n\n\t\tconst movement = p0.clone().sub( p1 );\n\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t//adjust movement amount\n\t\t\tmovement.multiplyScalar( 1 / this.object.zoom );\n\n\t\t} else if ( this.object.isPerspectiveCamera && adjust ) {\n\n\t\t\t//adjust movement amount\n\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState0 );\t//camera's initial position\n\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState0 );\t//gizmo's initial position\n\t\t\tconst distanceFactor = this._v3_1.distanceTo( this._v3_2 ) / this.object.position.distanceTo( this._gizmos.position );\n\t\t\tmovement.multiplyScalar( 1 / distanceFactor );\n\n\t\t}\n\n\t\tthis._v3_1.set( movement.x, movement.y, 0 ).applyQuaternion( this.object.quaternion );\n\n\t\tthis._m4_1.makeTranslation( this._v3_1.x, this._v3_1.y, this._v3_1.z );\n\n\t\tthis.setTransformationMatrices( this._m4_1, this._m4_1 );\n\t\treturn _transformation;\n\n\t}\n\n\t/**\n\t * Resets the controls.\n\t */\n\treset() {\n\n\t\tthis.target.copy( this._target0 );\n\t\tthis.object.zoom = this._zoom0;\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis.object.fov = this._fov0;\n\n\t\t}\n\n\t\tthis.object.near = this._nearPos;\n\t\tthis.object.far = this._farPos;\n\t\tthis._cameraMatrixState.copy( this._cameraMatrixState0 );\n\t\tthis._cameraMatrixState.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\t\tthis.object.up.copy( this._up0 );\n\n\t\tthis.object.updateMatrix();\n\t\tthis.object.updateProjectionMatrix();\n\n\t\tthis._gizmoMatrixState.copy( this._gizmoMatrixState0 );\n\t\tthis._gizmoMatrixState0.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\t\tthis._gizmos.updateMatrix();\n\n\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\t\tthis.makeGizmos( this._gizmos.position, this._tbRadius );\n\n\t\tthis.object.lookAt( this._gizmos.position );\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Rotates the camera around an axis passing by trackball's center.\n\t *\n\t * @private\n\t * @param {Vector3} axis - Rotation axis.\n\t * @param {number} angle - Angle in radians.\n\t * @returns {Object} Object with 'camera' field containing transformation matrix resulting from the operation to be applied to the camera.\n\t */\n\trotate( axis, angle ) {\n\n\t\tconst point = this._gizmos.position; //rotation center\n\t\tthis._translationMatrix.makeTranslation( - point.x, - point.y, - point.z );\n\t\tthis._rotationMatrix.makeRotationAxis( axis, - angle );\n\n\t\t//rotate camera\n\t\tthis._m4_1.makeTranslation( point.x, point.y, point.z );\n\t\tthis._m4_1.multiply( this._rotationMatrix );\n\t\tthis._m4_1.multiply( this._translationMatrix );\n\n\t\tthis.setTransformationMatrices( this._m4_1 );\n\n\t\treturn _transformation;\n\n\t}\n\n\t/**\n\t * Copy the current state to clipboard (as a readable JSON text).\n\t */\n\tcopyState() {\n\n\t\tlet state;\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\tstate = JSON.stringify( {\n\t\t\t\tarcballState: {\n\t\t\t\t\tcameraFar: this.object.far,\n\t\t\t\t\tcameraMatrix: this.object.matrix,\n\t\t\t\t\tcameraNear: this.object.near,\n\t\t\t\t\tcameraUp: this.object.up,\n\t\t\t\t\tcameraZoom: this.object.zoom,\n\t\t\t\t\tgizmoMatrix: this._gizmos.matrix,\n\t\t\t\t\ttarget: this.target\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\tstate = JSON.stringify( {\n\t\t\t\tarcballState: {\n\t\t\t\t\tcameraFar: this.object.far,\n\t\t\t\t\tcameraFov: this.object.fov,\n\t\t\t\t\tcameraMatrix: this.object.matrix,\n\t\t\t\t\tcameraNear: this.object.near,\n\t\t\t\t\tcameraUp: this.object.up,\n\t\t\t\t\tcameraZoom: this.object.zoom,\n\t\t\t\t\tgizmoMatrix: this._gizmos.matrix,\n\t\t\t\t\ttarget: this.target\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t\tnavigator.clipboard.writeText( state );\n\n\t}\n\n\t/**\n\t * Set the controls state from the clipboard, assumes that the clipboard stores a JSON\n\t * text as saved from `copyState()`.\n\t */\n\tpasteState() {\n\n\t\tconst self = this;\n\t\tnavigator.clipboard.readText().then( function resolved( value ) {\n\n\t\t\tself.setStateFromJSON( value );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Saves the current state of the control. This can later be recover with `reset()`.\n\t */\n\tsaveState() {\n\n\t\tthis.object.updateMatrix();\n\t\tthis._gizmos.updateMatrix();\n\n\t\tthis._target0.copy( this.target );\n\t\tthis._cameraMatrixState0.copy( this.object.matrix );\n\t\tthis._gizmoMatrixState0.copy( this._gizmos.matrix );\n\t\tthis._nearPos = this.object.near;\n\t\tthis._farPos = this.object.far;\n\t\tthis._zoom0 = this.object.zoom;\n\t\tthis._up0.copy( this.object.up );\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._fov0 = this.object.fov;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs uniform scale operation around a given point.\n\t *\n\t * @private\n\t * @param {number} size - Scale factor.\n\t * @param {Vector3} point - Point around which scale.\n\t * @param {boolean} scaleGizmos - If gizmos should be scaled (Perspective only).\n\t * @returns {Object} Object with 'camera' and 'gizmo' fields containing transformation matrices resulting from the operation to be applied to the camera and gizmos.\n\t */\n\tscale( size, point, scaleGizmos = true ) {\n\n\t\t_scalePointTemp.copy( point );\n\t\tlet sizeInverse = 1 / size;\n\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t//camera zoom\n\t\t\tthis.object.zoom = this._zoomState;\n\t\t\tthis.object.zoom *= size;\n\n\t\t\t//check min and max zoom\n\t\t\tif ( this.object.zoom > this.maxZoom ) {\n\n\t\t\t\tthis.object.zoom = this.maxZoom;\n\t\t\t\tsizeInverse = this._zoomState / this.maxZoom;\n\n\t\t\t} else if ( this.object.zoom < this.minZoom ) {\n\n\t\t\t\tthis.object.zoom = this.minZoom;\n\t\t\t\tsizeInverse = this._zoomState / this.minZoom;\n\n\t\t\t}\n\n\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\tthis._v3_1.setFromMatrixPosition( this._gizmoMatrixState );\t//gizmos position\n\n\t\t\t//scale gizmos so they appear in the same spot having the same dimension\n\t\t\tthis._scaleMatrix.makeScale( sizeInverse, sizeInverse, sizeInverse );\n\t\t\tthis._translationMatrix.makeTranslation( - this._v3_1.x, - this._v3_1.y, - this._v3_1.z );\n\n\t\t\tthis._m4_2.makeTranslation( this._v3_1.x, this._v3_1.y, this._v3_1.z ).multiply( this._scaleMatrix );\n\t\t\tthis._m4_2.multiply( this._translationMatrix );\n\n\n\t\t\t//move camera and gizmos to obtain pinch effect\n\t\t\t_scalePointTemp.sub( this._v3_1 );\n\n\t\t\tconst amount = _scalePointTemp.clone().multiplyScalar( sizeInverse );\n\t\t\t_scalePointTemp.sub( amount );\n\n\t\t\tthis._m4_1.makeTranslation( _scalePointTemp.x, _scalePointTemp.y, _scalePointTemp.z );\n\t\t\tthis._m4_2.premultiply( this._m4_1 );\n\n\t\t\tthis.setTransformationMatrices( this._m4_1, this._m4_2 );\n\t\t\treturn _transformation;\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t//move camera\n\t\t\tlet distance = this._v3_1.distanceTo( _scalePointTemp );\n\t\t\tlet amount = distance - ( distance * sizeInverse );\n\n\t\t\t//check min and max distance\n\t\t\tconst newDistance = distance - amount;\n\t\t\tif ( newDistance < this.minDistance ) {\n\n\t\t\t\tsizeInverse = this.minDistance / distance;\n\t\t\t\tamount = distance - ( distance * sizeInverse );\n\n\t\t\t} else if ( newDistance > this.maxDistance ) {\n\n\t\t\t\tsizeInverse = this.maxDistance / distance;\n\t\t\t\tamount = distance - ( distance * sizeInverse );\n\n\t\t\t}\n\n\t\t\t_offset.copy( _scalePointTemp ).sub( this._v3_1 ).normalize().multiplyScalar( amount );\n\n\t\t\tthis._m4_1.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\n\t\t\tif ( scaleGizmos ) {\n\n\t\t\t\t//scale gizmos so they appear in the same spot having the same dimension\n\t\t\t\tconst pos = this._v3_2;\n\n\t\t\t\tdistance = pos.distanceTo( _scalePointTemp );\n\t\t\t\tamount = distance - ( distance * sizeInverse );\n\t\t\t\t_offset.copy( _scalePointTemp ).sub( this._v3_2 ).normalize().multiplyScalar( amount );\n\n\t\t\t\tthis._translationMatrix.makeTranslation( pos.x, pos.y, pos.z );\n\t\t\t\tthis._scaleMatrix.makeScale( sizeInverse, sizeInverse, sizeInverse );\n\n\t\t\t\tthis._m4_2.makeTranslation( _offset.x, _offset.y, _offset.z ).multiply( this._translationMatrix );\n\t\t\t\tthis._m4_2.multiply( this._scaleMatrix );\n\n\t\t\t\tthis._translationMatrix.makeTranslation( - pos.x, - pos.y, - pos.z );\n\n\t\t\t\tthis._m4_2.multiply( this._translationMatrix );\n\t\t\t\tthis.setTransformationMatrices( this._m4_1, this._m4_2 );\n\n\n\t\t\t} else {\n\n\t\t\t\tthis.setTransformationMatrices( this._m4_1 );\n\n\t\t\t}\n\n\t\t\treturn _transformation;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets camera fov.\n\t *\n\t * @private\n\t * @param {number} value - The FOV to be set.\n\t */\n\tsetFov( value ) {\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis.object.fov = MathUtils.clamp( value, this.minFov, this.maxFov );\n\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets values in transformation object.\n\t *\n\t * @private\n\t * @param {?Matrix4} [camera=null] - Transformation to be applied to the camera.\n\t * @param {?Matrix4} [gizmos=null] - Transformation to be applied to gizmos.\n\t */\n\tsetTransformationMatrices( camera = null, gizmos = null ) {\n\n\t\tif ( camera != null ) {\n\n\t\t\tif ( _transformation.camera != null ) {\n\n\t\t\t\t_transformation.camera.copy( camera );\n\n\t\t\t} else {\n\n\t\t\t\t_transformation.camera = camera.clone();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_transformation.camera = null;\n\n\t\t}\n\n\t\tif ( gizmos != null ) {\n\n\t\t\tif ( _transformation.gizmos != null ) {\n\n\t\t\t\t_transformation.gizmos.copy( gizmos );\n\n\t\t\t} else {\n\n\t\t\t\t_transformation.gizmos = gizmos.clone();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_transformation.gizmos = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Rotates camera around its direction axis passing by a given point by a given angle.\n\t *\n\t * @private\n\t * @param {Vector3} point - The point where the rotation axis is passing trough.\n\t * @param {number} angle - Angle in radians.\n\t * @returns {Object} The computed transformation matrix.\n\t */\n\tzRotate( point, angle ) {\n\n\t\tthis._rotationMatrix.makeRotationAxis( this._rotationAxis, angle );\n\t\tthis._translationMatrix.makeTranslation( - point.x, - point.y, - point.z );\n\n\t\tthis._m4_1.makeTranslation( point.x, point.y, point.z );\n\t\tthis._m4_1.multiply( this._rotationMatrix );\n\t\tthis._m4_1.multiply( this._translationMatrix );\n\n\t\tthis._v3_1.setFromMatrixPosition( this._gizmoMatrixState ).sub( point );\t//vector from rotation center to gizmos position\n\t\tthis._v3_2.copy( this._v3_1 ).applyAxisAngle( this._rotationAxis, angle );\t//apply rotation\n\t\tthis._v3_2.sub( this._v3_1 );\n\n\t\tthis._m4_2.makeTranslation( this._v3_2.x, this._v3_2.y, this._v3_2.z );\n\n\t\tthis.setTransformationMatrices( this._m4_1, this._m4_2 );\n\t\treturn _transformation;\n\n\t}\n\n\t/**\n\t * Returns the raycaster that is used for user interaction. This object is shared between all\n\t * instances of `ArcballControls`.\n\t *\n\t * @returns {Raycaster} The internal raycaster.\n\t */\n\tgetRaycaster() {\n\n\t\treturn _raycaster;\n\n\t}\n\n\n\t/**\n\t * Unprojects the cursor on the 3D object surface.\n\t *\n\t * @private\n\t * @param {Vector2} cursor - Cursor coordinates in NDC.\n\t * @param {Camera} camera - Virtual camera.\n\t * @returns {?Vector3} The point of intersection with the model, if exist, null otherwise.\n\t */\n\tunprojectOnObj( cursor, camera ) {\n\n\t\tconst raycaster = this.getRaycaster();\n\t\traycaster.near = camera.near;\n\t\traycaster.far = camera.far;\n\t\traycaster.setFromCamera( cursor, camera );\n\n\t\tconst intersect = raycaster.intersectObjects( this.scene.children, true );\n\n\t\tfor ( let i = 0; i < intersect.length; i ++ ) {\n\n\t\t\tif ( intersect[ i ].object.uuid != this._gizmos.uuid && intersect[ i ].face != null ) {\n\n\t\t\t\treturn intersect[ i ].point.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Unproject the cursor on the trackball surface.\n\t *\n\t * @private\n\t * @param {Camera} camera - The virtual camera.\n\t * @param {number} cursorX - Cursor horizontal coordinate on screen.\n\t * @param {number} cursorY - Cursor vertical coordinate on screen.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @param {number} tbRadius - The trackball radius.\n\t * @returns {Vector3} The unprojected point on the trackball surface.\n\t */\n\tunprojectOnTbSurface( camera, cursorX, cursorY, canvas, tbRadius ) {\n\n\t\tif ( camera.type == 'OrthographicCamera' ) {\n\n\t\t\tthis._v2_1.copy( this.getCursorPosition( cursorX, cursorY, canvas ) );\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, 0 );\n\n\t\t\tconst x2 = Math.pow( this._v2_1.x, 2 );\n\t\t\tconst y2 = Math.pow( this._v2_1.y, 2 );\n\t\t\tconst r2 = Math.pow( this._tbRadius, 2 );\n\n\t\t\tif ( x2 + y2 <= r2 * 0.5 ) {\n\n\t\t\t\t//intersection with sphere\n\t\t\t\tthis._v3_1.setZ( Math.sqrt( r2 - ( x2 + y2 ) ) );\n\n\t\t\t} else {\n\n\t\t\t\t//intersection with hyperboloid\n\t\t\t\tthis._v3_1.setZ( ( r2 * 0.5 ) / ( Math.sqrt( x2 + y2 ) ) );\n\n\t\t\t}\n\n\t\t\treturn this._v3_1;\n\n\t\t} else if ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\t//unproject cursor on the near plane\n\t\t\tthis._v2_1.copy( this.getCursorNDC( cursorX, cursorY, canvas ) );\n\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, - 1 );\n\t\t\tthis._v3_1.applyMatrix4( camera.projectionMatrixInverse );\n\n\t\t\tconst rayDir = this._v3_1.clone().normalize(); //unprojected ray direction\n\t\t\tconst cameraGizmoDistance = camera.position.distanceTo( this._gizmos.position );\n\t\t\tconst radius2 = Math.pow( tbRadius, 2 );\n\n\t\t\t//\t  camera\n\t\t\t//\t\t|\\\n\t\t\t//\t\t| \\\n\t\t\t//\t\t|  \\\n\t\t\t//\th\t|\t\\\n\t\t\t//\t\t| \t \\\n\t\t\t//\t\t| \t  \\\n\t\t\t//\t_ _ | _ _ _\\ _ _  near plane\n\t\t\t//\t\t\tl\n\n\t\t\tconst h = this._v3_1.z;\n\t\t\tconst l = Math.sqrt( Math.pow( this._v3_1.x, 2 ) + Math.pow( this._v3_1.y, 2 ) );\n\n\t\t\tif ( l == 0 ) {\n\n\t\t\t\t//ray aligned with camera\n\t\t\t\trayDir.set( this._v3_1.x, this._v3_1.y, tbRadius );\n\t\t\t\treturn rayDir;\n\n\t\t\t}\n\n\t\t\tconst m = h / l;\n\t\t\tconst q = cameraGizmoDistance;\n\n\t\t\t/*\n\t\t\t * calculate intersection point between unprojected ray and trackball surface\n\t\t\t *|y = m * x + q\n\t\t\t *|x^2 + y^2 = r^2\n\t\t\t *\n\t\t\t * (m^2 + 1) * x^2 + (2 * m * q) * x + q^2 - r^2 = 0\n\t\t\t */\n\t\t\tlet a = Math.pow( m, 2 ) + 1;\n\t\t\tlet b = 2 * m * q;\n\t\t\tlet c = Math.pow( q, 2 ) - radius2;\n\t\t\tlet delta = Math.pow( b, 2 ) - ( 4 * a * c );\n\n\t\t\tif ( delta >= 0 ) {\n\n\t\t\t\t//intersection with sphere\n\t\t\t\tthis._v2_1.setX( ( - b - Math.sqrt( delta ) ) / ( 2 * a ) );\n\t\t\t\tthis._v2_1.setY( m * this._v2_1.x + q );\n\n\t\t\t\tconst angle = MathUtils.RAD2DEG * this._v2_1.angle();\n\n\t\t\t\tif ( angle >= 45 ) {\n\n\t\t\t\t\t//if angle between intersection point and X' axis is >= 45°, return that point\n\t\t\t\t\t//otherwise, calculate intersection point with hyperboloid\n\n\t\t\t\t\tconst rayLength = Math.sqrt( Math.pow( this._v2_1.x, 2 ) + Math.pow( ( cameraGizmoDistance - this._v2_1.y ), 2 ) );\n\t\t\t\t\trayDir.multiplyScalar( rayLength );\n\t\t\t\t\trayDir.z += cameraGizmoDistance;\n\t\t\t\t\treturn rayDir;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//intersection with hyperboloid\n\t\t\t/*\n\t\t\t *|y = m * x + q\n\t\t\t *|y = (1 / x) * (r^2 / 2)\n\t\t\t *\n\t\t\t * m * x^2 + q * x - r^2 / 2 = 0\n\t\t\t */\n\n\t\t\ta = m;\n\t\t\tb = q;\n\t\t\tc = - radius2 * 0.5;\n\t\t\tdelta = Math.pow( b, 2 ) - ( 4 * a * c );\n\t\t\tthis._v2_1.setX( ( - b - Math.sqrt( delta ) ) / ( 2 * a ) );\n\t\t\tthis._v2_1.setY( m * this._v2_1.x + q );\n\n\t\t\tconst rayLength = Math.sqrt( Math.pow( this._v2_1.x, 2 ) + Math.pow( ( cameraGizmoDistance - this._v2_1.y ), 2 ) );\n\n\t\t\trayDir.multiplyScalar( rayLength );\n\t\t\trayDir.z += cameraGizmoDistance;\n\t\t\treturn rayDir;\n\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Unprojects the cursor on the plane passing through the center of the trackball orthogonal to the camera.\n\t *\n\t * @private\n\t * @param {Camera} camera - The virtual camera.\n\t * @param {number} cursorX - Cursor horizontal coordinate on screen.\n\t * @param {number} cursorY - Cursor vertical coordinate on screen.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @param {boolean} [initialDistance=false] - If initial distance between camera and gizmos should be used for calculations instead of current (Perspective only).\n\t * @returns {Vector3} The unprojected point on the trackball plane.\n\t */\n\tunprojectOnTbPlane( camera, cursorX, cursorY, canvas, initialDistance = false ) {\n\n\t\tif ( camera.type == 'OrthographicCamera' ) {\n\n\t\t\tthis._v2_1.copy( this.getCursorPosition( cursorX, cursorY, canvas ) );\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, 0 );\n\n\t\t\treturn this._v3_1.clone();\n\n\t\t} else if ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\tthis._v2_1.copy( this.getCursorNDC( cursorX, cursorY, canvas ) );\n\n\t\t\t//unproject cursor on the near plane\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, - 1 );\n\t\t\tthis._v3_1.applyMatrix4( camera.projectionMatrixInverse );\n\n\t\t\tconst rayDir = this._v3_1.clone().normalize(); //unprojected ray direction\n\n\t\t\t//\t  camera\n\t\t\t//\t\t|\\\n\t\t\t//\t\t| \\\n\t\t\t//\t\t|  \\\n\t\t\t//\th\t|\t\\\n\t\t\t//\t\t| \t \\\n\t\t\t//\t\t| \t  \\\n\t\t\t//\t_ _ | _ _ _\\ _ _  near plane\n\t\t\t//\t\t\tl\n\n\t\t\tconst h = this._v3_1.z;\n\t\t\tconst l = Math.sqrt( Math.pow( this._v3_1.x, 2 ) + Math.pow( this._v3_1.y, 2 ) );\n\t\t\tlet cameraGizmoDistance;\n\n\t\t\tif ( initialDistance ) {\n\n\t\t\t\tcameraGizmoDistance = this._v3_1.setFromMatrixPosition( this._cameraMatrixState0 ).distanceTo( this._v3_2.setFromMatrixPosition( this._gizmoMatrixState0 ) );\n\n\t\t\t} else {\n\n\t\t\t\tcameraGizmoDistance = camera.position.distanceTo( this._gizmos.position );\n\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * calculate intersection point between unprojected ray and the plane\n\t\t\t *|y = mx + q\n\t\t\t *|y = 0\n\t\t\t *\n\t\t\t * x = -q/m\n\t\t\t*/\n\t\t\tif ( l == 0 ) {\n\n\t\t\t\t//ray aligned with camera\n\t\t\t\trayDir.set( 0, 0, 0 );\n\t\t\t\treturn rayDir;\n\n\t\t\t}\n\n\t\t\tconst m = h / l;\n\t\t\tconst q = cameraGizmoDistance;\n\t\t\tconst x = - q / m;\n\n\t\t\tconst rayLength = Math.sqrt( Math.pow( q, 2 ) + Math.pow( x, 2 ) );\n\t\t\trayDir.multiplyScalar( rayLength );\n\t\t\trayDir.z = 0;\n\t\t\treturn rayDir;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates camera and gizmos state.\n\t *\n\t * @private\n\t */\n\tupdateMatrixState() {\n\n\t\t//update camera and gizmos state\n\t\tthis._cameraMatrixState.copy( this.object.matrix );\n\t\tthis._gizmoMatrixState.copy( this._gizmos.matrix );\n\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\tthis._cameraProjectionState.copy( this.object.projectionMatrix );\n\t\t\tthis.object.updateProjectionMatrix();\n\t\t\tthis._zoomState = this.object.zoom;\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._fovState = this.object.fov;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the trackball FSA.\n\t *\n\t * @private\n\t * @param {STATE} newState - New state of the FSA.\n\t * @param {boolean} updateMatrices - If matrices state should be updated.\n\t */\n\tupdateTbState( newState, updateMatrices ) {\n\n\t\tthis._state = newState;\n\t\tif ( updateMatrices ) {\n\n\t\t\tthis.updateMatrixState();\n\n\t\t}\n\n\t}\n\n\tupdate() {\n\n\t\tif ( this.target.equals( this._currentTarget ) === false ) {\n\n\t\t\tthis._gizmos.position.copy( this.target );\t//for correct radius calculation\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\t\t\tthis.makeGizmos( this.target, this._tbRadius );\n\t\t\tthis._currentTarget.copy( this.target );\n\n\t\t}\n\n\t\t//check min/max parameters\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t//check zoom\n\t\t\tif ( this.object.zoom > this.maxZoom || this.object.zoom < this.minZoom ) {\n\n\t\t\t\tconst newZoom = MathUtils.clamp( this.object.zoom, this.minZoom, this.maxZoom );\n\t\t\t\tthis.applyTransformMatrix( this.scale( newZoom / this.object.zoom, this._gizmos.position, true ) );\n\n\t\t\t}\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t//check distance\n\t\t\tconst distance = this.object.position.distanceTo( this._gizmos.position );\n\n\t\t\tif ( distance > this.maxDistance + _EPS || distance < this.minDistance - _EPS ) {\n\n\t\t\t\tconst newDistance = MathUtils.clamp( distance, this.minDistance, this.maxDistance );\n\t\t\t\tthis.applyTransformMatrix( this.scale( newDistance / distance, this._gizmos.position ) );\n\t\t\t\tthis.updateMatrixState();\n\n\t\t\t}\n\n\t\t\t//check fov\n\t\t\tif ( this.object.fov < this.minFov || this.object.fov > this.maxFov ) {\n\n\t\t\t\tthis.object.fov = MathUtils.clamp( this.object.fov, this.minFov, this.maxFov );\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tconst oldRadius = this._tbRadius;\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\t\t\tif ( oldRadius < this._tbRadius - _EPS || oldRadius > this._tbRadius + _EPS ) {\n\n\t\t\t\tconst scale = ( this._gizmos.scale.x + this._gizmos.scale.y + this._gizmos.scale.z ) / 3;\n\t\t\t\tconst newRadius = this._tbRadius / scale;\n\t\t\t\tconst curve = new EllipseCurve( 0, 0, newRadius, newRadius );\n\t\t\t\tconst points = curve.getPoints( this._curvePts );\n\t\t\t\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\t\t\t\tfor ( const gizmo in this._gizmos.children ) {\n\n\t\t\t\t\tthis._gizmos.children[ gizmo ].geometry = curveGeometry;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.object.lookAt( this._gizmos.position );\n\n\t}\n\n\tsetStateFromJSON( json ) {\n\n\t\tconst state = JSON.parse( json );\n\n\t\tif ( state.arcballState != undefined ) {\n\n\t\t\tthis.target.fromArray( state.arcballState.target );\n\n\t\t\tthis._cameraMatrixState.fromArray( state.arcballState.cameraMatrix.elements );\n\t\t\tthis._cameraMatrixState.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\n\t\t\tthis.object.up.copy( state.arcballState.cameraUp );\n\t\t\tthis.object.near = state.arcballState.cameraNear;\n\t\t\tthis.object.far = state.arcballState.cameraFar;\n\n\t\t\tthis.object.zoom = state.arcballState.cameraZoom;\n\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\tthis.object.fov = state.arcballState.cameraFov;\n\n\t\t\t}\n\n\t\t\tthis._gizmoMatrixState.fromArray( state.arcballState.gizmoMatrix.elements );\n\t\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t\tthis.object.updateMatrix();\n\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\tthis._gizmos.updateMatrix();\n\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\t\t\tconst gizmoTmp = new Matrix4().copy( this._gizmoMatrixState0 );\n\t\t\tthis.makeGizmos( this._gizmos.position, this._tbRadius );\n\t\t\tthis._gizmoMatrixState0.copy( gizmoTmp );\n\n\t\t\tthis.object.lookAt( this._gizmos.position );\n\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n}\n\n//listeners\n\nfunction onWindowResize() {\n\n\tconst scale = ( this._gizmos.scale.x + this._gizmos.scale.y + this._gizmos.scale.z ) / 3;\n\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\tconst newRadius = this._tbRadius / scale;\n\tconst curve = new EllipseCurve( 0, 0, newRadius, newRadius );\n\tconst points = curve.getPoints( this._curvePts );\n\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\n\tfor ( const gizmo in this._gizmos.children ) {\n\n\t\tthis._gizmos.children[ gizmo ].geometry = curveGeometry;\n\n\t}\n\n\tthis.dispatchEvent( _changeEvent );\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( ! this.enabled ) {\n\n\t\treturn;\n\n\t}\n\n\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\tif ( this.mouseActions[ i ].mouse == 2 ) {\n\n\t\t\t//prevent only if button 2 is actually used\n\t\t\tevent.preventDefault();\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerCancel() {\n\n\tthis._touchStart.splice( 0, this._touchStart.length );\n\tthis._touchCurrent.splice( 0, this._touchCurrent.length );\n\tthis._input = INPUT.NONE;\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( event.button == 0 && event.isPrimary ) {\n\n\t\tthis._downValid = true;\n\t\tthis._downEvents.push( event );\n\t\tthis._downStart = performance.now();\n\n\t} else {\n\n\t\tthis._downValid = false;\n\n\t}\n\n\tif ( event.pointerType == 'touch' && this._input != INPUT.CURSOR ) {\n\n\t\tthis._touchStart.push( event );\n\t\tthis._touchCurrent.push( event );\n\n\t\tswitch ( this._input ) {\n\n\t\t\tcase INPUT.NONE:\n\n\t\t\t\t//singleStart\n\t\t\t\tthis._input = INPUT.ONE_FINGER;\n\t\t\t\tthis.onSinglePanStart( event, 'ROTATE' );\n\n\t\t\t\twindow.addEventListener( 'pointermove', this._onPointerMove );\n\t\t\t\twindow.addEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.ONE_FINGER:\n\t\t\tcase INPUT.ONE_FINGER_SWITCHED:\n\n\t\t\t\t//doubleStart\n\t\t\t\tthis._input = INPUT.TWO_FINGER;\n\n\t\t\t\tthis.onRotateStart();\n\t\t\t\tthis.onPinchStart();\n\t\t\t\tthis.onDoublePanStart();\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.TWO_FINGER:\n\n\t\t\t\t//multipleStart\n\t\t\t\tthis._input = INPUT.MULT_FINGER;\n\t\t\t\tthis.onTriplePanStart( event );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} else if ( event.pointerType != 'touch' && this._input == INPUT.NONE ) {\n\n\t\tlet modifier = null;\n\n\t\tif ( event.ctrlKey || event.metaKey ) {\n\n\t\t\tmodifier = 'CTRL';\n\n\t\t} else if ( event.shiftKey ) {\n\n\t\t\tmodifier = 'SHIFT';\n\n\t\t}\n\n\t\tthis._mouseOp = this.getOpFromAction( event.button, modifier );\n\t\tif ( this._mouseOp != null ) {\n\n\t\t\twindow.addEventListener( 'pointermove', this._onPointerMove );\n\t\t\twindow.addEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t//singleStart\n\t\t\tthis._input = INPUT.CURSOR;\n\t\t\tthis._button = event.button;\n\t\t\tthis.onSinglePanStart( event, this._mouseOp );\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( event.pointerType == 'touch' && this._input != INPUT.CURSOR ) {\n\n\t\tswitch ( this._input ) {\n\n\t\t\tcase INPUT.ONE_FINGER:\n\n\t\t\t\t//singleMove\n\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\tthis.onSinglePanMove( event, STATE.ROTATE );\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.ONE_FINGER_SWITCHED:\n\n\t\t\t\tconst movement = this.calculatePointersDistance( this._touchCurrent[ 0 ], event ) * this._devPxRatio;\n\n\t\t\t\tif ( movement >= this._switchSensibility ) {\n\n\t\t\t\t\t//singleMove\n\t\t\t\t\tthis._input = INPUT.ONE_FINGER;\n\t\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\t\tthis.onSinglePanStart( event, 'ROTATE' );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.TWO_FINGER:\n\n\t\t\t\t//rotate/pan/pinchMove\n\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\tthis.onRotateMove();\n\t\t\t\tthis.onPinchMove();\n\t\t\t\tthis.onDoublePanMove();\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.MULT_FINGER:\n\n\t\t\t\t//multMove\n\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\tthis.onTriplePanMove( event );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} else if ( event.pointerType != 'touch' && this._input == INPUT.CURSOR ) {\n\n\t\tlet modifier = null;\n\n\t\tif ( event.ctrlKey || event.metaKey ) {\n\n\t\t\tmodifier = 'CTRL';\n\n\t\t} else if ( event.shiftKey ) {\n\n\t\t\tmodifier = 'SHIFT';\n\n\t\t}\n\n\t\tconst mouseOpState = this.getOpStateFromAction( this._button, modifier );\n\n\t\tif ( mouseOpState != null ) {\n\n\t\t\tthis.onSinglePanMove( event, mouseOpState );\n\n\t\t}\n\n\t}\n\n\t//checkDistance\n\tif ( this._downValid ) {\n\n\t\tconst movement = this.calculatePointersDistance( this._downEvents[ this._downEvents.length - 1 ], event ) * this._devPxRatio;\n\t\tif ( movement > this._movementThreshold ) {\n\n\t\t\tthis._downValid = false;\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( event.pointerType == 'touch' && this._input != INPUT.CURSOR ) {\n\n\t\tconst nTouch = this._touchCurrent.length;\n\n\t\tfor ( let i = 0; i < nTouch; i ++ ) {\n\n\t\t\tif ( this._touchCurrent[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\tthis._touchCurrent.splice( i, 1 );\n\t\t\t\tthis._touchStart.splice( i, 1 );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tswitch ( this._input ) {\n\n\t\t\tcase INPUT.ONE_FINGER:\n\t\t\tcase INPUT.ONE_FINGER_SWITCHED:\n\n\t\t\t\t//singleEnd\n\t\t\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t\tthis._input = INPUT.NONE;\n\t\t\t\tthis.onSinglePanEnd();\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.TWO_FINGER:\n\n\t\t\t\t//doubleEnd\n\t\t\t\tthis.onDoublePanEnd( event );\n\t\t\t\tthis.onPinchEnd( event );\n\t\t\t\tthis.onRotateEnd( event );\n\n\t\t\t\t//switching to singleStart\n\t\t\t\tthis._input = INPUT.ONE_FINGER_SWITCHED;\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.MULT_FINGER:\n\n\t\t\t\tif ( this._touchCurrent.length == 0 ) {\n\n\t\t\t\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\t\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t\t\t//multCancel\n\t\t\t\t\tthis._input = INPUT.NONE;\n\t\t\t\t\tthis.onTriplePanEnd();\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} else if ( event.pointerType != 'touch' && this._input == INPUT.CURSOR ) {\n\n\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\tthis._input = INPUT.NONE;\n\t\tthis.onSinglePanEnd();\n\t\tthis._button = - 1;\n\n\t}\n\n\tif ( event.isPrimary ) {\n\n\t\tif ( this._downValid ) {\n\n\t\t\tconst downTime = event.timeStamp - this._downEvents[ this._downEvents.length - 1 ].timeStamp;\n\n\t\t\tif ( downTime <= this._maxDownTime ) {\n\n\t\t\t\tif ( this._nclicks == 0 ) {\n\n\t\t\t\t\t//first valid click detected\n\t\t\t\t\tthis._nclicks = 1;\n\t\t\t\t\tthis._clickStart = performance.now();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst clickInterval = event.timeStamp - this._clickStart;\n\t\t\t\t\tconst movement = this.calculatePointersDistance( this._downEvents[ 1 ], this._downEvents[ 0 ] ) * this._devPxRatio;\n\n\t\t\t\t\tif ( clickInterval <= this._maxInterval && movement <= this._posThreshold ) {\n\n\t\t\t\t\t\t//second valid click detected\n\t\t\t\t\t\t//fire double tap and reset values\n\t\t\t\t\t\tthis._nclicks = 0;\n\t\t\t\t\t\tthis._downEvents.splice( 0, this._downEvents.length );\n\t\t\t\t\t\tthis.onDoubleTap( event );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//new 'first click'\n\t\t\t\t\t\tthis._nclicks = 1;\n\t\t\t\t\t\tthis._downEvents.shift();\n\t\t\t\t\t\tthis._clickStart = performance.now();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis._downValid = false;\n\t\t\t\tthis._nclicks = 0;\n\t\t\t\tthis._downEvents.splice( 0, this._downEvents.length );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis._nclicks = 0;\n\t\t\tthis._downEvents.splice( 0, this._downEvents.length );\n\n\t\t}\n\n\t}\n\n}\n\nfunction onWheel( event ) {\n\n\tif ( this.enabled && this.enableZoom ) {\n\n\t\tlet modifier = null;\n\n\t\tif ( event.ctrlKey || event.metaKey ) {\n\n\t\t\tmodifier = 'CTRL';\n\n\t\t} else if ( event.shiftKey ) {\n\n\t\t\tmodifier = 'SHIFT';\n\n\t\t}\n\n\t\tconst mouseOp = this.getOpFromAction( 'WHEEL', modifier );\n\n\t\tif ( mouseOp != null ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tconst notchDeltaY = 125; //distance of one notch of mouse wheel\n\t\t\tlet sgn = event.deltaY / notchDeltaY;\n\n\t\t\tlet size = 1;\n\n\t\t\tif ( sgn > 0 ) {\n\n\t\t\t\tsize = 1 / this.scaleFactor;\n\n\t\t\t} else if ( sgn < 0 ) {\n\n\t\t\t\tsize = this.scaleFactor;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseOp ) {\n\n\t\t\t\tcase 'ZOOM':\n\n\t\t\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\t\t\tif ( sgn > 0 ) {\n\n\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, sgn ) );\n\n\t\t\t\t\t} else if ( sgn < 0 ) {\n\n\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, - sgn );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.cursorZoom && this.enablePan ) {\n\n\t\t\t\t\t\tlet scalePoint;\n\n\t\t\t\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, event.clientX, event.clientY, this.domElement ).applyQuaternion( this.object.quaternion ).multiplyScalar( 1 / this.object.zoom ).add( this._gizmos.position );\n\n\t\t\t\t\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, event.clientX, event.clientY, this.domElement ).applyQuaternion( this.object.quaternion ).add( this._gizmos.position );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, scalePoint ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._gizmos.position ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._grid != null ) {\n\n\t\t\t\t\t\tthis.disposeGrid();\n\t\t\t\t\t\tthis.drawGrid();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'FOV':\n\n\t\t\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\tthis.updateTbState( STATE.FOV, true );\n\n\n\t\t\t\t\t\t//Vertigo effect\n\n\t\t\t\t\t\t//\t  fov / 2\n\t\t\t\t\t\t//\t\t|\\\n\t\t\t\t\t\t//\t\t| \\\n\t\t\t\t\t\t//\t\t|  \\\n\t\t\t\t\t\t//\tx\t|\t\\\n\t\t\t\t\t\t//\t\t| \t \\\n\t\t\t\t\t\t//\t\t| \t  \\\n\t\t\t\t\t\t//\t\t| _ _ _\\\n\t\t\t\t\t\t//\t\t\ty\n\n\t\t\t\t\t\t//check for iOs shift shortcut\n\t\t\t\t\t\tif ( event.deltaX != 0 ) {\n\n\t\t\t\t\t\t\tsgn = event.deltaX / notchDeltaY;\n\n\t\t\t\t\t\t\tsize = 1;\n\n\t\t\t\t\t\t\tif ( sgn > 0 ) {\n\n\t\t\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, sgn ) );\n\n\t\t\t\t\t\t\t} else if ( sgn < 0 ) {\n\n\t\t\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, - sgn );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\t\t\t\tconst x = this._v3_1.distanceTo( this._gizmos.position );\n\t\t\t\t\t\tlet xNew = x / size;\t//distance between camera and gizmos if scale(size, scalepoint) would be performed\n\n\t\t\t\t\t\t//check min and max distance\n\t\t\t\t\t\txNew = MathUtils.clamp( xNew, this.minDistance, this.maxDistance );\n\n\t\t\t\t\t\tconst y = x * Math.tan( MathUtils.DEG2RAD * this.object.fov * 0.5 );\n\n\t\t\t\t\t\t//calculate new fov\n\t\t\t\t\t\tlet newFov = MathUtils.RAD2DEG * ( Math.atan( y / xNew ) * 2 );\n\n\t\t\t\t\t\t//check min and max fov\n\t\t\t\t\t\tif ( newFov > this.maxFov ) {\n\n\t\t\t\t\t\t\tnewFov = this.maxFov;\n\n\t\t\t\t\t\t} else if ( newFov < this.minFov ) {\n\n\t\t\t\t\t\t\tnewFov = this.minFov;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newDistance = y / Math.tan( MathUtils.DEG2RAD * ( newFov / 2 ) );\n\t\t\t\t\t\tsize = x / newDistance;\n\n\t\t\t\t\t\tthis.setFov( newFov );\n\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._gizmos.position, false ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._grid != null ) {\n\n\t\t\t\t\t\tthis.disposeGrid();\n\t\t\t\t\t\tthis.drawGrid();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { ArcballControls };\n","size_bytes":86907},"THREE.examples/controls/DragControls.js":{"content":"import {\n\tControls,\n\tMatrix4,\n\tPlane,\n\tRaycaster,\n\tVector2,\n\tVector3,\n\tMOUSE,\n\tTOUCH\n} from 'three';\n\nconst _plane = new Plane();\n\nconst _pointer = new Vector2();\nconst _offset = new Vector3();\nconst _diff = new Vector2();\nconst _previousPointer = new Vector2();\nconst _intersection = new Vector3();\nconst _worldPosition = new Vector3();\nconst _inverseMatrix = new Matrix4();\n\nconst _up = new Vector3();\nconst _right = new Vector3();\n\nlet _selected = null, _hovered = null;\nconst _intersections = [];\n\nconst STATE = {\n\tNONE: - 1,\n\tPAN: 0,\n\tROTATE: 1\n};\n\n/**\n * This class can be used to provide a drag'n'drop interaction.\n *\n * ```js\n * const controls = new DragControls( objects, camera, renderer.domElement );\n *\n * // add event listener to highlight dragged objects\n * controls.addEventListener( 'dragstart', function ( event ) {\n *\n * \tevent.object.material.emissive.set( 0xaaaaaa );\n *\n * } );\n *\n * controls.addEventListener( 'dragend', function ( event ) {\n *\n * \tevent.object.material.emissive.set( 0x000000 );\n *\n * } );\n * ```\n *\n * @augments Controls\n * @three_import import { DragControls } from 'three/addons/controls/DragControls.js';\n */\nclass DragControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Array<Object3D>} objects - An array of draggable 3D objects.\n\t * @param {Camera} camera - The camera of the rendered scene.\n\t * @param {?HTMLElement} [domElement=null] - The HTML DOM element used for event listeners.\n\t */\n\tconstructor( objects, camera, domElement = null ) {\n\n\t\tsuper( camera, domElement );\n\n\t\t/**\n\t\t * An array of draggable 3D objects.\n\t\t *\n\t\t * @type {Array<Object3D>}\n\t\t */\n\t\tthis.objects = objects;\n\n\t\t/**\n\t\t * Whether children of draggable objects can be dragged independently from their parent.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.recursive = true;\n\n\t\t/**\n\t\t * This option only works if the `objects` array contains a single draggable  group object.\n\t\t * If set to `true`, the controls does not transform individual objects but the entire group.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.transformGroup = false;\n\n\t\t/**\n\t\t * The speed at which the object will rotate when dragged in `rotate` mode.\n\t\t * The higher the number the faster the rotation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1;\n\n\t\t/**\n\t\t * The raycaster used for detecting 3D objects.\n\t\t *\n\t\t * @type {Raycaster}\n\t\t */\n\t\tthis.raycaster = new Raycaster();\n\n\t\t// interaction\n\n\t\tthis.mouseButtons = { LEFT: MOUSE.PAN, MIDDLE: MOUSE.PAN, RIGHT: MOUSE.ROTATE };\n\t\tthis.touches = { ONE: TOUCH.PAN };\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerCancel = onPointerCancel.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\n\t\t//\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t}\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerCancel );\n\t\tthis.domElement.addEventListener( 'pointerleave', this._onPointerCancel );\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerCancel );\n\t\tthis.domElement.removeEventListener( 'pointerleave', this._onPointerCancel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.domElement.style.touchAction = 'auto';\n\t\tthis.domElement.style.cursor = '';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\t_updatePointer( event ) {\n\n\t\tconst rect = this.domElement.getBoundingClientRect();\n\n\t\t_pointer.x = ( event.clientX - rect.left ) / rect.width * 2 - 1;\n\t\t_pointer.y = - ( event.clientY - rect.top ) / rect.height * 2 + 1;\n\n\t}\n\n\t_updateState( event ) {\n\n\t\t// determine action\n\n\t\tlet action;\n\n\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\taction = this.touches.ONE;\n\n\t\t} else {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\taction = this.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\taction = this.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\taction = this.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\taction = null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// determine state\n\n\t\tswitch ( action ) {\n\n\t\t\tcase MOUSE.PAN:\n\t\t\tcase TOUCH.PAN:\n\n\t\t\t\tthis.state = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.ROTATE:\n\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\tthis.state = STATE.ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tthis.state = STATE.NONE;\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tconst camera = this.object;\n\tconst domElement = this.domElement;\n\tconst raycaster = this.raycaster;\n\n\tif ( this.enabled === false ) return;\n\n\tthis._updatePointer( event );\n\n\traycaster.setFromCamera( _pointer, camera );\n\n\tif ( _selected ) {\n\n\t\tif ( this.state === STATE.PAN ) {\n\n\t\t\tif ( raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t_selected.position.copy( _intersection.sub( _offset ).applyMatrix4( _inverseMatrix ) );\n\t\t\t\tthis.dispatchEvent( { type: 'drag', object: _selected } );\n\n\t\t\t}\n\n\t\t} else if ( this.state === STATE.ROTATE ) {\n\n\t\t\t_diff.subVectors( _pointer, _previousPointer ).multiplyScalar( this.rotateSpeed );\n\t\t\t_selected.rotateOnWorldAxis( _up, _diff.x );\n\t\t\t_selected.rotateOnWorldAxis( _right.normalize(), - _diff.y );\n\t\t\tthis.dispatchEvent( { type: 'drag', object: _selected } );\n\n\t\t}\n\n\t\t_previousPointer.copy( _pointer );\n\n\t} else {\n\n\t\t// hover support\n\n\t\tif ( event.pointerType === 'mouse' || event.pointerType === 'pen' ) {\n\n\t\t\t_intersections.length = 0;\n\n\t\t\traycaster.setFromCamera( _pointer, camera );\n\t\t\traycaster.intersectObjects( this.objects, this.recursive, _intersections );\n\n\t\t\tif ( _intersections.length > 0 ) {\n\n\t\t\t\tconst object = _intersections[ 0 ].object;\n\n\t\t\t\t_plane.setFromNormalAndCoplanarPoint( camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( object.matrixWorld ) );\n\n\t\t\t\tif ( _hovered !== object && _hovered !== null ) {\n\n\t\t\t\t\tthis.dispatchEvent( { type: 'hoveroff', object: _hovered } );\n\n\t\t\t\t\tdomElement.style.cursor = 'auto';\n\t\t\t\t\t_hovered = null;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _hovered !== object ) {\n\n\t\t\t\t\tthis.dispatchEvent( { type: 'hoveron', object: object } );\n\n\t\t\t\t\tdomElement.style.cursor = 'pointer';\n\t\t\t\t\t_hovered = object;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( _hovered !== null ) {\n\n\t\t\t\t\tthis.dispatchEvent( { type: 'hoveroff', object: _hovered } );\n\n\t\t\t\t\tdomElement.style.cursor = 'auto';\n\t\t\t\t\t_hovered = null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_previousPointer.copy( _pointer );\n\n}\n\nfunction onPointerDown( event ) {\n\n\tconst camera = this.object;\n\tconst domElement = this.domElement;\n\tconst raycaster = this.raycaster;\n\n\tif ( this.enabled === false ) return;\n\n\tthis._updatePointer( event );\n\tthis._updateState( event );\n\n\t_intersections.length = 0;\n\n\traycaster.setFromCamera( _pointer, camera );\n\traycaster.intersectObjects( this.objects, this.recursive, _intersections );\n\n\tif ( _intersections.length > 0 ) {\n\n\t\tif ( this.transformGroup === true ) {\n\n\t\t\t// look for the outermost group in the object's upper hierarchy\n\n\t\t\t_selected = findGroup( _intersections[ 0 ].object );\n\n\t\t} else {\n\n\t\t\t_selected = _intersections[ 0 ].object;\n\n\t\t}\n\n\t\t_plane.setFromNormalAndCoplanarPoint( camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\tif ( raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\tif ( this.state === STATE.PAN ) {\n\n\t\t\t\t_inverseMatrix.copy( _selected.parent.matrixWorld ).invert();\n\t\t\t\t_offset.copy( _intersection ).sub( _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\t\t\t\tdomElement.style.cursor = 'move';\n\t\t\t\tthis.dispatchEvent( { type: 'dragstart', object: _selected } );\n\n\t\t\t} else if ( this.state === STATE.ROTATE ) {\n\n\t\t\t\t// the controls only support Y+ up\n\t\t\t\t_up.set( 0, 1, 0 ).applyQuaternion( camera.quaternion ).normalize();\n\t\t\t\t_right.set( 1, 0, 0 ).applyQuaternion( camera.quaternion ).normalize();\n\t\t\t\tdomElement.style.cursor = 'move';\n\t\t\t\tthis.dispatchEvent( { type: 'dragstart', object: _selected } );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_previousPointer.copy( _pointer );\n\n}\n\nfunction onPointerCancel() {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( _selected ) {\n\n\t\tthis.dispatchEvent( { type: 'dragend', object: _selected } );\n\n\t\t_selected = null;\n\n\t}\n\n\tthis.domElement.style.cursor = _hovered ? 'pointer' : 'auto';\n\n\tthis.state = STATE.NONE;\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nfunction findGroup( obj, group = null ) {\n\n\tif ( obj.isGroup ) group = obj;\n\n\tif ( obj.parent === null ) return group;\n\n\treturn findGroup( obj.parent, group );\n\n}\n\n/**\n * Fires when the user drags a 3D object.\n *\n * @event DragControls#drag\n * @type {Object}\n */\n\n/**\n * Fires when the user has finished dragging a 3D object.\n *\n * @event DragControls#dragend\n * @type {Object}\n */\n\n/**\n * Fires when the pointer is moved onto a 3D object, or onto one of its children.\n *\n * @event DragControls#hoveron\n * @type {Object}\n */\n\n/**\n * Fires when the pointer is moved out of a 3D object.\n *\n * @event DragControls#hoveroff\n * @type {Object}\n */\n\nexport { DragControls };\n","size_bytes":9490},"THREE.examples/controls/FirstPersonControls.js":{"content":"import {\n\tControls,\n\tMathUtils,\n\tSpherical,\n\tVector3\n} from 'three';\n\nconst _lookDirection = new Vector3();\nconst _spherical = new Spherical();\nconst _target = new Vector3();\nconst _targetPosition = new Vector3();\n\n/**\n * This class is an alternative implementation of {@link FlyControls}.\n *\n * @augments Controls\n * @three_import import { FirstPersonControls } from 'three/addons/controls/FirstPersonControls.js';\n */\nclass FirstPersonControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Object3D} object - The object that is managed by the controls.\n\t * @param {?HTMLElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\t/**\n\t\t * The movement speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.movementSpeed = 1.0;\n\n\t\t/**\n\t\t * The look around speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.005\n\t\t */\n\t\tthis.lookSpeed = 0.005;\n\n\t\t/**\n\t\t * Whether it's possible to vertically look around or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.lookVertical = true;\n\n\t\t/**\n\t\t * Whether the camera is automatically moved forward or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.autoForward = false;\n\n\t\t/**\n\t\t * Whether it's possible to look around or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.activeLook = true;\n\n\t\t/**\n\t\t * Whether or not the camera's height influences the forward movement speed.\n\t\t * Use the properties `heightCoef`, `heightMin` and `heightMax` for configuration.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.heightSpeed = false;\n\n\t\t/**\n\t\t * Determines how much faster the camera moves when it's y-component is near `heightMax`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.heightCoef = 1.0;\n\n\t\t/**\n\t\t * Lower camera height limit used for movement speed adjustment.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.heightMin = 0.0;\n\n\t\t/**\n\t\t * Upper camera height limit used for movement speed adjustment.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.heightMax = 1.0;\n\n\t\t/**\n\t\t * Whether or not looking around is vertically constrained by `verticalMin` and `verticalMax`.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.constrainVertical = false;\n\n\t\t/**\n\t\t * How far you can vertically look around, lower limit. Range is `0` to `Math.PI` in radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.verticalMin = 0;\n\n\t\t/**\n\t\t * How far you can vertically look around, upper limit. Range is `0` to `Math.PI` in radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.verticalMax = Math.PI;\n\n\t\t/**\n\t\t * Whether the mouse is pressed down or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default false\n\t\t */\n\t\tthis.mouseDragOn = false;\n\n\t\t// internals\n\n\t\tthis._autoSpeedFactor = 0.0;\n\n\t\tthis._pointerX = 0;\n\t\tthis._pointerY = 0;\n\n\t\tthis._moveForward = false;\n\t\tthis._moveBackward = false;\n\t\tthis._moveLeft = false;\n\t\tthis._moveRight = false;\n\n\t\tthis._viewHalfX = 0;\n\t\tthis._viewHalfY = 0;\n\n\t\tthis._lat = 0;\n\t\tthis._lon = 0;\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\t\tthis._onKeyUp = onKeyUp.bind( this );\n\n\t\t//\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t\tthis.handleResize();\n\n\t\t}\n\n\t\tthis._setOrientation();\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\twindow.addEventListener( 'keydown', this._onKeyDown );\n\t\twindow.addEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\n\t}\n\n\tdisconnect() {\n\n\t\twindow.removeEventListener( 'keydown', this._onKeyDown );\n\t\twindow.removeEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\t/**\n\t * Must be called if the application window is resized.\n\t */\n\thandleResize() {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis._viewHalfX = window.innerWidth / 2;\n\t\t\tthis._viewHalfY = window.innerHeight / 2;\n\n\t\t} else {\n\n\t\t\tthis._viewHalfX = this.domElement.offsetWidth / 2;\n\t\t\tthis._viewHalfY = this.domElement.offsetHeight / 2;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Rotates the camera towards the defined target position.\n\t *\n\t * @param {number|Vector3} x - The x coordinate of the target position or alternatively a vector representing the target position.\n\t * @param {number} y - The y coordinate of the target position.\n\t * @param {number} z - The z coordinate of the target position.\n\t * @return {FirstPersonControls} A reference to this controls.\n\t */\n\tlookAt( x, y, z ) {\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tthis.object.lookAt( _target );\n\n\t\tthis._setOrientation();\n\n\t\treturn this;\n\n\t}\n\n\tupdate( delta ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\tif ( this.heightSpeed ) {\n\n\t\t\tconst y = MathUtils.clamp( this.object.position.y, this.heightMin, this.heightMax );\n\t\t\tconst heightDelta = y - this.heightMin;\n\n\t\t\tthis._autoSpeedFactor = delta * ( heightDelta * this.heightCoef );\n\n\t\t} else {\n\n\t\t\tthis._autoSpeedFactor = 0.0;\n\n\t\t}\n\n\t\tconst actualMoveSpeed = delta * this.movementSpeed;\n\n\t\tif ( this._moveForward || ( this.autoForward && ! this._moveBackward ) ) this.object.translateZ( - ( actualMoveSpeed + this._autoSpeedFactor ) );\n\t\tif ( this._moveBackward ) this.object.translateZ( actualMoveSpeed );\n\n\t\tif ( this._moveLeft ) this.object.translateX( - actualMoveSpeed );\n\t\tif ( this._moveRight ) this.object.translateX( actualMoveSpeed );\n\n\t\tif ( this._moveUp ) this.object.translateY( actualMoveSpeed );\n\t\tif ( this._moveDown ) this.object.translateY( - actualMoveSpeed );\n\n\t\tlet actualLookSpeed = delta * this.lookSpeed;\n\n\t\tif ( ! this.activeLook ) {\n\n\t\t\tactualLookSpeed = 0;\n\n\t\t}\n\n\t\tlet verticalLookRatio = 1;\n\n\t\tif ( this.constrainVertical ) {\n\n\t\t\tverticalLookRatio = Math.PI / ( this.verticalMax - this.verticalMin );\n\n\t\t}\n\n\t\tthis._lon -= this._pointerX * actualLookSpeed;\n\t\tif ( this.lookVertical ) this._lat -= this._pointerY * actualLookSpeed * verticalLookRatio;\n\n\t\tthis._lat = Math.max( - 85, Math.min( 85, this._lat ) );\n\n\t\tlet phi = MathUtils.degToRad( 90 - this._lat );\n\t\tconst theta = MathUtils.degToRad( this._lon );\n\n\t\tif ( this.constrainVertical ) {\n\n\t\t\tphi = MathUtils.mapLinear( phi, 0, Math.PI, this.verticalMin, this.verticalMax );\n\n\t\t}\n\n\t\tconst position = this.object.position;\n\n\t\t_targetPosition.setFromSphericalCoords( 1, phi, theta ).add( position );\n\n\t\tthis.object.lookAt( _targetPosition );\n\n\t}\n\n\t_setOrientation() {\n\n\t\tconst quaternion = this.object.quaternion;\n\n\t\t_lookDirection.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\t\t_spherical.setFromVector3( _lookDirection );\n\n\t\tthis._lat = 90 - MathUtils.radToDeg( _spherical.phi );\n\t\tthis._lon = MathUtils.radToDeg( _spherical.theta );\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.domElement !== document ) {\n\n\t\tthis.domElement.focus();\n\n\t}\n\n\tif ( this.activeLook ) {\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0: this._moveForward = true; break;\n\t\t\tcase 2: this._moveBackward = true; break;\n\n\t\t}\n\n\t}\n\n\tthis.mouseDragOn = true;\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( this.activeLook ) {\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0: this._moveForward = false; break;\n\t\t\tcase 2: this._moveBackward = false; break;\n\n\t\t}\n\n\t}\n\n\tthis.mouseDragOn = false;\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.domElement === document ) {\n\n\t\tthis._pointerX = event.pageX - this._viewHalfX;\n\t\tthis._pointerY = event.pageY - this._viewHalfY;\n\n\t} else {\n\n\t\tthis._pointerX = event.pageX - this.domElement.offsetLeft - this._viewHalfX;\n\t\tthis._pointerY = event.pageY - this.domElement.offsetTop - this._viewHalfY;\n\n\t}\n\n}\n\nfunction onKeyDown( event ) {\n\n\tswitch ( event.code ) {\n\n\t\tcase 'ArrowUp':\n\t\tcase 'KeyW': this._moveForward = true; break;\n\n\t\tcase 'ArrowLeft':\n\t\tcase 'KeyA': this._moveLeft = true; break;\n\n\t\tcase 'ArrowDown':\n\t\tcase 'KeyS': this._moveBackward = true; break;\n\n\t\tcase 'ArrowRight':\n\t\tcase 'KeyD': this._moveRight = true; break;\n\n\t\tcase 'KeyR': this._moveUp = true; break;\n\t\tcase 'KeyF': this._moveDown = true; break;\n\n\t}\n\n}\n\nfunction onKeyUp( event ) {\n\n\tswitch ( event.code ) {\n\n\t\tcase 'ArrowUp':\n\t\tcase 'KeyW': this._moveForward = false; break;\n\n\t\tcase 'ArrowLeft':\n\t\tcase 'KeyA': this._moveLeft = false; break;\n\n\t\tcase 'ArrowDown':\n\t\tcase 'KeyS': this._moveBackward = false; break;\n\n\t\tcase 'ArrowRight':\n\t\tcase 'KeyD': this._moveRight = false; break;\n\n\t\tcase 'KeyR': this._moveUp = false; break;\n\t\tcase 'KeyF': this._moveDown = false; break;\n\n\t}\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nexport { FirstPersonControls };\n","size_bytes":9317},"THREE.examples/controls/FlyControls.js":{"content":"import {\n\tControls,\n\tQuaternion,\n\tVector3\n} from 'three';\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event FlyControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\nconst _EPS = 0.000001;\nconst _tmpQuaternion = new Quaternion();\n\n/**\n * This class enables a navigation similar to fly modes in DCC tools like Blender.\n * You can arbitrarily transform the camera in 3D space without any limitations\n * (e.g. focus on a specific target).\n *\n * @augments Controls\n * @three_import import { FlyControls } from 'three/addons/controls/FlyControls.js';\n */\nclass FlyControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Object3D} object - The object that is managed by the controls.\n\t * @param {?HTMLElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\t/**\n\t\t * The movement speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.movementSpeed = 1.0;\n\n\t\t/**\n\t\t * The rotation speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.005\n\t\t */\n\t\tthis.rollSpeed = 0.005;\n\n\t\t/**\n\t\t * If set to `true`, you can only look around by performing a drag interaction.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.dragToLook = false;\n\n\t\t/**\n\t\t * If set to `true`, the camera automatically moves forward (and does not stop) when initially translated.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.autoForward = false;\n\n\t\t// internals\n\n\t\tthis._moveState = { up: 0, down: 0, left: 0, right: 0, forward: 0, back: 0, pitchUp: 0, pitchDown: 0, yawLeft: 0, yawRight: 0, rollLeft: 0, rollRight: 0 };\n\t\tthis._moveVector = new Vector3( 0, 0, 0 );\n\t\tthis._rotationVector = new Vector3( 0, 0, 0 );\n\t\tthis._lastQuaternion = new Quaternion();\n\t\tthis._lastPosition = new Vector3();\n\t\tthis._status = 0;\n\n\t\t// event listeners\n\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\t\tthis._onKeyUp = onKeyUp.bind( this );\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onPointerCancel = onPointerCancel.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\n\t\t//\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t}\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\twindow.addEventListener( 'keydown', this._onKeyDown );\n\t\twindow.addEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\n\t}\n\n\tdisconnect() {\n\n\t\twindow.removeEventListener( 'keydown', this._onKeyDown );\n\t\twindow.removeEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\tupdate( delta ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\tconst object = this.object;\n\n\t\tconst moveMult = delta * this.movementSpeed;\n\t\tconst rotMult = delta * this.rollSpeed;\n\n\t\tobject.translateX( this._moveVector.x * moveMult );\n\t\tobject.translateY( this._moveVector.y * moveMult );\n\t\tobject.translateZ( this._moveVector.z * moveMult );\n\n\t\t_tmpQuaternion.set( this._rotationVector.x * rotMult, this._rotationVector.y * rotMult, this._rotationVector.z * rotMult, 1 ).normalize();\n\t\tobject.quaternion.multiply( _tmpQuaternion );\n\n\t\tif (\n\t\t\tthis._lastPosition.distanceToSquared( object.position ) > _EPS ||\n\t\t\t8 * ( 1 - this._lastQuaternion.dot( object.quaternion ) ) > _EPS\n\t\t) {\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\tthis._lastQuaternion.copy( object.quaternion );\n\t\t\tthis._lastPosition.copy( object.position );\n\n\t\t}\n\n\t}\n\n\t// private\n\n\t_updateMovementVector() {\n\n\t\tconst forward = ( this._moveState.forward || ( this.autoForward && ! this._moveState.back ) ) ? 1 : 0;\n\n\t\tthis._moveVector.x = ( - this._moveState.left + this._moveState.right );\n\t\tthis._moveVector.y = ( - this._moveState.down + this._moveState.up );\n\t\tthis._moveVector.z = ( - forward + this._moveState.back );\n\n\t\t//console.log( 'move:', [ this._moveVector.x, this._moveVector.y, this._moveVector.z ] );\n\n\t}\n\n\t_updateRotationVector() {\n\n\t\tthis._rotationVector.x = ( - this._moveState.pitchDown + this._moveState.pitchUp );\n\t\tthis._rotationVector.y = ( - this._moveState.yawRight + this._moveState.yawLeft );\n\t\tthis._rotationVector.z = ( - this._moveState.rollRight + this._moveState.rollLeft );\n\n\t\t//console.log( 'rotate:', [ this._rotationVector.x, this._rotationVector.y, this._rotationVector.z ] );\n\n\t}\n\n\t_getContainerDimensions() {\n\n\t\tif ( this.domElement != document ) {\n\n\t\t\treturn {\n\t\t\t\tsize: [ this.domElement.offsetWidth, this.domElement.offsetHeight ],\n\t\t\t\toffset: [ this.domElement.offsetLeft, this.domElement.offsetTop ]\n\t\t\t};\n\n\t\t} else {\n\n\t\t\treturn {\n\t\t\t\tsize: [ window.innerWidth, window.innerHeight ],\n\t\t\t\toffset: [ 0, 0 ]\n\t\t\t};\n\n\t\t}\n\n\t}\n\n}\n\nfunction onKeyDown( event ) {\n\n\tif ( event.altKey || this.enabled === false ) {\n\n\t\treturn;\n\n\t}\n\n\tswitch ( event.code ) {\n\n\t\tcase 'ShiftLeft':\n\t\tcase 'ShiftRight': this.movementSpeedMultiplier = .1; break;\n\n\t\tcase 'KeyW': this._moveState.forward = 1; break;\n\t\tcase 'KeyS': this._moveState.back = 1; break;\n\n\t\tcase 'KeyA': this._moveState.left = 1; break;\n\t\tcase 'KeyD': this._moveState.right = 1; break;\n\n\t\tcase 'KeyR': this._moveState.up = 1; break;\n\t\tcase 'KeyF': this._moveState.down = 1; break;\n\n\t\tcase 'ArrowUp': this._moveState.pitchUp = 1; break;\n\t\tcase 'ArrowDown': this._moveState.pitchDown = 1; break;\n\n\t\tcase 'ArrowLeft': this._moveState.yawLeft = 1; break;\n\t\tcase 'ArrowRight': this._moveState.yawRight = 1; break;\n\n\t\tcase 'KeyQ': this._moveState.rollLeft = 1; break;\n\t\tcase 'KeyE': this._moveState.rollRight = 1; break;\n\n\t}\n\n\tthis._updateMovementVector();\n\tthis._updateRotationVector();\n\n}\n\nfunction onKeyUp( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tswitch ( event.code ) {\n\n\t\tcase 'ShiftLeft':\n\t\tcase 'ShiftRight': this.movementSpeedMultiplier = 1; break;\n\n\t\tcase 'KeyW': this._moveState.forward = 0; break;\n\t\tcase 'KeyS': this._moveState.back = 0; break;\n\n\t\tcase 'KeyA': this._moveState.left = 0; break;\n\t\tcase 'KeyD': this._moveState.right = 0; break;\n\n\t\tcase 'KeyR': this._moveState.up = 0; break;\n\t\tcase 'KeyF': this._moveState.down = 0; break;\n\n\t\tcase 'ArrowUp': this._moveState.pitchUp = 0; break;\n\t\tcase 'ArrowDown': this._moveState.pitchDown = 0; break;\n\n\t\tcase 'ArrowLeft': this._moveState.yawLeft = 0; break;\n\t\tcase 'ArrowRight': this._moveState.yawRight = 0; break;\n\n\t\tcase 'KeyQ': this._moveState.rollLeft = 0; break;\n\t\tcase 'KeyE': this._moveState.rollRight = 0; break;\n\n\t}\n\n\tthis._updateMovementVector();\n\tthis._updateRotationVector();\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this.dragToLook ) {\n\n\t\tthis._status ++;\n\n\t} else {\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0: this._moveState.forward = 1; break;\n\t\t\tcase 2: this._moveState.back = 1; break;\n\n\t\t}\n\n\t\tthis._updateMovementVector();\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( ! this.dragToLook || this._status > 0 ) {\n\n\t\tconst container = this._getContainerDimensions();\n\t\tconst halfWidth = container.size[ 0 ] / 2;\n\t\tconst halfHeight = container.size[ 1 ] / 2;\n\n\t\tthis._moveState.yawLeft = - ( ( event.pageX - container.offset[ 0 ] ) - halfWidth ) / halfWidth;\n\t\tthis._moveState.pitchDown = ( ( event.pageY - container.offset[ 1 ] ) - halfHeight ) / halfHeight;\n\n\t\tthis._updateRotationVector();\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this.dragToLook ) {\n\n\t\tthis._status --;\n\n\t\tthis._moveState.yawLeft = this._moveState.pitchDown = 0;\n\n\t} else {\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0: this._moveState.forward = 0; break;\n\t\t\tcase 2: this._moveState.back = 0; break;\n\n\t\t}\n\n\t\tthis._updateMovementVector();\n\n\t}\n\n\tthis._updateRotationVector();\n\n}\n\nfunction onPointerCancel() {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this.dragToLook ) {\n\n\t\tthis._status = 0;\n\n\t\tthis._moveState.yawLeft = this._moveState.pitchDown = 0;\n\n\t} else {\n\n\t\tthis._moveState.forward = 0;\n\t\tthis._moveState.back = 0;\n\n\t\tthis._updateMovementVector();\n\n\t}\n\n\tthis._updateRotationVector();\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nexport { FlyControls };\n","size_bytes":8887},"THREE.examples/controls/MapControls.js":{"content":"import { MOUSE, TOUCH } from 'three';\n\nimport { OrbitControls } from './OrbitControls.js';\n\n/**\n * This class is intended for transforming a camera over a map from bird's eye perspective.\n * The class shares its implementation with {@link OrbitControls} but uses a specific preset\n * for mouse/touch interaction and disables screen space panning by default.\n *\n * - Orbit: Right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate.\n * - Zoom: Middle mouse, or mousewheel / touch: two-finger spread or squish.\n * - Pan: Left mouse, or arrow keys / touch: one-finger move.\n *\n * @augments OrbitControls\n * @three_import import { MapControls } from 'three/addons/controls/MapControls.js';\n */\nclass MapControls extends OrbitControls {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper( object, domElement );\n\n\t\t/**\n\t\t * Overwritten and set to `false` to pan orthogonal to world-space direction `camera.up`.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.screenSpacePanning = false;\n\n\t\t/**\n\t\t * This object contains references to the mouse actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tLEFT: THREE.MOUSE.PAN,\n\t\t * \tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t * \tRIGHT: THREE.MOUSE.ROTATE\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.mouseButtons = { LEFT: MOUSE.PAN, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.ROTATE };\n\n\t\t/**\n\t\t * This object contains references to the touch actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tONE: THREE.TOUCH.PAN,\n\t\t * \tTWO: THREE.TOUCH.DOLLY_ROTATE\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.touches = { ONE: TOUCH.PAN, TWO: TOUCH.DOLLY_ROTATE };\n\n\t}\n\n}\n\nexport { MapControls };\n","size_bytes":1694},"THREE.examples/controls/OrbitControls.js":{"content":"import * as THREE from 'three';\nconst Controls = THREE.EventDispatcher;\nconst MOUSE = THREE.MOUSE;\nconst TOUCH = THREE.TOUCH;\nconst Quaternion = THREE.Quaternion;\nconst Vector2 = THREE.Vector2;\nconst Vector3 = THREE.Vector3;\nconst Plane = THREE.Plane;\nconst Ray = THREE.Ray;\nconst Spherical = THREE.Spherical;\nconst MathUtils = THREE.MathUtils;\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\n// ...existing code...\n\nconst _ray = new Ray();\nconst _plane = new Plane();\nconst _TILT_LIMIT = Math.cos( 70 * MathUtils.DEG2RAD );\n\nconst _EPS = 0.000001;\n\n\n/**\n * Orbit controls allow the camera to orbit around a target.\n *\n * OrbitControls performs orbiting, dollying (zooming), and panning. Unlike {@link TrackballControls},\n * it maintains the \"up\" direction `object.up` (+Y by default).\n *\n * - Orbit: Left mouse / touch: one-finger move.\n * - Zoom: Middle mouse, or mousewheel / touch: two-finger spread or squish.\n * - Pan: Right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move.\n *\n * ```js\n * const controls = new OrbitControls( camera, renderer.domElement );\n *\n * // controls.update() must be called after any manual changes to the camera's transform\n * camera.position.set( 0, 20, 100 );\n * controls.update();\n *\n * function animate() {\n *\n * \t// required if controls.enableDamping or controls.autoRotate are set to true\n * \tcontrols.update();\n *\n * \trenderer.render( scene, camera );\n *\n * }\n * ```\n *\n * @augments Controls\n * @three_import import { OrbitControls } from 'three/addons/controls/OrbitControls.js';\n */\nclass OrbitControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Object3D} object - The object that is managed by the controls.\n\t * @param {?HTMLElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.state = _STATE.NONE;\n\n\t\t/**\n\t\t * The focus point of the controls, the `object` orbits around this.\n\t\t * It can be updated manually at any point to change the focus of the controls.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target = new Vector3();\n\n\t\t/**\n\t\t * The focus point of the `minTargetRadius` and `maxTargetRadius` limits.\n\t\t * It can be updated manually at any point to change the center of interest\n\t\t * for the `target`.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.cursor = new Vector3();\n\n\t\t/**\n\t\t * How far you can dolly in (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minDistance = 0;\n\n\t\t/**\n\t\t * How far you can dolly out (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxDistance = Infinity;\n\n\t\t/**\n\t\t * How far you can zoom in (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minZoom = 0;\n\n\t\t/**\n\t\t * How far you can zoom out (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxZoom = Infinity;\n\n\t\t/**\n\t\t * How close you can get the target to the 3D `cursor`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minTargetRadius = 0;\n\n\t\t/**\n\t\t * How far you can move the target from the 3D `cursor`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxTargetRadius = Infinity;\n\n\t\t/**\n\t\t * How far you can orbit vertically, lower limit. Range is `[0, Math.PI]` radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minPolarAngle = 0;\n\n\t\t/**\n\t\t * How far you can orbit vertically, upper limit. Range is `[0, Math.PI]` radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Math.PI\n\t\t */\n\t\tthis.maxPolarAngle = Math.PI;\n\n\t\t/**\n\t\t * How far you can orbit horizontally, lower limit. If set, the interval `[ min, max ]`\n\t\t * must be a sub-interval of `[ - 2 PI, 2 PI ]`, with `( max - min < 2 PI )`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tthis.minAzimuthAngle = - Infinity;\n\n\t\t/**\n\t\t * How far you can orbit horizontally, upper limit. If set, the interval `[ min, max ]`\n\t\t * must be a sub-interval of `[ - 2 PI, 2 PI ]`, with `( max - min < 2 PI )`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tthis.maxAzimuthAngle = Infinity;\n\n\t\t/**\n\t\t * Set to `true` to enable damping (inertia), which can be used to give a sense of weight\n\t\t * to the controls. Note that if this is enabled, you must call `update()` in your animation\n\t\t * loop.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.enableDamping = false;\n\n\t\t/**\n\t\t * The damping inertia used if `enableDamping` is set to `true`.\n\t\t *\n\t\t * Note that for this to work, you must call `update()` in your animation loop.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.05\n\t\t */\n\t\tthis.dampingFactor = 0.05;\n\n\t\t/**\n\t\t * Enable or disable zooming (dollying) of the camera.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableZoom = true;\n\n\t\t/**\n\t\t * Speed of zooming / dollying.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t/**\n\t\t * Enable or disable horizontal and vertical rotation of the camera.\n\t\t *\n\t\t * Note that it is possible to disable a single axis by setting the min and max of the\n\t\t * `minPolarAngle` or `minAzimuthAngle` to the same value, which will cause the vertical\n\t\t * or horizontal rotation to be fixed at that value.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableRotate = true;\n\n\t\t/**\n\t\t * Speed of rotation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t/**\n\t\t * How fast to rotate the camera when the keyboard is used.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.keyRotateSpeed = 1.0;\n\n\t\t/**\n\t\t * Enable or disable camera panning.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enablePan = true;\n\n\t\t/**\n\t\t * Speed of panning.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.panSpeed = 1.0;\n\n\t\t/**\n\t\t * Defines how the camera's position is translated when panning. If `true`, the camera pans\n\t\t * in screen space. Otherwise, the camera pans in the plane orthogonal to the camera's up\n\t\t * direction.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.screenSpacePanning = true;\n\n\t\t/**\n\t\t * How fast to pan the camera when the keyboard is used in\n\t\t * pixels per keypress.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 7\n\t\t */\n\t\tthis.keyPanSpeed = 7.0;\n\n\t\t/**\n\t\t * Setting this property to `true` allows to zoom to the cursor's position.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.zoomToCursor = false;\n\n\t\t/**\n\t\t * Set to true to automatically rotate around the target\n\t\t *\n\t\t * Note that if this is enabled, you must call `update()` in your animation loop.\n\t\t * If you want the auto-rotate speed to be independent of the frame rate (the refresh\n\t\t * rate of the display), you must pass the time `deltaTime`, in seconds, to `update()`.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.autoRotate = false;\n\n\t\t/**\n\t\t * How fast to rotate around the target if `autoRotate` is `true`. The default  equates to 30 seconds\n\t\t * per orbit at 60fps.\n\t\t *\n\t\t * Note that if `autoRotate` is enabled, you must call `update()` in your animation loop.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 2\n\t\t */\n\t\tthis.autoRotateSpeed = 2.0;\n\n\t\t/**\n\t\t * This object contains references to the keycodes for controlling camera panning.\n\t\t *\n\t\t * ```js\n\t\t * controls.keys = {\n\t\t * \tLEFT: 'ArrowLeft', //left arrow\n\t\t * \tUP: 'ArrowUp', // up arrow\n\t\t * \tRIGHT: 'ArrowRight', // right arrow\n\t\t * \tBOTTOM: 'ArrowDown' // down arrow\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t/**\n\t\t * This object contains references to the mouse actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tLEFT: THREE.MOUSE.ROTATE,\n\t\t * \tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t * \tRIGHT: THREE.MOUSE.PAN\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t/**\n\t\t * This object contains references to the touch actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tONE: THREE.TOUCH.ROTATE,\n\t\t * \tTWO: THREE.TOUCH.DOLLY_PAN\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t/**\n\t\t * Used internally by `saveState()` and `reset()`.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target0 = this.target.clone();\n\n\t\t/**\n\t\t * Used internally by `saveState()` and `reset()`.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.position0 = this.object.position.clone();\n\n\t\t/**\n\t\t * Used internally by `saveState()` and `reset()`.\n\t\t *\n\t\t * @type {number}\n\t\t */\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t// internals\n\n\t\tthis._lastPosition = new Vector3();\n\t\tthis._lastQuaternion = new Quaternion();\n\t\tthis._lastTargetPosition = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tthis._quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tthis._quatInverse = this._quat.clone().invert();\n\n\t\t// current position in spherical coordinates\n\t\tthis._spherical = new Spherical();\n\t\tthis._sphericalDelta = new Spherical();\n\n\t\tthis._scale = 1;\n\t\tthis._panOffset = new Vector3();\n\n\t\tthis._rotateStart = new Vector2();\n\t\tthis._rotateEnd = new Vector2();\n\t\tthis._rotateDelta = new Vector2();\n\n\t\tthis._panStart = new Vector2();\n\t\tthis._panEnd = new Vector2();\n\t\tthis._panDelta = new Vector2();\n\n\t\tthis._dollyStart = new Vector2();\n\t\tthis._dollyEnd = new Vector2();\n\t\tthis._dollyDelta = new Vector2();\n\n\t\tthis._dollyDirection = new Vector3();\n\t\tthis._mouse = new Vector2();\n\t\tthis._performCursorZoom = false;\n\n\t\tthis._pointers = [];\n\t\tthis._pointerPositions = {};\n\n\t\tthis._controlActive = false;\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onMouseWheel = onMouseWheel.bind( this );\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\n\t\tthis._onTouchStart = onTouchStart.bind( this );\n\t\tthis._onTouchMove = onTouchMove.bind( this );\n\n\t\tthis._onMouseDown = onMouseDown.bind( this );\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\n\t\tthis._interceptControlDown = interceptControlDown.bind( this );\n\t\tthis._interceptControlUp = interceptControlUp.bind( this );\n\n\t\t//\n\n\t\tif ( this.domElement !== null ) {\n\n\t\t\tthis.connect( this.domElement );\n\n\t\t}\n\n\t\tthis.update();\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerUp );\n\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\t\tthis.domElement.addEventListener( 'wheel', this._onMouseWheel, { passive: false } );\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\t\tdocument.addEventListener( 'keydown', this._interceptControlDown, { passive: true, capture: true } );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerUp );\n\n\t\tthis.domElement.removeEventListener( 'wheel', this._onMouseWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.stopListenToKeyEvents();\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\t\tdocument.removeEventListener( 'keydown', this._interceptControlDown, { capture: true } );\n\n\t\tthis.domElement.style.touchAction = 'auto';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\t/**\n\t * Get the current vertical rotation, in radians.\n\t *\n\t * @return {number} The current vertical rotation, in radians.\n\t */\n\tgetPolarAngle() {\n\n\t\treturn this._spherical.phi;\n\n\t}\n\n\t/**\n\t * Get the current horizontal rotation, in radians.\n\t *\n\t * @return {number} The current horizontal rotation, in radians.\n\t */\n\tgetAzimuthalAngle() {\n\n\t\treturn this._spherical.theta;\n\n\t}\n\n\t/**\n\t * Returns the distance from the camera to the target.\n\t *\n\t * @return {number} The distance from the camera to the target.\n\t */\n\tgetDistance() {\n\n\t\treturn this.object.position.distanceTo( this.target );\n\n\t}\n\n\t/**\n\t * Adds key event listeners to the given DOM element.\n\t * `window` is a recommended argument for using this method.\n\t *\n\t * @param {HTMLElement} domElement - The DOM element\n\t */\n\tlistenToKeyEvents( domElement ) {\n\n\t\tdomElement.addEventListener( 'keydown', this._onKeyDown );\n\t\tthis._domElementKeyEvents = domElement;\n\n\t}\n\n\t/**\n\t * Removes the key event listener previously defined with `listenToKeyEvents()`.\n\t */\n\tstopListenToKeyEvents() {\n\n\t\tif ( this._domElementKeyEvents !== null ) {\n\n\t\t\tthis._domElementKeyEvents.removeEventListener( 'keydown', this._onKeyDown );\n\t\t\tthis._domElementKeyEvents = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Save the current state of the controls. This can later be recovered with `reset()`.\n\t */\n\tsaveState() {\n\n\t\tthis.target0.copy( this.target );\n\t\tthis.position0.copy( this.object.position );\n\t\tthis.zoom0 = this.object.zoom;\n\n\t}\n\n\t/**\n\t * Reset the controls to their state from either the last time the `saveState()`\n\t * was called, or the initial state.\n\t */\n\treset() {\n\n\t\tthis.target.copy( this.target0 );\n\t\tthis.object.position.copy( this.position0 );\n\t\tthis.object.zoom = this.zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t\tthis.update();\n\n\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tupdate( deltaTime = null ) {\n\n\t\tconst position = this.object.position;\n\n\t\t_v.copy( position ).sub( this.target );\n\n\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t_v.applyQuaternion( this._quat );\n\n\t\t// angle from z-axis around y-axis\n\t\tthis._spherical.setFromVector3( _v );\n\n\t\tif ( this.autoRotate && this.state === _STATE.NONE ) {\n\n\t\t\tthis._rotateLeft( this._getAutoRotationAngle( deltaTime ) );\n\n\t\t}\n\n\t\tif ( this.enableDamping ) {\n\n\t\t\tthis._spherical.theta += this._sphericalDelta.theta * this.dampingFactor;\n\t\t\tthis._spherical.phi += this._sphericalDelta.phi * this.dampingFactor;\n\n\t\t} else {\n\n\t\t\tthis._spherical.theta += this._sphericalDelta.theta;\n\t\t\tthis._spherical.phi += this._sphericalDelta.phi;\n\n\t\t}\n\n\t\t// restrict theta to be between desired limits\n\n\t\tlet min = this.minAzimuthAngle;\n\t\tlet max = this.maxAzimuthAngle;\n\n\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\tif ( min < - Math.PI ) min += _twoPI; else if ( min > Math.PI ) min -= _twoPI;\n\n\t\t\tif ( max < - Math.PI ) max += _twoPI; else if ( max > Math.PI ) max -= _twoPI;\n\n\t\t\tif ( min <= max ) {\n\n\t\t\t\tthis._spherical.theta = Math.max( min, Math.min( max, this._spherical.theta ) );\n\n\t\t\t} else {\n\n\t\t\t\tthis._spherical.theta = ( this._spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\tMath.max( min, this._spherical.theta ) :\n\t\t\t\t\tMath.min( max, this._spherical.theta );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restrict phi to be between desired limits\n\t\tthis._spherical.phi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, this._spherical.phi ) );\n\n\t\tthis._spherical.makeSafe();\n\n\n\t\t// move target to panned location\n\n\t\tif ( this.enableDamping === true ) {\n\n\t\t\tthis.target.addScaledVector( this._panOffset, this.dampingFactor );\n\n\t\t} else {\n\n\t\t\tthis.target.add( this._panOffset );\n\n\t\t}\n\n\t\t// Limit the target distance from the cursor to create a sphere around the center of interest\n\t\tthis.target.sub( this.cursor );\n\t\tthis.target.clampLength( this.minTargetRadius, this.maxTargetRadius );\n\t\tthis.target.add( this.cursor );\n\n\t\tlet zoomChanged = false;\n\t\t// adjust the camera position based on zoom only if we're not zooming to the cursor or if it's an ortho camera\n\t\t// we adjust zoom later in these cases\n\t\tif ( this.zoomToCursor && this._performCursorZoom || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._spherical.radius = this._clampDistance( this._spherical.radius );\n\n\t\t} else {\n\n\t\t\tconst prevRadius = this._spherical.radius;\n\t\t\tthis._spherical.radius = this._clampDistance( this._spherical.radius * this._scale );\n\t\t\tzoomChanged = prevRadius != this._spherical.radius;\n\n\t\t}\n\n\t\t_v.setFromSpherical( this._spherical );\n\n\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t_v.applyQuaternion( this._quatInverse );\n\n\t\tposition.copy( this.target ).add( _v );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tif ( this.enableDamping === true ) {\n\n\t\t\tthis._sphericalDelta.theta *= ( 1 - this.dampingFactor );\n\t\t\tthis._sphericalDelta.phi *= ( 1 - this.dampingFactor );\n\n\t\t\tthis._panOffset.multiplyScalar( 1 - this.dampingFactor );\n\n\t\t} else {\n\n\t\t\tthis._sphericalDelta.set( 0, 0, 0 );\n\n\t\t\tthis._panOffset.set( 0, 0, 0 );\n\n\t\t}\n\n\t\t// adjust camera position\n\t\tif ( this.zoomToCursor && this._performCursorZoom ) {\n\n\t\t\tlet newRadius = null;\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t// move the camera down the pointer ray\n\t\t\t\t// this method avoids floating point error\n\t\t\t\tconst prevRadius = _v.length();\n\t\t\t\tnewRadius = this._clampDistance( prevRadius * this._scale );\n\n\t\t\t\tconst radiusDelta = prevRadius - newRadius;\n\t\t\t\tthis.object.position.addScaledVector( this._dollyDirection, radiusDelta );\n\t\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\t\tzoomChanged = !! radiusDelta;\n\n\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t// adjust the ortho camera position based on zoom changes\n\t\t\t\tconst mouseBefore = new Vector3( this._mouse.x, this._mouse.y, 0 );\n\t\t\t\tmouseBefore.unproject( this.object );\n\n\t\t\t\tconst prevZoom = this.object.zoom;\n\t\t\t\tthis.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / this._scale ) );\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\tzoomChanged = prevZoom !== this.object.zoom;\n\n\t\t\t\tconst mouseAfter = new Vector3( this._mouse.x, this._mouse.y, 0 );\n\t\t\t\tmouseAfter.unproject( this.object );\n\n\t\t\t\tthis.object.position.sub( mouseAfter ).add( mouseBefore );\n\t\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\t\tnewRadius = _v.length();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.' );\n\t\t\t\tthis.zoomToCursor = false;\n\n\t\t\t}\n\n\t\t\t// handle the placement of the target\n\t\t\tif ( newRadius !== null ) {\n\n\t\t\t\tif ( this.screenSpacePanning ) {\n\n\t\t\t\t\t// position the orbit target in front of the new camera position\n\t\t\t\t\tthis.target.set( 0, 0, - 1 )\n\t\t\t\t\t\t.transformDirection( this.object.matrix )\n\t\t\t\t\t\t.multiplyScalar( newRadius )\n\t\t\t\t\t\t.add( this.object.position );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// get the ray and translation plane to compute target\n\t\t\t\t\t_ray.origin.copy( this.object.position );\n\t\t\t\t\t_ray.direction.set( 0, 0, - 1 ).transformDirection( this.object.matrix );\n\n\t\t\t\t\t// if the camera is 20 degrees above the horizon then don't adjust the focus target to avoid\n\t\t\t\t\t// extremely large values\n\t\t\t\t\tif ( Math.abs( this.object.up.dot( _ray.direction ) ) < _TILT_LIMIT ) {\n\n\t\t\t\t\t\tthis.object.lookAt( this.target );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( this.object.up, this.target );\n\t\t\t\t\t\t_ray.intersectPlane( _plane, this.target );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\tconst prevZoom = this.object.zoom;\n\t\t\tthis.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / this._scale ) );\n\n\t\t\tif ( prevZoom !== this.object.zoom ) {\n\n\t\t\t\tthis.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._scale = 1;\n\t\tthis._performCursorZoom = false;\n\n\t\t// update condition is:\n\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\tif ( zoomChanged ||\n\t\t\tthis._lastPosition.distanceToSquared( this.object.position ) > _EPS ||\n\t\t\t8 * ( 1 - this._lastQuaternion.dot( this.object.quaternion ) ) > _EPS ||\n\t\t\tthis._lastTargetPosition.distanceToSquared( this.target ) > _EPS ) {\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\tthis._lastPosition.copy( this.object.position );\n\t\t\tthis._lastQuaternion.copy( this.object.quaternion );\n\t\t\tthis._lastTargetPosition.copy( this.target );\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t_getAutoRotationAngle( deltaTime ) {\n\n\t\tif ( deltaTime !== null ) {\n\n\t\t\treturn ( _twoPI / 60 * this.autoRotateSpeed ) * deltaTime;\n\n\t\t} else {\n\n\t\t\treturn _twoPI / 60 / 60 * this.autoRotateSpeed;\n\n\t\t}\n\n\t}\n\n\t_getZoomScale( delta ) {\n\n\t\tconst normalizedDelta = Math.abs( delta * 0.01 );\n\t\treturn Math.pow( 0.95, this.zoomSpeed * normalizedDelta );\n\n\t}\n\n\t_rotateLeft( angle ) {\n\n\t\tthis._sphericalDelta.theta -= angle;\n\n\t}\n\n\t_rotateUp( angle ) {\n\n\t\tthis._sphericalDelta.phi -= angle;\n\n\t}\n\n\t_panLeft( distance, objectMatrix ) {\n\n\t\t_v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t_v.multiplyScalar( - distance );\n\n\t\tthis._panOffset.add( _v );\n\n\t}\n\n\t_panUp( distance, objectMatrix ) {\n\n\t\tif ( this.screenSpacePanning === true ) {\n\n\t\t\t_v.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t} else {\n\n\t\t\t_v.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t_v.crossVectors( this.object.up, _v );\n\n\t\t}\n\n\t\t_v.multiplyScalar( distance );\n\n\t\tthis._panOffset.add( _v );\n\n\t}\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\t_pan( deltaX, deltaY ) {\n\n\t\tconst element = this.domElement;\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t// perspective\n\t\t\tconst position = this.object.position;\n\t\t\t_v.copy( position ).sub( this.target );\n\t\t\tlet targetDistance = _v.length();\n\n\t\t\t// half of the fov is center to top of screen\n\t\t\ttargetDistance *= Math.tan( ( this.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\tthis._panLeft( 2 * deltaX * targetDistance / element.clientHeight, this.object.matrix );\n\t\t\tthis._panUp( 2 * deltaY * targetDistance / element.clientHeight, this.object.matrix );\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t// orthographic\n\t\t\tthis._panLeft( deltaX * ( this.object.right - this.object.left ) / this.object.zoom / element.clientWidth, this.object.matrix );\n\t\t\tthis._panUp( deltaY * ( this.object.top - this.object.bottom ) / this.object.zoom / element.clientHeight, this.object.matrix );\n\n\t\t} else {\n\n\t\t\t// camera neither orthographic nor perspective\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\tthis.enablePan = false;\n\n\t\t}\n\n\t}\n\n\t_dollyOut( dollyScale ) {\n\n\t\tif ( this.object.isPerspectiveCamera || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._scale /= dollyScale;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tthis.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t_dollyIn( dollyScale ) {\n\n\t\tif ( this.object.isPerspectiveCamera || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._scale *= dollyScale;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tthis.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t_updateZoomParameters( x, y ) {\n\n\t\tif ( ! this.zoomToCursor ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._performCursorZoom = true;\n\n\t\tconst rect = this.domElement.getBoundingClientRect();\n\t\tconst dx = x - rect.left;\n\t\tconst dy = y - rect.top;\n\t\tconst w = rect.width;\n\t\tconst h = rect.height;\n\n\t\tthis._mouse.x = ( dx / w ) * 2 - 1;\n\t\tthis._mouse.y = - ( dy / h ) * 2 + 1;\n\n\t\tthis._dollyDirection.set( this._mouse.x, this._mouse.y, 1 ).unproject( this.object ).sub( this.object.position ).normalize();\n\n\t}\n\n\t_clampDistance( dist ) {\n\n\t\treturn Math.max( this.minDistance, Math.min( this.maxDistance, dist ) );\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\t_handleMouseDownRotate( event ) {\n\n\t\tthis._rotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseDownDolly( event ) {\n\n\t\tthis._updateZoomParameters( event.clientX, event.clientX );\n\t\tthis._dollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseDownPan( event ) {\n\n\t\tthis._panStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseMoveRotate( event ) {\n\n\t\tthis._rotateEnd.set( event.clientX, event.clientY );\n\n\t\tthis._rotateDelta.subVectors( this._rotateEnd, this._rotateStart ).multiplyScalar( this.rotateSpeed );\n\n\t\tconst element = this.domElement;\n\n\t\tthis._rotateLeft( _twoPI * this._rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\tthis._rotateUp( _twoPI * this._rotateDelta.y / element.clientHeight );\n\n\t\tthis._rotateStart.copy( this._rotateEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseMoveDolly( event ) {\n\n\t\tthis._dollyEnd.set( event.clientX, event.clientY );\n\n\t\tthis._dollyDelta.subVectors( this._dollyEnd, this._dollyStart );\n\n\t\tif ( this._dollyDelta.y > 0 ) {\n\n\t\t\tthis._dollyOut( this._getZoomScale( this._dollyDelta.y ) );\n\n\t\t} else if ( this._dollyDelta.y < 0 ) {\n\n\t\t\tthis._dollyIn( this._getZoomScale( this._dollyDelta.y ) );\n\n\t\t}\n\n\t\tthis._dollyStart.copy( this._dollyEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseMovePan( event ) {\n\n\t\tthis._panEnd.set( event.clientX, event.clientY );\n\n\t\tthis._panDelta.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.panSpeed );\n\n\t\tthis._pan( this._panDelta.x, this._panDelta.y );\n\n\t\tthis._panStart.copy( this._panEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseWheel( event ) {\n\n\t\tthis._updateZoomParameters( event.clientX, event.clientY );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tthis._dollyIn( this._getZoomScale( event.deltaY ) );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tthis._dollyOut( this._getZoomScale( event.deltaY ) );\n\n\t\t}\n\n\t\tthis.update();\n\n\t}\n\n\t_handleKeyDown( event ) {\n\n\t\tlet needsUpdate = false;\n\n\t\tswitch ( event.code ) {\n\n\t\t\tcase this.keys.UP:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateUp( _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( 0, this.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.BOTTOM:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateUp( - _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( 0, - this.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.LEFT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateLeft( _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( this.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.RIGHT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateLeft( - _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( - this.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.update();\n\n\t\t}\n\n\n\t}\n\n\t_handleTouchStartRotate( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._rotateStart.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._rotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\t_handleTouchStartPan( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._panStart.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._panStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\t_handleTouchStartDolly( event ) {\n\n\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\tconst dx = event.pageX - position.x;\n\t\tconst dy = event.pageY - position.y;\n\n\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tthis._dollyStart.set( 0, distance );\n\n\t}\n\n\t_handleTouchStartDollyPan( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchStartDolly( event );\n\n\t\tif ( this.enablePan ) this._handleTouchStartPan( event );\n\n\t}\n\n\t_handleTouchStartDollyRotate( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchStartDolly( event );\n\n\t\tif ( this.enableRotate ) this._handleTouchStartRotate( event );\n\n\t}\n\n\t_handleTouchMoveRotate( event ) {\n\n\t\tif ( this._pointers.length == 1 ) {\n\n\t\t\tthis._rotateEnd.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._rotateEnd.set( x, y );\n\n\t\t}\n\n\t\tthis._rotateDelta.subVectors( this._rotateEnd, this._rotateStart ).multiplyScalar( this.rotateSpeed );\n\n\t\tconst element = this.domElement;\n\n\t\tthis._rotateLeft( _twoPI * this._rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\tthis._rotateUp( _twoPI * this._rotateDelta.y / element.clientHeight );\n\n\t\tthis._rotateStart.copy( this._rotateEnd );\n\n\t}\n\n\t_handleTouchMovePan( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._panEnd.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._panEnd.set( x, y );\n\n\t\t}\n\n\t\tthis._panDelta.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.panSpeed );\n\n\t\tthis._pan( this._panDelta.x, this._panDelta.y );\n\n\t\tthis._panStart.copy( this._panEnd );\n\n\t}\n\n\t_handleTouchMoveDolly( event ) {\n\n\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\tconst dx = event.pageX - position.x;\n\t\tconst dy = event.pageY - position.y;\n\n\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tthis._dollyEnd.set( 0, distance );\n\n\t\tthis._dollyDelta.set( 0, Math.pow( this._dollyEnd.y / this._dollyStart.y, this.zoomSpeed ) );\n\n\t\tthis._dollyOut( this._dollyDelta.y );\n\n\t\tthis._dollyStart.copy( this._dollyEnd );\n\n\t\tconst centerX = ( event.pageX + position.x ) * 0.5;\n\t\tconst centerY = ( event.pageY + position.y ) * 0.5;\n\n\t\tthis._updateZoomParameters( centerX, centerY );\n\n\t}\n\n\t_handleTouchMoveDollyPan( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchMoveDolly( event );\n\n\t\tif ( this.enablePan ) this._handleTouchMovePan( event );\n\n\t}\n\n\t_handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchMoveDolly( event );\n\n\t\tif ( this.enableRotate ) this._handleTouchMoveRotate( event );\n\n\t}\n\n\t// pointers\n\n\t_addPointer( event ) {\n\n\t\tthis._pointers.push( event.pointerId );\n\n\t}\n\n\t_removePointer( event ) {\n\n\t\tdelete this._pointerPositions[ event.pointerId ];\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ] == event.pointerId ) {\n\n\t\t\t\tthis._pointers.splice( i, 1 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_isTrackingPointer( event ) {\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ] == event.pointerId ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t_trackPointer( event ) {\n\n\t\tlet position = this._pointerPositions[ event.pointerId ];\n\n\t\tif ( position === undefined ) {\n\n\t\t\tposition = new Vector2();\n\t\t\tthis._pointerPositions[ event.pointerId ] = position;\n\n\t\t}\n\n\t\tposition.set( event.pageX, event.pageY );\n\n\t}\n\n\t_getSecondPointerPosition( event ) {\n\n\t\tconst pointerId = ( event.pointerId === this._pointers[ 0 ] ) ? this._pointers[ 1 ] : this._pointers[ 0 ];\n\n\t\treturn this._pointerPositions[ pointerId ];\n\n\t}\n\n\t//\n\n\t_customWheelEvent( event ) {\n\n\t\tconst mode = event.deltaMode;\n\n\t\t// minimal wheel event altered to meet delta-zoom demand\n\t\tconst newEvent = {\n\t\t\tclientX: event.clientX,\n\t\t\tclientY: event.clientY,\n\t\t\tdeltaY: event.deltaY,\n\t\t};\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 1: // LINE_MODE\n\t\t\t\tnewEvent.deltaY *= 16;\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // PAGE_MODE\n\t\t\t\tnewEvent.deltaY *= 100;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t// detect if event was triggered by pinching\n\t\tif ( event.ctrlKey && ! this._controlActive ) {\n\n\t\t\tnewEvent.deltaY *= 10;\n\n\t\t}\n\n\t\treturn newEvent;\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n\t//\n\n\tif ( this._isTrackingPointer( event ) ) return;\n\n\t//\n\n\tthis._addPointer( event );\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchStart( event );\n\n\t} else {\n\n\t\tthis._onMouseDown( event );\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchMove( event );\n\n\t} else {\n\n\t\tthis._onMouseMove( event );\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tthis._removePointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 0:\n\n\t\t\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t\t\tbreak;\n\n\t\tcase 1:\n\n\t\t\tconst pointerId = this._pointers[ 0 ];\n\t\t\tconst position = this._pointerPositions[ pointerId ];\n\n\t\t\t// minimal placeholder event - allows state correction on pointer-up\n\t\t\tthis._onTouchStart( { pointerId: pointerId, pageX: position.x, pageY: position.y } );\n\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onMouseDown( event ) {\n\n\tlet mouseAction;\n\n\tswitch ( event.button ) {\n\n\t\tcase 0:\n\n\t\t\tmouseAction = this.mouseButtons.LEFT;\n\t\t\tbreak;\n\n\t\tcase 1:\n\n\t\t\tmouseAction = this.mouseButtons.MIDDLE;\n\t\t\tbreak;\n\n\t\tcase 2:\n\n\t\t\tmouseAction = this.mouseButtons.RIGHT;\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tmouseAction = - 1;\n\n\t}\n\n\tswitch ( mouseAction ) {\n\n\t\tcase MOUSE.DOLLY:\n\n\t\t\tif ( this.enableZoom === false ) return;\n\n\t\t\tthis._handleMouseDownDolly( event );\n\n\t\t\tthis.state = _STATE.DOLLY;\n\n\t\t\tbreak;\n\n\t\tcase MOUSE.ROTATE:\n\n\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\tthis._handleMouseDownPan( event );\n\n\t\t\t\tthis.state = _STATE.PAN;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\tthis._handleMouseDownRotate( event );\n\n\t\t\t\tthis.state = _STATE.ROTATE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase MOUSE.PAN:\n\n\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\tthis._handleMouseDownRotate( event );\n\n\t\t\t\tthis.state = _STATE.ROTATE;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\tthis._handleMouseDownPan( event );\n\n\t\t\t\tthis.state = _STATE.PAN;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tif ( this.state !== _STATE.NONE ) {\n\n\t\tthis.dispatchEvent( _startEvent );\n\n\t}\n\n}\n\nfunction onMouseMove( event ) {\n\n\tswitch ( this.state ) {\n\n\t\tcase _STATE.ROTATE:\n\n\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\tthis._handleMouseMoveRotate( event );\n\n\t\t\tbreak;\n\n\t\tcase _STATE.DOLLY:\n\n\t\t\tif ( this.enableZoom === false ) return;\n\n\t\t\tthis._handleMouseMoveDolly( event );\n\n\t\t\tbreak;\n\n\t\tcase _STATE.PAN:\n\n\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\tthis._handleMouseMovePan( event );\n\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onMouseWheel( event ) {\n\n\tif ( this.enabled === false || this.enableZoom === false || this.state !== _STATE.NONE ) return;\n\n\tevent.preventDefault();\n\n\tthis.dispatchEvent( _startEvent );\n\n\tthis._handleMouseWheel( this._customWheelEvent( event ) );\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onKeyDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tthis._handleKeyDown( event );\n\n}\n\nfunction onTouchStart( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\n\t\t\tswitch ( this.touches.ONE ) {\n\n\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartRotate( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartPan( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.state = _STATE.NONE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase 2:\n\n\t\t\tswitch ( this.touches.TWO ) {\n\n\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\tif ( this.enableZoom === false && this.enablePan === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartDollyPan( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\tif ( this.enableZoom === false && this.enableRotate === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartDollyRotate( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.state = _STATE.NONE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tif ( this.state !== _STATE.NONE ) {\n\n\t\tthis.dispatchEvent( _startEvent );\n\n\t}\n\n}\n\nfunction onTouchMove( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this.state ) {\n\n\t\tcase _STATE.TOUCH_ROTATE:\n\n\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\tthis._handleTouchMoveRotate( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_PAN:\n\n\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\tthis._handleTouchMovePan( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_DOLLY_PAN:\n\n\t\t\tif ( this.enableZoom === false && this.enablePan === false ) return;\n\n\t\t\tthis._handleTouchMoveDollyPan( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\tif ( this.enableZoom === false && this.enableRotate === false ) return;\n\n\t\t\tthis._handleTouchMoveDollyRotate( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nfunction interceptControlDown( event ) {\n\n\tif ( event.key === 'Control' ) {\n\n\t\tthis._controlActive = true;\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n\t\tdocument.addEventListener( 'keyup', this._interceptControlUp, { passive: true, capture: true } );\n\n\t}\n\n}\n\nfunction interceptControlUp( event ) {\n\n\tif ( event.key === 'Control' ) {\n\n\t\tthis._controlActive = false;\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n\t\tdocument.removeEventListener( 'keyup', this._interceptControlUp, { passive: true, capture: true } );\n\n\t}\n\n}\n\nexport { OrbitControls };\n","size_bytes":38420},"THREE.examples/controls/PointerLockControls.js":{"content":"import {\n\tControls,\n\tEuler,\n\tVector3\n} from 'three';\n\nconst _euler = new Euler( 0, 0, 0, 'YXZ' );\nconst _vector = new Vector3();\n\n/**\n * Fires when the user moves the mouse.\n *\n * @event PointerLockControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when the pointer lock status is \"locked\" (in other words: the mouse is captured).\n *\n * @event PointerLockControls#lock\n * @type {Object}\n */\nconst _lockEvent = { type: 'lock' };\n\n/**\n * Fires when the pointer lock status is \"unlocked\" (in other words: the mouse is not captured anymore).\n *\n * @event PointerLockControls#unlock\n * @type {Object}\n */\nconst _unlockEvent = { type: 'unlock' };\n\nconst _MOUSE_SENSITIVITY = 0.002;\nconst _PI_2 = Math.PI / 2;\n\n/**\n * The implementation of this class is based on the [Pointer Lock API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Pointer_Lock_API}.\n * `PointerLockControls` is a perfect choice for first person 3D games.\n *\n * ```js\n * const controls = new PointerLockControls( camera, document.body );\n *\n * // add event listener to show/hide a UI (e.g. the game's menu)\n * controls.addEventListener( 'lock', function () {\n *\n * \tmenu.style.display = 'none';\n *\n * } );\n *\n * controls.addEventListener( 'unlock', function () {\n *\n * \tmenu.style.display = 'block';\n *\n * } );\n * ```\n *\n * @augments Controls\n * @three_import import { PointerLockControls } from 'three/addons/controls/PointerLockControls.js';\n */\nclass PointerLockControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Camera} camera - The camera that is managed by the controls.\n\t * @param {?HTMLElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( camera, domElement = null ) {\n\n\t\tsuper( camera, domElement );\n\n\t\t/**\n\t\t * Whether the controls are locked or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default false\n\t\t */\n\t\tthis.isLocked = false;\n\n\t\t/**\n\t\t * Camera pitch, lower limit. Range is '[0, Math.PI]' in radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minPolarAngle = 0;\n\n\t\t/**\n\t\t * Camera pitch, upper limit. Range is '[0, Math.PI]' in radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Math.PI\n\t\t */\n\t\tthis.maxPolarAngle = Math.PI;\n\n\t\t/**\n\t\t * Multiplier for how much the pointer movement influences the camera rotation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.pointerSpeed = 1.0;\n\n\t\t// event listeners\n\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\t\tthis._onPointerlockChange = onPointerlockChange.bind( this );\n\t\tthis._onPointerlockError = onPointerlockError.bind( this );\n\n\t\tif ( this.domElement !== null ) {\n\n\t\t\tthis.connect( this.domElement );\n\n\t\t}\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.ownerDocument.addEventListener( 'mousemove', this._onMouseMove );\n\t\tthis.domElement.ownerDocument.addEventListener( 'pointerlockchange', this._onPointerlockChange );\n\t\tthis.domElement.ownerDocument.addEventListener( 'pointerlockerror', this._onPointerlockError );\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.ownerDocument.removeEventListener( 'mousemove', this._onMouseMove );\n\t\tthis.domElement.ownerDocument.removeEventListener( 'pointerlockchange', this._onPointerlockChange );\n\t\tthis.domElement.ownerDocument.removeEventListener( 'pointerlockerror', this._onPointerlockError );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\t/**\n\t * Returns the look direction of the camera.\n\t *\n\t * @param {Vector3} v - The target vector that is used to store the method's result.\n\t * @return {Vector3} The normalized direction vector.\n\t */\n\tgetDirection( v ) {\n\n\t\treturn v.set( 0, 0, - 1 ).applyQuaternion( this.object.quaternion );\n\n\t}\n\n\t/**\n\t * Moves the camera forward parallel to the xz-plane. Assumes camera.up is y-up.\n\t *\n\t * @param {number} distance - The signed distance.\n\t */\n\tmoveForward( distance ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// move forward parallel to the xz-plane\n\t\t// assumes camera.up is y-up\n\n\t\tconst camera = this.object;\n\n\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\t_vector.crossVectors( camera.up, _vector );\n\n\t\tcamera.position.addScaledVector( _vector, distance );\n\n\t}\n\n\t/**\n\t * Moves the camera sidewards parallel to the xz-plane.\n\t *\n\t * @param {number} distance - The signed distance.\n\t */\n\tmoveRight( distance ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\tconst camera = this.object;\n\n\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tcamera.position.addScaledVector( _vector, distance );\n\n\t}\n\n\t/**\n\t * Activates the pointer lock.\n\t *\n\t * @param {boolean} [unadjustedMovement=false] - Disables OS-level adjustment for mouse acceleration, and accesses raw mouse input instead.\n\t * Setting it to true will disable mouse acceleration.\n\t */\n\tlock( unadjustedMovement = false ) {\n\n\t\tthis.domElement.requestPointerLock( {\n\t\t\tunadjustedMovement\n\t\t} );\n\n\t}\n\n\t/**\n\t * Exits the pointer lock.\n\t */\n\tunlock() {\n\n\t\tthis.domElement.ownerDocument.exitPointerLock();\n\n\t}\n\n}\n\n// event listeners\n\nfunction onMouseMove( event ) {\n\n\tif ( this.enabled === false || this.isLocked === false ) return;\n\n\tconst camera = this.object;\n\t_euler.setFromQuaternion( camera.quaternion );\n\n\t_euler.y -= event.movementX * _MOUSE_SENSITIVITY * this.pointerSpeed;\n\t_euler.x -= event.movementY * _MOUSE_SENSITIVITY * this.pointerSpeed;\n\n\t_euler.x = Math.max( _PI_2 - this.maxPolarAngle, Math.min( _PI_2 - this.minPolarAngle, _euler.x ) );\n\n\tcamera.quaternion.setFromEuler( _euler );\n\n\tthis.dispatchEvent( _changeEvent );\n\n}\n\nfunction onPointerlockChange() {\n\n\tif ( this.domElement.ownerDocument.pointerLockElement === this.domElement ) {\n\n\t\tthis.dispatchEvent( _lockEvent );\n\n\t\tthis.isLocked = true;\n\n\t} else {\n\n\t\tthis.dispatchEvent( _unlockEvent );\n\n\t\tthis.isLocked = false;\n\n\t}\n\n}\n\nfunction onPointerlockError() {\n\n\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\n\n}\n\nexport { PointerLockControls };\n","size_bytes":5896},"THREE.examples/controls/TrackballControls.js":{"content":"import {\n\tControls,\n\tMathUtils,\n\tMOUSE,\n\tQuaternion,\n\tVector2,\n\tVector3\n} from 'three';\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event TrackballControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when an interaction was initiated.\n *\n * @event TrackballControls#start\n * @type {Object}\n */\nconst _startEvent = { type: 'start' };\n\n/**\n * Fires when an interaction has finished.\n *\n * @event TrackballControls#end\n * @type {Object}\n */\nconst _endEvent = { type: 'end' };\n\nconst _EPS = 0.000001;\nconst _STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\nconst _v2 = new Vector2();\nconst _mouseChange = new Vector2();\nconst _objectUp = new Vector3();\nconst _pan = new Vector3();\nconst _axis = new Vector3();\nconst _quaternion = new Quaternion();\nconst _eyeDirection = new Vector3();\nconst _objectUpDirection = new Vector3();\nconst _objectSidewaysDirection = new Vector3();\nconst _moveDirection = new Vector3();\n\n/**\n * This class is similar to {@link OrbitControls}. However, it does not maintain a constant camera\n * `up` vector. That means if the camera orbits over the “north” and “south” poles, it does not flip\n * to stay \"right side up\".\n *\n * @augments Controls\n * @three_import import { TrackballControls } from 'three/addons/controls/TrackballControls.js';\n */\nclass TrackballControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Object3D} object - The object that is managed by the controls.\n\t * @param {?HTMLElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\t/**\n\t\t * Represents the properties of the screen. Automatically set when `handleResize()` is called.\n\t\t *\n\t\t * @type {Object}\n\t\t * @readonly\n\t\t */\n\t\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\t\t/**\n\t\t * The rotation speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t/**\n\t\t * The zoom speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1.2\n\t\t */\n\t\tthis.zoomSpeed = 1.2;\n\n\t\t/**\n\t\t * The pan speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.3\n\t\t */\n\t\tthis.panSpeed = 0.3;\n\n\t\t/**\n\t\t * Whether rotation is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noRotate = false;\n\n\t\t/**\n\t\t * Whether zooming is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noZoom = false;\n\n\t\t/**\n\t\t * Whether panning is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noPan = false;\n\n\t\t/**\n\t\t * Whether damping is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.staticMoving = false;\n\n\t\t/**\n\t\t * Defines the intensity of damping. Only considered if `staticMoving` is set to `false`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.2\n\t\t */\n\t\tthis.dynamicDampingFactor = 0.2;\n\n\t\t/**\n\t\t * How far you can dolly in (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minDistance = 0;\n\n\t\t/**\n\t\t * How far you can dolly out (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxDistance = Infinity;\n\n\t\t/**\n\t\t * How far you can zoom in (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minZoom = 0;\n\n\t\t/**\n\t\t * How far you can zoom out (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxZoom = Infinity;\n\n\t\t/**\n\t\t * This array holds keycodes for controlling interactions.\n\t\t *\n\t\t * - When the first defined key is pressed, all mouse interactions (left, middle, right) performs orbiting.\n\t\t * - When the second defined key is pressed, all mouse interactions (left, middle, right) performs zooming.\n\t\t * - When the third defined key is pressed, all mouse interactions (left, middle, right) performs panning.\n\t\t *\n\t\t * Default is *KeyA, KeyS, KeyD* which represents A, S, D.\n\t\t *\n\t\t * @type {Array<string>}\n\t\t */\n\t\tthis.keys = [ 'KeyA' /*A*/, 'KeyS' /*S*/, 'KeyD' /*D*/ ];\n\n\t\t/**\n\t\t * This object contains references to the mouse actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tLEFT: THREE.MOUSE.ROTATE,\n\t\t * \tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t * \tRIGHT: THREE.MOUSE.PAN\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t/**\n\t\t * The focus point of the controls.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target = new Vector3();\n\n\t\t// internals\n\n\t\tthis.state = _STATE.NONE;\n\t\tthis.keyState = _STATE.NONE;\n\n\t\tthis._lastPosition = new Vector3();\n\t\tthis._lastZoom = 1;\n\t\tthis._touchZoomDistanceStart = 0;\n\t\tthis._touchZoomDistanceEnd = 0;\n\t\tthis._lastAngle = 0;\n\n\t\tthis._eye = new Vector3();\n\n\t\tthis._movePrev = new Vector2();\n\t\tthis._moveCurr = new Vector2();\n\n\t\tthis._lastAxis = new Vector3();\n\n\t\tthis._zoomStart = new Vector2();\n\t\tthis._zoomEnd = new Vector2();\n\n\t\tthis._panStart = new Vector2();\n\t\tthis._panEnd = new Vector2();\n\n\t\tthis._pointers = [];\n\t\tthis._pointerPositions = {};\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onPointerCancel = onPointerCancel.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onMouseWheel = onMouseWheel.bind( this );\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\t\tthis._onKeyUp = onKeyUp.bind( this );\n\n\t\tthis._onTouchStart = onTouchStart.bind( this );\n\t\tthis._onTouchMove = onTouchMove.bind( this );\n\t\tthis._onTouchEnd = onTouchEnd.bind( this );\n\n\t\tthis._onMouseDown = onMouseDown.bind( this );\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\t\tthis._onMouseUp = onMouseUp.bind( this );\n\n\t\t// for reset\n\n\t\tthis._target0 = this.target.clone();\n\t\tthis._position0 = this.object.position.clone();\n\t\tthis._up0 = this.object.up.clone();\n\t\tthis._zoom0 = this.object.zoom;\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t\tthis.handleResize();\n\n\t\t}\n\n\t\t// force an update at start\n\t\tthis.update();\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\twindow.addEventListener( 'keydown', this._onKeyDown );\n\t\twindow.addEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.addEventListener( 'wheel', this._onMouseWheel, { passive: false } );\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\twindow.removeEventListener( 'keydown', this._onKeyDown );\n\t\twindow.removeEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.removeEventListener( 'wheel', this._onMouseWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.domElement.style.touchAction = 'auto'; // disable touch scroll\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\t/**\n\t * Must be called if the application window is resized.\n\t */\n\thandleResize() {\n\n\t\tconst box = this.domElement.getBoundingClientRect();\n\t\t// adjustments come from similar code in the jquery offset() function\n\t\tconst d = this.domElement.ownerDocument.documentElement;\n\n\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\tthis.screen.width = box.width;\n\t\tthis.screen.height = box.height;\n\n\t}\n\n\tupdate() {\n\n\t\tthis._eye.subVectors( this.object.position, this.target );\n\n\t\tif ( ! this.noRotate ) {\n\n\t\t\tthis._rotateCamera();\n\n\t\t}\n\n\t\tif ( ! this.noZoom ) {\n\n\t\t\tthis._zoomCamera();\n\n\t\t}\n\n\t\tif ( ! this.noPan ) {\n\n\t\t\tthis._panCamera();\n\n\t\t}\n\n\t\tthis.object.position.addVectors( this.target, this._eye );\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._checkDistances();\n\n\t\t\tthis.object.lookAt( this.target );\n\n\t\t\tif ( this._lastPosition.distanceToSquared( this.object.position ) > _EPS ) {\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\tthis._lastPosition.copy( this.object.position );\n\n\t\t\t}\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\tthis.object.lookAt( this.target );\n\n\t\t\tif ( this._lastPosition.distanceToSquared( this.object.position ) > _EPS || this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\tthis._lastPosition.copy( this.object.position );\n\t\t\t\tthis._lastZoom = this.object.zoom;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Resets the controls to its initial state.\n\t */\n\treset() {\n\n\t\tthis.state = _STATE.NONE;\n\t\tthis.keyState = _STATE.NONE;\n\n\t\tthis.target.copy( this._target0 );\n\t\tthis.object.position.copy( this._position0 );\n\t\tthis.object.up.copy( this._up0 );\n\t\tthis.object.zoom = this._zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\n\t\tthis._eye.subVectors( this.object.position, this.target );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t\tthis._lastPosition.copy( this.object.position );\n\t\tthis._lastZoom = this.object.zoom;\n\n\t}\n\n\t_panCamera() {\n\n\t\t_mouseChange.copy( this._panEnd ).sub( this._panStart );\n\n\t\tif ( _mouseChange.lengthSq() ) {\n\n\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tconst scale_x = ( this.object.right - this.object.left ) / this.object.zoom / this.domElement.clientWidth;\n\t\t\t\tconst scale_y = ( this.object.top - this.object.bottom ) / this.object.zoom / this.domElement.clientWidth;\n\n\t\t\t\t_mouseChange.x *= scale_x;\n\t\t\t\t_mouseChange.y *= scale_y;\n\n\t\t\t}\n\n\t\t\t_mouseChange.multiplyScalar( this._eye.length() * this.panSpeed );\n\n\t\t\t_pan.copy( this._eye ).cross( this.object.up ).setLength( _mouseChange.x );\n\t\t\t_pan.add( _objectUp.copy( this.object.up ).setLength( _mouseChange.y ) );\n\n\t\t\tthis.object.position.add( _pan );\n\t\t\tthis.target.add( _pan );\n\n\t\t\tif ( this.staticMoving ) {\n\n\t\t\t\tthis._panStart.copy( this._panEnd );\n\n\t\t\t} else {\n\n\t\t\t\tthis._panStart.add( _mouseChange.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.dynamicDampingFactor ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_rotateCamera() {\n\n\t\t_moveDirection.set( this._moveCurr.x - this._movePrev.x, this._moveCurr.y - this._movePrev.y, 0 );\n\t\tlet angle = _moveDirection.length();\n\n\t\tif ( angle ) {\n\n\t\t\tthis._eye.copy( this.object.position ).sub( this.target );\n\n\t\t\t_eyeDirection.copy( this._eye ).normalize();\n\t\t\t_objectUpDirection.copy( this.object.up ).normalize();\n\t\t\t_objectSidewaysDirection.crossVectors( _objectUpDirection, _eyeDirection ).normalize();\n\n\t\t\t_objectUpDirection.setLength( this._moveCurr.y - this._movePrev.y );\n\t\t\t_objectSidewaysDirection.setLength( this._moveCurr.x - this._movePrev.x );\n\n\t\t\t_moveDirection.copy( _objectUpDirection.add( _objectSidewaysDirection ) );\n\n\t\t\t_axis.crossVectors( _moveDirection, this._eye ).normalize();\n\n\t\t\tangle *= this.rotateSpeed;\n\t\t\t_quaternion.setFromAxisAngle( _axis, angle );\n\n\t\t\tthis._eye.applyQuaternion( _quaternion );\n\t\t\tthis.object.up.applyQuaternion( _quaternion );\n\n\t\t\tthis._lastAxis.copy( _axis );\n\t\t\tthis._lastAngle = angle;\n\n\t\t} else if ( ! this.staticMoving && this._lastAngle ) {\n\n\t\t\tthis._lastAngle *= Math.sqrt( 1.0 - this.dynamicDampingFactor );\n\t\t\tthis._eye.copy( this.object.position ).sub( this.target );\n\t\t\t_quaternion.setFromAxisAngle( this._lastAxis, this._lastAngle );\n\t\t\tthis._eye.applyQuaternion( _quaternion );\n\t\t\tthis.object.up.applyQuaternion( _quaternion );\n\n\t\t}\n\n\t\tthis._movePrev.copy( this._moveCurr );\n\n\t}\n\n\t_zoomCamera() {\n\n\t\tlet factor;\n\n\t\tif ( this.state === _STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = this._touchZoomDistanceStart / this._touchZoomDistanceEnd;\n\t\t\tthis._touchZoomDistanceStart = this._touchZoomDistanceEnd;\n\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\tthis._eye.multiplyScalar( factor );\n\n\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tthis.object.zoom = MathUtils.clamp( this.object.zoom / factor, this.minZoom, this.maxZoom );\n\n\t\t\t\tif ( this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( this._zoomEnd.y - this._zoomStart.y ) * this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\tthis._eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t\tthis.object.zoom = MathUtils.clamp( this.object.zoom / factor, this.minZoom, this.maxZoom );\n\n\t\t\t\t\tif ( this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.staticMoving ) {\n\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\tthis._zoomStart.y += ( this._zoomEnd.y - this._zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_getMouseOnScreen( pageX, pageY ) {\n\n\t\t_v2.set(\n\t\t\t( pageX - this.screen.left ) / this.screen.width,\n\t\t\t( pageY - this.screen.top ) / this.screen.height\n\t\t);\n\n\t\treturn _v2;\n\n\t}\n\n\t_getMouseOnCircle( pageX, pageY ) {\n\n\t\t_v2.set(\n\t\t\t( ( pageX - this.screen.width * 0.5 - this.screen.left ) / ( this.screen.width * 0.5 ) ),\n\t\t\t( ( this.screen.height + 2 * ( this.screen.top - pageY ) ) / this.screen.width ) // screen.width intentional\n\t\t);\n\n\t\treturn _v2;\n\n\t}\n\n\t_addPointer( event ) {\n\n\t\tthis._pointers.push( event );\n\n\t}\n\n\t_removePointer( event ) {\n\n\t\tdelete this._pointerPositions[ event.pointerId ];\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\tthis._pointers.splice( i, 1 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_trackPointer( event ) {\n\n\t\tlet position = this._pointerPositions[ event.pointerId ];\n\n\t\tif ( position === undefined ) {\n\n\t\t\tposition = new Vector2();\n\t\t\tthis._pointerPositions[ event.pointerId ] = position;\n\n\t\t}\n\n\t\tposition.set( event.pageX, event.pageY );\n\n\t}\n\n\t_getSecondPointerPosition( event ) {\n\n\t\tconst pointer = ( event.pointerId === this._pointers[ 0 ].pointerId ) ? this._pointers[ 1 ] : this._pointers[ 0 ];\n\n\t\treturn this._pointerPositions[ pointer.pointerId ];\n\n\t}\n\n\t_checkDistances() {\n\n\t\tif ( ! this.noZoom || ! this.noPan ) {\n\n\t\t\tif ( this._eye.lengthSq() > this.maxDistance * this.maxDistance ) {\n\n\t\t\t\tthis.object.position.addVectors( this.target, this._eye.setLength( this.maxDistance ) );\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( this._eye.lengthSq() < this.minDistance * this.minDistance ) {\n\n\t\t\t\tthis.object.position.addVectors( this.target, this._eye.setLength( this.minDistance ) );\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n\t//\n\n\tthis._addPointer( event );\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchStart( event );\n\n\t} else {\n\n\t\tthis._onMouseDown( event );\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchMove( event );\n\n\t} else {\n\n\t\tthis._onMouseMove( event );\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchEnd( event );\n\n\t} else {\n\n\t\tthis._onMouseUp();\n\n\t}\n\n\t//\n\n\tthis._removePointer( event );\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n}\n\nfunction onPointerCancel( event ) {\n\n\tthis._removePointer( event );\n\n}\n\nfunction onKeyUp() {\n\n\tif ( this.enabled === false ) return;\n\n\tthis.keyState = _STATE.NONE;\n\n\twindow.addEventListener( 'keydown', this._onKeyDown );\n\n}\n\nfunction onKeyDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\twindow.removeEventListener( 'keydown', this._onKeyDown );\n\n\tif ( this.keyState !== _STATE.NONE ) {\n\n\t\treturn;\n\n\t} else if ( event.code === this.keys[ _STATE.ROTATE ] && ! this.noRotate ) {\n\n\t\tthis.keyState = _STATE.ROTATE;\n\n\t} else if ( event.code === this.keys[ _STATE.ZOOM ] && ! this.noZoom ) {\n\n\t\tthis.keyState = _STATE.ZOOM;\n\n\t} else if ( event.code === this.keys[ _STATE.PAN ] && ! this.noPan ) {\n\n\t\tthis.keyState = _STATE.PAN;\n\n\t}\n\n}\n\nfunction onMouseDown( event ) {\n\n\tlet mouseAction;\n\n\tswitch ( event.button ) {\n\n\t\tcase 0:\n\t\t\tmouseAction = this.mouseButtons.LEFT;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\tmouseAction = this.mouseButtons.MIDDLE;\n\t\t\tbreak;\n\n\t\tcase 2:\n\t\t\tmouseAction = this.mouseButtons.RIGHT;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmouseAction = - 1;\n\n\t}\n\n\tswitch ( mouseAction ) {\n\n\t\tcase MOUSE.DOLLY:\n\t\t\tthis.state = _STATE.ZOOM;\n\t\t\tbreak;\n\n\t\tcase MOUSE.ROTATE:\n\t\t\tthis.state = _STATE.ROTATE;\n\t\t\tbreak;\n\n\t\tcase MOUSE.PAN:\n\t\t\tthis.state = _STATE.PAN;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tconst state = ( this.keyState !== _STATE.NONE ) ? this.keyState : this.state;\n\n\tif ( state === _STATE.ROTATE && ! this.noRotate ) {\n\n\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\tthis._movePrev.copy( this._moveCurr );\n\n\t} else if ( state === _STATE.ZOOM && ! this.noZoom ) {\n\n\t\tthis._zoomStart.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\t\tthis._zoomEnd.copy( this._zoomStart );\n\n\t} else if ( state === _STATE.PAN && ! this.noPan ) {\n\n\t\tthis._panStart.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\t\tthis._panEnd.copy( this._panStart );\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\n}\n\nfunction onMouseMove( event ) {\n\n\tconst state = ( this.keyState !== _STATE.NONE ) ? this.keyState : this.state;\n\n\tif ( state === _STATE.ROTATE && ! this.noRotate ) {\n\n\t\tthis._movePrev.copy( this._moveCurr );\n\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t} else if ( state === _STATE.ZOOM && ! this.noZoom ) {\n\n\t\tthis._zoomEnd.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t} else if ( state === _STATE.PAN && ! this.noPan ) {\n\n\t\tthis._panEnd.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t}\n\n}\n\nfunction onMouseUp() {\n\n\tthis.state = _STATE.NONE;\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onMouseWheel( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this.noZoom === true ) return;\n\n\tevent.preventDefault();\n\n\tswitch ( event.deltaMode ) {\n\n\t\tcase 2:\n\t\t\t// Zoom in pages\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.025;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\t// Zoom in lines\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.01;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\t// undefined, 0, assume pixels\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.00025;\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nfunction onTouchStart( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( this._pointers[ 0 ].pageX, this._pointers[ 0 ].pageY ) );\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tbreak;\n\n\t\tdefault: // 2 or more\n\t\t\tthis.state = _STATE.TOUCH_ZOOM_PAN;\n\t\t\tconst dx = this._pointers[ 0 ].pageX - this._pointers[ 1 ].pageX;\n\t\t\tconst dy = this._pointers[ 0 ].pageY - this._pointers[ 1 ].pageY;\n\t\t\tthis._touchZoomDistanceEnd = this._touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tconst x = ( this._pointers[ 0 ].pageX + this._pointers[ 1 ].pageX ) / 2;\n\t\t\tconst y = ( this._pointers[ 0 ].pageY + this._pointers[ 1 ].pageY ) / 2;\n\t\t\tthis._panStart.copy( this._getMouseOnScreen( x, y ) );\n\t\t\tthis._panEnd.copy( this._panStart );\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\n}\n\nfunction onTouchMove( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\tbreak;\n\n\t\tdefault: // 2 or more\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\t\t\tthis._touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tconst x = ( event.pageX + position.x ) / 2;\n\t\t\tconst y = ( event.pageY + position.y ) / 2;\n\t\t\tthis._panEnd.copy( this._getMouseOnScreen( x, y ) );\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onTouchEnd( event ) {\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 0:\n\t\t\tthis.state = _STATE.NONE;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tbreak;\n\n\t\tcase 2:\n\t\t\tthis.state = _STATE.TOUCH_ZOOM_PAN;\n\n\t\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\t\tif ( this._pointers[ i ].pointerId !== event.pointerId ) {\n\n\t\t\t\t\tconst position = this._pointerPositions[ this._pointers[ i ].pointerId ];\n\t\t\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( position.x, position.y ) );\n\t\t\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nexport { TrackballControls };\n","size_bytes":21659},"THREE.examples/controls/TransformControls.js":{"content":"import {\n\tBoxGeometry,\n\tBufferGeometry,\n\tControls,\n\tCylinderGeometry,\n\tDoubleSide,\n\tEuler,\n\tFloat32BufferAttribute,\n\tLine,\n\tLineBasicMaterial,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tOctahedronGeometry,\n\tPlaneGeometry,\n\tQuaternion,\n\tRaycaster,\n\tSphereGeometry,\n\tTorusGeometry,\n\tVector3\n} from 'three';\n\nconst _raycaster = new Raycaster();\n\nconst _tempVector = new Vector3();\nconst _tempVector2 = new Vector3();\nconst _tempQuaternion = new Quaternion();\nconst _unit = {\n\tX: new Vector3( 1, 0, 0 ),\n\tY: new Vector3( 0, 1, 0 ),\n\tZ: new Vector3( 0, 0, 1 )\n};\n\n/**\n * Fires if any type of change (object or property change) is performed. Property changes\n * are separate events you can add event listeners to. The event type is \"propertyname-changed\".\n *\n * @event TransformControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires if a pointer (mouse/touch) becomes active.\n *\n * @event TransformControls#mouseDown\n * @type {Object}\n */\nconst _mouseDownEvent = { type: 'mouseDown', mode: null };\n\n/**\n * Fires if a pointer (mouse/touch) is no longer active.\n *\n * @event TransformControls#mouseUp\n * @type {Object}\n */\nconst _mouseUpEvent = { type: 'mouseUp', mode: null };\n\n/**\n * Fires if the controlled 3D object is changed.\n *\n * @event TransformControls#objectChange\n * @type {Object}\n */\nconst _objectChangeEvent = { type: 'objectChange' };\n\n/**\n * This class can be used to transform objects in 3D space by adapting a similar interaction model\n * of DCC tools like Blender. Unlike other controls, it is not intended to transform the scene's camera.\n *\n * `TransformControls` expects that its attached 3D object is part of the scene graph.\n *\n * @augments Controls\n * @three_import import { TransformControls } from 'three/addons/controls/TransformControls.js';\n */\nclass TransformControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Camera} camera - The camera of the rendered scene.\n\t * @param {?HTMLElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( camera, domElement = null ) {\n\n\t\tsuper( undefined, domElement );\n\n\t\tconst root = new TransformControlsRoot( this );\n\t\tthis._root = root;\n\n\t\tconst gizmo = new TransformControlsGizmo();\n\t\tthis._gizmo = gizmo;\n\t\troot.add( gizmo );\n\n\t\tconst plane = new TransformControlsPlane();\n\t\tthis._plane = plane;\n\t\troot.add( plane );\n\n\t\tconst scope = this;\n\n\t\t// Defined getter, setter and store for a property\n\t\tfunction defineProperty( propName, defaultValue ) {\n\n\t\t\tlet propValue = defaultValue;\n\n\t\t\tObject.defineProperty( scope, propName, {\n\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn propValue !== undefined ? propValue : defaultValue;\n\n\t\t\t\t},\n\n\t\t\t\tset: function ( value ) {\n\n\t\t\t\t\tif ( propValue !== value ) {\n\n\t\t\t\t\t\tpropValue = value;\n\t\t\t\t\t\tplane[ propName ] = value;\n\t\t\t\t\t\tgizmo[ propName ] = value;\n\n\t\t\t\t\t\tscope.dispatchEvent( { type: propName + '-changed', value: value } );\n\t\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tscope[ propName ] = defaultValue;\n\t\t\tplane[ propName ] = defaultValue;\n\t\t\tgizmo[ propName ] = defaultValue;\n\n\t\t}\n\n\t\t// Define properties with getters/setter\n\t\t// Setting the defined property will automatically trigger change event\n\t\t// Defined properties are passed down to gizmo and plane\n\n\t\t/**\n\t\t * The camera of the rendered scene.\n\t\t *\n\t\t * @name TransformControls#camera\n\t\t * @type {Camera}\n\t\t */\n\t\tdefineProperty( 'camera', camera );\n\t\tdefineProperty( 'object', undefined );\n\t\tdefineProperty( 'enabled', true );\n\n\t\t/**\n\t\t * The current transformation axis.\n\t\t *\n\t\t * @name TransformControls#axis\n\t\t * @type {string}\n\t\t */\n\t\tdefineProperty( 'axis', null );\n\n\t\t/**\n\t\t * The current transformation axis.\n\t\t *\n\t\t * @name TransformControls#mode\n\t\t * @type {('translate'|'rotate'|'scale')}\n\t\t * @default 'translate'\n\t\t */\n\t\tdefineProperty( 'mode', 'translate' );\n\n\t\t/**\n\t\t * By default, 3D objects are continuously translated. If you set this property to a numeric\n\t\t * value (world units), you can define in which steps the 3D object should be translated.\n\t\t *\n\t\t * @name TransformControls#translationSnap\n\t\t * @type {?number}\n\t\t * @default null\n\t\t */\n\t\tdefineProperty( 'translationSnap', null );\n\n\t\t/**\n\t\t * By default, 3D objects are continuously rotated. If you set this property to a numeric\n\t\t * value (radians), you can define in which steps the 3D object should be rotated.\n\t\t *\n\t\t * @name TransformControls#rotationSnap\n\t\t * @type {?number}\n\t\t * @default null\n\t\t */\n\t\tdefineProperty( 'rotationSnap', null );\n\n\t\t/**\n\t\t * By default, 3D objects are continuously scaled. If you set this property to a numeric\n\t\t * value, you can define in which steps the 3D object should be scaled.\n\t\t *\n\t\t * @name TransformControls#scaleSnap\n\t\t * @type {?number}\n\t\t * @default null\n\t\t */\n\t\tdefineProperty( 'scaleSnap', null );\n\n\t\t/**\n\t\t * Defines in which coordinate space transformations should be performed.\n\t\t *\n\t\t * @name TransformControls#space\n\t\t * @type {('world'|'local')}\n\t\t * @default 'world'\n\t\t */\n\t\tdefineProperty( 'space', 'world' );\n\n\t\t/**\n\t\t * The size of the helper UI (axes/planes).\n\t\t *\n\t\t * @name TransformControls#size\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tdefineProperty( 'size', 1 );\n\n\t\t/**\n\t\t * Whether dragging is currently performed or not.\n\t\t *\n\t\t * @name TransformControls#dragging\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default false\n\t\t */\n\t\tdefineProperty( 'dragging', false );\n\n\t\t/**\n\t\t * Whether the x-axis helper should be visible or not.\n\t\t *\n\t\t * @name TransformControls#showX\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tdefineProperty( 'showX', true );\n\n\t\t/**\n\t\t * Whether the y-axis helper should be visible or not.\n\t\t *\n\t\t * @name TransformControls#showY\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tdefineProperty( 'showY', true );\n\n\t\t/**\n\t\t * Whether the z-axis helper should be visible or not.\n\t\t *\n\t\t * @name TransformControls#showZ\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tdefineProperty( 'showZ', true );\n\n\t\t/**\n\t\t * The minimum allowed X position during translation.\n\t\t *\n\t\t * @name TransformControls#minX\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tdefineProperty( 'minX', - Infinity );\n\n\t\t/**\n\t\t * The maximum allowed X position during translation.\n\t\t *\n\t\t * @name TransformControls#maxX\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tdefineProperty( 'maxX', Infinity );\n\n\t\t/**\n\t\t * The minimum allowed y position during translation.\n\t\t *\n\t\t * @name TransformControls#minY\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tdefineProperty( 'minY', - Infinity );\n\n\t\t/**\n\t\t * The maximum allowed Y position during translation.\n\t\t *\n\t\t * @name TransformControls#maxY\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tdefineProperty( 'maxY', Infinity );\n\n\t\t/**\n\t\t * The minimum allowed z position during translation.\n\t\t *\n\t\t * @name TransformControls#minZ\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tdefineProperty( 'minZ', - Infinity );\n\n\t\t/**\n\t\t * The maximum allowed Z position during translation.\n\t\t *\n\t\t * @name TransformControls#maxZ\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tdefineProperty( 'maxZ', Infinity );\n\n\t\t// Reusable utility variables\n\n\t\tconst worldPosition = new Vector3();\n\t\tconst worldPositionStart = new Vector3();\n\t\tconst worldQuaternion = new Quaternion();\n\t\tconst worldQuaternionStart = new Quaternion();\n\t\tconst cameraPosition = new Vector3();\n\t\tconst cameraQuaternion = new Quaternion();\n\t\tconst pointStart = new Vector3();\n\t\tconst pointEnd = new Vector3();\n\t\tconst rotationAxis = new Vector3();\n\t\tconst rotationAngle = 0;\n\t\tconst eye = new Vector3();\n\n\t\t// TODO: remove properties unused in plane and gizmo\n\n\t\tdefineProperty( 'worldPosition', worldPosition );\n\t\tdefineProperty( 'worldPositionStart', worldPositionStart );\n\t\tdefineProperty( 'worldQuaternion', worldQuaternion );\n\t\tdefineProperty( 'worldQuaternionStart', worldQuaternionStart );\n\t\tdefineProperty( 'cameraPosition', cameraPosition );\n\t\tdefineProperty( 'cameraQuaternion', cameraQuaternion );\n\t\tdefineProperty( 'pointStart', pointStart );\n\t\tdefineProperty( 'pointEnd', pointEnd );\n\t\tdefineProperty( 'rotationAxis', rotationAxis );\n\t\tdefineProperty( 'rotationAngle', rotationAngle );\n\t\tdefineProperty( 'eye', eye );\n\n\t\tthis._offset = new Vector3();\n\t\tthis._startNorm = new Vector3();\n\t\tthis._endNorm = new Vector3();\n\t\tthis._cameraScale = new Vector3();\n\n\t\tthis._parentPosition = new Vector3();\n\t\tthis._parentQuaternion = new Quaternion();\n\t\tthis._parentQuaternionInv = new Quaternion();\n\t\tthis._parentScale = new Vector3();\n\n\t\tthis._worldScaleStart = new Vector3();\n\t\tthis._worldQuaternionInv = new Quaternion();\n\t\tthis._worldScale = new Vector3();\n\n\t\tthis._positionStart = new Vector3();\n\t\tthis._quaternionStart = new Quaternion();\n\t\tthis._scaleStart = new Vector3();\n\n\t\tthis._getPointer = getPointer.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerHover = onPointerHover.bind( this );\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t}\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerHover );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerHover );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\tthis.domElement.style.touchAction = 'auto';\n\n\t}\n\n\t/**\n\t * Returns the visual representation of the controls. Add the helper to your scene to\n\t * visually transform the attached  3D object.\n\t *\n\t * @return {TransformControlsRoot} The helper.\n\t */\n\tgetHelper() {\n\n\t\treturn this._root;\n\n\t}\n\n\tpointerHover( pointer ) {\n\n\t\tif ( this.object === undefined || this.dragging === true ) return;\n\n\t\tif ( pointer !== null ) _raycaster.setFromCamera( pointer, this.camera );\n\n\t\tconst intersect = intersectObjectWithRay( this._gizmo.picker[ this.mode ], _raycaster );\n\n\t\tif ( intersect ) {\n\n\t\t\tthis.axis = intersect.object.name;\n\n\t\t} else {\n\n\t\t\tthis.axis = null;\n\n\t\t}\n\n\t}\n\n\tpointerDown( pointer ) {\n\n\t\tif ( this.object === undefined || this.dragging === true || ( pointer != null && pointer.button !== 0 ) ) return;\n\n\t\tif ( this.axis !== null ) {\n\n\t\t\tif ( pointer !== null ) _raycaster.setFromCamera( pointer, this.camera );\n\n\t\t\tconst planeIntersect = intersectObjectWithRay( this._plane, _raycaster, true );\n\n\t\t\tif ( planeIntersect ) {\n\n\t\t\t\tthis.object.updateMatrixWorld();\n\t\t\t\tthis.object.parent.updateMatrixWorld();\n\n\t\t\t\tthis._positionStart.copy( this.object.position );\n\t\t\t\tthis._quaternionStart.copy( this.object.quaternion );\n\t\t\t\tthis._scaleStart.copy( this.object.scale );\n\n\t\t\t\tthis.object.matrixWorld.decompose( this.worldPositionStart, this.worldQuaternionStart, this._worldScaleStart );\n\n\t\t\t\tthis.pointStart.copy( planeIntersect.point ).sub( this.worldPositionStart );\n\n\t\t\t}\n\n\t\t\tthis.dragging = true;\n\t\t\t_mouseDownEvent.mode = this.mode;\n\t\t\tthis.dispatchEvent( _mouseDownEvent );\n\n\t\t}\n\n\t}\n\n\tpointerMove( pointer ) {\n\n\t\tconst axis = this.axis;\n\t\tconst mode = this.mode;\n\t\tconst object = this.object;\n\t\tlet space = this.space;\n\n\t\tif ( mode === 'scale' ) {\n\n\t\t\tspace = 'local';\n\n\t\t} else if ( axis === 'E' || axis === 'XYZE' || axis === 'XYZ' ) {\n\n\t\t\tspace = 'world';\n\n\t\t}\n\n\t\tif ( object === undefined || axis === null || this.dragging === false || ( pointer !== null && pointer.button !== - 1 ) ) return;\n\n\t\tif ( pointer !== null ) _raycaster.setFromCamera( pointer, this.camera );\n\n\t\tconst planeIntersect = intersectObjectWithRay( this._plane, _raycaster, true );\n\n\t\tif ( ! planeIntersect ) return;\n\n\t\tthis.pointEnd.copy( planeIntersect.point ).sub( this.worldPositionStart );\n\n\t\tif ( mode === 'translate' ) {\n\n\t\t\t// Apply translate\n\n\t\t\tthis._offset.copy( this.pointEnd ).sub( this.pointStart );\n\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\n\n\t\t\t\tthis._offset.applyQuaternion( this._worldQuaternionInv );\n\n\t\t\t}\n\n\t\t\tif ( axis.indexOf( 'X' ) === - 1 ) this._offset.x = 0;\n\t\t\tif ( axis.indexOf( 'Y' ) === - 1 ) this._offset.y = 0;\n\t\t\tif ( axis.indexOf( 'Z' ) === - 1 ) this._offset.z = 0;\n\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\n\n\t\t\t\tthis._offset.applyQuaternion( this._quaternionStart ).divide( this._parentScale );\n\n\t\t\t} else {\n\n\t\t\t\tthis._offset.applyQuaternion( this._parentQuaternionInv ).divide( this._parentScale );\n\n\t\t\t}\n\n\t\t\tobject.position.copy( this._offset ).add( this._positionStart );\n\n\t\t\t// Apply translation snap\n\n\t\t\tif ( this.translationSnap ) {\n\n\t\t\t\tif ( space === 'local' ) {\n\n\t\t\t\t\tobject.position.applyQuaternion( _tempQuaternion.copy( this._quaternionStart ).invert() );\n\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.position.applyQuaternion( this._quaternionStart );\n\n\t\t\t\t}\n\n\t\t\t\tif ( space === 'world' ) {\n\n\t\t\t\t\tif ( object.parent ) {\n\n\t\t\t\t\t\tobject.position.add( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( object.parent ) {\n\n\t\t\t\t\t\tobject.position.sub( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tobject.position.x = Math.max( this.minX, Math.min( this.maxX, object.position.x ) );\n\t\t\tobject.position.y = Math.max( this.minY, Math.min( this.maxY, object.position.y ) );\n\t\t\tobject.position.z = Math.max( this.minZ, Math.min( this.maxZ, object.position.z ) );\n\n\t\t} else if ( mode === 'scale' ) {\n\n\t\t\tif ( axis.search( 'XYZ' ) !== - 1 ) {\n\n\t\t\t\tlet d = this.pointEnd.length() / this.pointStart.length();\n\n\t\t\t\tif ( this.pointEnd.dot( this.pointStart ) < 0 ) d *= - 1;\n\n\t\t\t\t_tempVector2.set( d, d, d );\n\n\t\t\t} else {\n\n\t\t\t\t_tempVector.copy( this.pointStart );\n\t\t\t\t_tempVector2.copy( this.pointEnd );\n\n\t\t\t\t_tempVector.applyQuaternion( this._worldQuaternionInv );\n\t\t\t\t_tempVector2.applyQuaternion( this._worldQuaternionInv );\n\n\t\t\t\t_tempVector2.divide( _tempVector );\n\n\t\t\t\tif ( axis.search( 'X' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.x = 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Y' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.y = 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Z' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.z = 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Apply scale\n\n\t\t\tobject.scale.copy( this._scaleStart ).multiply( _tempVector2 );\n\n\t\t\tif ( this.scaleSnap ) {\n\n\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.x = Math.round( object.scale.x / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.y = Math.round( object.scale.y / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.z = Math.round( object.scale.z / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( mode === 'rotate' ) {\n\n\t\t\tthis._offset.copy( this.pointEnd ).sub( this.pointStart );\n\n\t\t\tconst ROTATION_SPEED = 20 / this.worldPosition.distanceTo( _tempVector.setFromMatrixPosition( this.camera.matrixWorld ) );\n\n\t\t\tlet _inPlaneRotation = false;\n\n\t\t\tif ( axis === 'XYZE' ) {\n\n\t\t\t\tthis.rotationAxis.copy( this._offset ).cross( this.eye ).normalize();\n\t\t\t\tthis.rotationAngle = this._offset.dot( _tempVector.copy( this.rotationAxis ).cross( this.eye ) ) * ROTATION_SPEED;\n\n\t\t\t} else if ( axis === 'X' || axis === 'Y' || axis === 'Z' ) {\n\n\t\t\t\tthis.rotationAxis.copy( _unit[ axis ] );\n\n\t\t\t\t_tempVector.copy( _unit[ axis ] );\n\n\t\t\t\tif ( space === 'local' ) {\n\n\t\t\t\t\t_tempVector.applyQuaternion( this.worldQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\t_tempVector.cross( this.eye );\n\n\t\t\t\t// When _tempVector is 0 after cross with this.eye the vectors are parallel and should use in-plane rotation logic.\n\t\t\t\tif ( _tempVector.length() === 0 ) {\n\n\t\t\t\t\t_inPlaneRotation = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.rotationAngle = this._offset.dot( _tempVector.normalize() ) * ROTATION_SPEED;\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\tif ( axis === 'E' || _inPlaneRotation ) {\n\n\t\t\t\tthis.rotationAxis.copy( this.eye );\n\t\t\t\tthis.rotationAngle = this.pointEnd.angleTo( this.pointStart );\n\n\t\t\t\tthis._startNorm.copy( this.pointStart ).normalize();\n\t\t\t\tthis._endNorm.copy( this.pointEnd ).normalize();\n\n\t\t\t\tthis.rotationAngle *= ( this._endNorm.cross( this._startNorm ).dot( this.eye ) < 0 ? 1 : - 1 );\n\n\t\t\t}\n\n\t\t\t// Apply rotation snap\n\n\t\t\tif ( this.rotationSnap ) this.rotationAngle = Math.round( this.rotationAngle / this.rotationSnap ) * this.rotationSnap;\n\n\t\t\t// Apply rotate\n\t\t\tif ( space === 'local' && axis !== 'E' && axis !== 'XYZE' ) {\n\n\t\t\t\tobject.quaternion.copy( this._quaternionStart );\n\t\t\t\tobject.quaternion.multiply( _tempQuaternion.setFromAxisAngle( this.rotationAxis, this.rotationAngle ) ).normalize();\n\n\t\t\t} else {\n\n\t\t\t\tthis.rotationAxis.applyQuaternion( this._parentQuaternionInv );\n\t\t\t\tobject.quaternion.copy( _tempQuaternion.setFromAxisAngle( this.rotationAxis, this.rotationAngle ) );\n\t\t\t\tobject.quaternion.multiply( this._quaternionStart ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( _changeEvent );\n\t\tthis.dispatchEvent( _objectChangeEvent );\n\n\t}\n\n\tpointerUp( pointer ) {\n\n\t\tif ( pointer !== null && pointer.button !== 0 ) return;\n\n\t\tif ( this.dragging && ( this.axis !== null ) ) {\n\n\t\t\t_mouseUpEvent.mode = this.mode;\n\t\t\tthis.dispatchEvent( _mouseUpEvent );\n\n\t\t}\n\n\t\tthis.dragging = false;\n\t\tthis.axis = null;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t\tthis._root.dispose();\n\n\t}\n\n\t/**\n\t * Sets the 3D object that should be transformed and ensures the controls UI is visible.\n\t *\n\t * @param {Object3D} object -  The 3D object that should be transformed.\n\t * @return {TransformControls} A reference to this controls.\n\t */\n\tattach( object ) {\n\n\t\tthis.object = object;\n\t\tthis._root.visible = true;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Removes the current 3D object from the controls and makes the helper UI invisible.\n\t *\n\t * @return {TransformControls} A reference to this controls.\n\t */\n\tdetach() {\n\n\t\tthis.object = undefined;\n\t\tthis.axis = null;\n\n\t\tthis._root.visible = false;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Resets the object's position, rotation and scale to when the current transform began.\n\t */\n\treset() {\n\n\t\tif ( ! this.enabled ) return;\n\n\t\tif ( this.dragging ) {\n\n\t\t\tthis.object.position.copy( this._positionStart );\n\t\t\tthis.object.quaternion.copy( this._quaternionStart );\n\t\t\tthis.object.scale.copy( this._scaleStart );\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\tthis.dispatchEvent( _objectChangeEvent );\n\n\t\t\tthis.pointStart.copy( this.pointEnd );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the raycaster that is used for user interaction. This object is shared between all\n\t * instances of `TransformControls`.\n\t *\n\t * @returns {Raycaster} The internal raycaster.\n\t */\n\tgetRaycaster() {\n\n\t\treturn _raycaster;\n\n\t}\n\n\t/**\n\t * Returns the transformation mode.\n\t *\n\t * @returns {'translate'|'rotate'|'scale'} The transformation mode.\n\t */\n\tgetMode() {\n\n\t\treturn this.mode;\n\n\t}\n\n\t/**\n\t * Sets the given transformation mode.\n\t *\n\t * @param {'translate'|'rotate'|'scale'} mode - The transformation mode to set.\n\t */\n\tsetMode( mode ) {\n\n\t\tthis.mode = mode;\n\n\t}\n\n\t/**\n\t * Sets the translation snap.\n\t *\n\t * @param {?number} translationSnap - The translation snap to set.\n\t */\n\tsetTranslationSnap( translationSnap ) {\n\n\t\tthis.translationSnap = translationSnap;\n\n\t}\n\n\t/**\n\t * Sets the rotation snap.\n\t *\n\t * @param {?number} rotationSnap - The rotation snap to set.\n\t */\n\tsetRotationSnap( rotationSnap ) {\n\n\t\tthis.rotationSnap = rotationSnap;\n\n\t}\n\n\t/**\n\t * Sets the scale snap.\n\t *\n\t * @param {?number} scaleSnap - The scale snap to set.\n\t */\n\tsetScaleSnap( scaleSnap ) {\n\n\t\tthis.scaleSnap = scaleSnap;\n\n\t}\n\n\t/**\n\t * Sets the size of the helper UI.\n\t *\n\t * @param {number} size - The size to set.\n\t */\n\tsetSize( size ) {\n\n\t\tthis.size = size;\n\n\t}\n\n\t/**\n\t * Sets the coordinate space in which transformations are applied.\n\t *\n\t * @param {'world'|'local'} space - The space to set.\n\t */\n\tsetSpace( space ) {\n\n\t\tthis.space = space;\n\n\t}\n\n\t/**\n\t * Sets the colors of the control's gizmo.\n\t *\n\t * @param {number|Color|string} xAxis - The x-axis color.\n\t * @param {number|Color|string} yAxis - The y-axis color.\n\t * @param {number|Color|string} zAxis - The z-axis color.\n\t * @param {number|Color|string} active - The color for active elements.\n\t */\n\tsetColors( xAxis, yAxis, zAxis, active ) {\n\n\t\tconst materialLib = this._gizmo.materialLib;\n\n\t\tmaterialLib.xAxis.color.set( xAxis );\n\t\tmaterialLib.yAxis.color.set( yAxis );\n\t\tmaterialLib.zAxis.color.set( zAxis );\n\t\tmaterialLib.active.color.set( active );\n\t\tmaterialLib.xAxisTransparent.color.set( xAxis );\n\t\tmaterialLib.yAxisTransparent.color.set( yAxis );\n\t\tmaterialLib.zAxisTransparent.color.set( zAxis );\n\t\tmaterialLib.activeTransparent.color.set( active );\n\n\t\t// update color caches\n\n\t\tif ( materialLib.xAxis._color ) materialLib.xAxis._color.set( xAxis );\n\t\tif ( materialLib.yAxis._color ) materialLib.yAxis._color.set( yAxis );\n\t\tif ( materialLib.zAxis._color ) materialLib.zAxis._color.set( zAxis );\n\t\tif ( materialLib.active._color ) materialLib.active._color.set( active );\n\t\tif ( materialLib.xAxisTransparent._color ) materialLib.xAxisTransparent._color.set( xAxis );\n\t\tif ( materialLib.yAxisTransparent._color ) materialLib.yAxisTransparent._color.set( yAxis );\n\t\tif ( materialLib.zAxisTransparent._color ) materialLib.zAxisTransparent._color.set( zAxis );\n\t\tif ( materialLib.activeTransparent._color ) materialLib.activeTransparent._color.set( active );\n\n\t}\n\n}\n\n// mouse / touch event handlers\n\nfunction getPointer( event ) {\n\n\tif ( this.domElement.ownerDocument.pointerLockElement ) {\n\n\t\treturn {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tbutton: event.button\n\t\t};\n\n\t} else {\n\n\t\tconst rect = this.domElement.getBoundingClientRect();\n\n\t\treturn {\n\t\t\tx: ( event.clientX - rect.left ) / rect.width * 2 - 1,\n\t\t\ty: - ( event.clientY - rect.top ) / rect.height * 2 + 1,\n\t\t\tbutton: event.button\n\t\t};\n\n\t}\n\n}\n\nfunction onPointerHover( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tswitch ( event.pointerType ) {\n\n\t\tcase 'mouse':\n\t\tcase 'pen':\n\t\t\tthis.pointerHover( this._getPointer( event ) );\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tif ( ! document.pointerLockElement ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t}\n\n\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\n\tthis.pointerHover( this._getPointer( event ) );\n\tthis.pointerDown( this._getPointer( event ) );\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tthis.pointerMove( this._getPointer( event ) );\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\n\tthis.pointerUp( this._getPointer( event ) );\n\n}\n\nfunction intersectObjectWithRay( object, raycaster, includeInvisible ) {\n\n\tconst allIntersections = raycaster.intersectObject( object, true );\n\n\tfor ( let i = 0; i < allIntersections.length; i ++ ) {\n\n\t\tif ( allIntersections[ i ].object.visible || includeInvisible ) {\n\n\t\t\treturn allIntersections[ i ];\n\n\t\t}\n\n\t}\n\n\treturn false;\n\n}\n\n//\n\n// Reusable utility variables\n\nconst _tempEuler = new Euler();\nconst _alignVector = new Vector3( 0, 1, 0 );\nconst _zeroVector = new Vector3( 0, 0, 0 );\nconst _lookAtMatrix = new Matrix4();\nconst _tempQuaternion2 = new Quaternion();\nconst _identityQuaternion = new Quaternion();\nconst _dirVector = new Vector3();\nconst _tempMatrix = new Matrix4();\n\nconst _unitX = new Vector3( 1, 0, 0 );\nconst _unitY = new Vector3( 0, 1, 0 );\nconst _unitZ = new Vector3( 0, 0, 1 );\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _v3 = new Vector3();\n\nclass TransformControlsRoot extends Object3D {\n\n\tconstructor( controls ) {\n\n\t\tsuper();\n\n\t\tthis.isTransformControlsRoot = true;\n\n\t\tthis.controls = controls;\n\t\tthis.visible = false;\n\n\t}\n\n\t// updateMatrixWorld updates key transformation variables\n\tupdateMatrixWorld( force ) {\n\n\t\tconst controls = this.controls;\n\n\t\tif ( controls.object !== undefined ) {\n\n\t\t\tcontrols.object.updateMatrixWorld();\n\n\t\t\tif ( controls.object.parent === null ) {\n\n\t\t\t\tconsole.error( 'TransformControls: The attached 3D object must be a part of the scene graph.' );\n\n\t\t\t} else {\n\n\t\t\t\tcontrols.object.parent.matrixWorld.decompose( controls._parentPosition, controls._parentQuaternion, controls._parentScale );\n\n\t\t\t}\n\n\t\t\tcontrols.object.matrixWorld.decompose( controls.worldPosition, controls.worldQuaternion, controls._worldScale );\n\n\t\t\tcontrols._parentQuaternionInv.copy( controls._parentQuaternion ).invert();\n\t\t\tcontrols._worldQuaternionInv.copy( controls.worldQuaternion ).invert();\n\n\t\t}\n\n\t\tcontrols.camera.updateMatrixWorld();\n\t\tcontrols.camera.matrixWorld.decompose( controls.cameraPosition, controls.cameraQuaternion, controls._cameraScale );\n\n\t\tif ( controls.camera.isOrthographicCamera ) {\n\n\t\t\tcontrols.camera.getWorldDirection( controls.eye ).negate();\n\n\t\t} else {\n\n\t\t\tcontrols.eye.copy( controls.cameraPosition ).sub( controls.worldPosition ).normalize();\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.traverse( function ( child ) {\n\n\t\t\tif ( child.geometry ) child.geometry.dispose();\n\t\t\tif ( child.material ) child.material.dispose();\n\n\t\t} );\n\n\t}\n\n}\n\nclass TransformControlsGizmo extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isTransformControlsGizmo = true;\n\n\t\tthis.type = 'TransformControlsGizmo';\n\n\t\t// shared materials\n\n\t\tconst gizmoMaterial = new MeshBasicMaterial( {\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\tfog: false,\n\t\t\ttoneMapped: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tconst gizmoLineMaterial = new LineBasicMaterial( {\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\tfog: false,\n\t\t\ttoneMapped: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\t// Make unique material for each axis/color\n\n\t\tconst matInvisible = gizmoMaterial.clone();\n\t\tmatInvisible.opacity = 0.15;\n\n\t\tconst matHelper = gizmoLineMaterial.clone();\n\t\tmatHelper.opacity = 0.5;\n\n\t\tconst matRed = gizmoMaterial.clone();\n\t\tmatRed.color.setHex( 0xff0000 );\n\n\t\tconst matGreen = gizmoMaterial.clone();\n\t\tmatGreen.color.setHex( 0x00ff00 );\n\n\t\tconst matBlue = gizmoMaterial.clone();\n\t\tmatBlue.color.setHex( 0x0000ff );\n\n\t\tconst matRedTransparent = gizmoMaterial.clone();\n\t\tmatRedTransparent.color.setHex( 0xff0000 );\n\t\tmatRedTransparent.opacity = 0.5;\n\n\t\tconst matGreenTransparent = gizmoMaterial.clone();\n\t\tmatGreenTransparent.color.setHex( 0x00ff00 );\n\t\tmatGreenTransparent.opacity = 0.5;\n\n\t\tconst matBlueTransparent = gizmoMaterial.clone();\n\t\tmatBlueTransparent.color.setHex( 0x0000ff );\n\t\tmatBlueTransparent.opacity = 0.5;\n\n\t\tconst matWhiteTransparent = gizmoMaterial.clone();\n\t\tmatWhiteTransparent.opacity = 0.25;\n\n\t\tconst matYellowTransparent = gizmoMaterial.clone();\n\t\tmatYellowTransparent.color.setHex( 0xffff00 );\n\t\tmatYellowTransparent.opacity = 0.25;\n\n\t\tconst matYellow = gizmoMaterial.clone();\n\t\tmatYellow.color.setHex( 0xffff00 );\n\n\t\tconst matGray = gizmoMaterial.clone();\n\t\tmatGray.color.setHex( 0x787878 );\n\n\t\t// materials in the below property are configurable via setColors()\n\n\t\tthis.materialLib = {\n\t\t\txAxis: matRed,\n\t\t\tyAxis: matGreen,\n\t\t\tzAxis: matBlue,\n\t\t\tactive: matYellow,\n\t\t\txAxisTransparent: matRedTransparent,\n\t\t\tyAxisTransparent: matGreenTransparent,\n\t\t\tzAxisTransparent: matBlueTransparent,\n\t\t\tactiveTransparent: matYellowTransparent\n\t\t};\n\n\t\t// reusable geometry\n\n\t\tconst arrowGeometry = new CylinderGeometry( 0, 0.04, 0.1, 12 );\n\t\tarrowGeometry.translate( 0, 0.05, 0 );\n\n\t\tconst scaleHandleGeometry = new BoxGeometry( 0.08, 0.08, 0.08 );\n\t\tscaleHandleGeometry.translate( 0, 0.04, 0 );\n\n\t\tconst lineGeometry = new BufferGeometry();\n\t\tlineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0,\t1, 0, 0 ], 3 ) );\n\n\t\tconst lineGeometry2 = new CylinderGeometry( 0.0075, 0.0075, 0.5, 3 );\n\t\tlineGeometry2.translate( 0, 0.25, 0 );\n\n\t\tfunction CircleGeometry( radius, arc ) {\n\n\t\t\tconst geometry = new TorusGeometry( radius, 0.0075, 3, 64, arc * Math.PI * 2 );\n\t\t\tgeometry.rotateY( Math.PI / 2 );\n\t\t\tgeometry.rotateX( Math.PI / 2 );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\t// Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\n\n\t\tfunction TranslateHelperGeometry() {\n\n\t\t\tconst geometry = new BufferGeometry();\n\n\t\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 1, 1, 1 ], 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\t// Gizmo definitions - custom hierarchy definitions for setupGizmo() function\n\n\t\tconst gizmoTranslate = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( arrowGeometry, matRed ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matRed ), [ - 0.5, 0, 0 ], [ 0, 0, Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matRed ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, 0.5, 0 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, - 0.5, 0 ], [ Math.PI, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matGreen ) ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, - 0.5 ], [ - Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matBlue ), null, [ Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.1, 0 ), matWhiteTransparent ), [ 0, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matBlueTransparent ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matRedTransparent ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matGreenTransparent ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst pickerTranslate = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0.3, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ - 0.3, 0, 0 ], [ 0, 0, Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0.3, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, - 0.3, 0 ], [ 0, 0, Math.PI ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, 0.3 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, - 0.3 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.2, 0 ), matInvisible ) ]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst helperTranslate = {\n\t\t\tSTART: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tEND: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tDELTA: [\n\t\t\t\t[ new Line( TranslateHelperGeometry(), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\tconst gizmoRotate = {\n\t\t\tXYZE: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 1 ), matGray ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matRed ) ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matGreen ), null, [ 0, 0, - Math.PI / 2 ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matBlue ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tE: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.75, 1 ), matYellowTransparent ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst helperRotate = {\n\t\t\tAXIS: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\tconst pickerRotate = {\n\t\t\tXYZE: [\n\t\t\t\t[ new Mesh( new SphereGeometry( 0.25, 10, 8 ), matInvisible ) ]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, - Math.PI / 2, - Math.PI / 2 ]],\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t],\n\t\t\tE: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.75, 0.1, 2, 24 ), matInvisible ) ]\n\t\t\t]\n\t\t};\n\n\t\tconst gizmoScale = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matRed ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ - 0.5, 0, 0 ], [ 0, 0, Math.PI / 2 ]],\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, 0.5, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matGreen ) ],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, - 0.5, 0 ], [ 0, 0, Math.PI ]],\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matBlue ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, - 0.5 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matBlueTransparent ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matRedTransparent ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matGreenTransparent ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.1, 0.1, 0.1 ), matWhiteTransparent ) ],\n\t\t\t]\n\t\t};\n\n\t\tconst pickerScale = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0.3, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ - 0.3, 0, 0 ], [ 0, 0, Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0.3, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, - 0.3, 0 ], [ 0, 0, Math.PI ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, 0.3 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, - 0.3 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0.15, 0 ]],\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]],\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]],\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 0, 0, 0 ]],\n\t\t\t]\n\t\t};\n\n\t\tconst helperScale = {\n\t\t\tX: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\t// Creates an Object3D with gizmos described in custom hierarchy definition.\n\n\t\tfunction setupGizmo( gizmoMap ) {\n\n\t\t\tconst gizmo = new Object3D();\n\n\t\t\tfor ( const name in gizmoMap ) {\n\n\t\t\t\tfor ( let i = gizmoMap[ name ].length; i --; ) {\n\n\t\t\t\t\tconst object = gizmoMap[ name ][ i ][ 0 ].clone();\n\t\t\t\t\tconst position = gizmoMap[ name ][ i ][ 1 ];\n\t\t\t\t\tconst rotation = gizmoMap[ name ][ i ][ 2 ];\n\t\t\t\t\tconst scale = gizmoMap[ name ][ i ][ 3 ];\n\t\t\t\t\tconst tag = gizmoMap[ name ][ i ][ 4 ];\n\n\t\t\t\t\t// name and tag properties are essential for picking and updating logic.\n\t\t\t\t\tobject.name = name;\n\t\t\t\t\tobject.tag = tag;\n\n\t\t\t\t\tif ( position ) {\n\n\t\t\t\t\t\tobject.position.set( position[ 0 ], position[ 1 ], position[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( rotation ) {\n\n\t\t\t\t\t\tobject.rotation.set( rotation[ 0 ], rotation[ 1 ], rotation[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( scale ) {\n\n\t\t\t\t\t\tobject.scale.set( scale[ 0 ], scale[ 1 ], scale[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.updateMatrix();\n\n\t\t\t\t\tconst tempGeometry = object.geometry.clone();\n\t\t\t\t\ttempGeometry.applyMatrix4( object.matrix );\n\t\t\t\t\tobject.geometry = tempGeometry;\n\t\t\t\t\tobject.renderOrder = Infinity;\n\n\t\t\t\t\tobject.position.set( 0, 0, 0 );\n\t\t\t\t\tobject.rotation.set( 0, 0, 0 );\n\t\t\t\t\tobject.scale.set( 1, 1, 1 );\n\n\t\t\t\t\tgizmo.add( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn gizmo;\n\n\t\t}\n\n\t\t// Gizmo creation\n\n\t\tthis.gizmo = {};\n\t\tthis.picker = {};\n\t\tthis.helper = {};\n\n\t\tthis.add( this.gizmo[ 'translate' ] = setupGizmo( gizmoTranslate ) );\n\t\tthis.add( this.gizmo[ 'rotate' ] = setupGizmo( gizmoRotate ) );\n\t\tthis.add( this.gizmo[ 'scale' ] = setupGizmo( gizmoScale ) );\n\t\tthis.add( this.picker[ 'translate' ] = setupGizmo( pickerTranslate ) );\n\t\tthis.add( this.picker[ 'rotate' ] = setupGizmo( pickerRotate ) );\n\t\tthis.add( this.picker[ 'scale' ] = setupGizmo( pickerScale ) );\n\t\tthis.add( this.helper[ 'translate' ] = setupGizmo( helperTranslate ) );\n\t\tthis.add( this.helper[ 'rotate' ] = setupGizmo( helperRotate ) );\n\t\tthis.add( this.helper[ 'scale' ] = setupGizmo( helperScale ) );\n\n\t\t// Pickers should be hidden always\n\n\t\tthis.picker[ 'translate' ].visible = false;\n\t\tthis.picker[ 'rotate' ].visible = false;\n\t\tthis.picker[ 'scale' ].visible = false;\n\n\t}\n\n\t// updateMatrixWorld will update transformations and appearance of individual handles\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst space = ( this.mode === 'scale' ) ? 'local' : this.space; // scale always oriented to local rotation\n\n\t\tconst quaternion = ( space === 'local' ) ? this.worldQuaternion : _identityQuaternion;\n\n\t\t// Show only gizmos for current transform mode\n\n\t\tthis.gizmo[ 'translate' ].visible = this.mode === 'translate';\n\t\tthis.gizmo[ 'rotate' ].visible = this.mode === 'rotate';\n\t\tthis.gizmo[ 'scale' ].visible = this.mode === 'scale';\n\n\t\tthis.helper[ 'translate' ].visible = this.mode === 'translate';\n\t\tthis.helper[ 'rotate' ].visible = this.mode === 'rotate';\n\t\tthis.helper[ 'scale' ].visible = this.mode === 'scale';\n\n\n\t\tlet handles = [];\n\t\thandles = handles.concat( this.picker[ this.mode ].children );\n\t\thandles = handles.concat( this.gizmo[ this.mode ].children );\n\t\thandles = handles.concat( this.helper[ this.mode ].children );\n\n\t\tfor ( let i = 0; i < handles.length; i ++ ) {\n\n\t\t\tconst handle = handles[ i ];\n\n\t\t\t// hide aligned to camera\n\n\t\t\thandle.visible = true;\n\t\t\thandle.rotation.set( 0, 0, 0 );\n\t\t\thandle.position.copy( this.worldPosition );\n\n\t\t\tlet factor;\n\n\t\t\tif ( this.camera.isOrthographicCamera ) {\n\n\t\t\t\tfactor = ( this.camera.top - this.camera.bottom ) / this.camera.zoom;\n\n\t\t\t} else {\n\n\t\t\t\tfactor = this.worldPosition.distanceTo( this.cameraPosition ) * Math.min( 1.9 * Math.tan( Math.PI * this.camera.fov / 360 ) / this.camera.zoom, 7 );\n\n\t\t\t}\n\n\t\t\thandle.scale.set( 1, 1, 1 ).multiplyScalar( factor * this.size / 4 );\n\n\t\t\t// TODO: simplify helpers and consider decoupling from gizmo\n\n\t\t\tif ( handle.tag === 'helper' ) {\n\n\t\t\t\thandle.visible = false;\n\n\t\t\t\tif ( handle.name === 'AXIS' ) {\n\n\t\t\t\t\thandle.visible = !! this.axis;\n\n\t\t\t\t\tif ( this.axis === 'X' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, 0, 0 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'Y' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, 0, Math.PI / 2 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'Z' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, Math.PI / 2, 0 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'XYZE' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, Math.PI / 2, 0 ) );\n\t\t\t\t\t\t_alignVector.copy( this.rotationAxis );\n\t\t\t\t\t\thandle.quaternion.setFromRotationMatrix( _lookAtMatrix.lookAt( _zeroVector, _alignVector, _unitY ) );\n\t\t\t\t\t\thandle.quaternion.multiply( _tempQuaternion );\n\t\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'E' ) {\n\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else if ( handle.name === 'START' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else if ( handle.name === 'END' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPosition );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else if ( handle.name === 'DELTA' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.quaternion.copy( this.worldQuaternionStart );\n\t\t\t\t\t_tempVector.set( 1e-10, 1e-10, 1e-10 ).add( this.worldPositionStart ).sub( this.worldPosition ).multiplyScalar( - 1 );\n\t\t\t\t\t_tempVector.applyQuaternion( this.worldQuaternionStart.clone().invert() );\n\t\t\t\t\thandle.scale.copy( _tempVector );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else {\n\n\t\t\t\t\thandle.quaternion.copy( quaternion );\n\n\t\t\t\t\tif ( this.dragging ) {\n\n\t\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\thandle.position.copy( this.worldPosition );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis ) {\n\n\t\t\t\t\t\thandle.visible = this.axis.search( handle.name ) !== - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// If updating helper, skip rest of the loop\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// Align handles to current local or world rotation\n\n\t\t\thandle.quaternion.copy( quaternion );\n\n\t\t\tif ( this.mode === 'translate' || this.mode === 'scale' ) {\n\n\t\t\t\t// Hide translate and scale axis facing the camera\n\n\t\t\t\tconst AXIS_HIDE_THRESHOLD = 0.99;\n\t\t\t\tconst PLANE_HIDE_THRESHOLD = 0.2;\n\n\t\t\t\tif ( handle.name === 'X' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Y' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Z' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'XY' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'YZ' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'XZ' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( this.mode === 'rotate' ) {\n\n\t\t\t\t// Align handles to current local or world rotation\n\n\t\t\t\t_tempQuaternion2.copy( quaternion );\n\t\t\t\t_alignVector.copy( this.eye ).applyQuaternion( _tempQuaternion.copy( quaternion ).invert() );\n\n\t\t\t\tif ( handle.name.search( 'E' ) !== - 1 ) {\n\n\t\t\t\t\thandle.quaternion.setFromRotationMatrix( _lookAtMatrix.lookAt( this.eye, _zeroVector, _unitY ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'X' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitX, Math.atan2( - _alignVector.y, _alignVector.z ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Y' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitY, Math.atan2( _alignVector.x, _alignVector.z ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Z' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitZ, Math.atan2( _alignVector.y, _alignVector.x ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Hide disabled axes\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'X' ) === - 1 || this.showX );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'Y' ) === - 1 || this.showY );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'Z' ) === - 1 || this.showZ );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'E' ) === - 1 || ( this.showX && this.showY && this.showZ ) );\n\n\t\t\t// highlight selected axis\n\n\t\t\thandle.material._color = handle.material._color || handle.material.color.clone();\n\t\t\thandle.material._opacity = handle.material._opacity || handle.material.opacity;\n\n\t\t\thandle.material.color.copy( handle.material._color );\n\t\t\thandle.material.opacity = handle.material._opacity;\n\n\t\t\tif ( this.enabled && this.axis ) {\n\n\t\t\t\tif ( handle.name === this.axis ) {\n\n\t\t\t\t\thandle.material.color.copy( this.materialLib.active.color );\n\t\t\t\t\thandle.material.opacity = 1.0;\n\n\t\t\t\t} else if ( this.axis.split( '' ).some( function ( a ) {\n\n\t\t\t\t\treturn handle.name === a;\n\n\t\t\t\t} ) ) {\n\n\t\t\t\t\thandle.material.color.copy( this.materialLib.active.color );\n\t\t\t\t\thandle.material.opacity = 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\n//\n\nclass TransformControlsPlane extends Mesh {\n\n\tconstructor() {\n\n\t\tsuper(\n\t\t\tnew PlaneGeometry( 100000, 100000, 2, 2 ),\n\t\t\tnew MeshBasicMaterial( { visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1, toneMapped: false } )\n\t\t);\n\n\t\tthis.isTransformControlsPlane = true;\n\n\t\tthis.type = 'TransformControlsPlane';\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tlet space = this.space;\n\n\t\tthis.position.copy( this.worldPosition );\n\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\n\n\t\t_v1.copy( _unitX ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\t\t_v2.copy( _unitY ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\t\t_v3.copy( _unitZ ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\n\t\t// Align the plane for current transform mode, axis and space.\n\n\t\t_alignVector.copy( _v2 );\n\n\t\tswitch ( this.mode ) {\n\n\t\t\tcase 'translate':\n\t\t\tcase 'scale':\n\t\t\t\tswitch ( this.axis ) {\n\n\t\t\t\t\tcase 'X':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v1 );\n\t\t\t\t\t\t_dirVector.copy( _v1 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Y':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v2 );\n\t\t\t\t\t\t_dirVector.copy( _v2 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Z':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v3 );\n\t\t\t\t\t\t_dirVector.copy( _v3 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XY':\n\t\t\t\t\t\t_dirVector.copy( _v3 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'YZ':\n\t\t\t\t\t\t_dirVector.copy( _v1 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XZ':\n\t\t\t\t\t\t_alignVector.copy( _v3 );\n\t\t\t\t\t\t_dirVector.copy( _v2 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XYZ':\n\t\t\t\t\tcase 'E':\n\t\t\t\t\t\t_dirVector.set( 0, 0, 0 );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'rotate':\n\t\t\tdefault:\n\t\t\t\t// special case for rotate\n\t\t\t\t_dirVector.set( 0, 0, 0 );\n\n\t\t}\n\n\t\tif ( _dirVector.length() === 0 ) {\n\n\t\t\t// If in rotate mode, make the plane parallel to camera\n\t\t\tthis.quaternion.copy( this.cameraQuaternion );\n\n\t\t} else {\n\n\t\t\t_tempMatrix.lookAt( _tempVector.set( 0, 0, 0 ), _dirVector, _alignVector );\n\n\t\t\tthis.quaternion.setFromRotationMatrix( _tempMatrix );\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\nexport { TransformControls, TransformControlsGizmo, TransformControlsPlane };\n","size_bytes":49394},"THREE.examples/materials/LDrawConditionalLineMaterial.js":{"content":"import {\n\tColor,\n\tShaderMaterial,\n\tUniformsLib,\n\tUniformsUtils,\n} from 'three';\n\n/**\n * A special line material for meshes loaded via {@link LDrawLoader}.\n *\n * This module can only be used with {@link WebGLRenderer}. When using {@link WebGPURenderer},\n * import the class from `LDrawConditionalLineNodeMaterial.js`.\n *\n * @augments ShaderMaterial\n * @three_import import { LDrawConditionalLineMaterial } from 'three/addons/materials/LDrawConditionalLineMaterial.js';\n */\nclass LDrawConditionalLineMaterial extends ShaderMaterial {\n\n\tstatic get type() {\n\n\t\treturn 'LDrawConditionalLineMaterial';\n\n\t}\n\n\t/**\n\t * Constructs a new conditional line material.\n\t *\n\t * @param {Object} [parameters] - An object with one or more properties\n\t * defining the material's appearance. Any property of the material\n\t * (including any property from inherited materials) can be passed\n\t * in here. Color values can be passed any type of value accepted\n\t * by {@link Color#set}.\n\t */\n\tconstructor( parameters ) {\n\n\t\tsuper( {\n\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib.fog,\n\t\t\t\t{\n\t\t\t\t\tdiffuse: {\n\t\t\t\t\t\tvalue: new Color()\n\t\t\t\t\t},\n\t\t\t\t\topacity: {\n\t\t\t\t\t\tvalue: 1.0\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t] ),\n\n\t\t\tvertexShader: /* glsl */`\n\t\t\t\tattribute vec3 control0;\n\t\t\t\tattribute vec3 control1;\n\t\t\t\tattribute vec3 direction;\n\t\t\t\tvarying float discardFlag;\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <color_pars_vertex>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\t\t\t\t#include <clipping_planes_pars_vertex>\n\t\t\t\tvoid main() {\n\t\t\t\t\t#include <color_vertex>\n\n\t\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t\t\t// Transform the line segment ends and control points into camera clip space\n\t\t\t\t\tvec4 c0 = projectionMatrix * modelViewMatrix * vec4( control0, 1.0 );\n\t\t\t\t\tvec4 c1 = projectionMatrix * modelViewMatrix * vec4( control1, 1.0 );\n\t\t\t\t\tvec4 p0 = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tvec4 p1 = projectionMatrix * modelViewMatrix * vec4( position + direction, 1.0 );\n\n\t\t\t\t\tc0.xy /= c0.w;\n\t\t\t\t\tc1.xy /= c1.w;\n\t\t\t\t\tp0.xy /= p0.w;\n\t\t\t\t\tp1.xy /= p1.w;\n\n\t\t\t\t\t// Get the direction of the segment and an orthogonal vector\n\t\t\t\t\tvec2 dir = p1.xy - p0.xy;\n\t\t\t\t\tvec2 norm = vec2( -dir.y, dir.x );\n\n\t\t\t\t\t// Get control point directions from the line\n\t\t\t\t\tvec2 c0dir = c0.xy - p1.xy;\n\t\t\t\t\tvec2 c1dir = c1.xy - p1.xy;\n\n\t\t\t\t\t// If the vectors to the controls points are pointed in different directions away\n\t\t\t\t\t// from the line segment then the line should not be drawn.\n\t\t\t\t\tfloat d0 = dot( normalize( norm ), normalize( c0dir ) );\n\t\t\t\t\tfloat d1 = dot( normalize( norm ), normalize( c1dir ) );\n\t\t\t\t\tdiscardFlag = float( sign( d0 ) != sign( d1 ) );\n\n\t\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t\t#include <clipping_planes_vertex>\n\t\t\t\t\t#include <fog_vertex>\n\t\t\t\t}\n\t\t\t`,\n\n\t\t\tfragmentShader: /* glsl */`\n\t\t\tuniform vec3 diffuse;\n\t\t\tuniform float opacity;\n\t\t\tvarying float discardFlag;\n\n\t\t\t#include <common>\n\t\t\t#include <color_pars_fragment>\n\t\t\t#include <fog_pars_fragment>\n\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t#include <clipping_planes_pars_fragment>\n\t\t\tvoid main() {\n\n\t\t\t\tif ( discardFlag > 0.5 ) discard;\n\n\t\t\t\t#include <clipping_planes_fragment>\n\t\t\t\tvec3 outgoingLight = vec3( 0.0 );\n\t\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t\t\t\t#include <logdepthbuf_fragment>\n\t\t\t\t#include <color_fragment>\n\t\t\t\toutgoingLight = diffuseColor.rgb; // simple shader\n\t\t\t\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t#include <colorspace_fragment>\n\t\t\t\t#include <fog_fragment>\n\t\t\t\t#include <premultiplied_alpha_fragment>\n\t\t\t}\n\t\t\t`,\n\n\t\t} );\n\n\t\tObject.defineProperties( this, {\n\n\t\t\t/**\n\t\t\t * The material's opacity.\n\t\t\t *\n\t\t\t * @name LDrawConditionalLineMaterial#opacity\n\t\t\t * @type {number}\n\t\t\t * @default 1\n\t\t\t */\n\t\t\topacity: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn this.uniforms.opacity.value;\n\n\t\t\t\t},\n\n\t\t\t\tset: function ( value ) {\n\n\t\t\t\t\tthis.uniforms.opacity.value = value;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * The material's color.\n\t\t\t *\n\t\t\t * @name LDrawConditionalLineMaterial#color\n\t\t\t * @type {Color}\n\t\t\t * @default (1,1,1)\n\t\t\t */\n\t\t\tcolor: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn this.uniforms.diffuse.value;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tthis.setValues( parameters );\n\n\t\t/**\n\t\t * This flag can be used for type testing.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default true\n\t\t */\n\t\tthis.isLDrawConditionalLineMaterial = true;\n\n\t}\n\n}\n\nexport { LDrawConditionalLineMaterial };\n","size_bytes":4472},"THREE.examples/materials/LDrawConditionalLineNodeMaterial.js":{"content":"import { Color } from 'three';\nimport { attribute, cameraProjectionMatrix, dot, float, Fn, modelViewMatrix, modelViewProjection, NodeMaterial, normalize, positionGeometry, sign, uniform, varyingProperty, vec2, vec4 } from 'three/tsl';\n\n/**\n * A special line material for meshes loaded via {@link LDrawLoader}.\n *\n * This module can only be used with {@link WebGPURenderer}. When using {@link WebGLRenderer},\n * import the class from `LDrawConditionalLineMaterial.js`.\n *\n * @augments NodeMaterial\n * @three_import import { LDrawConditionalLineMaterial } from 'three/addons/materials/LDrawConditionalLineMaterial.js';\n */\nclass LDrawConditionalLineMaterial extends NodeMaterial {\n\n\tstatic get type() {\n\n\t\treturn 'LDrawConditionalLineMaterial';\n\n\t}\n\n\t/**\n\t * Constructs a new conditional line material.\n\t *\n\t * @param {Object} [parameters] - An object with one or more properties\n\t * defining the material's appearance. Any property of the material\n\t * (including any property from inherited materials) can be passed\n\t * in here. Color values can be passed any type of value accepted\n\t * by {@link Color#set}.\n\t */\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tconst vertexNode = /*@__PURE__*/ Fn( () => {\n\n\t\t\tconst control0 = attribute( 'control0', 'vec3' );\n\t\t\tconst control1 = attribute( 'control1', 'vec3' );\n\t\t\tconst direction = attribute( 'direction', 'vec3' );\n\n\t\t\tconst mvp = cameraProjectionMatrix.mul( modelViewMatrix );\n\n\t\t\t// Transform the line segment ends and control points into camera clip space\n\n\t\t\tconst c0 = mvp.mul( vec4( control0, 1 ) ).toVar();\n\t\t\tconst c1 = mvp.mul( vec4( control1, 1 ) ).toVar();\n\t\t\tconst p0 = mvp.mul( vec4( positionGeometry, 1 ) ).toVar();\n\t\t\tconst p1 = mvp.mul( vec4( positionGeometry.add( direction ), 1 ) ).toVar();\n\n\t\t\tc0.xy.divAssign( c0.w );\n\t\t\tc1.xy.divAssign( c1.w );\n\t\t\tp0.xy.divAssign( p0.w );\n\t\t\tp1.xy.divAssign( p1.w );\n\n\t\t\t// Get the direction of the segment and an orthogonal vector\n\n\t\t\tconst dir = p1.xy.sub( p0.xy ).toVar();\n\t\t\tconst norm = vec2( dir.y.negate(), dir.x ).toVar();\n\n\t\t\t// Get control point directions from the line\n\t\t\tconst c0dir = c0.xy.sub( p1.xy ).toVar();\n\t\t\tconst c1dir = c1.xy.sub( p1.xy ).toVar();\n\n\t\t\t// If the vectors to the controls points are pointed in different directions away\n\t\t\t// from the line segment then the line should not be drawn.\n\t\t\tconst d0 = dot( normalize( norm ), normalize( c0dir ) ).toVar();\n\t\t\tconst d1 = dot( normalize( norm ), normalize( c1dir ) ).toVar();\n\t\t\tconst discardFlag = sign( d0 ).notEqual( sign( d1 ) ).select( float( 1 ), float( 0 ) );\n\n\t\t\tvaryingProperty( 'float', 'discardFlag' ).assign( discardFlag );\n\n\t\t\treturn modelViewProjection;\n\n\t\t} )();\n\n\t\tconst fragmentNode = /*@__PURE__*/ Fn( () => {\n\n\t\t\tconst discardFlag = varyingProperty( 'float', 'discardFlag' );\n\n\t\t\tdiscardFlag.greaterThan( float( 0.5 ) ).discard();\n\n\t\t\treturn vec4( this._diffuseUniform, this._opacityUniform );\n\n\t\t} )();\n\n\t\tthis.vertexNode = vertexNode;\n\t\tthis.fragmentNode = fragmentNode;\n\n\t\tthis._diffuseUniform = uniform( new Color() );\n\t\tthis._opacityUniform = uniform( 1 );\n\n\t\t//\n\n\t\tObject.defineProperties( this, {\n\n\t\t\t/**\n\t\t\t * The material's opacity.\n\t\t\t *\n\t\t\t * @name LDrawConditionalLineMaterial#opacity\n\t\t\t * @type {number}\n\t\t\t * @default 1\n\t\t\t */\n\t\t\topacity: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn this._opacityUniform.value;\n\n\t\t\t\t},\n\n\t\t\t\tset: function ( value ) {\n\n\t\t\t\t\tthis._opacityUniform.value = value;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * The material's color.\n\t\t\t *\n\t\t\t * @name LDrawConditionalLineMaterial#color\n\t\t\t * @type {Color}\n\t\t\t * @default (1,1,1)\n\t\t\t */\n\t\t\tcolor: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn this._diffuseUniform.value;\n\n\t\t\t\t},\n\n\t\t\t\tset: function ( value ) {\n\n\t\t\t\t\tthis._diffuseUniform.value.copy( value );\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tthis.setValues( parameters );\n\n\t\t/**\n\t\t * This flag can be used for type testing.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default true\n\t\t */\n\t\tthis.isLDrawConditionalLineMaterial = true;\n\n\t}\n\n}\n\nexport { LDrawConditionalLineMaterial };\n","size_bytes":3985},"THREE.examples/materials/MeshGouraudMaterial.js":{"content":"/**\n * MeshGouraudMaterial\n *\n * Lambert illumination model with Gouraud (per-vertex) shading\n *\n */\n\nimport { UniformsUtils, UniformsLib, ShaderMaterial, Color, MultiplyOperation } from 'three';\n\nconst GouraudShader = {\n\n\tname: 'GouraudShader',\n\n\tuniforms: UniformsUtils.merge( [\n\t\tUniformsLib.common,\n\t\tUniformsLib.specularmap,\n\t\tUniformsLib.envmap,\n\t\tUniformsLib.aomap,\n\t\tUniformsLib.lightmap,\n\t\tUniformsLib.emissivemap,\n\t\tUniformsLib.fog,\n\t\tUniformsLib.lights,\n\t\t{\n\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t}\n\t] ),\n\n\tvertexShader: /* glsl */`\n\n\t\t#define GOURAUD\n\n\t\tvarying vec3 vLightFront;\n\t\tvarying vec3 vIndirectFront;\n\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvarying vec3 vLightBack;\n\t\t\tvarying vec3 vIndirectBack;\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <uv_pars_vertex>\n\t\t#include <envmap_pars_vertex>\n\t\t#include <bsdfs>\n\t\t#include <lights_pars_begin>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <morphtarget_pars_vertex>\n\t\t#include <skinning_pars_vertex>\n\t\t#include <shadowmap_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\t#include <uv_vertex>\n\t\t\t#include <color_vertex>\n\t\t\t#include <morphcolor_vertex>\n\n\t\t\t#include <beginnormal_vertex>\n\t\t\t#include <morphnormal_vertex>\n\t\t\t#include <skinbase_vertex>\n\t\t\t#include <skinnormal_vertex>\n\t\t\t#include <defaultnormal_vertex>\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <morphtarget_vertex>\n\t\t\t#include <skinning_vertex>\n\t\t\t#include <project_vertex>\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\n\t\t\t#include <worldpos_vertex>\n\t\t\t#include <envmap_vertex>\n\n\t\t\t// inlining legacy <lights_lambert_vertex>\n\n\t\t\tvec3 diffuse = vec3( 1.0 );\n\n\t\t\tvec3 geometryPosition = mvPosition.xyz;\n\t\t\tvec3 geometryNormal = normalize( transformedNormal );\n\t\t\tvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\n\t\t\tvec3 backGeometryNormal = - geometryNormal;\n\n\t\t\tvLightFront = vec3( 0.0 );\n\t\t\tvIndirectFront = vec3( 0.0 );\n\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\tvLightBack = vec3( 0.0 );\n\t\t\t\tvIndirectBack = vec3( 0.0 );\n\t\t\t#endif\n\n\t\t\tIncidentLight directLight;\n\t\t\tfloat dotNL;\n\t\t\tvec3 directLightColor_Diffuse;\n\n\t\t\tvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\n\t\t\t#if defined( USE_LIGHT_PROBES )\n\n\t\t\t\tvIndirectFront += getLightProbeIrradiance( lightProbe, geometryNormal );\n\n\t\t\t#endif\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\n\t\t\t\t#if defined( USE_LIGHT_PROBES )\n\n\t\t\t\t\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometryNormal );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#if NUM_POINT_LIGHTS > 0\n\n\t\t\t\t#pragma unroll_loop_start\n\t\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\t\t\t\tgetPointLightInfo( pointLights[ i ], geometryPosition, directLight );\n\n\t\t\t\t\tdotNL = dot( geometryNormal, directLight.direction );\n\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\n\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t}\n\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t#endif\n\n\t\t\t#if NUM_SPOT_LIGHTS > 0\n\n\t\t\t\t#pragma unroll_loop_start\n\t\t\t\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\t\t\t\tgetSpotLightInfo( spotLights[ i ], geometryPosition, directLight );\n\n\t\t\t\t\tdotNL = dot( geometryNormal, directLight.direction );\n\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\n\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\n\t\t\t\t\t#endif\n\t\t\t\t}\n\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t#endif\n\n\t\t\t#if NUM_DIR_LIGHTS > 0\n\n\t\t\t\t#pragma unroll_loop_start\n\t\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\t\t\t\tgetDirectionalLightInfo( directionalLights[ i ], directLight );\n\n\t\t\t\t\tdotNL = dot( geometryNormal, directLight.direction );\n\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\n\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t}\n\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t#endif\n\n\t\t\t#if NUM_HEMI_LIGHTS > 0\n\n\t\t\t\t#pragma unroll_loop_start\n\t\t\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\t\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometryNormal );\n\n\t\t\t\t\t#endif\n\n\t\t\t\t}\n\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t#endif\n\n\t\t\t#include <shadowmap_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\t#define GOURAUD\n\n\t\tuniform vec3 diffuse;\n\t\tuniform vec3 emissive;\n\t\tuniform float opacity;\n\n\t\tvarying vec3 vLightFront;\n\t\tvarying vec3 vIndirectFront;\n\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvarying vec3 vLightBack;\n\t\t\tvarying vec3 vIndirectBack;\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <packing>\n\t\t#include <dithering_pars_fragment>\n\t\t#include <color_pars_fragment>\n\t\t#include <uv_pars_fragment>\n\t\t#include <map_pars_fragment>\n\t\t#include <alphamap_pars_fragment>\n\t\t#include <alphatest_pars_fragment>\n\t\t#include <aomap_pars_fragment>\n\t\t#include <lightmap_pars_fragment>\n\t\t#include <emissivemap_pars_fragment>\n\t\t#include <envmap_common_pars_fragment>\n\t\t#include <envmap_pars_fragment>\n\t\t#include <bsdfs>\n\t\t#include <lights_pars_begin>\n\t\t#include <fog_pars_fragment>\n\t\t#include <shadowmap_pars_fragment>\n\t\t#include <shadowmask_pars_fragment>\n\t\t#include <specularmap_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t\t\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t\t\tvec3 totalEmissiveRadiance = emissive;\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <map_fragment>\n\t\t\t#include <color_fragment>\n\t\t\t#include <alphamap_fragment>\n\t\t\t#include <alphatest_fragment>\n\t\t\t#include <specularmap_fragment>\n\t\t\t#include <emissivemap_fragment>\n\n\t\t\t// accumulation\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t\t\t#else\n\n\t\t\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_LIGHTMAP\n\n\t\t\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\t\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t\t\treflectedLight.indirectDiffuse += lightMapIrradiance;\n\n\t\t\t#endif\n\n\t\t\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t\t\t#else\n\n\t\t\t\treflectedLight.directDiffuse = vLightFront;\n\n\t\t\t#endif\n\n\t\t\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t\t\t// modulation\n\n\t\t\t#include <aomap_fragment>\n\n\t\t\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t\t\t#include <envmap_fragment>\n\n\t\t\t#include <opaque_fragment>\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <colorspace_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\t\t\t#include <dithering_fragment>\n\n\t\t}`\n\n};\n\n//\n\nclass MeshGouraudMaterial extends ShaderMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tconsole.warn( 'THREE.MeshGouraudMaterial: MeshGouraudMaterial has been deprecated and will be removed with r183. Use THREE.MeshLambertMaterial instead.' ); // @deprecated r173\n\n\t\tthis.isMeshGouraudMaterial = true;\n\n\t\tthis.type = 'MeshGouraudMaterial';\n\n\t\t//this.color = new THREE.Color( 0xffffff ); // diffuse\n\n\t\t//this.map = null;\n\n\t\t//this.lightMap = null;\n\t\t//this.lightMapIntensity = 1.0;\n\n\t\t//this.aoMap = null;\n\t\t//this.aoMapIntensity = 1.0;\n\n\t\t//this.emissive = new THREE.Color( 0x000000 );\n\t\t//this.emissiveIntensity = 1.0;\n\t\t//this.emissiveMap = null;\n\n\t\t//this.specularMap = null;\n\n\t\t//this.alphaMap = null;\n\n\t\t//this.envMap = null;\n\t\tthis.combine = MultiplyOperation; // combine has no uniform\n\t\t//this.reflectivity = 1;\n\t\t//this.refractionRatio = 0.98;\n\n\t\tthis.fog = false; // set to use scene fog\n\t\tthis.lights = true; // set to use scene lights\n\t\tthis.clipping = false; // set to use user-defined clipping planes\n\n\t\tconst shader = GouraudShader;\n\n\t\tthis.defines = Object.assign( {}, shader.defines );\n\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\t\tthis.vertexShader = shader.vertexShader;\n\t\tthis.fragmentShader = shader.fragmentShader;\n\n\t\tconst exposePropertyNames = [\n\t\t\t'map', 'lightMap', 'lightMapIntensity', 'aoMap', 'aoMapIntensity',\n\t\t\t'emissive', 'emissiveIntensity', 'emissiveMap', 'specularMap', 'alphaMap',\n\t\t\t'envMap', 'reflectivity', 'refractionRatio', 'opacity', 'diffuse'\n\t\t];\n\n\t\tfor ( const propertyName of exposePropertyNames ) {\n\n\t\t\tObject.defineProperty( this, propertyName, {\n\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn this.uniforms[ propertyName ].value;\n\n\t\t\t\t},\n\n\t\t\t\tset: function ( value ) {\n\n\t\t\t\t\tthis.uniforms[ propertyName ].value = value;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t\tObject.defineProperty( this, 'color', Object.getOwnPropertyDescriptor( this, 'diffuse' ) );\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { MeshGouraudMaterial };\n","size_bytes":10106},"THREE.examples/materials/MeshPostProcessingMaterial.js":{"content":"import { MeshPhysicalMaterial } from 'three';\n\n/**\n * The aim of this mesh material is to use information from a post processing pass in the diffuse color pass.\n * This material is based on the MeshPhysicalMaterial.\n *\n * In the current state, only the information of a screen space AO pass can be used in the material.\n * Actually, the output of any screen space AO (SSAO, GTAO) can be used,\n * as it is only necessary to provide the AO in one color channel of a texture,\n * however the AO pass must be rendered prior to the color pass,\n * which makes the post-processing pass somewhat of a pre-processing pass.\n * Fot this purpose a new map (`aoPassMap`) is added to the material.\n * The value of the map is used the same way as the `aoMap` value.\n *\n * Motivation to use the outputs AO pass directly in the material:\n * The incident light of a fragment is composed of ambient light, direct light and indirect light\n * Ambient Occlusion only occludes ambient light and environment light, but not direct light.\n * Direct light is only occluded by geometry that casts shadows.\n * And of course the emitted light should not be darkened by ambient occlusion either.\n * This cannot be achieved if the AO post processing pass is simply blended with the diffuse render pass.\n *\n * Further extension work might be to use the output of an SSR pass or an HBIL pass from a previous frame.\n * This would then create the possibility of SSR and IR depending on material properties such as `roughness`, `metalness` and `reflectivity`.\n *\n * @augments MeshPhysicalMaterial\n * @three_import import { MeshPostProcessingMaterial } from 'three/addons/materials/MeshPostProcessingMaterial.js';\n */\nclass MeshPostProcessingMaterial extends MeshPhysicalMaterial {\n\n\t/**\n\t * Constructs a new conditional line material.\n\t *\n\t * @param {Object} [parameters] - An object with one or more properties\n\t * defining the material's appearance. Any property of the material\n\t * (including any property from inherited materials) can be passed\n\t * in here. Color values can be passed any type of value accepted\n\t * by {@link Color#set}.\n\t */\n\tconstructor( parameters ) {\n\n\t\tconst aoPassMap = parameters.aoPassMap;\n\t\tconst aoPassMapScale = parameters.aoPassMapScale || 1.0;\n\t\tdelete parameters.aoPassMap;\n\t\tdelete parameters.aoPassMapScale;\n\n\t\tsuper( parameters );\n\n\t\tthis.onBeforeCompile = this._onBeforeCompile;\n\t\tthis.customProgramCacheKey = this._customProgramCacheKey;\n\t\tthis._aoPassMap = aoPassMap;\n\n\t\t/**\n\t\t * The scale of the AO pass.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.aoPassMapScale = aoPassMapScale;\n\t\tthis._shader = null;\n\n\t}\n\n\t/**\n\t * A texture representing the AO pass.\n\t *\n\t * @type {Texture}\n\t */\n\tget aoPassMap() {\n\n\t\treturn this._aoPassMap;\n\n\t}\n\n\tset aoPassMap( aoPassMap ) {\n\n\t\tthis._aoPassMap = aoPassMap;\n\t\tthis.needsUpdate = true;\n\t\tthis._setUniforms();\n\n\t}\n\n\t_customProgramCacheKey() {\n\n\t\treturn this._aoPassMap !== undefined && this._aoPassMap !== null ? 'aoPassMap' : '';\n\n\t}\n\n\t_onBeforeCompile( shader ) {\n\n\t\tthis._shader = shader;\n\n\t\tif ( this._aoPassMap !== undefined && this._aoPassMap !== null ) {\n\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace(\n\t\t\t\t'#include <aomap_pars_fragment>',\n\t\t\t\taomap_pars_fragment_replacement\n\t\t\t);\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace(\n\t\t\t\t'#include <aomap_fragment>',\n\t\t\t\taomap_fragment_replacement\n\t\t\t);\n\n\t\t}\n\n\t\tthis._setUniforms();\n\n\t}\n\n\t_setUniforms() {\n\n\t\tif ( this._shader ) {\n\n\t\t\tthis._shader.uniforms.tAoPassMap = { value: this._aoPassMap };\n\t\t\tthis._shader.uniforms.aoPassMapScale = { value: this.aoPassMapScale };\n\n\t\t}\n\n\t}\n\n}\n\nconst aomap_pars_fragment_replacement = /* glsl */`\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n\n\tuniform sampler2D tAoPassMap;\n\tuniform float aoPassMapScale;\n`;\n\nconst aomap_fragment_replacement = /* glsl */`\n#ifndef AOPASSMAP_SWIZZLE\n\t#define AOPASSMAP_SWIZZLE r\n#endif\n\tfloat ambientOcclusion = texelFetch( tAoPassMap, ivec2( gl_FragCoord.xy * aoPassMapScale ), 0 ).AOPASSMAP_SWIZZLE;\n\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tambientOcclusion = min( ambientOcclusion, texture2D( aoMap, vAoMapUv ).r );\n\tambientOcclusion *= ( ambientOcclusion - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\n\t#endif\n`;\n\nexport { MeshPostProcessingMaterial };\n","size_bytes":4810},"THREE.examples/materials/WoodNodeMaterial.js":{"content":"import * as THREE from 'three';\nimport * as TSL from 'three/tsl';\n\n// some helpers below are ported from Blender and converted to TSL\n\nconst mapRange = TSL.Fn( ( [ x, fromMin, fromMax, toMin, toMax, clmp ] ) => {\n\n\tconst factor = x.sub( fromMin ).div( fromMax.sub( fromMin ) );\n\tconst result = toMin.add( factor.mul( toMax.sub( toMin ) ) );\n\n\treturn TSL.select( clmp, TSL.max( TSL.min( result, toMax ), toMin ), result );\n\n} );\n\nconst voronoi3d = TSL.wgslFn( `\n    fn voronoi3d(x: vec3<f32>, smoothness: f32, randomness: f32) -> f32\n    {\n        let p = floor(x);\n        let f = fract(x);\n\n        var res = 0.0;\n        var totalWeight = 0.0;\n        \n        for (var k = -1; k <= 1; k++)\n        {\n            for (var j = -1; j <= 1; j++)\n            {\n                for (var i = -1; i <= 1; i++)\n                {\n                    let b = vec3<f32>(f32(i), f32(j), f32(k));\n                    let hashOffset = hash3d(p + b) * randomness;\n                    let r = b - f + hashOffset;\n                    let d = length(r);\n                    \n                    let weight = exp(-d * d / max(smoothness * smoothness, 0.001));\n                    res += d * weight;\n                    totalWeight += weight;\n                }\n            }\n        }\n        \n        if (totalWeight > 0.0)\n        {\n            res /= totalWeight;\n        }\n        \n        return smoothstep(0.0, 1.0, res);\n    }\n\n    fn hash3d(p: vec3<f32>) -> vec3<f32>\n    {\n        var p3 = fract(p * vec3<f32>(0.1031, 0.1030, 0.0973));\n        p3 += dot(p3, p3.yzx + 33.33);\n        return fract((p3.xxy + p3.yzz) * p3.zyx);\n    }\n` );\n\n// const hash3d = TSL.Fn( ( [ p ] ) => {\n\n// \tconst p3 = p.mul( TSL.vec3( 0.1031, 0.1030, 0.0973 ) ).fract();\n// \tconst dotProduct = p3.dot( p3.yzx.add( 33.33 ) );\n// \tp3.addAssign( dotProduct );\n\n// \treturn p3.xxy.add( p3.yzz ).mul( p3.zyx ).fract();\n\n// } );\n\n// const voronoi3d = TSL.Fn( ( [ x, smoothness, randomness ] ) => {\n// \tlet p = TSL.floor(x);\n// \tlet f = TSL.fract(x);\n\n// \tvar res = TSL.float(0.0);\n// \tvar totalWeight = TSL.float(0.0);\n\n// \tTSL.Loop( 3, 3, 3, ( { k, j, i } ) => {\n// \t\tlet b = TSL.vec3(TSL.float(i).sub(1), TSL.float(j).sub(1), TSL.float(k).sub(1));\n// \t\tlet hashOffset = hash3d(p.add(b)).mul(randomness);\n// \t\tlet r = b.sub(f).add(hashOffset);\n// \t\tlet d = TSL.length(r);\n\n// \t\tlet weight = TSL.exp(d.negate().mul(d).div(TSL.max(smoothness.mul(smoothness), 0.001)));\n// \t\tres.addAssign(d.mul(weight));\n// \t\ttotalWeight.addAssign(weight);\n// \t} );\n\n// \tres.assign(TSL.select(totalWeight.greaterThan(0.0), res.div(totalWeight), res));\n\n// \treturn TSL.smoothstep(0.0, 1.0, res);\n// } );\n\nconst softLightMix = TSL.Fn( ( [ t, col1, col2 ] ) => {\n\n\tconst tm = TSL.float( 1.0 ).sub( t );\n\n\tconst one = TSL.vec3( 1.0 );\n\tconst scr = one.sub( one.sub( col2 ).mul( one.sub( col1 ) ) );\n\n\treturn tm.mul( col1 ).add( t.mul( one.sub( col1 ).mul( col2 ).mul( col1 ).add( col1.mul( scr ) ) ) );\n\n} );\n\nconst noiseFbm = TSL.Fn( ( [ p, detail, roughness, lacunarity, useNormalize ] ) => {\n\n\tconst fscale = TSL.float( 1.0 ).toVar();\n\tconst amp = TSL.float( 1.0 ).toVar();\n\tconst maxamp = TSL.float( 0.0 ).toVar();\n\tconst sum = TSL.float( 0.0 ).toVar();\n\n\tconst iterations = detail.floor();\n\n\tTSL.Loop( iterations, () => {\n\n\t\tconst t = TSL.mx_noise_float( p.mul( fscale ) );\n\t\tsum.addAssign( t.mul( amp ) );\n\t\tmaxamp.addAssign( amp );\n\t\tamp.mulAssign( roughness );\n\t\tfscale.mulAssign( lacunarity );\n\n\t} );\n\n\tconst rmd = detail.sub( iterations );\n\tconst hasRemainder = rmd.greaterThan( 0.001 );\n\n\treturn TSL.select(\n\t\thasRemainder,\n\t\tTSL.select(\n\t\t\tuseNormalize.equal( 1 ),\n\t\t\t( () => {\n\n\t\t\t\tconst t = TSL.mx_noise_float( p.mul( fscale ) );\n\t\t\t\tconst sum2 = sum.add( t.mul( amp ) );\n\t\t\t\tconst maxamp2 = maxamp.add( amp );\n\t\t\t\tconst normalizedSum = sum.div( maxamp ).mul( 0.5 ).add( 0.5 );\n\t\t\t\tconst normalizedSum2 = sum2.div( maxamp2 ).mul( 0.5 ).add( 0.5 );\n\t\t\t\treturn TSL.mix( normalizedSum, normalizedSum2, rmd );\n\n\t\t\t} )(),\n\t\t\t( () => {\n\n\t\t\t\tconst t = TSL.mx_noise_float( p.mul( fscale ) );\n\t\t\t\tconst sum2 = sum.add( t.mul( amp ) );\n\t\t\t\treturn TSL.mix( sum, sum2, rmd );\n\n\t\t\t} )()\n\t\t),\n\t\tTSL.select(\n\t\t\tuseNormalize.equal( 1 ),\n\t\t\tsum.div( maxamp ).mul( 0.5 ).add( 0.5 ),\n\t\t\tsum\n\t\t)\n\t);\n\n} );\n\nconst noiseFbm3d = TSL.Fn( ( [ p, detail, roughness, lacunarity, useNormalize ] ) => {\n\n\tconst fscale = TSL.float( 1.0 ).toVar();\n\n\tconst amp = TSL.float( 1.0 ).toVar();\n\tconst maxamp = TSL.float( 0.0 ).toVar();\n\tconst sum = TSL.vec3( 0.0 ).toVar();\n\n\tconst iterations = detail.floor();\n\n\tTSL.Loop( iterations, () => {\n\n\t\tconst t = TSL.mx_noise_vec3( p.mul( fscale ) );\n\t\tsum.addAssign( t.mul( amp ) );\n\t\tmaxamp.addAssign( amp );\n\t\tamp.mulAssign( roughness );\n\t\tfscale.mulAssign( lacunarity );\n\n\t} );\n\n\tconst rmd = detail.sub( iterations );\n\tconst hasRemainder = rmd.greaterThan( 0.001 );\n\n\treturn TSL.select(\n\t\thasRemainder,\n\t\tTSL.select(\n\t\t\tuseNormalize.equal( 1 ),\n\t\t\t( () => {\n\n\t\t\t\tconst t = TSL.mx_noise_vec3( p.mul( fscale ) );\n\t\t\t\tconst sum2 = sum.add( t.mul( amp ) );\n\t\t\t\tconst maxamp2 = maxamp.add( amp );\n\t\t\t\tconst normalizedSum = sum.div( maxamp ).mul( 0.5 ).add( 0.5 );\n\t\t\t\tconst normalizedSum2 = sum2.div( maxamp2 ).mul( 0.5 ).add( 0.5 );\n\t\t\t\treturn TSL.mix( normalizedSum, normalizedSum2, rmd );\n\n\t\t\t} )(),\n\t\t\t( () => {\n\n\t\t\t\tconst t = TSL.mx_noise_vec3( p.mul( fscale ) );\n\t\t\t\tconst sum2 = sum.add( t.mul( amp ) );\n\t\t\t\treturn TSL.mix( sum, sum2, rmd );\n\n\t\t\t} )()\n\t\t),\n\t\tTSL.select(\n\t\t\tuseNormalize.equal( 1 ),\n\t\t\tsum.div( maxamp ).mul( 0.5 ).add( 0.5 ),\n\t\t\tsum\n\t\t)\n\t);\n\n} );\n\nconst woodCenter = TSL.Fn( ( [ p, centerSize ] ) => {\n\n\tconst pxyCenter = p.mul( TSL.vec3( 1, 1, 0 ) ).length();\n\tconst center = mapRange( pxyCenter, 0, 1, 0, centerSize, true );\n\n\treturn center;\n\n} );\n\nconst spaceWarp = TSL.Fn( ( [ p, warpStrength, xyScale, zScale ] ) => {\n\n\tconst combinedXyz = TSL.vec3( xyScale, xyScale, zScale ).mul( p );\n\tconst noise = noiseFbm3d( combinedXyz.mul( 1.6 * 1.5 ), TSL.float( 1 ), TSL.float( 0.5 ), TSL.float( 2 ), TSL.int( 1 ) ).sub( 0.5 ).mul( warpStrength );\n\tconst pXy = p.mul( TSL.vec3( 1, 1, 0 ) );\n\tconst normalizedXy = pXy.normalize();\n\tconst warp = noise.mul( normalizedXy ).add( pXy );\n\n\treturn warp;\n\n} );\n\nconst woodRings = TSL.Fn( ( [ w, ringThickness, ringBias, ringSizeVariance, ringVarianceScale, barkThickness ] ) => {\n\n\tconst rings = noiseFbm( w.mul( ringVarianceScale ), TSL.float( 1 ), TSL.float( 0.5 ), TSL.float( 1 ), TSL.int( 1 ) ).mul( ringSizeVariance ).add( w ).mul( ringThickness ).fract().mul( barkThickness );\n\n\tconst sharpRings = TSL.min( mapRange( rings, 0, ringBias, 0, 1, TSL.bool( true ) ), mapRange( rings, ringBias, 1, 1, 0, TSL.bool( true ) ) );\n\n\tconst blurAmount = TSL.max( TSL.positionView.length().div( 10 ), 1 );\n\tconst blurredRings = TSL.smoothstep( blurAmount.negate(), blurAmount, sharpRings.sub( 0.5 ) ).mul( 0.5 ).add( 0.5 );\n\n\treturn blurredRings;\n\n} );\n\nconst woodDetail = TSL.Fn( ( [ warp, p, y, splotchScale ] ) => {\n\n\tconst radialCoords = TSL.clamp( TSL.atan( warp.y, warp.x ).div( TSL.PI2 ).add( 0.5 ), 0, 1 ).mul( TSL.PI2.mul( 3 ) );\n\tconst combinedXyz = TSL.vec3( radialCoords.sin(), y, radialCoords.cos().mul( p.z ) );\n\tconst scaled = TSL.vec3( 0.1, 1.19, 0.05 ).mul( combinedXyz );\n\n\treturn noiseFbm( scaled.mul( splotchScale ), TSL.float( 1 ), TSL.float( 0.5 ), TSL.float( 2 ), TSL.bool( true ) );\n\n} );\n\nconst cellStructure = TSL.Fn( ( [ p, cellScale, cellSize ] ) => {\n\n\tconst warp = spaceWarp( p.mul( cellScale.div( 50 ) ), cellScale.div( 1000 ), 0.1, 1.77 );\n\tconst cells = voronoi3d( warp.xy.mul( 75 ), 0.5, 1 );\n\n\treturn mapRange( cells, cellSize, cellSize.add( 0.21 ), 0, 1, TSL.bool( true ) );\n\n} );\n\nconst wood = TSL.Fn( ( [\n\tp,\n\tcenterSize,\n\tlargeWarpScale,\n\tlargeGrainStretch,\n\tsmallWarpStrength,\n\tsmallWarpScale,\n\tfineWarpStrength,\n\tfineWarpScale,\n\tringThickness,\n\tringBias,\n\tringSizeVariance,\n\tringVarianceScale,\n\tbarkThickness,\n\tsplotchScale,\n\tsplotchIntensity,\n\tcellScale,\n\tcellSize,\n\tdarkGrainColor,\n\tlightGrainColor\n] ) => {\n\n\tconst center = woodCenter( p, centerSize );\n\tconst mainWarp = spaceWarp( spaceWarp( p, center, largeWarpScale, largeGrainStretch ), smallWarpStrength, smallWarpScale, 0.17 );\n\tconst detailWarp = spaceWarp( mainWarp, fineWarpStrength, fineWarpScale, 0.17 );\n\tconst rings = woodRings( detailWarp.length(), TSL.float( 1 ).div( ringThickness ), ringBias, ringSizeVariance, ringVarianceScale, barkThickness );\n\tconst detail = woodDetail( detailWarp, p, detailWarp.length(), splotchScale );\n\tconst cells = cellStructure( mainWarp, cellScale, cellSize.div( TSL.max( TSL.positionView.length().mul( 10 ), 1 ) ) );\n\tconst baseColor = TSL.mix( darkGrainColor, lightGrainColor, rings );\n\n\treturn softLightMix( splotchIntensity, softLightMix( 0.407, baseColor, cells ), detail );\n\n} );\n\nconst woodParams = {\n\tteak: {\n\t\ttransformationMatrix: new THREE.Matrix4().identity(),\n\t\tcenterSize: 1.11, largeWarpScale: 0.32, largeGrainStretch: 0.24, smallWarpStrength: 0.059,\n\t\tsmallWarpScale: 2, fineWarpStrength: 0.006, fineWarpScale: 32.8, ringThickness: 1/34,\n\t\tringBias: 0.03, ringSizeVariance: 0.03, ringVarianceScale: 4.4, barkThickness: 0.3,\n\t\tsplotchScale: 0.2, splotchIntensity: 0.541, cellScale: 910, cellSize: 0.1,\n\t\tdarkGrainColor: '#0c0504', lightGrainColor: '#926c50'\n\t},\n\twalnut: {\n\t\ttransformationMatrix: new THREE.Matrix4().identity(),\n\t\tcenterSize: 1.07, largeWarpScale: 0.42, largeGrainStretch: 0.34, smallWarpStrength: 0.016,\n\t\tsmallWarpScale: 10.3, fineWarpStrength: 0.028, fineWarpScale: 12.7, ringThickness: 1/32,\n\t\tringBias: 0.08, ringSizeVariance: 0.03, ringVarianceScale: 5.5, barkThickness: 0.98,\n\t\tsplotchScale: 1.84, splotchIntensity: 0.97, cellScale: 710, cellSize: 0.31,\n\t\tdarkGrainColor: '#311e13', lightGrainColor: '#523424'\n\t},\n\twhite_oak: {\n\t\ttransformationMatrix: new THREE.Matrix4().identity(),\n\t\tcenterSize: 1.23, largeWarpScale: 0.21, largeGrainStretch: 0.21, smallWarpStrength: 0.034,\n\t\tsmallWarpScale: 2.44, fineWarpStrength: 0.01, fineWarpScale: 14.3, ringThickness: 1/34,\n\t\tringBias: 0.82, ringSizeVariance: 0.16, ringVarianceScale: 1.4, barkThickness: 0.7,\n\t\tsplotchScale: 0.2, splotchIntensity: 0.541, cellScale: 800, cellSize: 0.28,\n\t\tdarkGrainColor: '#8b4c21', lightGrainColor: '#c57e43'\n\t},\n\tpine: {\n\t\ttransformationMatrix: new THREE.Matrix4().identity(),\n\t\tcenterSize: 1.23, largeWarpScale: 0.21, largeGrainStretch: 0.18, smallWarpStrength: 0.041,\n\t\tsmallWarpScale: 2.44, fineWarpStrength: 0.006, fineWarpScale: 23.2, ringThickness: 1/24,\n\t\tringBias: 0.1, ringSizeVariance: 0.07, ringVarianceScale: 5, barkThickness: 0.35,\n\t\tsplotchScale: 0.51, splotchIntensity: 3.32, cellScale: 1480, cellSize: 0.07,\n\t\tdarkGrainColor: '#c58355', lightGrainColor: '#d19d61'\n\t},\n\tpoplar: {\n\t\ttransformationMatrix: new THREE.Matrix4().identity(),\n\t\tcenterSize: 1.43, largeWarpScale: 0.33, largeGrainStretch: 0.18, smallWarpStrength: 0.04,\n\t\tsmallWarpScale: 4.3, fineWarpStrength: 0.004, fineWarpScale: 33.6, ringThickness: 1/37,\n\t\tringBias: 0.07, ringSizeVariance: 0.03, ringVarianceScale: 3.8, barkThickness: 0.3,\n\t\tsplotchScale: 1.92, splotchIntensity: 0.71, cellScale: 830, cellSize: 0.04,\n\t\tdarkGrainColor: '#716347', lightGrainColor: '#998966'\n\t},\n\tmaple: {\n\t\ttransformationMatrix: new THREE.Matrix4().identity(),\n\t\tcenterSize: 1.4, largeWarpScale: 0.38, largeGrainStretch: 0.25, smallWarpStrength: 0.067,\n\t\tsmallWarpScale: 2.5, fineWarpStrength: 0.005, fineWarpScale: 33.6, ringThickness: 1/35,\n\t\tringBias: 0.1, ringSizeVariance: 0.07, ringVarianceScale: 4.6, barkThickness: 0.61,\n\t\tsplotchScale: 0.46, splotchIntensity: 1.49, cellScale: 800, cellSize: 0.03,\n\t\tdarkGrainColor: '#b08969', lightGrainColor: '#bc9d7d'\n\t},\n\tred_oak: {\n\t\ttransformationMatrix: new THREE.Matrix4().identity(),\n\t\tcenterSize: 1.21, largeWarpScale: 0.24, largeGrainStretch: 0.25, smallWarpStrength: 0.044,\n\t\tsmallWarpScale: 2.54, fineWarpStrength: 0.01, fineWarpScale: 14.5, ringThickness: 1/34,\n\t\tringBias: 0.92, ringSizeVariance: 0.03, ringVarianceScale: 5.6, barkThickness: 1.01,\n\t\tsplotchScale: 0.28, splotchIntensity: 3.48, cellScale: 800, cellSize: 0.25,\n\t\tdarkGrainColor: '#af613b', lightGrainColor: '#e0a27a'\n\t},\n\tcherry: {\n\t\ttransformationMatrix: new THREE.Matrix4().identity(),\n\t\tcenterSize: 1.33, largeWarpScale: 0.11, largeGrainStretch: 0.33, smallWarpStrength: 0.024,\n\t\tsmallWarpScale: 2.48, fineWarpStrength: 0.01, fineWarpScale: 15.3, ringThickness: 1/36,\n\t\tringBias: 0.02, ringSizeVariance: 0.04, ringVarianceScale: 6.5, barkThickness: 0.09,\n\t\tsplotchScale: 1.27, splotchIntensity: 1.24, cellScale: 1530, cellSize: 0.15,\n\t\tdarkGrainColor: '#913f27', lightGrainColor: '#b45837'\n\t},\n\tcedar: {\n\t\ttransformationMatrix: new THREE.Matrix4().identity(),\n\t\tcenterSize: 1.11, largeWarpScale: 0.39, largeGrainStretch: 0.12, smallWarpStrength: 0.061,\n\t\tsmallWarpScale: 1.9, fineWarpStrength: 0.006, fineWarpScale: 4.8, ringThickness: 1/25,\n\t\tringBias: 0.01, ringSizeVariance: 0.07, ringVarianceScale: 6.7, barkThickness: 0.1,\n\t\tsplotchScale: 0.61, splotchIntensity: 2.54, cellScale: 630, cellSize: 0.19,\n\t\tdarkGrainColor: '#9a5b49', lightGrainColor: '#ae745e'\n\t},\n\tmahogany: {\n\t\ttransformationMatrix: new THREE.Matrix4().identity(),\n\t\tcenterSize: 1.25, largeWarpScale: 0.26, largeGrainStretch: 0.29, smallWarpStrength: 0.044,\n\t\tsmallWarpScale: 2.54, fineWarpStrength: 0.01, fineWarpScale: 15.3, ringThickness: 1/38,\n\t\tringBias: 0.01, ringSizeVariance: 0.33, ringVarianceScale: 1.2, barkThickness: 0.07,\n\t\tsplotchScale: 0.77, splotchIntensity: 1.39, cellScale: 1400, cellSize: 0.23,\n\t\tdarkGrainColor: '#501d12', lightGrainColor: '#6d3722'\n\t}\n};\n\nexport const WoodGenuses = [ 'teak', 'walnut', 'white_oak', 'pine', 'poplar', 'maple', 'red_oak', 'cherry', 'cedar', 'mahogany' ];\nexport const Finishes = [ 'raw', 'matte', 'semigloss', 'gloss' ];\n\nexport function GetWoodPreset( genus, finish ) {\n\n\tconst params = woodParams[ genus ];\n\n\tlet clearcoat, clearcoatRoughness, clearcoatDarken;\n\n\tswitch ( finish ) {\n\n\t\tcase 'gloss':\n\t\t\tclearcoatDarken = 0.2; clearcoatRoughness = 0.1; clearcoat = 1;\n\t\t\tbreak;\n\n\t\tcase 'semigloss':\n\t\t\tclearcoatDarken = 0.4; clearcoatRoughness = 0.4; clearcoat = 1;\n\t\t\tbreak;\n\n\t\tcase 'matte':\n\t\t\tclearcoatDarken = 0.6; clearcoatRoughness = 1; clearcoat = 1;\n\t\t\tbreak;\n\n\t\tcase 'raw':\n\t\tdefault:\n\t\t\tclearcoatDarken = 1; clearcoatRoughness = 0; clearcoat = 0;\n\n\t}\n\n\treturn { ...params, transformationMatrix: new THREE.Matrix4().copy( params.transformationMatrix ), genus, finish, clearcoat, clearcoatRoughness, clearcoatDarken };\n\n}\n\nconst params = GetWoodPreset( WoodGenuses[ 0 ], Finishes[ 0 ] );\nconst uniforms = {};\n\nuniforms.centerSize = TSL.uniform( params.centerSize ).onObjectUpdate( ( { material } ) => material.centerSize );\nuniforms.largeWarpScale = TSL.uniform( params.largeWarpScale ).onObjectUpdate( ( { material } ) => material.largeWarpScale );\nuniforms.largeGrainStretch = TSL.uniform( params.largeGrainStretch ).onObjectUpdate( ( { material } ) => material.largeGrainStretch );\nuniforms.smallWarpStrength = TSL.uniform( params.smallWarpStrength ).onObjectUpdate( ( { material } ) => material.smallWarpStrength );\nuniforms.smallWarpScale = TSL.uniform( params.smallWarpScale ).onObjectUpdate( ( { material } ) => material.smallWarpScale );\nuniforms.fineWarpStrength = TSL.uniform( params.fineWarpStrength ).onObjectUpdate( ( { material } ) => material.fineWarpStrength );\nuniforms.fineWarpScale = TSL.uniform( params.fineWarpScale ).onObjectUpdate( ( { material } ) => material.fineWarpScale );\nuniforms.ringThickness = TSL.uniform( params.ringThickness ).onObjectUpdate( ( { material } ) => material.ringThickness );\nuniforms.ringBias = TSL.uniform( params.ringBias ).onObjectUpdate( ( { material } ) => material.ringBias );\nuniforms.ringSizeVariance = TSL.uniform( params.ringSizeVariance ).onObjectUpdate( ( { material } ) => material.ringSizeVariance );\nuniforms.ringVarianceScale = TSL.uniform( params.ringVarianceScale ).onObjectUpdate( ( { material } ) => material.ringVarianceScale );\nuniforms.barkThickness = TSL.uniform( params.barkThickness ).onObjectUpdate( ( { material } ) => material.barkThickness );\nuniforms.splotchScale = TSL.uniform( params.splotchScale ).onObjectUpdate( ( { material } ) => material.splotchScale );\nuniforms.splotchIntensity = TSL.uniform( params.splotchIntensity ).onObjectUpdate( ( { material } ) => material.splotchIntensity );\nuniforms.cellScale = TSL.uniform( params.cellScale ).onObjectUpdate( ( { material } ) => material.cellScale );\nuniforms.cellSize = TSL.uniform( params.cellSize ).onObjectUpdate( ( { material } ) => material.cellSize );\nuniforms.darkGrainColor = TSL.uniform( new THREE.Color( params.darkGrainColor ) ).onObjectUpdate( ( { material }, self ) => self.value.set( material.darkGrainColor ) );\nuniforms.lightGrainColor = TSL.uniform( new THREE.Color( params.lightGrainColor ) ).onObjectUpdate( ( { material }, self ) => self.value.set( material.lightGrainColor ) );\nuniforms.transformationMatrix = TSL.uniform( new THREE.Matrix4().copy( params.transformationMatrix ) ).onObjectUpdate( ( { material } ) => material.transformationMatrix );\n\nconst colorNode = wood(\n\tuniforms.transformationMatrix.mul( TSL.vec4(TSL.positionLocal, 1) ).xyz,\n\tuniforms.centerSize,\n\tuniforms.largeWarpScale,\n\tuniforms.largeGrainStretch,\n\tuniforms.smallWarpStrength,\n\tuniforms.smallWarpScale,\n\tuniforms.fineWarpStrength,\n\tuniforms.fineWarpScale,\n\tuniforms.ringThickness,\n\tuniforms.ringBias,\n\tuniforms.ringSizeVariance,\n\tuniforms.ringVarianceScale,\n\tuniforms.barkThickness,\n\tuniforms.splotchScale,\n\tuniforms.splotchIntensity,\n\tuniforms.cellScale,\n\tuniforms.cellSize,\n\tuniforms.darkGrainColor,\n\tuniforms.lightGrainColor\n).mul( params.clearcoatDarken );\n\n/**\n * Procedural wood material using TSL (Three.js Shading Language).\n *\n * Usage examples:\n *\n * // Using presets (recommended for common wood types)\n * const material = WoodNodeMaterial.fromPreset('walnut', 'gloss');\n *\n * // Using custom parameters (for advanced customization)\n * const material = new WoodNodeMaterial({\n *   centerSize: 1.2,\n *   ringThickness: 1/40,\n *   darkGrainColor: new THREE.Color('#2a1a0a'),\n *   lightGrainColor: new THREE.Color('#8b4513'),\n *   clearcoat: 1,\n *   clearcoatRoughness: 0.3\n * });\n *\n * // Mixing presets with custom overrides\n * const walnutParams = GetWoodPreset('walnut', 'raw');\n * const material = new WoodNodeMaterial({\n *   ...walnutParams,\n *   ringThickness: 1/50,  // Override specific parameter\n *   clearcoat: 1    // Add finish\n * });\n */\nexport class WoodNodeMaterial extends THREE.MeshPhysicalMaterial {\n\n\tstatic get type() {\n\n\t\treturn 'WoodNodeMaterial';\n\n\t}\n\n\tconstructor( params = {} ) {\n\n\t\tsuper();\n\n\t\tthis.isWoodNodeMaterial = true;\n\n\t\t// Get default parameters from teak/raw preset\n\t\tconst defaultParams = GetWoodPreset( 'teak', 'raw' );\n\n\t\t// Merge default params with provided params\n\t\tconst finalParams = { ...defaultParams, ...params };\n\n\t\tfor ( const key in finalParams ) {\n\n\t\t\tif ( key === 'genus' || key === 'finish' ) continue;\n\n\t\t\tif ( typeof finalParams[ key ] === 'string' ) {\n\n\t\t\t\tthis[ key ] = new THREE.Color( finalParams[ key ] );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = finalParams[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.colorNode = colorNode;\n\t\tthis.clearcoatNode = finalParams.clearcoat;\n\t\tthis.clearcoatRoughness = finalParams.clearcoatRoughness;\n\n\t}\n\n\t// Static method to create material from preset\n\tstatic fromPreset( genus = 'teak', finish = 'raw' ) {\n\n\t\tconst params = GetWoodPreset( genus, finish );\n\t\treturn new WoodNodeMaterial( params );\n\n\t}\n\n}\n","size_bytes":19407},"public/3danimation/README.md":{"content":"\n  # 3D Rubik's Cube Animation (Copy)\n\n  This is a code bundle for 3D Rubik's Cube Animation (Copy). The original project is available at https://www.figma.com/design/kZjEdiXsvPcVUH9Xt0ISYW/3D-Rubik-s-Cube-Animation--Copy-.\n\n  ## Running the code\n\n  Run `npm i` to install the dependencies.\n\n  Run `npm run dev` to start the development server.\n  ","size_bytes":347},"public/3danimation/vite.config.ts":{"content":"\n  import { defineConfig } from 'vite';\n  import react from '@vitejs/plugin-react-swc';\n  import path from 'path';\n\n  export default defineConfig({\n    plugins: [react()],\n    resolve: {\n      extensions: ['.js', '.jsx', '.ts', '.tsx', '.json'],\n      alias: {\n        'vaul@1.1.2': 'vaul',\n        'sonner@2.0.3': 'sonner',\n        'recharts@2.15.2': 'recharts',\n        'react-resizable-panels@2.1.7': 'react-resizable-panels',\n        'react-hook-form@7.55.0': 'react-hook-form',\n        'react-day-picker@8.10.1': 'react-day-picker',\n        'next-themes@0.4.6': 'next-themes',\n        'lucide-react@0.487.0': 'lucide-react',\n        'input-otp@1.4.2': 'input-otp',\n        'embla-carousel-react@8.6.0': 'embla-carousel-react',\n        'cmdk@1.1.1': 'cmdk',\n        'class-variance-authority@0.7.1': 'class-variance-authority',\n        '@radix-ui/react-tooltip@1.1.8': '@radix-ui/react-tooltip',\n        '@radix-ui/react-toggle@1.1.2': '@radix-ui/react-toggle',\n        '@radix-ui/react-toggle-group@1.1.2': '@radix-ui/react-toggle-group',\n        '@radix-ui/react-tabs@1.1.3': '@radix-ui/react-tabs',\n        '@radix-ui/react-switch@1.1.3': '@radix-ui/react-switch',\n        '@radix-ui/react-slot@1.1.2': '@radix-ui/react-slot',\n        '@radix-ui/react-slider@1.2.3': '@radix-ui/react-slider',\n        '@radix-ui/react-separator@1.1.2': '@radix-ui/react-separator',\n        '@radix-ui/react-select@2.1.6': '@radix-ui/react-select',\n        '@radix-ui/react-scroll-area@1.2.3': '@radix-ui/react-scroll-area',\n        '@radix-ui/react-radio-group@1.2.3': '@radix-ui/react-radio-group',\n        '@radix-ui/react-progress@1.1.2': '@radix-ui/react-progress',\n        '@radix-ui/react-popover@1.1.6': '@radix-ui/react-popover',\n        '@radix-ui/react-navigation-menu@1.2.5': '@radix-ui/react-navigation-menu',\n        '@radix-ui/react-menubar@1.1.6': '@radix-ui/react-menubar',\n        '@radix-ui/react-label@2.1.2': '@radix-ui/react-label',\n        '@radix-ui/react-hover-card@1.1.6': '@radix-ui/react-hover-card',\n        '@radix-ui/react-dropdown-menu@2.1.6': '@radix-ui/react-dropdown-menu',\n        '@radix-ui/react-dialog@1.1.6': '@radix-ui/react-dialog',\n        '@radix-ui/react-context-menu@2.2.6': '@radix-ui/react-context-menu',\n        '@radix-ui/react-collapsible@1.1.3': '@radix-ui/react-collapsible',\n        '@radix-ui/react-checkbox@1.1.4': '@radix-ui/react-checkbox',\n        '@radix-ui/react-avatar@1.1.3': '@radix-ui/react-avatar',\n        '@radix-ui/react-aspect-ratio@1.1.2': '@radix-ui/react-aspect-ratio',\n        '@radix-ui/react-alert-dialog@1.1.6': '@radix-ui/react-alert-dialog',\n        '@radix-ui/react-accordion@1.2.3': '@radix-ui/react-accordion',\n        '@': path.resolve(__dirname, './src'),\n      },\n    },\n    build: {\n      target: 'esnext',\n      outDir: 'build',\n    },\n    server: {\n      port: 3000,\n      open: true,\n    },\n  });","size_bytes":2874},"src/assets/imageData.ts":{"content":"// To solve the image loading issue, the image has been converted to a base64 data URI.\n// This ensures it's always available to the application, regardless of the deployment environment.\nexport const visionBackgroundImage = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAEAAQADASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAr/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAABgj/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD/AD/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//Z';\n","size_bytes":2377},"src/components/ChapterSection.tsx":{"content":"import React from 'react';\nimport EpisodeItem from './EpisodeItem';\n\ninterface Episode {\n  id: string;\n  title: string;\n  description: string;\n  releaseDate: string;\n  contentPath: string;\n  audioPath?: string;\n  videoPath?: string;\n  studyGuidePath?: string;\n  briefPath?: string;\n  images?: string[];\n  isReleased: boolean;\n  languages?: string[];\n}\n\ninterface Chapter {\n  id: string;\n  title: string;\n  episodes: Episode[];\n}\n\ninterface ChapterSectionProps {\n  chapter: Chapter;\n  selectedEpisode: Episode | null;\n  onEpisodeSelect: (episode: Episode) => void;\n  formatDate: (dateString: string) => string;\n}\n\nconst ChapterSection: React.FC<ChapterSectionProps> = ({\n  chapter,\n  selectedEpisode,\n  onEpisodeSelect,\n  formatDate\n}) => {\n  return (\n    <div className=\"mb-6\">\n      <h3 className=\"text-base font-semibold text-gray-800 mb-3 px-2\">{chapter.title}</h3>\n      <div className=\"space-y-2\">\n        {chapter.episodes.map((episode) => (\n          <EpisodeItem\n            key={episode.id}\n            episode={episode}\n            isSelected={selectedEpisode?.id === episode.id}\n            onSelect={onEpisodeSelect}\n            formatDate={formatDate}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default ChapterSection;\n","size_bytes":1254},"src/components/CompactAudioControls.tsx":{"content":"import React from 'react';\nimport { Play, Pause, Square, SkipBack, SkipForward, Volume2, Mic } from 'lucide-react';\n\ninterface CompactAudioControlsProps {\n  audioState: 'playing' | 'paused' | 'stopped';\n  audioProgress: number;\n  audioDuration: number;\n  handleAudioControl: (action: 'play' | 'pause' | 'stop' | 'forward' | 'backward') => void;\n  handleNotebookOpen: () => void;\n  formatTime: (seconds: number) => string;\n}\n\nconst CompactAudioControls: React.FC<CompactAudioControlsProps> = ({\n  audioState,\n  audioProgress,\n  audioDuration,\n  handleAudioControl,\n  handleNotebookOpen,\n  formatTime\n}) => {\n  return (\n    <div className=\"flex items-center space-x-3 bg-gray-100 px-3 py-2 border-l-2 border-gray-900\">\n      <div className=\"flex items-center space-x-1\">\n        <button onClick={() => handleAudioControl('backward')} className=\"text-gray-900 hover:text-gray-700\">\n          <SkipBack className=\"w-4 h-4\" />\n        </button>\n        <button onClick={() => handleAudioControl(audioState === 'playing' ? 'pause' : 'play')} className=\"text-gray-900 hover:text-gray-700\">\n          {audioState === 'playing' ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n        </button>\n        <button onClick={() => handleAudioControl('stop')} className=\"text-gray-900 hover:text-gray-700\">\n          <Square className=\"w-4 h-4\" />\n        </button>\n        <button onClick={() => handleAudioControl('forward')} className=\"text-gray-900 hover:text-gray-700\">\n          <SkipForward className=\"w-4 h-4\" />\n        </button>\n      </div>\n      <div className=\"flex items-center space-x-2 flex-1 min-w-0\">\n        <Volume2 className=\"w-4 h-4 text-gray-900 flex-shrink-0\" />\n        <div className=\"flex-1 bg-gray-300 h-1 min-w-[60px]\">\n          <div\n            className=\"bg-gray-900 h-1\"\n            style={{ width: `${(audioProgress / audioDuration) * 100}%` }}\n          />\n        </div>\n        <span className=\"text-xs text-gray-900 flex-shrink-0 min-w-[60px]\">\n          {formatTime(audioProgress)}/{formatTime(audioDuration)}\n        </span>\n      </div>\n      <button\n        onClick={handleNotebookOpen}\n        className=\"bg-gray-900 text-white px-2 py-1 text-xs hover:bg-gray-800 flex items-center gap-1 border-0 transition-colors flex-shrink-0\"\n      >\n        <Mic className=\"w-3 h-3\" />\n        ASK\n      </button>\n    </div>\n  );\n};\n\nexport default CompactAudioControls;\n","size_bytes":2402},"src/components/DiscussionForum.tsx":{"content":"import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Heart, MessageSquare, User, LogIn, UserPlus } from 'lucide-react';\n\ninterface Comment {\n  id: string;\n  user: string;\n  text: string;\n  timestamp: Date;\n  likes: number;\n  isReported?: boolean;\n  isModerated?: boolean;\n  replies?: Comment[];\n}\n\ninterface ForumUser {\n  id: string;\n  email: string;\n}\n\ninterface DiscussionForumProps {\n  comments: Comment[];\n  newComment: string;\n  setNewComment: (comment: string) => void;\n  user: ForumUser | null;\n  replyingTo: string | null;\n  setReplyingTo: (id: string | null) => void;\n  replyText: string;\n  setReplyText: (text: string) => void;\n  showModeration: boolean;\n  setShowModeration: (show: boolean) => void;\n  handleCommentSubmit: () => void;\n  handleReplySubmit: (commentId: string) => void;\n  handleLikeComment: (commentId: string, isReply?: boolean, parentId?: string) => void;\n  handleReportComment: (commentId: string, isReply?: boolean, parentId?: string) => void;\n  handleModerateComment: (commentId: string, action: 'approve' | 'remove', isReply?: boolean, parentId?: string) => void;\n  isProminent?: boolean;\n  hideModeration?: boolean;\n  onLogin?: () => void;\n  onRegister?: () => void;\n}\n\nconst DiscussionForum: React.FC<DiscussionForumProps> = ({\n  comments,\n  newComment,\n  setNewComment,\n  user,\n  replyingTo,\n  setReplyingTo,\n  replyText,\n  setReplyText,\n  showModeration,\n  setShowModeration,\n  handleCommentSubmit,\n  handleReplySubmit,\n  handleLikeComment,\n  handleReportComment,\n  handleModerateComment,\n  isProminent = false,\n  hideModeration = false,\n  onLogin,\n  onRegister\n}) => {\n  return (\n    <div className={`${isProminent ? 'h-full flex flex-col p-2' : 'mt-12 pt-8 border-t border-gray-200'}`}>\n      <div className=\"flex items-center justify-between mb-2 flex-shrink-0\">\n        <div className=\"flex items-center space-x-2\">\n          <MessageSquare className=\"w-4 h-4 text-gray-900\" />\n          <h3 className=\"text-xs font-bold text-gray-900\">ARCHITECT'S FORUM</h3>\n          <span className=\"bg-gray-900 text-white px-1 py-0.5 text-xs\">\n            {comments.length}\n          </span>\n        </div>\n        {user && !hideModeration && (\n          <button\n            onClick={() => setShowModeration(!showModeration)}\n            className=\"text-xs bg-gray-200 hover:bg-gray-300 px-2 py-1 transition-colors border-0\"\n          >\n            {showModeration ? 'HIDE' : 'MOD'}\n          </button>\n        )}\n      </div>\n\n      {/* Comment Form - Moved to top for prominence */}\n      {user ? (\n        <div className=\"mb-3 p-2 bg-gray-50 border-l-2 border-gray-900 flex-shrink-0\">\n          <div className=\"flex items-center space-x-1 mb-2\">\n            <User className=\"w-3 h-3 text-gray-900\" />\n            <span className=\"text-xs text-gray-900\">{user.email}</span>\n          </div>\n          <textarea\n            placeholder=\"Share your thoughts...\"\n            value={newComment}\n            onChange={(e) => setNewComment(e.target.value)}\n            className=\"w-full p-2 border border-gray-300 text-gray-900 focus:ring-1 focus:ring-gray-900 focus:border-transparent text-xs resize-none overflow-hidden\"\n            rows={3}\n            style={{ wordWrap: 'break-word', overflowWrap: 'break-word' }}\n          />\n          <button\n            onClick={handleCommentSubmit}\n            className=\"mt-2 bg-gray-900 text-white px-3 py-1 hover:bg-gray-800 transition-colors text-xs border-0\"\n          >\n            POST\n          </button>\n        </div>\n      ) : (\n        <div className=\"mb-3 p-2 bg-gray-50 border-l-2 border-gray-900 flex-shrink-0\">\n          <div className=\"flex flex-col space-y-2\">\n            <div className=\"flex items-center gap-2 text-gray-900\">\n              <MessageSquare className=\"w-3 h-3\" />\n              <span className=\"text-xs\">JOIN DISCUSSION</span>\n            </div>\n            <div className=\"flex flex-col space-y-1\">\n              <button\n                onClick={onLogin}\n                className=\"inline-flex items-center justify-center gap-1 bg-gray-900 text-white px-2 py-1 hover:bg-gray-800 transition-colors text-xs border-0\"\n              >\n                <LogIn className=\"w-3 h-3\" />\n                LOGIN\n              </button>\n              <button\n                onClick={onRegister}\n                className=\"inline-flex items-center justify-center gap-1 bg-white text-gray-900 border border-gray-900 px-2 py-1 hover:bg-gray-100 transition-colors text-xs\"\n              >\n                <UserPlus className=\"w-3 h-3\" />\n                REGISTER\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Comments List */}\n      {comments.length > 0 && (\n        <div className=\"space-y-2 flex-1 overflow-y-auto\">\n          {comments.map((comment) => (\n            <div\n              key={comment.id}\n              className={`border-l-4 p-2 overflow-hidden ${\n                comment.isReported\n                  ? 'border-l-red-500 bg-red-50'\n                  : comment.isModerated\n                    ? 'border-l-green-500 bg-green-50'\n                    : 'border-l-blue-400 bg-blue-50'\n              }`}\n            >\n              <div className=\"flex justify-between items-start\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <User className=\"w-4 h-4 text-gray-600 flex-shrink-0\" />\n                    <h4 className=\"text-xs text-gray-900 break-words min-w-0\">{comment.user}</h4>\n                    <span className=\"text-xs text-gray-500 break-words min-w-0\">\n                      {comment.timestamp.toLocaleDateString()} {comment.timestamp.toLocaleTimeString()}\n                    </span>\n                  </div>\n                  <p className=\"text-gray-800 text-xs leading-relaxed break-words\">{comment.text}</p>\n                </div>\n                <div className=\"flex items-center space-x-3 ml-4\">\n                  <button \n                    onClick={() => handleLikeComment(comment.id)}\n                    className=\"flex items-center space-x-1 text-gray-600 hover:text-gray-900 transition-colors\"\n                  >\n                    <Heart className=\"w-4 h-4\" />\n                    <span className=\"text-xs\">{comment.likes}</span>\n                  </button>\n                  {user && !comment.isReported && (\n                    <button\n                      onClick={() => handleReportComment(comment.id)}\n                      className=\"text-xs text-gray-500 hover:text-red-600 whitespace-nowrap\"\n                    >\n                      REPORT\n                    </button>\n                  )}\n                </div>\n              </div>\n              \n              {/* Moderation Controls */}\n              {showModeration && comment.isReported && (\n                <div className=\"mt-3 flex justify-end space-x-2\">\n                  <button \n                    onClick={() => handleModerateComment(comment.id, 'approve')}\n                    className=\"text-xs bg-green-200 text-green-900 px-3 py-1 hover:bg-green-300 border-0\"\n                  >\n                    APPROVE\n                  </button>\n                  <button \n                    onClick={() => handleModerateComment(comment.id, 'remove')}\n                    className=\"text-xs bg-red-200 text-red-900 px-3 py-1 hover:bg-red-300 border-0\"\n                  >\n                    REMOVE\n                  </button>\n                </div>\n              )}\n              \n              {/* Reply Button */}\n              {user && (\n                <div className=\"mt-3 flex justify-end\">\n                  <button \n                    onClick={() => setReplyingTo(replyingTo === comment.id ? null : comment.id)}\n                    className=\"text-xs text-gray-900 hover:text-gray-700 border border-gray-300 px-3 py-1 hover:bg-gray-100 transition-colors\"\n                  >\n                    {replyingTo === comment.id ? 'CANCEL' : 'REPLY'}\n                  </button>\n                </div>\n              )}\n              \n              {/* Reply Form */}\n              {replyingTo === comment.id && (\n                <div className=\"mt-4 pl-1 border-l-2 border-gray-300\">\n                  <textarea\n                    placeholder=\"Write your reply...\"\n                    value={replyText}\n                    onChange={(e) => setReplyText(e.target.value)}\n                    className=\"w-full p-2 text-xs border border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-transparent resize-none overflow-hidden\"\n                    rows={3}\n                    style={{ wordWrap: 'break-word', overflowWrap: 'break-word' }}\n                  />\n                  <div className=\"mt-2 flex justify-end\">\n                    <button\n                      onClick={() => handleReplySubmit(comment.id)}\n                      className=\"text-xs bg-gray-900 text-white px-4 py-2 hover:bg-gray-800 border-0\"\n                    >\n                      POST REPLY\n                    </button>\n                  </div>\n                </div>\n              )}\n              \n              {/* Replies */}\n              {comment.replies && comment.replies.length > 0 && (\n                <div className=\"mt-4 pl-1 border-l-2 border-gray-200 space-y-3\">\n                  {comment.replies.map((reply) => (\n                    <div\n                      key={reply.id}\n                      className={`p-1 ${\n                        reply.isReported\n                          ? 'bg-red-50 border border-red-200'\n                          : reply.isModerated\n                            ? 'bg-green-50 border border-green-200'\n                            : 'bg-green-50 border border-green-200'\n                      }`}\n                    >\n                      <div className=\"flex justify-between items-start\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-2 mb-1\">\n                            <User className=\"w-3 h-3 text-gray-600 flex-shrink-0\" />\n                            <h5 className=\"text-xs text-gray-900 break-words min-w-0\">{reply.user}</h5>\n                            <span className=\"text-xs text-gray-500 break-words min-w-0\">\n                              {reply.timestamp.toLocaleDateString()}\n                            </span>\n                          </div>\n                          <p className=\"text-xs text-gray-800 leading-relaxed break-words\">{reply.text}</p>\n                        </div>\n                        <div className=\"flex items-center space-x-2 ml-3\">\n                          <button \n                            onClick={() => handleLikeComment(reply.id, true, comment.id)}\n                            className=\"flex items-center space-x-1 text-gray-500 hover:text-gray-700\"\n                          >\n                            <Heart className=\"w-3 h-3\" />\n                            <span className=\"text-xs\">{reply.likes}</span>\n                          </button>\n                          {user && !reply.isReported && (\n                            <button\n                              onClick={() => handleReportComment(reply.id, true, comment.id)}\n                              className=\"text-xs text-gray-500 hover:text-red-500 whitespace-nowrap\"\n                            >\n                              REPORT\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                      \n                      {/* Moderation Controls for Replies */}\n                      {showModeration && reply.isReported && (\n                        <div className=\"mt-2 flex justify-end space-x-2\">\n                          <button \n                            onClick={() => handleModerateComment(reply.id, 'approve', true, comment.id)}\n                            className=\"text-xs bg-green-200 text-green-900 px-2 py-1 hover:bg-green-300 border-0\"\n                          >\n                            APPROVE\n                          </button>\n                          <button \n                            onClick={() => handleModerateComment(reply.id, 'remove', true, comment.id)}\n                            className=\"text-xs bg-red-200 text-red-900 px-2 py-1 hover:bg-red-300 border-0\"\n                          >\n                            REMOVE\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DiscussionForum;\n","size_bytes":12732},"src/components/EpisodeItem.tsx":{"content":"import React from 'react';\n\ninterface Episode {\n  id: string;\n  title: string;\n  description: string;\n  releaseDate: string;\n  contentPath: string;\n  audioPath?: string;\n  videoPath?: string;\n  studyGuidePath?: string;\n  briefPath?: string;\n  images?: string[];\n  isReleased: boolean;\n  languages?: string[];\n}\n\ninterface EpisodeItemProps {\n  episode: Episode;\n  isSelected: boolean;\n  onSelect: (episode: Episode) => void;\n  formatDate: (dateString: string) => string;\n}\n\nconst EpisodeItem: React.FC<EpisodeItemProps> = ({\n  episode,\n  isSelected,\n  onSelect,\n  formatDate\n}) => {\n  return (\n    <div\n      className={`p-3 mx-2 rounded-lg transition-all duration-200 ${\n        isSelected\n          ? 'bg-blue-50 border border-blue-200'\n          : episode.isReleased\n          ? 'bg-gray-50 hover:bg-gray-100 border border-transparent cursor-pointer'\n          : 'bg-gray-100 border border-gray-200 opacity-50 cursor-not-allowed'\n      }`}\n      onClick={() => episode.isReleased && onSelect(episode)}\n    >\n      <h4 className=\"font-medium text-gray-900 text-xs mb-2\">{episode.title}</h4>\n      <p className=\"text-xs text-gray-600 mb-2 leading-relaxed\">{episode.description}</p>\n      <div className=\"text-xs text-gray-500\">\n        {episode.isReleased ? `Released: ${formatDate(episode.releaseDate)}` : `Coming: ${formatDate(episode.releaseDate)}`}\n      </div>\n    </div>\n  );\n};\n\nexport default EpisodeItem;\n","size_bytes":1414},"src/components/Footer.tsx":{"content":"import React from 'react';\nimport { MessageCircle, Heart } from 'lucide-react';\n\nconst Footer: React.FC = () => {\n  return (\n    <footer className=\"bg-gray-800 text-white mt-auto\">\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-2\">\n        <div className=\"flex flex-col md:flex-row justify-between items-center text-center md:text-left\">\n          <p className=\"text-gray-400 text-sm mb-4 md:mb-0 flex items-center gap-1\">\n            © 2025 AI Twin Tech. All rights reserved. - Built with <Heart className=\"w-4 h-4 text-red-500\" /> by SketchApp.\n          </p>\n          <div className=\"flex items-center\">\n            <a\n              href=\"mailto:contact@aitwintech.com\"\n              className=\"flex items-center gap-2 text-white font-semibold hover:text-electric-blue-400 transition-colors duration-300\"\n            >\n              <MessageCircle className=\"w-5 h-5\" />\n              Let's Chat (Introvert Friendly)\n            </a>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","size_bytes":1047},"src/components/Frame.tsx":{"content":"import React from 'react';\n\ninterface FrameProps {\n  layout?: 'vertical' | 'horizontal';\n  gap?: string;\n  justify?: 'start' | 'center' | 'end' | 'between' | 'around' | 'evenly';\n  align?: 'start' | 'center' | 'end' | 'stretch' | 'baseline';\n  padding?: string;\n  isSticky?: 'true' | 'false';\n  width?: 'auto' | 'full';\n  bgColor?: string;\n  border?: 'true' | 'false';\n  shadow?: 'none' | 'sm' | 'md' | 'lg' | 'xl' | '2xl';\n  children?: React.ReactNode;\n  className?: string;\n}\n\nconst Frame: React.FC<FrameProps> = ({\n  layout = 'vertical',\n  gap = '4',\n  justify = 'start',\n  align = 'stretch',\n  padding = '4',\n  isSticky = 'false',\n  width = 'auto',\n  bgColor = 'transparent',\n  border = 'false',\n  shadow = 'none',\n  children,\n  className = '',\n}) => {\n  const baseClasses = 'flex';\n  \n  const layoutClasses = {\n    vertical: 'flex-col',\n    horizontal: 'flex-row',\n  };\n\n  const justifyClasses = {\n    start: 'justify-start',\n    center: 'justify-center',\n    end: 'justify-end',\n    between: 'justify-between',\n    around: 'justify-around',\n    evenly: 'justify-evenly',\n  };\n\n  const alignItemsClasses = {\n    start: 'items-start',\n    center: 'items-center',\n    end: 'items-end',\n    stretch: 'items-stretch',\n    baseline: 'items-baseline',\n  };\n\n  const widthClasses = {\n    auto: 'w-auto',\n    full: 'w-full',\n  };\n  \n  const shadowClasses = {\n      none: '',\n      sm: 'shadow-sm',\n      md: 'shadow-md',\n      lg: 'shadow-lg',\n      xl: 'shadow-xl',\n      '2xl': 'shadow-2xl',\n  };\n\n  // Tailwind doesn't support negative paddings/gaps directly in JIT with arbitrary values like \"p-[-22]\".\n  // So we handle them via style attribute if they are negative.\n  const gapStyle = parseInt(gap) < 0 ? { gap: `${gap}rem` } : {};\n  const paddingStyle = parseInt(padding) < 0 ? { padding: `${parseInt(padding)/4}rem` } : {};\n  const gapClass = parseInt(gap) >= 0 ? `gap-${gap}` : '';\n  const paddingClass = parseInt(padding) >= 0 ? `p-${padding}` : '';\n\n  const finalClassName = [\n    baseClasses,\n    layoutClasses[layout],\n    gapClass,\n    justifyClasses[justify],\n    alignItemsClasses[align],\n    paddingClass,\n    isSticky === 'true' ? 'sticky top-0 z-40' : '',\n    widthClasses[width],\n    bgColor !== 'transparent' ? `bg-${bgColor}` : '',\n    border === 'true' ? 'border border-gray-200' : '',\n    shadowClasses[shadow],\n    className,\n  ].filter(Boolean).join(' ');\n  \n  return (\n    <div className={finalClassName} style={{...gapStyle, ...paddingStyle}}>\n      {children}\n    </div>\n  );\n};\n\nexport default Frame;\n","size_bytes":2528},"src/components/Header.tsx":{"content":"import React, { useState } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { NavLink as NavLinkType } from '../types';\nimport {\n  Menu,\n  X,\n  User,\n  LogOut,\n  Building2,\n  Search,\n  Sparkles,\n  Play,\n  Eye,\n  Home,\n  BookOpen,\n  PenTool,\n  Wand2,\n  Cloud,\n  Target,\n  MessageSquare\n} from \"lucide-react\";\n\nconst navLinks: NavLinkType[] = [\n  { id: 1, text: 'Home', href: '/', icon: Home },\n  { id: 2, text: 'About', href: '/about', icon: BookOpen },\n  { id: 3, text: 'Roadmap', href: '/roadmap', icon: Target },\n  { id: 4, text: 'TwinLab', href: '/twinlab', icon: MessageSquare },\n];\n\nconst Header: React.FC = () => {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n  const { pathname } = useLocation();\n  const [isOpen, setIsOpen] = useState(false);\n  const [language, setLanguage] = useState<'EN' | 'AR'>('EN');\n\n  const handleLogout = async () => {\n    await logout();\n    navigate('/login');\n  };\n\n  // Determine which logo to show based on current path\n  const isJosoorPage = pathname.startsWith('/josoor');\n  const isSketchAppPage = pathname.startsWith('/sketchapp');\n  const isAuraPage = pathname.startsWith('/aura');\n  const isWeatherMapPage = pathname.startsWith('/weathermap');\n  const isTwinLabPage = pathname.startsWith('/twinlab');\n  \n  let logoSrc = '/images/aittlogo.png';\n  let logoAlt = 'AI Twin Tech';\n  let showTwinLabTitle = false;\n  \n  if (isTwinLabPage) {\n    logoSrc = '/assets/cosmic/twinlab-logo.png';\n    logoAlt = 'TwinLab';\n    showTwinLabTitle = true;\n  } else if (isJosoorPage) {\n    logoSrc = '/images/josoorlogo.png';\n    logoAlt = 'Josoor';\n  } else if (isSketchAppPage) {\n    logoSrc = '/images/sketchapplogo.png';\n    logoAlt = 'SketchApp';\n  } else if (isAuraPage) {\n    logoSrc = '/images/auralogonotext.png';\n    logoAlt = 'Aura';\n  } else if (isWeatherMapPage) {\n    logoSrc = '/images/josoorlogo.png';\n    logoAlt = 'Weather Map';\n  }\n\n  return (\n    <header className=\"shadow-md sticky top-0 z-50 text-white\" style={{ backgroundColor: '#00122d' }}>\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-between h-20\">\n          <Link to=\"/\" className=\"flex items-center gap-4\">\n            <div className=\"relative\">\n              <img \n                src={logoSrc}\n                alt={logoAlt}\n                className=\"h-12 w-auto\"\n              />\n              {showTwinLabTitle && (\n                <div className=\"absolute inset-0 bg-cyan-400/20 rounded-full blur-lg animate-pulse\" />\n              )}\n            </div>\n            {showTwinLabTitle && (\n              <h1 className=\"text-2xl font-allerta text-white tracking-wider\">\n                TwinLab - The Future, Ready Today\n              </h1>\n            )}\n          </Link>\n          <div className=\"hidden md:flex items-center space-x-8\">\n            <nav className=\"flex items-center space-x-6\">\n              {navLinks.map((link) => {\n                const isActive = link.href === '/' ? pathname === '/' : pathname.startsWith(link.href);\n                const IconComponent = link.icon;\n                return (\n                  <div key={link.id} className=\"relative group\">\n                    <Link\n                      to={link.href}\n                      className={`py-2 flex items-center gap-2 transition-colors duration-300 ${\n                        isActive\n                          ? 'text-electric-blue-400 font-semibold'\n                          : 'text-gray-300 hover:text-electric-blue-400'\n                      }`}\n                    >\n                      {IconComponent && <IconComponent className=\"w-4 h-4\" />}\n                      {link.text}\n                    </Link>\n                    {link.subLinks && (\n                      <div className=\"absolute top-full left-0 pt-2 opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all duration-300\">\n                        <div className=\"bg-gray-700 rounded-md shadow-lg p-2 w-max\">\n                          {link.subLinks.map((subLink) => {\n                            const SubIconComponent = subLink.icon;\n                            return (\n                              <Link\n                                key={subLink.id}\n                                to={subLink.href}\n                                className=\"flex items-center gap-2 px-4 py-2 text-nowrap text-sm text-left text-gray-200 hover:bg-gray-600 rounded-md transition-colors\"\n                              >\n                                {SubIconComponent && <SubIconComponent className=\"w-3 h-3\" />}\n                                {subLink.text}\n                              </Link>\n                            );\n                          })}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </nav>\n            <div className=\"flex items-center space-x-4\">\n              {/* TwinLab Login Button */}\n              {isTwinLabPage && (\n                <button\n                  onClick={() => navigate('/login')}\n                  className=\"px-6 py-2 border-2 border-white/30 text-white hover:border-white/60 hover:bg-white/10 transition-all duration-300 backdrop-blur-sm rounded-md\"\n                >\n                  LOGIN / REGISTER\n                </button>\n              )}\n              \n              {/* Language Toggle */}\n              <button\n                onClick={() => setLanguage(language === 'EN' ? 'AR' : 'EN')}\n                className=\"flex items-center gap-1 px-3 py-1.5 bg-gray-700 text-white font-semibold rounded-md shadow-md hover:bg-gray-600 transition-all duration-300 text-sm\"\n              >\n                {language}\n              </button>\n              {user && (\n                <button\n                  onClick={handleLogout}\n                  className=\"flex items-center gap-2 px-4 py-2 bg-electric-blue-600 text-white font-semibold rounded-md shadow-md hover:bg-electric-blue-700 transition-all duration-300\"\n                >\n                  <LogOut className=\"w-4 h-4\" />\n                  Logout\n                </button>\n              )}\n            </div>\n          </div>\n          <div className=\"md:hidden\">\n            <button onClick={() => setIsOpen(!isOpen)} className=\"text-gray-200 focus:outline-none\">\n              {isOpen ? <X className=\"w-6 h-6\" /> : <Menu className=\"w-6 h-6\" />}\n            </button>\n          </div>\n        </div>\n      </div>\n      {isOpen && (\n        <div className=\"md:hidden pb-4\" style={{ backgroundColor: '#00122d' }}>\n          <nav className=\"flex flex-col items-center space-y-4\">\n            {navLinks.map((link) => {\n              const IconComponent = link.icon;\n              return (\n                <React.Fragment key={link.id}>\n                  <Link\n                    to={link.href}\n                    onClick={() => !link.subLinks && setIsOpen(false)}\n                    className=\"flex items-center gap-2 text-gray-300 hover:text-electric-blue-400 transition-colors duration-300 font-medium text-lg\"\n                  >\n                    {IconComponent && <IconComponent className=\"w-5 h-5\" />}\n                    {link.text}\n                  </Link>\n                  {link.subLinks && (\n                    <div className=\"pl-4 flex flex-col items-center space-y-3 pt-1 pb-2\">\n                      {link.subLinks.map(subLink => {\n                        const SubIconComponent = subLink.icon;\n                        return (\n                          <Link\n                            key={subLink.id}\n                            to={subLink.href}\n                            onClick={() => setIsOpen(false)}\n                            className=\"flex items-center gap-2 text-gray-400 hover:text-electric-blue-500 transition-colors duration-300\"\n                          >\n                            {SubIconComponent && <SubIconComponent className=\"w-4 h-4\" />}\n                            {subLink.text}\n                          </Link>\n                        );\n                      })}\n                    </div>\n                  )}\n                </React.Fragment>\n              );\n            })}\n          </nav>\n          <div className=\"flex flex-col items-center space-y-4 mt-6\">\n            {/* Mobile Language Toggle */}\n            <button\n              onClick={() => setLanguage(language === 'EN' ? 'AR' : 'EN')}\n              className=\"flex items-center gap-2 px-4 py-2 bg-gray-700 text-white font-semibold rounded-md shadow-md hover:bg-gray-600 transition-all duration-300\"\n            >\n              {language === 'EN' ? 'العربية' : 'English'}\n            </button>\n            {user && (\n              <button\n                onClick={() => {\n                  handleLogout();\n                  setIsOpen(false);\n                }}\n                className=\"flex items-center gap-2 w-3/4 px-4 py-2 bg-electric-blue-600 text-white font-semibold rounded-md shadow-md hover:bg-electric-blue-700 transition-all duration-300\"\n              >\n                <LogOut className=\"w-4 h-4\" />\n                Logout\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n    </header>\n  );\n};\n\nexport default Header;\n","size_bytes":9371},"src/components/Hero.tsx":{"content":"import React from 'react';\nimport { Link } from 'react-router-dom';\n\ninterface HeroProps {\n  title?: string;\n  subtitle?: string;\n  buttonText?: string;\n  buttonHref?: string;\n  imageUrl?: string;\n  videoUrl?: string;\n  embedUrl?: string; // e.g. '/3danimation/index.html'\n  embedComponent?: React.ReactNode; // React 3D component to render\n  embedInteractive?: boolean; // enable pointer events on embed\n  embedOnTop?: boolean; // render embed above content\n  overlayOpacity?: number; // 0..1\n  align?: 'left' | 'center' | 'right';\n}\n\nconst Hero: React.FC<HeroProps> = ({\n  title,\n  subtitle,\n  buttonText,\n  buttonHref,\n  imageUrl,\n  videoUrl,\n  embedUrl,\n  embedComponent,\n  embedInteractive = false,\n  embedOnTop = false,\n  overlayOpacity = 0.6,\n  align = 'left',\n}) => {\n  const alignClasses = {\n    left: 'items-start text-left',\n    center: 'items-center text-center',\n    right: 'items-end text-right',\n  } as const;\n\n  const buttonClasses =\n    'w-auto px-8 py-3 bg-electric-blue-600 text-white font-bold shadow-md hover:bg-electric-blue-700 transition-all duration-300';\n\n  return (\n    <section className=\"relative w-full h-0 overflow-visible flex items-start justify-start\">\n      {/* Background media (video fixed to create non-scrolling effect) */}\n      {!embedUrl && videoUrl && (\n        <video\n          className=\"fixed top-0 left-0 w-screen h-screen object-cover z-0\"\n          autoPlay\n          loop\n          muted\n          playsInline\n        >\n          <source src={videoUrl} type=\"video/mp4\" />\n          Your browser does not support the video tag.\n        </video>\n      )}\n      {!embedUrl && !videoUrl && imageUrl && (\n        <div\n          className=\"fixed top-0 left-0 w-screen h-screen bg-cover bg-center z-0\"\n          style={{ backgroundImage: `url(${imageUrl})` }}\n        />\n      )}\n\n\n      {/* Content */}\n      {(title || subtitle || buttonText) && (\n        <div\n          className={`relative z-10 flex flex-col justify-start h-full px-6 sm:px-10 ${alignClasses[align]}`}\n        >\n          <div className=\"w-[30vw] shrink-0\">\n            {title && (\n              <h1\n                className=\"font-bold text-white leading-tight mb-3\"\n                style={{ fontSize: 'clamp(1.75rem, 3.5vw, 4rem)', lineHeight: 1.1 as unknown as string }}\n              >\n                {title}\n              </h1>\n            )}\n            {subtitle && (\n              <p\n                className=\"text-gray-200 mb-8\"\n                style={{ fontSize: 'clamp(1rem, 1.5vw, 1.5rem)', lineHeight: 1.6 as unknown as string }}\n              >\n                <strong>The Mission: </strong>\n                {subtitle.replace('The Mission: ', '')}\n              </p>\n            )}\n            {buttonText && (\n              buttonHref ? (\n                <Link to={buttonHref} className={buttonClasses}>\n                  {buttonText}\n                </Link>\n              ) : (\n                <button className={buttonClasses}>{buttonText}</button>\n              )\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Embed either behind or on top depending on flag */}\n      {(embedUrl || embedComponent) && !embedOnTop && (\n        <div\n          className=\"absolute inset-0 w-full h-full\"\n          style={{ pointerEvents: embedInteractive ? 'auto' : 'none' }}\n        >\n          {embedUrl ? (\n            <iframe\n              src={embedUrl}\n              title=\"background-animation\"\n              className=\"absolute inset-0 w-full h-full\"\n              style={{ border: '0' }}\n            />\n          ) : (\n            <div className=\"absolute inset-0 w-full h-full\">{embedComponent}</div>\n          )}\n        </div>\n      )}\n      {(embedUrl || embedComponent) && embedOnTop && (\n        <div\n          className=\"absolute inset-0 w-full h-full z-20\"\n          style={{ pointerEvents: embedInteractive ? 'auto' : 'none' }}\n        >\n          {embedUrl ? (\n            <iframe\n              src={embedUrl}\n              title=\"foreground-animation\"\n              className=\"absolute inset-0 w-full h-full\"\n              style={{ border: '0' }}\n            />\n          ) : (\n            <div className=\"absolute inset-0 w-full h-full\">{embedComponent}</div>\n          )}\n        </div>\n      )}\n    </section>\n  );\n};\n\nexport default Hero;\n","size_bytes":4299},"src/components/HtmlRenderer.tsx":{"content":"import React, { useMemo } from 'react';\n\ninterface HtmlRendererProps {\n  html: string;\n  basePath: string; // e.g. \"/lessons/1.1/\"\n}\n\nfunction rewriteRelativeUrls(html: string, basePath: string): string {\n  try {\n    // Remove all <script> tags for safety\n    const withoutScripts = html.replace(/<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi, '');\n\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(withoutScripts, 'text/html');\n\n    const isExternal = (val: string) => /^(?:[a-z]+:)?\\/\\//i.test(val) || val.startsWith('data:');\n    const toAbsolute = (val: string) => {\n      try {\n        const url = new URL(val, window.location.origin + (basePath.endsWith('/') ? basePath : basePath + '/'));\n        return url.pathname + url.search + url.hash;\n      } catch {\n        return val;\n      }\n    };\n\n    const elements: Element[] = Array.from(doc.querySelectorAll('[src], [href], source[srcset], img[srcset]'));\n    elements.forEach((el) => {\n      const tag = el.tagName.toLowerCase();\n      // src\n      if (el.hasAttribute('src')) {\n        const val = el.getAttribute('src') || '';\n        if (val && !val.startsWith('/') && !isExternal(val)) {\n          el.setAttribute('src', toAbsolute(val));\n        }\n      }\n      // href (stylesheets/links)\n      if (el.hasAttribute('href')) {\n        const val = el.getAttribute('href') || '';\n        if (val && !val.startsWith('#') && !val.startsWith('/') && !isExternal(val)) {\n          el.setAttribute('href', toAbsolute(val));\n        }\n      }\n      // srcset handling\n      const srcsetAttr = el.getAttribute('srcset');\n      if (srcsetAttr) {\n        const parts = srcsetAttr.split(',').map(s => s.trim()).filter(Boolean).map(entry => {\n          const [url, descriptor] = entry.split(/\\s+/, 2);\n          if (!url) return entry;\n          if (url.startsWith('/') || isExternal(url)) return entry;\n          const abs = toAbsolute(url);\n          return descriptor ? `${abs} ${descriptor}` : abs;\n        });\n        el.setAttribute('srcset', parts.join(', '));\n      }\n\n      // Ensure <a> opens in new tab for safety\n      if (tag === 'a') {\n        el.setAttribute('target', '_blank');\n        el.setAttribute('rel', 'noopener noreferrer');\n      }\n    });\n\n    // Inline style url(...) rewrites (basic)\n    Array.from(doc.querySelectorAll<HTMLElement>('[style]')).forEach((el) => {\n      const style = el.getAttribute('style') || '';\n      const rewritten = style.replace(/url\\(([^)]+)\\)/g, (m, p1) => {\n        const raw = String(p1).trim().replace(/^['\"]|['\"]$/g, '');\n        if (raw.startsWith('/') || isExternal(raw)) return `url(${p1})`;\n        const abs = toAbsolute(raw);\n        return `url(${abs})`;\n      });\n      if (rewritten !== style) el.setAttribute('style', rewritten);\n    });\n\n    // Collect stylesheet links and inline styles from <head> and keep them\n    const headFragments: string[] = [];\n    const headNodes = doc.head ? Array.from(doc.head.querySelectorAll('link[rel=\"stylesheet\"], style')) : [];\n    headNodes.forEach((n) => {\n      headFragments.push((n as HTMLElement).outerHTML);\n    });\n\n    const container = doc.body || doc;\n    return `${headFragments.join('\\n')}${container.innerHTML}`;\n  } catch {\n    return html;\n  }\n}\n\nconst HtmlRenderer: React.FC<HtmlRendererProps> = ({ html, basePath }) => {\n  const processed = useMemo(() => rewriteRelativeUrls(html, basePath), [html, basePath]);\n  const fixCSS = `\n    .html-prose table td p,\n    .html-prose table td div,\n    .html-prose table th p,\n    .html-prose table th div,\n    .html-prose table td .MsoNormal,\n    .html-prose table th .MsoNormal {\n      display: inline !important;\n      margin: 0 !important;\n      padding: 0 !important;\n    }\n    .html-prose table {\n      border-collapse: collapse;\n    }\n    .html-prose table td,\n    .html-prose table th {\n      white-space: normal;\n      vertical-align: middle;\n    }\n  `;\n  return (\n    <div className=\"html-prose prose max-w-none px-3\" style={{ fontFamily: \"Poppins, 'Noto Sans', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif\" }}>\n      <style dangerouslySetInnerHTML={{ __html: fixCSS }} />\n      <div dangerouslySetInnerHTML={{ __html: processed }} />\n    </div>\n  );\n};\n\nexport default HtmlRenderer;\n","size_bytes":4236},"src/components/JosoorHeader.tsx":{"content":"","size_bytes":0},"src/components/MarkdownRenderer.tsx":{"content":"import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport rehypeRaw from 'rehype-raw';\nimport remarkMath from 'remark-math';\nimport rehypeKatex from 'rehype-katex';\nimport 'katex/dist/katex.min.css';\n\ninterface MarkdownRendererProps {\n  content: string;\n  selectedEpisode: {\n    id: string;\n  };\n}\n\nconst MarkdownRenderer: React.FC<MarkdownRendererProps> = ({ content, selectedEpisode }) => {\n  return (\n    <div className=\"prose prose-lg max-w-none px-3 font-normal\">\n      <ReactMarkdown\n        remarkPlugins={[remarkGfm, remarkMath]}\n        rehypePlugins={[rehypeRaw, rehypeKatex]}\n        components={{\n          h1: ({ children }) => (\n            <h1 className=\"text-2xl font-bold text-[rgba(74,144,226,1)] mb-6 border-b-2 border-gray-900 pb-2\">\n              {children}\n            </h1>\n          ),\n          h2: ({ children }) => (\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4 mt-8\">\n              {children}\n            </h2>\n          ),\n          h3: ({ children }) => (\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-3 mt-6\">\n              {children}\n            </h3>\n          ),\n          h4: ({ children }) => (\n            <h4 className=\"text-base font-semibold text-gray-900 mb-2 mt-4\">\n              {children}\n            </h4>\n          ),\n          h5: ({ children }) => (\n            <h5 className=\"text-sm font-semibold text-gray-900 mb-2 mt-3\">\n              {children}\n            </h5>\n          ),\n          h6: ({ children }) => (\n            <h6 className=\"text-sm font-semibold text-gray-700 mb-2 mt-3\">\n              {children}\n            </h6>\n          ),\n          p: ({ children }) => (\n            <p className=\"text-gray-800 mb-4 leading-relaxed text-sm\">\n              {children}\n            </p>\n          ),\n          ul: ({ children }) => (\n            <ul className=\"list-none space-y-2 mb-4 pl-0\">\n              {children}\n            </ul>\n          ),\n          ol: ({ children }) => (\n            <ol className=\"list-none space-y-2 mb-4 pl-0 counter-reset-[item]\">\n              {children}\n            </ol>\n          ),\n          li: ({ children }) => (\n            <li className=\"flex items-start space-x-3 text-sm text-gray-800 before:content-['▪'] before:text-gray-900 before:font-bold before:min-w-[20px]\">\n              <span className=\"flex-1\">{children}</span>\n            </li>\n          ),\n          blockquote: ({ children }) => (\n            <blockquote className=\"border-l-4 border-gray-900 pl-4 py-2 my-4 bg-gray-50 italic text-sm text-gray-700\">\n              {children}\n            </blockquote>\n          ),\n          code: ({ children, className }) => {\n            const isInline = !className;\n            if (isInline) {\n              return (\n                <code className=\"bg-gray-100 text-gray-900 px-1 py-0.5 font-mono text-xs border border-gray-300\">\n                  {children}\n                </code>\n              );\n            }\n            return (\n              <pre className=\"bg-gray-900 text-white p-4 overflow-x-auto my-4 font-mono text-xs\">\n                <code>{children}</code>\n              </pre>\n            );\n          },\n          table: ({ children }) => (\n            <div className=\"overflow-x-auto my-4\">\n              <table className=\"min-w-full border-collapse border border-gray-300 text-sm\">\n                {children}\n              </table>\n            </div>\n          ),\n          th: ({ children }) => (\n            <th className=\"border border-gray-300 bg-gray-100 px-4 py-2 text-left font-bold text-gray-900\">\n              {children}\n            </th>\n          ),\n          td: ({ children }) => (\n            <td className=\"border border-gray-300 px-4 py-2 text-gray-800\">\n              {children}\n            </td>\n          ),\n          img: ({ src, alt }) => {\n            const raw = (src || '').trim();\n            // Unwrap angle brackets used in reference definitions: <...>\n            const unwrapped = raw.startsWith('<') && raw.endsWith('>') ? raw.slice(1, -1).trim() : raw;\n            const isData = unwrapped.startsWith('data:');\n            const isHttp = unwrapped.startsWith('http://') || unwrapped.startsWith('https://');\n            let imagePath = unwrapped;\n            if (!isData && !isHttp) {\n              if (imagePath.startsWith('/img/')) {\n                imagePath = imagePath.replace('/img/', '');\n              }\n              imagePath = imagePath.startsWith('/') ? imagePath : `/lessons/${selectedEpisode.id}/${imagePath}`;\n            }\n            return (\n              <img\n                src={isData || isHttp ? unwrapped : imagePath}\n                alt={alt}\n                className=\"max-w-full h-auto border border-gray-300 shadow-sm my-6 block\"\n              />\n            );\n          },\n          a: ({ href, children }) => (\n            <a \n              href={href} \n              className=\"text-gray-900 underline hover:text-gray-700 font-semibold\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {children}\n            </a>\n          ),\n          strong: ({ children }) => (\n            <strong className=\"font-bold text-gray-900\">\n              {children}\n            </strong>\n          ),\n          em: ({ children }) => (\n            <em className=\"italic text-gray-800\">\n              {children}\n            </em>\n          ),\n          hr: () => (\n            <hr className=\"my-8 border-t-2 border-gray-900\" />\n          )\n        }}\n      >\n        {content}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport default MarkdownRenderer;\n","size_bytes":5660},"src/components/Navbar.tsx":{"content":"import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { NavLink as NavLinkType } from '../types';\n\ninterface NavbarProps {\n  title: string;\n  links: NavLinkType[];\n}\n\nconst Navbar: React.FC<NavbarProps> = ({ title, links }) => {\n  return (\n    <nav className=\"bg-gray-800 text-white w-full\">\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-between h-16\">\n          <div className=\"text-xl font-bold\">{title}</div>\n          <div className=\"flex space-x-6\">\n            {links.map((link) => (\n              <Link\n                key={link.id}\n                to={link.href}\n                className=\"hover:text-electric-blue-400 transition-colors duration-300\"\n              >\n                {link.text}\n              </Link>\n            ))}\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n","size_bytes":917},"src/components/ProtectedRoute.tsx":{"content":"import React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\n\ninterface ProtectedRouteProps {\n  children: React.ReactElement;\n}\n\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\n  const { user, loading } = useAuth();\n  const location = useLocation();\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-screen\">\n        <div className=\"w-16 h-16 border-4 border-t-electric-blue-500 border-gray-200 rounded-full animate-spin\"></div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  return children;\n};\n\nexport default ProtectedRoute;\n","size_bytes":738},"src/components/RubiksIframe.tsx":{"content":"import React, { useEffect, useMemo, useRef } from 'react';\n\ninterface RubiksIframeProps {\n  height?: string;\n  progress?: number | null; // 0..1 to externally drive the animation; null to let iframe use its own scroll\n  onReady?: () => void;\n  onProgress?: (value: number) => void;\n  onPhaseChange?: (id: number, label: string) => void;\n}\n\nconst RubiksIframe: React.FC<RubiksIframeProps> = ({ height = '100vh', progress = null, onReady, onProgress, onPhaseChange }) => {\n  const iframeRef = useRef<HTMLIFrameElement | null>(null);\n\n  const targetOrigin = useMemo(() => '*', []);\n\n  // Listen to messages from the iframe\n  useEffect(() => {\n    function handleMessage(e: MessageEvent) {\n      const data = e && (e.data as any);\n      if (!data || typeof data !== 'object') return;\n      if (data.type === 'RUBIKS_READY') {\n        onReady && onReady();\n      } else if (data.type === 'RUBIKS_PROGRESS') {\n        const v = Number(data.value);\n        if (!Number.isNaN(v)) onProgress && onProgress(v);\n      } else if (data.type === 'RUBIKS_PHASE') {\n        const id = Number(data.id);\n        const label = String(data.label ?? '');\n        if (!Number.isNaN(id)) onPhaseChange && onPhaseChange(id, label);\n      }\n    }\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, [onReady, onProgress, onPhaseChange]);\n\n  // Push progress to the iframe when provided\n  useEffect(() => {\n    const win = iframeRef.current?.contentWindow;\n    if (!win) return;\n    if (progress === null || typeof progress === 'undefined') {\n      win.postMessage({ type: 'RUBIKS_CLEAR_EXTERNAL' }, targetOrigin);\n    } else {\n      const v = Math.max(0, Math.min(1, Number(progress)));\n      if (!Number.isNaN(v)) {\n        win.postMessage({ type: 'RUBIKS_SET_PROGRESS', value: v }, targetOrigin);\n      }\n    }\n  }, [progress, targetOrigin]);\n\n  return (\n    <div style={{ position: 'relative', width: '100%', height }}>\n      <iframe\n        ref={iframeRef}\n        src=\"/rubiks-cdn.html\"\n        title=\"Rubiks Animation\"\n        style={{ position: 'absolute', inset: 0, width: '100%', height: '100%', border: 'none' }}\n        allow=\"autoplay\"\n      />\n    </div>\n  );\n};\n\nexport default RubiksIframe;\n","size_bytes":2260},"src/components/SimpleHeader.tsx":{"content":"import React, { useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { \n  Home, \n  Building2, \n  PenTool, \n  Wand2, \n  Menu, \n  X,\n  Search,\n  Eye,\n  Play,\n  BookOpen,\n  Sparkles,\n  User\n} from 'lucide-react';\n\ninterface NavLinkType {\n  id: number | string;\n  text: string;\n  href: string;\n  icon?: React.ComponentType<any>;\n  subLinks?: NavLinkType[];\n}\n\nconst navLinks: NavLinkType[] = [\n  { id: 1, text: 'Home', href: '/', icon: Home },\n  {\n    id: 2,\n    text: 'Josoor',\n    href: '/josoor',\n    icon: Building2,\n    subLinks: [\n      { id: 'j-vision', text: \"Founder's Letter\", href: '/josoor/vision', icon: BookOpen },\n      { id: 'j-explore-architect', text: 'eXplore Architecture', href: '/josoor/explore/architect', icon: Search },\n      { id: 'j-explore-systems', text: 'eXplore System', href: '/josoor/explore/systems', icon: Search },\n      { id: 'j-experience-noor', text: 'eXperience Noor', href: '/josoor/experience/noor', icon: Eye },\n      { id: 'j-experience-analytics', text: 'eXperience Analytics', href: '/josoor/experience/analytics', icon: Eye },\n      { id: 'j-execute-ucs', text: 'eXecute Library', href: '/josoor/execute/use-cases', icon: Play },\n      { id: 'j-execute-journey', text: 'eXecute UC001', href: '/josoor/execute/journey', icon: Play },\n    ],\n  },\n  {\n    id: 3,\n    text: 'SketchApp',\n    href: '/sketchapp',\n    icon: PenTool,\n    subLinks: [{ id: 's1', text: 'Designer', href: '/sketchapp/designer', icon: Sparkles }],\n  },\n  {\n    id: 1755004664346,\n    text: 'Aura',\n    href: '/aura',\n    icon: Wand2,\n    subLinks: [{ id: 'a1', text: 'Project Manager', href: '/aura/projectmanager', icon: User }],\n  },\n];\n\ninterface SimpleHeaderProps {\n  logoSrc: string;\n  logoAlt: string;\n}\n\nconst SimpleHeader: React.FC<SimpleHeaderProps> = ({ logoSrc, logoAlt }) => {\n  const { pathname } = useLocation();\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <header className=\"shadow-md sticky top-0 z-50 text-white\" style={{ backgroundColor: '#00122d' }}>\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-between h-20\">\n          <Link to=\"/\" className=\"flex items-center\">\n            <img \n              src={logoSrc}\n              alt={logoAlt}\n              className=\"h-12 w-auto\"\n            />\n          </Link>\n          <div className=\"hidden md:flex items-center space-x-8\">\n            <nav className=\"flex items-center space-x-6\">\n              {navLinks.map((link) => {\n                const isActive = link.href === '/' ? pathname === '/' : pathname.startsWith(link.href);\n                const IconComponent = link.icon;\n                return (\n                  <div key={link.id} className=\"relative group\">\n                    <Link\n                      to={link.href}\n                      className={`py-2 flex items-center gap-2 transition-colors duration-300 ${\n                        isActive\n                          ? 'text-electric-blue-400 font-semibold'\n                          : 'text-gray-300 hover:text-electric-blue-400'\n                      }`}\n                    >\n                      {IconComponent && <IconComponent className=\"w-4 h-4\" />}\n                      {link.text}\n                    </Link>\n                    {link.subLinks && (\n                      <div className=\"absolute top-full left-0 pt-2 opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all duration-300\">\n                        <div className=\"bg-gray-700 rounded-md shadow-lg p-2 w-max\">\n                          {link.subLinks.map((subLink) => {\n                            const SubIconComponent = subLink.icon;\n                            return (\n                              <Link\n                                key={subLink.id}\n                                to={subLink.href}\n                                className=\"block px-3 py-2 text-sm text-gray-300 hover:text-electric-blue-400 hover:bg-gray-600 rounded-md transition-colors duration-200 flex items-center gap-2\"\n                              >\n                                {SubIconComponent && <SubIconComponent className=\"w-3 h-3\" />}\n                                {subLink.text}\n                              </Link>\n                            );\n                          })}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </nav>\n          </div>\n          <div className=\"md:hidden\">\n            <button\n              onClick={() => setIsOpen(!isOpen)}\n              className=\"text-gray-300 hover:text-white focus:outline-none focus:text-white\"\n            >\n              {isOpen ? <X className=\"w-6 h-6\" /> : <Menu className=\"w-6 h-6\" />}\n            </button>\n          </div>\n        </div>\n        {isOpen && (\n          <div className=\"md:hidden\">\n            <div className=\"px-2 pt-2 pb-3 space-y-1 sm:px-3\">\n              {navLinks.map((link) => {\n                const isActive = link.href === '/' ? pathname === '/' : pathname.startsWith(link.href);\n                const IconComponent = link.icon;\n                return (\n                  <div key={link.id}>\n                    <Link\n                      to={link.href}\n                      className={`block px-3 py-2 rounded-md text-base font-medium transition-colors duration-300 flex items-center gap-2 ${\n                        isActive\n                          ? 'text-electric-blue-400 bg-gray-700'\n                          : 'text-gray-300 hover:text-electric-blue-400 hover:bg-gray-700'\n                      }`}\n                      onClick={() => setIsOpen(false)}\n                    >\n                      {IconComponent && <IconComponent className=\"w-4 h-4\" />}\n                      {link.text}\n                    </Link>\n                    {link.subLinks && (\n                      <div className=\"ml-4 space-y-1\">\n                        {link.subLinks.map((subLink) => {\n                          const SubIconComponent = subLink.icon;\n                          return (\n                            <Link\n                              key={subLink.id}\n                              to={subLink.href}\n                              className=\"block px-3 py-2 rounded-md text-sm text-gray-400 hover:text-electric-blue-400 hover:bg-gray-700 transition-colors duration-200 flex items-center gap-2\"\n                              onClick={() => setIsOpen(false)}\n                            >\n                              {SubIconComponent && <SubIconComponent className=\"w-3 h-3\" />}\n                              {subLink.text}\n                            </Link>\n                          );\n                        })}\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n      </div>\n    </header>\n  );\n};\n\nexport default SimpleHeader;\n","size_bytes":7017},"src/components/SketchAppHeader.tsx":{"content":"","size_bytes":0},"src/components/SupportingContent.tsx":{"content":"import React from 'react';\nimport { Play, Video, FileText, Download } from 'lucide-react';\nimport CompactAudioControls from './CompactAudioControls';\n\ninterface Episode {\n  id: string;\n  title: string;\n  description: string;\n  releaseDate: string;\n  contentPath: string;\n  audioPath?: string;\n  videoPath?: string;\n  studyGuidePath?: string;\n  briefPath?: string;\n  images?: string[];\n  isReleased: boolean;\n  languages?: string[];\n}\n\ninterface SupportingContentProps {\n  selectedEpisode: Episode;\n  selectedLanguage: string;\n  setSelectedLanguage: (language: string) => void;\n  audioState: 'playing' | 'paused' | 'stopped';\n  audioProgress: number;\n  audioDuration: number;\n  handleAudioControl: (action: 'play' | 'pause' | 'stop' | 'forward' | 'backward') => void;\n  handleVideoPlay: () => void;\n  handleSupportingContentClick: (url: string, isDownload?: boolean) => void;\n  handleNotebookOpen: () => void;\n  formatTime: (seconds: number) => string;\n}\n\nconst SupportingContent: React.FC<SupportingContentProps> = ({\n  selectedEpisode,\n  selectedLanguage,\n  setSelectedLanguage,\n  audioState,\n  audioProgress,\n  audioDuration,\n  handleAudioControl,\n  handleVideoPlay,\n  handleSupportingContentClick,\n  handleNotebookOpen,\n  formatTime\n}) => {\n  return (\n    <div className=\"w-full p-4\">\n      <h3 className=\"text-sm font-semibold text-gray-900 mb-4\">SUPPORTING CONTENT</h3>\n\n      {/* 4 equally-stretched supporting content elements */}\n      <div className=\"grid grid-cols-4 gap-2 w-full mb-4\">\n        {/* Audio Podcast */}\n        <button\n          onClick={() => selectedEpisode.audioPath && handleAudioControl('play')}\n          disabled={!selectedEpisode.audioPath}\n          className={`flex items-center justify-center space-x-2 px-3 py-2 text-xs border-0 transition-colors ${\n            selectedEpisode.audioPath\n              ? 'bg-gray-900 hover:bg-gray-800 text-white'\n              : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n          }`}\n        >\n          <Play className=\"w-3 h-3\" />\n          <span>PODCAST</span>\n        </button>\n\n        {/* Video */}\n        <button\n          onClick={() => selectedEpisode.videoPath && handleVideoPlay()}\n          disabled={!selectedEpisode.videoPath}\n          className={`flex items-center justify-center space-x-2 px-3 py-2 text-xs border-0 transition-colors ${\n            selectedEpisode.videoPath\n              ? 'bg-gray-900 hover:bg-gray-800 text-white'\n              : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n          }`}\n        >\n          <Video className=\"w-3 h-3\" />\n          <span>VIDEO</span>\n        </button>\n\n        {/* Study Guide */}\n        <button\n          onClick={() => selectedEpisode.studyGuidePath && handleSupportingContentClick(`/lessons/${selectedEpisode.id}/${selectedEpisode.id}studyguide.pdf`, true)}\n          disabled={!selectedEpisode.studyGuidePath}\n          className={`flex items-center justify-center space-x-2 px-3 py-2 text-xs border-0 transition-colors ${\n            selectedEpisode.studyGuidePath\n              ? 'bg-gray-900 hover:bg-gray-800 text-white'\n              : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n          }`}\n        >\n          <FileText className=\"w-3 h-3\" />\n          <span>STUDY GUIDE</span>\n        </button>\n\n        {/* Brief */}\n        <button\n          onClick={() => selectedEpisode.briefPath && handleSupportingContentClick(`/lessons/${selectedEpisode.id}/${selectedEpisode.id}brief.pdf`, true)}\n          disabled={!selectedEpisode.briefPath}\n          className={`flex items-center justify-center space-x-2 px-3 py-2 text-xs border-0 transition-colors ${\n            selectedEpisode.briefPath\n              ? 'bg-gray-900 hover:bg-gray-800 text-white'\n              : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n          }`}\n        >\n          <Download className=\"w-3 h-3\" />\n          <span>BRIEF</span>\n        </button>\n      </div>\n\n      {/* Compact Audio Controls */}\n      {selectedEpisode.audioPath && audioState !== 'stopped' && (\n        <CompactAudioControls\n          audioState={audioState}\n          audioProgress={audioProgress}\n          audioDuration={audioDuration}\n          handleAudioControl={handleAudioControl}\n          handleNotebookOpen={handleNotebookOpen}\n          formatTime={formatTime}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default SupportingContent;\n","size_bytes":4361},"src/components/TextBlock.tsx":{"content":"import React from 'react';\n\ninterface TextBlockProps {\n  heading: string;\n  content: string;\n  maxWidth?: 'sm' | 'md' | 'lg' | 'xl' | '2xl' | 'full' | 'prose';\n  icon?: React.ComponentType<any>;\n  iconColor?: string;\n  darkTheme?: boolean;\n  flexLayout?: boolean;\n  headingComponent?: React.ReactNode;\n}\n\nconst TextBlock: React.FC<TextBlockProps> = ({\n  heading,\n  content,\n  maxWidth = 'full',\n  icon: IconComponent,\n  iconColor = 'text-electric-blue-600',\n  darkTheme = false,\n  flexLayout = false,\n  headingComponent\n}) => {\n    const maxWidthClasses = {\n        sm: 'max-w-sm',\n        md: 'max-w-md',\n        lg: 'max-w-lg',\n        xl: 'max-w-xl',\n        '2xl': 'max-w-2xl',\n        full: 'max-w-full',\n        prose: 'max-w-prose',\n    };\n\n    const containerClasses = `py-8 px-4 ${maxWidthClasses[maxWidth]} mx-auto ${\n      darkTheme ? 'bg-black text-white' : ''\n    } ${flexLayout ? 'flex flex-row' : ''}`;\n\n    const headingClasses = `text-3xl font-bold ${\n      darkTheme ? 'text-white' : 'text-gray-900'\n    } ${flexLayout ? 'pr-5' : ''}`;\n\n    const contentClasses = `leading-relaxed whitespace-pre-line ${\n      darkTheme ? 'text-white' : 'text-gray-600'\n    } ${flexLayout ? 'pl-5' : ''}`;\n\n  return (\n    <div className={containerClasses}>\n      <div className=\"flex items-center gap-3 mb-4\">\n        {IconComponent && (\n          <div className=\"p-2 bg-electric-blue-50 rounded-lg\">\n            <IconComponent className={`w-6 h-6 ${iconColor}`} />\n          </div>\n        )}\n        <h2 className={headingClasses}>\n          {headingComponent || heading}\n        </h2>\n      </div>\n      <p className={contentClasses}>{content}</p>\n    </div>\n  );\n};\n\nexport default TextBlock;\n","size_bytes":1698},"src/context/AuthContext.tsx":{"content":"import React, { createContext, useState, useContext, useEffect, ReactNode } from 'react';\nimport { supabase } from '../services/supabaseClient';\n\ninterface User {\n  id: string;\n  email: string;\n}\n\ninterface AuthError {\n  name: string;\n  message: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  loading: boolean;\n  login: (email: string, password: string) => Promise<{ error: AuthError | null }>;\n  register: (email: string, password: string) => Promise<{ error: AuthError | null }>;\n  logout: () => Promise<{ error: AuthError | null }>;\n  loginWithGoogle: () => Promise<{ error: AuthError | null }>;\n  loginWithApple: () => Promise<{ error: AuthError | null }>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const init = async () => {\n      try {\n        const { data: { session } } = await supabase.auth.getSession();\n        setUser(session?.user ? { id: session.user.id, email: session.user.email || '' } : null);\n      } catch (e) {\n        console.error('Failed to initialize auth session', e);\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    init();\n\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\n      setUser(session?.user ? { id: session.user.id, email: session.user.email || '' } : null);\n      setLoading(false);\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  const login = async (email: string, password: string): Promise<{ error: AuthError | null }> => {\n    try {\n      const { error } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      });\n\n      if (error) {\n        return { error: { name: 'AuthError', message: error.message } };\n      }\n\n      return { error: null };\n    } catch (error) {\n      return { error: { name: 'AuthError', message: 'An unexpected error occurred during login.' } };\n    }\n  };\n\n  const register = async (email: string, password: string): Promise<{ error: AuthError | null }> => {\n    try {\n      const { data, error } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          emailRedirectTo: `${window.location.origin}/auth/callback`,\n          data: {\n            consent_given: false // Add consent field for registration\n          }\n        }\n      });\n\n      if (error) {\n        return { error: { name: 'AuthError', message: error.message } };\n      }\n\n      // Check if user needs email confirmation\n      if (data.user && !data.session) {\n        // User registered but needs to confirm email\n        return { error: null }; // This is expected for email verification flow\n      }\n\n      return { error: null };\n    } catch (error) {\n      return { error: { name: 'AuthError', message: 'An unexpected error occurred during registration.' } };\n    }\n  };\n\n  const loginWithGoogle = async (): Promise<{ error: AuthError | null }> => {\n    try {\n      const { error } = await supabase.auth.signInWithOAuth({\n        provider: 'google',\n        options: {\n          redirectTo: `${window.location.origin}/auth/callback`,\n          queryParams: {\n            access_type: 'offline',\n            prompt: 'consent'\n          }\n        }\n      });\n\n      if (error) {\n        return { error: { name: 'AuthError', message: error.message } };\n      }\n\n      return { error: null };\n    } catch (error) {\n      return { error: { name: 'AuthError', message: 'An unexpected error occurred during Google login.' } };\n    }\n  };\n\n  const loginWithApple = async (): Promise<{ error: AuthError | null }> => {\n    try {\n      const { error } = await supabase.auth.signInWithOAuth({\n        provider: 'apple',\n        options: {\n          redirectTo: `${window.location.origin}/auth/callback`,\n          scopes: 'name email'\n        }\n      });\n\n      if (error) {\n        return { error: { name: 'AuthError', message: error.message } };\n      }\n\n      return { error: null };\n    } catch (error) {\n      return { error: { name: 'AuthError', message: 'An unexpected error occurred during Apple login.' } };\n    }\n  };\n\n  const logout = async (): Promise<{ error: AuthError | null }> => {\n    try {\n      const { error } = await supabase.auth.signOut();\n      if (error) {\n        return { error: { name: 'AuthError', message: error.message } };\n      }\n      return { error: null };\n    } catch (error) {\n      return { error: { name: 'AuthError', message: 'An unexpected error occurred during logout.' } };\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, loading, login, register, logout, loginWithGoogle, loginWithApple }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = (): AuthContextType => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n","size_bytes":5077},"src/pages/ArchitectLessonsPage.tsx":{"content":"import React from 'react';\n\nconst ArchitectLessonsPage: React.FC = () => {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Architect Lessons</h1>\n          <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\n            Comprehensive training modules for enterprise architects and transformation leaders.\n          </p>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-lg p-8 text-center\">\n          <h2 className=\"text-2xl font-semibold text-gray-900 mb-4\">Coming Soon</h2>\n          <p className=\"text-gray-600 mb-6\">\n            The Architect Lessons platform is currently under development. This section will provide\n            in-depth training modules covering enterprise architecture, digital transformation,\n            and strategic planning methodologies.\n          </p>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8\">\n            <div className=\"p-4 border border-gray-200 rounded-lg\">\n              <h3 className=\"font-semibold text-gray-900 mb-2\">Module 1</h3>\n              <p className=\"text-sm text-gray-600\">Enterprise Architecture Fundamentals</p>\n            </div>\n            <div className=\"p-4 border border-gray-200 rounded-lg\">\n              <h3 className=\"font-semibold text-gray-900 mb-2\">Module 2</h3>\n              <p className=\"text-sm text-gray-600\">Digital Transformation Strategies</p>\n            </div>\n            <div className=\"p-4 border border-gray-200 rounded-lg\">\n              <h3 className=\"font-semibold text-gray-900 mb-2\">Module 3</h3>\n              <p className=\"text-sm text-gray-600\">Implementation & Change Management</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ArchitectLessonsPage;\n","size_bytes":1944},"src/pages/ArchitectsForumPage.tsx":{"content":"import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport DiscussionForum from '../components/DiscussionForum';\nimport ChapterSection from '../components/ChapterSection';\nimport SupportingContent from '../components/SupportingContent';\nimport MarkdownRenderer from '../components/MarkdownRenderer';\nimport HtmlRenderer from '../components/HtmlRenderer';\nimport { fetchHtmlWithEncoding } from '../utils/htmlFetch';\nimport { useAuth } from '../context/AuthContext';\nimport { supabase } from '../services/supabaseClient';\n\n// Generate dummy text for testing\nconst generateDummyText = (frameName: string, count: number = 200) => {\n  const lines = [];\n  for (let i = 1; i <= count; i++) {\n    lines.push(`${frameName} - Line ${i}`);\n  }\n  return lines.join('\\n');\n};\n\n// Mock data for DiscussionForum\nconst mockComments = [\n  {\n    id: '1',\n    user: 'architect@example.com',\n    text: 'Great episode! The concepts really resonate with my experience in sustainable design.',\n    timestamp: new Date(Date.now() - 3600000),\n    likes: 5,\n    replies: [\n      {\n        id: '1-1',\n        user: 'student@example.com',\n        text: 'Agreed! The modular approach is brilliant.',\n        timestamp: new Date(Date.now() - 1800000),\n        likes: 2\n      }\n    ]\n  },\n  {\n    id: '2',\n    user: 'designer@example.com',\n    text: 'How do you handle client feedback during the conceptual phase?',\n    timestamp: new Date(Date.now() - 7200000),\n    likes: 3\n  }\n];\n\nconst mockUser = { id: '1', email: 'test@example.com' };\n\n// Chapters data from ArchitectsForumPage.tsx.backup\nconst chapters = [\n  {\n    id: '1',\n    title: 'Chapter 1: The Mechanics of Transformation',\n    episodes: [\n      {\n        id: '1.1',\n        title: 'Episode 1.1: What is an Organizational Transformation?',\n        description: 'Defines transformation as a fundamental re-engineering of an organization\\'s core logic to meet a new strategic ambition that exceeds its current capacity. The goal is to build a new engine, not just tune the old one.',\n        releaseDate: '2025-09-01',\n        contentPath: '/lessons/1.1/Episode 1.1.md',\n        audioPath: '/lessons/1.1/1.1.m4a',\n        videoPath: '/lessons/1.1/1.1.mp4',\n        studyGuidePath: '/lessons/1.1/1.1studyguide.pdf',\n        briefPath: '/lessons/1.1/1.1brief.pdf',\n        images: ['/lessons/1.1/episode-1.1_1.png', '/lessons/1.1/episode-1.1_2.png'],\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      },\n      {\n        id: '1.2',\n        title: 'Episode 1.2: What is a Sector Transformation?',\n        description: 'Elevates the transformation challenge from a single entity to an entire ecosystem. It redesigns how value flows across multiple, interdependent organizations to achieve a shared strategic goal that no single entity could deliver alone.',\n        releaseDate: '2025-09-01',\n        contentPath: '/lessons/1.2/Episode 1.2.md',\n        images: ['/lessons/1.2/episode-1.2_1.png'],\n        audioPath: '/lessons/1.2/1.2.m4a',\n        videoPath: '/lessons/1.2/1.2.mp4',\n        studyGuidePath: '/lessons/1.2/1.2studyguide.pdf',\n        briefPath: '/lessons/1.2/1.2brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      },\n      {\n        id: '1.3',\n        title: 'Episode 1.3: What is the People Transformation?',\n        description: 'Addresses the human and political resistance inherent in public sector reform. Acknowledging that a perfect plan can be derailed by cultural inertia is the first step to managing it.',\n        releaseDate: '2025-09-01',\n        contentPath: '/lessons/1.3/Episode 1.3.md',\n        audioPath: '/lessons/1.3/1.3.m4a',\n        videoPath: '/lessons/1.3/1.3.mp4',\n        studyGuidePath: '/lessons/1.3/1.3studyguide.pdf',\n        briefPath: '/lessons/1.3/1.3brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      },\n      {\n        id: '1.4',\n        title: 'Episode 1.4: The Entangled Transformation Battleground',\n        description: 'Introduces the concept of \"entangled\" transformations, where multiple entities must change simultaneously. It presents the Complexity Index (CI) as a tool to assess this risk and universal cascading (L0-L3) as the foundational discipline for managing it.',\n        releaseDate: '2025-09-01',\n        contentPath: '/lessons/1.4/Episode 1.4.md',\n        audioPath: '/lessons/1.4/1.4.m4a',\n        videoPath: '/lessons/1.4/1.4.mp4',\n        studyGuidePath: '/lessons/1.4/1.4studyguide.pdf',\n        briefPath: '/lessons/1.4/1.4brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      }\n    ]\n  },\n  {\n    id: '2',\n    title: 'Chapter 2: The Architectural Blueprint in Practice',\n    episodes: [\n      {\n        id: '2.1',\n        title: 'Episode 2.1: Strategic Performance (KPIs)',\n        description: 'Explains how to create a \"golden thread\" from a high-level national objective (L0) down to a frontline process metric (L3). This ensures every action is aligned with strategy and provides a data-driven basis for performance management.',\n        releaseDate: '2025-09-08',\n        contentPath: '/lessons/2.1/Episode 2.1.md',\n        isReleased: false\n      },\n      {\n        id: '2.2',\n        title: 'Episode 2.2: Portfolios & Initiatives',\n        description: 'Defines the portfolio as the control system that translates strategy into funded work. An architected portfolio ensures capital is allocated to initiatives with a direct, documented link to strategic KPIs.',\n        releaseDate: '2025-09-15',\n        contentPath: '/lessons/2.2/Episode 2.2.md',\n        isReleased: false\n      },\n      {\n        id: '2.3',\n        title: 'Episode 2.3: Process Architecture',\n        description: 'Establishes that strategy is executed through processes. Defining L3 (executable) processes and linking them to owners and metrics gives the organization direct control over its operational performance.',\n        releaseDate: '2025-09-22',\n        contentPath: '/lessons/2.3/Episode 2.3.md',\n        isReleased: false\n      },\n      {\n        id: '2.4',\n        title: 'Episode 2.4: Organizational Design',\n        description: 'Frames the organizational structure as the backbone of accountability. A dynamic structure, where every role is mapped to a specific L3 process and KPI, provides clarity and stability during intense change.',\n        releaseDate: '2025-09-29',\n        contentPath: '/lessons/2.4/Episode 2.4.md',\n        isReleased: false\n      }\n    ]\n  },\n  {\n    id: '3',\n    title: 'Chapter 3: The Management Operating System',\n    episodes: [\n      {\n        id: '3.1',\n        title: 'Episode 3.1: The Integrated Governance',\n        description: 'Defines governance not as bureaucracy, but as the decision-making \"operating system\" that integrates strategy, execution (PMO), and operations through a structured cadence of reviews. It is the primary risk management forum for the transformation.',\n        releaseDate: '2025-10-06',\n        contentPath: '/lessons/3.1/Episode 3.1.md',\n        audioPath: '/lessons/3.1/3.1.m4a',\n        videoPath: '/lessons/3.1/3.1.mp4',\n        studyGuidePath: '/lessons/3.1/3.1studyguide.pdf',\n        briefPath: '/lessons/3.1/3.1brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: false\n      },\n      {\n        id: '3.2',\n        title: 'Episode 3.2: The Delivery Engine',\n        description: 'Outlines the dual disciplines of Value Assurance (Program Management) and Delivery Assurance (Project Management) that execute the decisions made in governance.',\n        releaseDate: '2025-10-13',\n        contentPath: '/lessons/3.2/Episode 3.2.md',\n        audioPath: '/lessons/3.2/3.2.m4a',\n        videoPath: '/lessons/3.2/3.2.mp4',\n        studyGuidePath: '/lessons/3.2/3.2studyguide.pdf',\n        briefPath: '/lessons/3.2/3.2brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: false\n      },\n      {\n        id: '3.3',\n        title: 'Episode 3.3: Change Architecture',\n        description: 'Presents Change Architecture as the discipline for mitigating adoption risk. It integrates human readiness activities (training, coaching) directly with the rollout of technical deliverables.',\n        releaseDate: '2025-10-20',\n        contentPath: '/lessons/3.3/Episode 3.3.md',\n        audioPath: '/lessons/3.3/3.3.m4a',\n        videoPath: '/lessons/3.3/3.3.mp4',\n        studyGuidePath: '/lessons/3.3/3.3studyguide.pdf',\n        briefPath: '/lessons/3.3/3.3brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: false\n      },\n      {\n        id: '3.4',\n        title: 'Episode 3.4: The Enablers',\n        description: 'Describes the foundational capabilities required to make a transformation sustainable: Digital Support, Corporate Knowledge Management, and a culture that attracts and retains talent.',\n        releaseDate: '2025-10-27',\n        contentPath: '/lessons/3.4/Episode 3.4.md',\n        audioPath: '/lessons/3.4/3.4.m4a',\n        videoPath: '/lessons/3.4/3.4.mp4',\n        studyGuidePath: '/lessons/3.4/3.4studyguide.pdf',\n        briefPath: '/lessons/3.4/3.4brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: false\n      }\n    ]\n  },\n  {\n    id: '4',\n    title: 'Chapter 4: DTO Practical Implementation Approach',\n    episodes: [\n      {\n        id: '4.1',\n        title: 'Episode 4.1: DTO Implementation Framework',\n        description: 'This Body of Knowledge is more than a framework; it is a practical, toolkit designed to accelerate your transformation journey. Within 90 days, an organization can use these assets to create a \"baby twin\" - a small-scale, Use Case 001 working version of the Digital Twin that grows over time.',\n        releaseDate: '2025-11-03',\n        contentPath: '/lessons/4.1/Episode 4.1.md',\n        audioPath: '/lessons/4.1/4.1.m4a',\n        videoPath: '/lessons/4.1/4.1.mp4',\n        studyGuidePath: '/lessons/4.1/4.1studyguide.pdf',\n        briefPath: '/lessons/4.1/4.1brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: false\n      }\n    ]\n  }\n];\n\nconst ArchitectsForumPage: React.FC = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n\n  // State for DiscussionForum\n  const [comments, setComments] = useState<any[]>([]);\n  const [newComment, setNewComment] = useState('');\n  const [replyingTo, setReplyingTo] = useState<string | null>(null);\n  const [replyText, setReplyText] = useState('');\n  const [showModeration, setShowModeration] = useState(false); // Keep moderation hidden\n\n  // State for ChapterSection\n  const [selectedEpisode, setSelectedEpisode] = useState<any>(null);\n\n  // State for Episode Content\n  const [episodeContent, setEpisodeContent] = useState<string>('');\n  const [episodeIsHtml, setEpisodeIsHtml] = useState<boolean>(false);\n\n  // State for SupportingContent\n  const [selectedLanguage, setSelectedLanguage] = useState('English');\n  const [audioState, setAudioState] = useState<'playing' | 'paused' | 'stopped'>('stopped');\n  const [audioProgress, setAudioProgress] = useState(0);\n  const [audioDuration, setAudioDuration] = useState(0);\n\n  // Episode selection handler\n  const handleEpisodeSelect = async (episode: any) => {\n    if (!episode.isReleased) return;\n\n    setSelectedEpisode(episode);\n\n    const tryLoad = async (path: string) => {\n      return await fetchHtmlWithEncoding(path);\n    };\n\n    try {\n      const id = episode.id;\n      const baseDir = episode.contentPath.includes('/') ? episode.contentPath.slice(0, episode.contentPath.lastIndexOf('/') + 1) : '/';\n      // Load HTML only (.htm or .html)\n      const content = (await tryLoad(`${baseDir}${id}.htm`)) || (await tryLoad(`${baseDir}${id}.html`));\n\n      if (content) {\n        setEpisodeIsHtml(true);\n        setEpisodeContent(content);\n      } else {\n        setEpisodeIsHtml(false);\n        setEpisodeContent('# Content Not Available\\n\\nThe episode HTML is missing.');\n      }\n    } catch (error) {\n      setEpisodeIsHtml(false);\n      setEpisodeContent('# Content Loading Error\\n\\nUnable to load the episode content. Please try again later.');\n    }\n  };\n\n  // Load comments for selected episode\n  useEffect(() => {\n    const load = async () => {\n      if (!selectedEpisode) {\n        setComments([]);\n        return;\n      }\n      const { data, error } = await supabase\n        .from('forum_comments')\n        .select('*')\n        .eq('episode_id', selectedEpisode.id)\n        .order('created_at', { ascending: true });\n      if (error) {\n        console.error('Load comments error', error.message);\n        setComments([]);\n        return;\n      }\n      const items = (data || []).map((row: any) => ({\n        id: row.id,\n        user: row.user_email || 'anonymous',\n        text: row.text,\n        timestamp: new Date(row.created_at),\n        likes: row.likes || 0,\n        isReported: row.is_reported || false,\n        isModerated: row.is_moderated || false,\n        parentId: row.parent_id || null\n      }));\n      const byId: Record<string, any> = {};\n      const roots: any[] = [];\n      items.forEach(it => (byId[it.id] = { ...it, replies: [] }));\n      items.forEach(it => {\n        if (it.parentId && byId[it.parentId]) byId[it.parentId].replies.push(byId[it.id]);\n        else if (!it.parentId) roots.push(byId[it.id]);\n      });\n      setComments(roots);\n    };\n    load();\n  }, [selectedEpisode]);\n\n  // Format date helper\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  // Handlers for DiscussionForum\n  const handleCommentSubmit = async () => {\n    if (!selectedEpisode || !user) return;\n    const text = newComment.trim();\n    if (!text) return;\n    const { data, error } = await supabase\n      .from('forum_comments')\n      .insert({ episode_id: selectedEpisode.id, user_id: user.id, user_email: user.email, text, likes: 0, parent_id: null })\n      .select()\n      .single();\n    if (error) {\n      console.error('Add comment error', error.message);\n      return;\n    }\n    const newItem = {\n      id: data.id,\n      user: data.user_email,\n      text: data.text,\n      timestamp: new Date(data.created_at),\n      likes: data.likes || 0,\n      replies: []\n    };\n    setComments([...comments, newItem]);\n    setNewComment('');\n  };\n\n  const handleReplySubmit = async (commentId: string) => {\n    if (!selectedEpisode || !user) return;\n    const text = replyText.trim();\n    if (!text) return;\n    const { data, error } = await supabase\n      .from('forum_comments')\n      .insert({ episode_id: selectedEpisode.id, user_id: user.id, user_email: user.email, text, likes: 0, parent_id: commentId })\n      .select()\n      .single();\n    if (error) {\n      console.error('Add reply error', error.message);\n      return;\n    }\n    const newReply = { id: data.id, user: data.user_email, text: data.text, timestamp: new Date(data.created_at), likes: data.likes || 0 };\n    setComments(comments.map(comment =>\n      comment.id === commentId\n        ? { ...comment, replies: [...(comment.replies || []), newReply] }\n        : comment\n    ));\n    setReplyText('');\n    setReplyingTo(null);\n  };\n\n  const handleLikeComment = async (commentId: string, isReply?: boolean, parentId?: string) => {\n    let newCount = 0;\n    if (isReply && parentId) {\n      setComments(prev => prev.map(comment => {\n        if (comment.id !== parentId) return comment;\n        const replies = (comment.replies || []).map((r: any) => {\n          if (r.id === commentId) {\n            newCount = (r.likes || 0) + 1;\n            return { ...r, likes: newCount };\n          }\n          return r;\n        });\n        return { ...comment, replies };\n      }));\n    } else {\n      setComments(prev => prev.map(comment => {\n        if (comment.id === commentId) {\n          newCount = (comment.likes || 0) + 1;\n          return { ...comment, likes: newCount };\n        }\n        return comment;\n      }));\n    }\n    await supabase.from('forum_comments').update({ likes: newCount }).eq('id', commentId);\n  };\n\n  const handleReportComment = (commentId: string, isReply?: boolean, parentId?: string) => {\n    // Simple report functionality\n    console.log('Reported comment:', commentId);\n  };\n\n  const handleModerateComment = (commentId: string, action: 'approve' | 'remove', isReply?: boolean, parentId?: string) => {\n    // Simple moderation functionality\n    console.log('Moderated comment:', commentId, action);\n  };\n\n  // Media refs\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n  const [showVideoPopup, setShowVideoPopup] = useState(false);\n\n  // Handlers for SupportingContent\n  const handleAudioControl = (action: 'play' | 'pause' | 'stop' | 'forward' | 'backward') => {\n    const el = audioRef.current;\n    if (!el) return;\n    switch (action) {\n      case 'play':\n        el.play();\n        setAudioState('playing');\n        break;\n      case 'pause':\n        el.pause();\n        setAudioState('paused');\n        break;\n      case 'stop':\n        el.pause();\n        el.currentTime = 0;\n        setAudioState('stopped');\n        setAudioProgress(0);\n        break;\n      case 'forward':\n        el.currentTime = Math.min(el.currentTime + 10, audioDuration || el.duration || el.currentTime);\n        break;\n      case 'backward':\n        el.currentTime = Math.max(el.currentTime - 10, 0);\n        break;\n    }\n  };\n\n  const handleVideoPlay = () => {\n    if (selectedEpisode?.videoPath) {\n      setShowVideoPopup(true);\n    }\n  };\n\n  const handleSupportingContentClick = (url: string, isDownload?: boolean) => {\n    if (!url) return;\n    if (isDownload) {\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = '';\n      link.rel = 'noopener';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      return;\n    }\n    window.open(url, '_blank');\n  };\n\n  const handleNotebookOpen = () => {\n    console.log('Notebook open requested');\n    alert('Notebook feature would open here');\n  };\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Handlers for login/register functionality\n  const handleLogin = () => {\n    navigate('/login');\n  };\n\n  const handleRegister = () => {\n    navigate('/register');\n  };\n\n  return (\n    <div style={{\n      height: '100%',\n      width: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      margin: 0,\n      padding: 0\n    }}>\n      \n\n      {/* Hidden audio element to drive playback */}\n      {selectedEpisode?.audioPath && (\n        <audio\n          ref={audioRef}\n          src={selectedEpisode.audioPath}\n          onTimeUpdate={() => {\n            const el = audioRef.current;\n            if (el) {\n              setAudioProgress(el.currentTime);\n              setAudioDuration(el.duration || 0);\n            }\n          }}\n          onLoadedMetadata={() => {\n            const el = audioRef.current;\n            if (el) setAudioDuration(el.duration || 0);\n          }}\n          onEnded={() => setAudioState('stopped')}\n          style={{ display: 'none' }}\n        />\n      )}\n\n      {/* Video Popup Modal */}\n      {showVideoPopup && selectedEpisode?.videoPath && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-4 max-w-4xl w-full mx-4 border border-gray-300\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-bold\">{selectedEpisode.title}</h3>\n              <button\n                onClick={() => setShowVideoPopup(false)}\n                className=\"text-gray-500 hover:text-gray-700\"\n              >\n                ✕\n              </button>\n            </div>\n            <video\n              ref={videoRef}\n              src={selectedEpisode.videoPath}\n              controls\n              className=\"w-full h-auto\"\n              onEnded={() => setShowVideoPopup(false)}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Main Content Area - 3 Frame Horizontal Layout */}\n      <div style={{\n        flex: 1,\n        display: 'grid',\n        gridTemplateColumns: '20% 1fr 20%',\n        overflow: 'hidden',\n        minHeight: 0\n      }}>\n        {/* Frame 1.0 - Left Panel (20%) */}\n        <div className=\"left-panel\" style={{ overflowY: 'auto' }}>\n          <div className=\"p-4\" style={{ width: 'auto', alignSelf: 'stretch' }}>\n            <h2 className=\"text-lg font-bold text-gray-900 mb-4 px-2\">THE DEEP</h2>\n            {chapters.map((chapter) => (\n              <ChapterSection\n                key={chapter.id}\n                chapter={chapter}\n                selectedEpisode={selectedEpisode}\n                onEpisodeSelect={handleEpisodeSelect}\n                formatDate={formatDate}\n              />\n            ))}\n          </div>\n        </div>\n\n        {/* Frame 2.0 - Middle Panel (60%) */}\n        <div style={{\n          display: 'grid',\n          gridTemplateRows: 'auto minmax(0, 1fr)',\n          overflow: 'hidden',\n          minHeight: 0\n        }}>\n          {/* Frame 2.1 - Top Section (5% of middle panel) */}\n          <div className=\"supporting-content\" style={{ padding: '4px' }}>\n            {selectedEpisode ? (\n              <div className=\"w-full p-2\">\n                <h3 className=\"text-xs font-semibold text-gray-900 mb-2\">SUPPORTING CONTENT</h3>\n\n                {/* 4 equally-stretched supporting content elements */}\n                <div className=\"grid grid-cols-4 gap-1 w-full mb-2\">\n                  {/* Audio Podcast */}\n                  <button\n                    onClick={() => selectedEpisode.audioPath && handleAudioControl('play')}\n                    disabled={!selectedEpisode.audioPath}\n                    className={`flex items-center justify-center space-x-1 px-2 py-1 text-xs border-0 transition-colors ${selectedEpisode.audioPath\n                        ? 'bg-gray-900 hover:bg-gray-800 text-white'\n                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                    }`}\n                  >\n                    <span>PODCAST</span>\n                  </button>\n\n                  {/* Video */}\n                  <button\n                    onClick={() => selectedEpisode.videoPath && handleVideoPlay()}\n                    disabled={!selectedEpisode.videoPath}\n                    className={`flex items-center justify-center space-x-1 px-2 py-1 text-xs border-0 transition-colors ${selectedEpisode.videoPath\n                        ? 'bg-gray-900 hover:bg-gray-800 text-white'\n                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                    }`}\n                  >\n                    <span>VIDEO</span>\n                  </button>\n\n                  {/* Study Guide */}\n                  <button\n                    onClick={() => selectedEpisode.studyGuidePath && handleSupportingContentClick(`/lessons/${selectedEpisode.id}/${selectedEpisode.id}studyguide.pdf`, true)}\n                    disabled={!selectedEpisode.studyGuidePath}\n                    className={`flex items-center justify-center space-x-1 px-2 py-1 text-xs border-0 transition-colors ${selectedEpisode.studyGuidePath\n                        ? 'bg-gray-900 hover:bg-gray-800 text-white'\n                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                    }`}\n                  >\n                    <span>STUDY GUIDE</span>\n                  </button>\n\n                  {/* Brief */}\n                  <button\n                    onClick={() => selectedEpisode.briefPath && handleSupportingContentClick(`/lessons/${selectedEpisode.id}/${selectedEpisode.id}brief.pdf`, true)}\n                    disabled={!selectedEpisode.briefPath}\n                    className={`flex items-center justify-center space-x-1 px-2 py-1 text-xs border-0 transition-colors ${selectedEpisode.briefPath\n                        ? 'bg-gray-900 hover:bg-gray-800 text-white'\n                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                    }`}\n                  >\n                    <span>BRIEF</span>\n                  </button>\n                </div>\n\n                {/* Compact Audio Controls */}\n                {selectedEpisode.audioPath && audioState !== 'stopped' && (\n                  <div className=\"flex items-center space-x-2 bg-gray-100 px-2 py-1 border-l-2 border-gray-900\">\n                    <div className=\"flex items-center space-x-1\">\n                      <button onClick={() => handleAudioControl('backward')} className=\"text-gray-900 hover:text-gray-700 text-xs\">\n                        ⏮\n                      </button>\n                      <button onClick={() => handleAudioControl(audioState === 'playing' ? 'pause' : 'play')} className=\"text-gray-900 hover:text-gray-700 text-xs\">\n                        {audioState === 'playing' ? '⏸' : '▶'}\n                      </button>\n                      <button onClick={() => handleAudioControl('stop')} className=\"text-gray-900 hover:text-gray-700 text-xs\">\n                        ⏹\n                      </button>\n                      <button onClick={() => handleAudioControl('forward')} className=\"text-gray-900 hover:text-gray-700 text-xs\">\n                        ⏭\n                      </button>\n                    </div>\n                    <div className=\"flex items-center space-x-1 flex-1 min-w-0\">\n                      <div className=\"flex-1 bg-gray-300 h-1 min-w-[40px]\">\n                        <div\n                          className=\"bg-gray-900 h-1\"\n                          style={{ width: `${(audioProgress / audioDuration) * 100}%` }}\n                        />\n                      </div>\n                      <span className=\"text-xs text-gray-900 flex-shrink-0 min-w-[40px]\">\n                        {formatTime(audioProgress)}/{formatTime(audioDuration)}\n                      </span>\n                    </div>\n                    <button\n                      onClick={handleNotebookOpen}\n                      className=\"bg-gray-900 text-white px-1 py-0.5 text-xs hover:bg-gray-800 flex-shrink-0\"\n                    >\n                      ASK\n                    </button>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"w-full p-2\">\n                <h3 className=\"text-xs font-semibold text-gray-900 mb-1\">SUPPORTING CONTENT</h3>\n                <p className=\"text-gray-500 text-xs\">Select an episode to view supporting content</p>\n              </div>\n            )}\n          </div>\n\n          {/* Frame 2.2 - Bottom Section (95% of middle panel) */}\n          <div className=\"content-area font-normal\" style={{ overflowX: 'auto', overflowY: 'auto', minHeight: 0, height: '100%' }}>\n            {selectedEpisode ? (\n              episodeIsHtml ? (\n                <HtmlRenderer html={episodeContent} basePath={`/lessons/${selectedEpisode.id}/`} />\n              ) : (\n                <MarkdownRenderer content={episodeContent} selectedEpisode={selectedEpisode} />\n              )\n            ) : (\n              <div className=\"flex items-center justify-center h-full\">\n                <div className=\"text-center text-gray-500\">\n                  <h3 className=\"text-lg font-medium mb-2\">SELECT AN EPISODE TO BEGIN</h3>\n                  <p className=\"text-sm\">Choose from the left panel to view episode content</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Frame 3.0 - Right Panel (20%) */}\n        <div className=\"right-panel\" style={{ overflowY: 'auto' }}>\n          {selectedEpisode ? (\n            <DiscussionForum\n              comments={comments}\n              newComment={newComment}\n              setNewComment={setNewComment}\n              user={user ? { id: user.id, email: user.email } : null}\n              replyingTo={replyingTo}\n              setReplyingTo={setReplyingTo}\n              replyText={replyText}\n              setReplyText={setReplyText}\n              showModeration={showModeration}\n              setShowModeration={setShowModeration}\n              handleCommentSubmit={handleCommentSubmit}\n              handleReplySubmit={handleReplySubmit}\n              handleLikeComment={handleLikeComment}\n              handleReportComment={handleReportComment}\n              handleModerateComment={handleModerateComment}\n              isProminent={true}\n              hideModeration={true}\n              onLogin={handleLogin}\n              onRegister={handleRegister}\n            />\n          ) : (\n            <div className=\"w-full p-2\">\n              <h3 className=\"text-xs font-semibold text-gray-900 mb-2\">DISCUSSION FORUM</h3>\n              <p className=\"text-gray-500 text-xs\">Select an episode to view discussion</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Actual Footer Component */}\n    </div>\n  );\n};\n\nexport default ArchitectsForumPage;\n","size_bytes":29516},"src/pages/HomePage.bak.tsx":{"content":"import React from 'react';\n\nconst HomePage: React.FC = () => {\n  return (\n    <div>\n      <h1>Hello World!</h1>\n    </div>\n  );\n};\n\nexport default HomePage;","size_bytes":156},"src/pages/HomePage.tsx":{"content":"import React, { useEffect } from 'react';\nimport Frame from '../components/Frame';\nimport Hero from '../components/Hero';\nimport RubiksIframe from '../components/RubiksIframe';\n\n\nconst HomePage: React.FC = () => {\n  useEffect(() => {\n    document.title = 'AI Twin Tech';\n  }, []);\n\n  const scrollingSections = [\n    {\n      title: \"Transforming Strategy Execution\",\n      subtitle: \"RETHINK COMPLEXITY, MAKE IT YOUR ASSET.\",\n      text: \"Re-defining how you experience complex transformations. Labels like planning, monitoring, risks, dashboard etc remain the same, everything else changes. Not only from a look and feel, we re-defined what it means, how it is done and its role in an integrated model.\"\n    },\n    {\n      title: \"Imagine a parallel universe where strategy execution finally makes sense.\",\n      subtitle: \"BEYOND THEORY, A WORKING SOLUTION\",\n      text: \"We heard it all: Science fiction, Consultants Jargon, Another framework. Even the \\\"its farfetched\\\", \\\"something for another generation\\\". Our answer. IT IS A DEVELOPED SOLUTION. Specifically, a Net.js Webapp with a Supabase Database and a tailored Gemini Assistant coupled with a 5 year dataset of an entity's national transformation.\"\n    },\n    {\n      title: \"So, How does that work?\",\n      subtitle: \"ONLY GREAT QUESTIONS UNLOCK GREAT ANSWERS\",\n      text: \"We understand, you have questions and you will get the answers. But before you can receive the answers, you must understand what are the right questions and how they evolved. So keep scrolling and start your initiation journey.\"\n    },\n    {\n      title: \"Your Organization\",\n      subtitle: \"Much like a Rubik's cube\",\n      text: \"Each of its 27 cubes represents a piece of the puzzle. Strategy, Performance, Policies, People, Process, Tools add external like globalization, events etc..all interacting. Transforming means solving the cube and to do that, you need to understand how these different cubes interact together. We had to dismantle and examine its anatomy.\"\n    },\n    {\n      title: \"Hidden Relations Unveiled\",\n      subtitle: \"Relations ran Deeper\",\n      text: \"While deciphering the cubes, and focusing on what role they play, how they interact, their inputs/outputs, a model began to appear. A sketchy pattern that made sense and felt right but remained elusive. We had to go deeper on each one. Every cube had to be dismantled further.\"\n    },\n    {\n      title: \"Where others stop\",\n      subtitle: \"Facing Complexity Head On\",\n      text: \"Two truths became evident. First, the scale of complexity was much more than our highest expectations with layers of dependencies involved. Second, the scarcity in helping resources. Few have gone this deep covering everything holistically. We had to research everywhere and in some cases develop missing gaps. the slow process began, covering them one by one.\"\n    },\n    {\n      title: \"2 years later…\",\n      subtitle: \"Mission Accomplished, Just in Time\",\n      text: \"Finally, all the components where dissected, analyzed and mapped. A twin model that bridged every relation and interaction across a complex web of complex dependencies. Just when AI breakthroughs accelerated, became accessible,and at shockingly affordable costs.\"\n    },\n    {\n      title: \"The future, today\",\n      subtitle: \"Digital Twin Model of an Organization\",\n      text: \"The final element, the heart of the solution was plugged in. Bringing the Digital Twin to life, and bringing hope back to transformations. From here you and us have two paths:\"\n    }\n  ];\n\n  return (\n    <div className=\"bg-transparent\">\n      {\n        /* Rubiks Animation */\n      }\n      <section className=\"relative z-0\">\n        <RubiksIframe height=\"calc(100vh - 5rem)\" />\n      </section>\n\n    </div>\n  );\n};\n\nexport default HomePage;\n","size_bytes":3798},"src/pages/RoadmapPage.tsx":{"content":"import React from 'react';\nimport { Calendar, Users, Target, Rocket } from 'lucide-react';\n\nconst RoadmapPage: React.FC = () => {\n  const phases = [\n    {\n      title: \"Phase 1: Crowd Sourcing Design Ideas\",\n      description: \"Weekly episode (document, interactive audio podcast, drops on concepts and components of the new transformation elements\",\n      duration: \"Estimated 1-2 months\",\n      outcome: \"Ends with the Publishing of the Design along with credits manifest of all contributors\",\n      status: \"upcoming\",\n      icon: Users\n    },\n    {\n      title: \"Phase 2: Crowd Sourcing MVP Dev Priorities\",\n      description: \"Bi-Weekly product drops - 2 x database model - 2 x backend systems integration - 2 x front end interfaces\",\n      duration: \"Ongoing development\",\n      outcome: \"MVP components ready for integration\",\n      status: \"current\",\n      icon: Target\n    },\n    {\n      title: \"Phase 3: The Official Launch of v0\",\n      description: \"Official launch of the complete transformation platform\",\n      duration: \"Post-MVP completion\",\n      outcome: \"Full platform available to users\",\n      status: \"future\",\n      icon: Rocket\n    }\n  ];\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'current': return 'bg-green-100 text-green-800';\n      case 'upcoming': return 'bg-blue-100 text-blue-800';\n      case 'future': return 'bg-gray-100 text-gray-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Transformation Roadmap</h1>\n          <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\n            Follow our journey as we build the future of enterprise transformation together\n          </p>\n        </div>\n\n        <div className=\"relative\">\n          {/* Timeline line */}\n          <div className=\"absolute left-4 top-0 bottom-0 w-1 bg-blue-200 transform -translate-x-1/2\"></div>\n          \n          <div className=\"space-y-12\">\n            {phases.map((phase, index) => {\n              const IconComponent = phase.icon;\n              return (\n                <div key={index} className=\"relative flex items-start\">\n                  {/* Timeline dot */}\n                  <div className={`absolute left-4 w-6 h-6 rounded-full border-4 border-white ${\n                    phase.status === 'current' ? 'bg-green-500' :\n                    phase.status === 'upcoming' ? 'bg-blue-500' : 'bg-gray-400'\n                  } transform -translate-x-1/2 z-10`}></div>\n                  \n                  <div className=\"ml-16 bg-white rounded-lg shadow-lg p-6 flex-1\">\n                    <div className=\"flex items-start justify-between mb-4\">\n                      <div className=\"flex items-center gap-3\">\n                        {IconComponent && <IconComponent className=\"w-6 h-6 text-blue-600\" />}\n                        <h2 className=\"text-2xl font-semibold text-gray-900\">{phase.title}</h2>\n                      </div>\n                      <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(phase.status)}`}>\n                        {phase.status.charAt(0).toUpperCase() + phase.status.slice(1)}\n                      </span>\n                    </div>\n                    \n                    <p className=\"text-gray-600 mb-4\">{phase.description}</p>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                      <div className=\"flex items-center gap-2\">\n                        <Calendar className=\"w-4 h-4 text-gray-400\" />\n                        <span className=\"text-gray-600\">{phase.duration}</span>\n                      </div>\n                      <div className=\"md:col-span-2\">\n                        <strong className=\"text-gray-900\">Outcome:</strong> {phase.outcome}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        <div className=\"text-center mt-12\">\n          <div className=\"bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto\">\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">Join Our Journey</h3>\n            <p className=\"text-gray-600 mb-4\">\n              Be part of this transformative experience. Your ideas and feedback shape the future of enterprise transformation.\n            </p>\n            <button className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors\">\n              Get Involved\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RoadmapPage;","size_bytes":4846},"src/pages/SimpleTest.tsx":{"content":"import React from 'react';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\n\n// Generate dummy text for testing\nconst generateDummyText = (frameName: string, count: number = 200) => {\n  const lines = [];\n  for (let i = 1; i <= count; i++) {\n    lines.push(`${frameName} - Line ${i}`);\n  }\n  return lines.join('\\n');\n};\n\nconst SimpleTest: React.FC = () => {\n  return (\n    <div style={{\n      height: '100vh',\n      width: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      margin: 0,\n      padding: 0\n    }}>\n      {/* Actual Header Component */}\n      <Header />\n\n      {/* Middle Frame - Flexible height */}\n      <div style={{\n        flex: 1,\n        backgroundColor: '#f8f9fa',\n        padding: '20px',\n        overflowY: 'auto',\n        overflowX: 'hidden'\n      }}>\n        <h2>MIDDLE FRAME - Flexible Height with Scroll</h2>\n        <div style={{\n          whiteSpace: 'pre-wrap',\n          wordWrap: 'break-word',\n          fontFamily: 'monospace',\n          fontSize: '12px',\n          lineHeight: '1.4'\n        }}>\n          {generateDummyText('Middle Frame')}\n        </div>\n      </div>\n\n      {/* Actual Footer Component */}\n      <Footer />\n    </div>\n  );\n};\n\nexport default SimpleTest;","size_bytes":1256},"src/pages/SimpleTestMain.tsx":{"content":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport SimpleTest from './SimpleTest';\nimport '../index.css';\n\nconst root = ReactDOM.createRoot(document.getElementById('root')!);\nroot.render(\n  <React.StrictMode>\n    <SimpleTest />\n  </React.StrictMode>\n);","size_bytes":276},"src/pages/SimpleTestPage.tsx":{"content":"import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport DiscussionForum from '../components/DiscussionForum';\nimport ChapterSection from '../components/ChapterSection';\nimport SupportingContent from '../components/SupportingContent';\nimport MarkdownRenderer from '../components/MarkdownRenderer';\nimport HtmlRenderer from '../components/HtmlRenderer';\nimport { fetchHtmlWithEncoding } from '../utils/htmlFetch';\nimport { useAuth } from '../context/AuthContext';\n\n// Generate dummy text for testing\nconst generateDummyText = (frameName: string, count: number = 200) => {\n  const lines = [];\n  for (let i = 1; i <= count; i++) {\n    lines.push(`${frameName} - Line ${i}`);\n  }\n  return lines.join('\\n');\n};\n\n// Mock data for DiscussionForum\nconst mockComments = [\n  {\n    id: '1',\n    user: 'architect@example.com',\n    text: 'Great episode! The concepts really resonate with my experience in sustainable design.',\n    timestamp: new Date(Date.now() - 3600000),\n    likes: 5,\n    replies: [\n      {\n        id: '1-1',\n        user: 'student@example.com',\n        text: 'Agreed! The modular approach is brilliant.',\n        timestamp: new Date(Date.now() - 1800000),\n        likes: 2\n      }\n    ]\n  },\n  {\n    id: '2',\n    user: 'designer@example.com',\n    text: 'How do you handle client feedback during the conceptual phase?',\n    timestamp: new Date(Date.now() - 7200000),\n    likes: 3\n  }\n];\n\nconst mockUser = { id: '1', email: 'test@example.com' };\n\n// Chapters data from ArchitectsForumPage.tsx.backup\nconst chapters = [\n  {\n    id: '1',\n    title: 'Chapter 1: The Mechanics of Transformation',\n    episodes: [\n      {\n        id: '1.1',\n        title: 'Episode 1.1: What is an Organizational Transformation?',\n        description: 'Defines transformation as a fundamental re-engineering of an organization\\'s core logic to meet a new strategic ambition that exceeds its current capacity. The goal is to build a new engine, not just tune the old one.',\n        releaseDate: '2025-09-01',\n        contentPath: '/lessons/1.1/Episode 1.1.md',\n        audioPath: '/lessons/1.1/1.1.m4a',\n        videoPath: '/lessons/1.1/1.1.mp4',\n        studyGuidePath: '/lessons/1.1/1.1studyguide.pdf',\n        briefPath: '/lessons/1.1/1.1brief.pdf',\n        images: ['/lessons/1.1/episode-1.1_1.png', '/lessons/1.1/episode-1.1_2.png'],\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      },\n      {\n        id: '1.2',\n        title: 'Episode 1.2: What is a Sector Transformation?',\n        description: 'Elevates the transformation challenge from a single entity to an entire ecosystem. It redesigns how value flows across multiple, interdependent organizations to achieve a shared strategic goal that no single entity could deliver alone.',\n        releaseDate: '2025-09-01',\n        contentPath: '/lessons/1.2/Episode 1.2.md',\n        images: ['/lessons/1.2/episode-1.2_1.png'],\n        audioPath: '/lessons/1.2/1.2.m4a',\n        videoPath: '/lessons/1.2/1.2.mp4',\n        studyGuidePath: '/lessons/1.2/1.2studyguide.pdf',\n        briefPath: '/lessons/1.2/1.2brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      },\n      {\n        id: '1.3',\n        title: 'Episode 1.3: What is the People Transformation?',\n        description: 'Addresses the human and political resistance inherent in public sector reform. Acknowledging that a perfect plan can be derailed by cultural inertia is the first step to managing it.',\n        releaseDate: '2025-09-01',\n        contentPath: '/lessons/1.3/Episode 1.3.md',\n        audioPath: '/lessons/1.3/1.3.m4a',\n        videoPath: '/lessons/1.3/1.3.mp4',\n        studyGuidePath: '/lessons/1.3/1.3studyguide.pdf',\n        briefPath: '/lessons/1.3/1.3brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      },\n      {\n        id: '1.4',\n        title: 'Episode 1.4: The Entangled Transformation Battleground',\n        description: 'Introduces the concept of \"entangled\" transformations, where multiple entities must change simultaneously. It presents the Complexity Index (CI) as a tool to assess this risk and universal cascading (L0-L3) as the foundational discipline for managing it.',\n        releaseDate: '2025-09-01',\n        contentPath: '/lessons/1.4/Episode 1.4.md',\n        audioPath: '/lessons/1.4/1.4.m4a',\n        videoPath: '/lessons/1.4/1.4.mp4',\n        studyGuidePath: '/lessons/1.4/1.4studyguide.pdf',\n        briefPath: '/lessons/1.4/1.4brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      }\n    ]\n  },\n  {\n    id: '2',\n    title: 'Chapter 2: The Architectural Blueprint in Practice',\n    episodes: [\n      {\n        id: '2.1',\n        title: 'Episode 2.1: Strategic Performance (KPIs)',\n        description: 'Explains how to create a \"golden thread\" from a high-level national objective (L0) down to a frontline process metric (L3). This ensures every action is aligned with strategy and provides a data-driven basis for performance management.',\n        releaseDate: '2025-09-08',\n        contentPath: '/lessons/2.1/Episode 2.1.md',\n        isReleased: false\n      },\n      {\n        id: '2.2',\n        title: 'Episode 2.2: Portfolios & Initiatives',\n        description: 'Defines the portfolio as the control system that translates strategy into funded work. An architected portfolio ensures capital is allocated to initiatives with a direct, documented link to strategic KPIs.',\n        releaseDate: '2025-09-15',\n        contentPath: '/lessons/2.2/Episode 2.2.md',\n        isReleased: false\n      },\n      {\n        id: '2.3',\n        title: 'Episode 2.3: Process Architecture',\n        description: 'Establishes that strategy is executed through processes. Defining L3 (executable) processes and linking them to owners and metrics gives the organization direct control over its operational performance.',\n        releaseDate: '2025-09-22',\n        contentPath: '/lessons/2.3/Episode 2.3.md',\n        isReleased: false\n      },\n      {\n        id: '2.4',\n        title: 'Episode 2.4: Organizational Design',\n        description: 'Frames the organizational structure as the backbone of accountability. A dynamic structure, where every role is mapped to a specific L3 process and KPI, provides clarity and stability during intense change.',\n        releaseDate: '2025-09-29',\n        contentPath: '/lessons/2.4/Episode 2.4.md',\n        isReleased: false\n      }\n    ]\n  },\n  {\n    id: '3',\n    title: 'Chapter 3: The Management Operating System',\n    episodes: [\n      {\n        id: '3.1',\n        title: 'Episode 3.1: The Integrated Governance',\n        description: 'Defines governance not as bureaucracy, but as the decision-making \"operating system\" that integrates strategy, execution (PMO), and operations through a structured cadence of reviews. It is the primary risk management forum for the transformation.',\n        releaseDate: '2025-10-06',\n        contentPath: '/lessons/3.1/Episode 3.1.md',\n        audioPath: '/lessons/3.1/3.1.m4a',\n        videoPath: '/lessons/3.1/3.1.mp4',\n        studyGuidePath: '/lessons/3.1/3.1studyguide.pdf',\n        briefPath: '/lessons/3.1/3.1brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      },\n      {\n        id: '3.2',\n        title: 'Episode 3.2: The Delivery Engine',\n        description: 'Outlines the dual disciplines of Value Assurance (Program Management) and Delivery Assurance (Project Management) that execute the decisions made in governance.',\n        releaseDate: '2025-10-13',\n        contentPath: '/lessons/3.2/Episode 3.2.md',\n        audioPath: '/lessons/3.2/3.2.m4a',\n        videoPath: '/lessons/3.2/3.2.mp4',\n        studyGuidePath: '/lessons/3.2/3.2studyguide.pdf',\n        briefPath: '/lessons/3.2/3.2brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      },\n      {\n        id: '3.3',\n        title: 'Episode 3.3: Change Architecture',\n        description: 'Presents Change Architecture as the discipline for mitigating adoption risk. It integrates human readiness activities (training, coaching) directly with the rollout of technical deliverables.',\n        releaseDate: '2025-10-20',\n        contentPath: '/lessons/3.3/Episode 3.3.md',\n        audioPath: '/lessons/3.3/3.3.m4a',\n        videoPath: '/lessons/3.3/3.3.mp4',\n        studyGuidePath: '/lessons/3.3/3.3studyguide.pdf',\n        briefPath: '/lessons/3.3/3.3brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      },\n      {\n        id: '3.4',\n        title: 'Episode 3.4: The Enablers',\n        description: 'Describes the foundational capabilities required to make a transformation sustainable: Digital Support, Corporate Knowledge Management, and a culture that attracts and retains talent.',\n        releaseDate: '2025-10-27',\n        contentPath: '/lessons/3.4/Episode 3.4.md',\n        audioPath: '/lessons/3.4/3.4.m4a',\n        videoPath: '/lessons/3.4/3.4.mp4',\n        studyGuidePath: '/lessons/3.4/3.4studyguide.pdf',\n        briefPath: '/lessons/3.4/3.4brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      }\n    ]\n  },\n  {\n    id: '4',\n    title: 'Chapter 4: DTO Practical Implementation Approach',\n    episodes: [\n      {\n        id: '4.1',\n        title: 'Episode 4.1: DTO Implementation Framework',\n        description: 'This Body of Knowledge is more than a framework; it is a practical, toolkit designed to accelerate your transformation journey. Within 90 days, an organization can use these assets to create a \"baby twin\" - a small-scale, Use Case 001 working version of the Digital Twin that grows over time.',\n        releaseDate: '2025-11-03',\n        contentPath: '/lessons/4.1/Episode 4.1.md',\n        audioPath: '/lessons/4.1/4.1.m4a',\n        videoPath: '/lessons/4.1/4.1.mp4',\n        studyGuidePath: '/lessons/4.1/4.1studyguide.pdf',\n        briefPath: '/lessons/4.1/4.1brief.pdf',\n        languages: ['English', 'Spanish', 'Arabic', 'French', 'Chinese'],\n        isReleased: true\n      }\n    ]\n  }\n];\n\nconst SimpleTestPage: React.FC = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n\n  // State for DiscussionForum\n  const [comments, setComments] = useState(mockComments);\n  const [newComment, setNewComment] = useState('');\n  const [replyingTo, setReplyingTo] = useState<string | null>(null);\n  const [replyText, setReplyText] = useState('');\n  const [showModeration, setShowModeration] = useState(false); // Keep moderation hidden\n\n  // State for ChapterSection\n  const [selectedEpisode, setSelectedEpisode] = useState<any>(null);\n\n  // State for Episode Content\n  const [episodeContent, setEpisodeContent] = useState<string>('');\n  const [episodeIsHtml, setEpisodeIsHtml] = useState<boolean>(false);\n\n  // State for SupportingContent\n  const [selectedLanguage, setSelectedLanguage] = useState('English');\n  const [audioState, setAudioState] = useState<'playing' | 'paused' | 'stopped'>('stopped');\n  const [audioProgress, setAudioProgress] = useState(0);\n  const [audioDuration, setAudioDuration] = useState(0);\n\n  // Episode selection handler\n  const handleEpisodeSelect = async (episode: any) => {\n    if (!episode.isReleased) return;\n\n    setSelectedEpisode(episode);\n\n    const tryLoad = async (path: string) => {\n      return await fetchHtmlWithEncoding(path);\n    };\n\n    try {\n      const id = episode.id;\n      const baseDir = episode.contentPath.includes('/') ? episode.contentPath.slice(0, episode.contentPath.lastIndexOf('/') + 1) : '/';\n      // Load HTML only (.htm or .html)\n      const content = (await tryLoad(`${baseDir}${id}.htm`)) || (await tryLoad(`${baseDir}${id}.html`));\n\n      if (content) {\n        setEpisodeIsHtml(true);\n        setEpisodeContent(content);\n      } else {\n        setEpisodeIsHtml(false);\n        setEpisodeContent('# Content Not Available\\n\\nThe episode HTML is missing.');\n      }\n    } catch (error) {\n      setEpisodeIsHtml(false);\n      setEpisodeContent('# Content Loading Error\\n\\nUnable to load the episode content. Please try again later.');\n    }\n  };\n\n  // Format date helper\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  // Handlers for DiscussionForum\n  const handleCommentSubmit = () => {\n    if (newComment.trim()) {\n      const comment = {\n        id: Date.now().toString(),\n        user: user.email,\n        text: newComment,\n        timestamp: new Date(),\n        likes: 0,\n        replies: []\n      };\n      setComments([...comments, comment]);\n      setNewComment('');\n    }\n  };\n\n  const handleReplySubmit = (commentId: string) => {\n    if (replyText.trim()) {\n      const reply = {\n        id: `${commentId}-${Date.now()}`,\n        user: user.email,\n        text: replyText,\n        timestamp: new Date(),\n        likes: 0\n      };\n\n      setComments(comments.map(comment =>\n        comment.id === commentId\n          ? { ...comment, replies: [...(comment.replies || []), reply] }\n          : comment\n      ));\n      setReplyText('');\n      setReplyingTo(null);\n    }\n  };\n\n  const handleLikeComment = (commentId: string, isReply?: boolean, parentId?: string) => {\n    if (isReply && parentId) {\n      setComments(comments.map(comment =>\n        comment.id === parentId\n          ? {\n              ...comment,\n              replies: comment.replies?.map(reply =>\n                reply.id === commentId\n                  ? { ...reply, likes: reply.likes + 1 }\n                  : reply\n              ) || []\n            }\n          : comment\n      ));\n    } else {\n      setComments(comments.map(comment =>\n        comment.id === commentId\n          ? { ...comment, likes: comment.likes + 1 }\n          : comment\n      ));\n    }\n  };\n\n  const handleReportComment = (commentId: string, isReply?: boolean, parentId?: string) => {\n    // Simple report functionality\n    console.log('Reported comment:', commentId);\n  };\n\n  const handleModerateComment = (commentId: string, action: 'approve' | 'remove', isReply?: boolean, parentId?: string) => {\n    // Simple moderation functionality\n    console.log('Moderated comment:', commentId, action);\n  };\n\n  // Handlers for SupportingContent\n  const handleAudioControl = (action: 'play' | 'pause' | 'stop' | 'forward' | 'backward') => {\n    console.log('Audio control:', action);\n    // Simple audio control simulation\n    if (action === 'play') {\n      setAudioState('playing');\n    } else if (action === 'pause') {\n      setAudioState('paused');\n    } else if (action === 'stop') {\n      setAudioState('stopped');\n      setAudioProgress(0);\n    }\n  };\n\n  const handleVideoPlay = () => {\n    console.log('Video play requested');\n    alert('Video playback would start here');\n  };\n\n  const handleSupportingContentClick = (url: string, isDownload?: boolean) => {\n    console.log('Supporting content click:', url, 'isDownload:', isDownload);\n    if (isDownload) {\n      alert(`Download would start for: ${url}`);\n    } else {\n      window.open(url, '_blank');\n    }\n  };\n\n  const handleNotebookOpen = () => {\n    console.log('Notebook open requested');\n    alert('Notebook feature would open here');\n  };\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Handlers for login/register functionality\n  const handleLogin = () => {\n    navigate('/login');\n  };\n\n  const handleRegister = () => {\n    navigate('/register');\n  };\n\n  return (\n    <div style={{\n      height: '100%',\n      width: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      margin: 0,\n      padding: 0\n    }}>\n      \n\n      {/* Main Content Area - 3 Frame Horizontal Layout */}\n      <div style={{\n        flex: 1,\n        display: 'grid',\n        gridTemplateColumns: '20% 1fr 20%',\n        overflow: 'hidden',\n        minHeight: 0\n      }}>\n        {/* Frame 1.0 - Left Panel (20%) */}\n        <div className=\"left-panel\" style={{ overflowY: 'auto' }}>\n          <div className=\"p-4\" style={{ width: 'auto', alignSelf: 'stretch' }}>\n            <h2 className=\"text-lg font-bold text-gray-900 mb-4 px-2\">ARCHITECTS FORUM</h2>\n            {chapters.map((chapter) => (\n              <ChapterSection\n                key={chapter.id}\n                chapter={chapter}\n                selectedEpisode={selectedEpisode}\n                onEpisodeSelect={handleEpisodeSelect}\n                formatDate={formatDate}\n              />\n            ))}\n          </div>\n        </div>\n\n        {/* Frame 2.0 - Middle Panel (60%) */}\n        <div style={{\n          display: 'grid',\n          gridTemplateRows: 'auto minmax(0, 1fr)',\n          overflow: 'hidden',\n          minHeight: 0\n        }}>\n          {/* Frame 2.1 - Top Section (5% of middle panel) */}\n          <div className=\"supporting-content\" style={{ padding: '4px' }}>\n            {selectedEpisode ? (\n              <div className=\"w-full p-2\">\n                <h3 className=\"text-xs font-semibold text-gray-900 mb-2\">SUPPORTING CONTENT</h3>\n\n                {/* 4 equally-stretched supporting content elements */}\n                <div className=\"grid grid-cols-4 gap-1 w-full mb-2\">\n                  {/* Audio Podcast */}\n                  <button\n                    onClick={() => selectedEpisode.audioPath && handleAudioControl('play')}\n                    disabled={!selectedEpisode.audioPath}\n                    className={`flex items-center justify-center space-x-1 px-2 py-1 text-xs border-0 transition-colors ${selectedEpisode.audioPath\n                        ? 'bg-gray-900 hover:bg-gray-800 text-white'\n                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                    }`}\n                  >\n                    <span>PODCAST</span>\n                  </button>\n\n                  {/* Video */}\n                  <button\n                    onClick={() => selectedEpisode.videoPath && handleVideoPlay()}\n                    disabled={!selectedEpisode.videoPath}\n                    className={`flex items-center justify-center space-x-1 px-2 py-1 text-xs border-0 transition-colors ${selectedEpisode.videoPath\n                        ? 'bg-gray-900 hover:bg-gray-800 text-white'\n                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                    }`}\n                  >\n                    <span>VIDEO</span>\n                  </button>\n\n                  {/* Study Guide */}\n                  <button\n                    onClick={() => selectedEpisode.studyGuidePath && handleSupportingContentClick(`/lessons/${selectedEpisode.id}/${selectedEpisode.id}studyguide.pdf`, true)}\n                    disabled={!selectedEpisode.studyGuidePath}\n                    className={`flex items-center justify-center space-x-1 px-2 py-1 text-xs border-0 transition-colors ${selectedEpisode.studyGuidePath\n                        ? 'bg-gray-900 hover:bg-gray-800 text-white'\n                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                    }`}\n                  >\n                    <span>STUDY GUIDE</span>\n                  </button>\n\n                  {/* Brief */}\n                  <button\n                    onClick={() => selectedEpisode.briefPath && handleSupportingContentClick(`/lessons/${selectedEpisode.id}/${selectedEpisode.id}brief.pdf`, true)}\n                    disabled={!selectedEpisode.briefPath}\n                    className={`flex items-center justify-center space-x-1 px-2 py-1 text-xs border-0 transition-colors ${selectedEpisode.briefPath\n                        ? 'bg-gray-900 hover:bg-gray-800 text-white'\n                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                    }`}\n                  >\n                    <span>BRIEF</span>\n                  </button>\n                </div>\n\n                {/* Compact Audio Controls */}\n                {selectedEpisode.audioPath && audioState !== 'stopped' && (\n                  <div className=\"flex items-center space-x-2 bg-gray-100 px-2 py-1 border-l-2 border-gray-900\">\n                    <div className=\"flex items-center space-x-1\">\n                      <button onClick={() => handleAudioControl('backward')} className=\"text-gray-900 hover:text-gray-700 text-xs\">\n                        ⏮\n                      </button>\n                      <button onClick={() => handleAudioControl(audioState === 'playing' ? 'pause' : 'play')} className=\"text-gray-900 hover:text-gray-700 text-xs\">\n                        {audioState === 'playing' ? '⏸' : '▶'}\n                      </button>\n                      <button onClick={() => handleAudioControl('stop')} className=\"text-gray-900 hover:text-gray-700 text-xs\">\n                        ⏹\n                      </button>\n                      <button onClick={() => handleAudioControl('forward')} className=\"text-gray-900 hover:text-gray-700 text-xs\">\n                        ⏭\n                      </button>\n                    </div>\n                    <div className=\"flex items-center space-x-1 flex-1 min-w-0\">\n                      <div className=\"flex-1 bg-gray-300 h-1 min-w-[40px]\">\n                        <div\n                          className=\"bg-gray-900 h-1\"\n                          style={{ width: `${(audioProgress / audioDuration) * 100}%` }}\n                        />\n                      </div>\n                      <span className=\"text-xs text-gray-900 flex-shrink-0 min-w-[40px]\">\n                        {formatTime(audioProgress)}/{formatTime(audioDuration)}\n                      </span>\n                    </div>\n                    <button\n                      onClick={handleNotebookOpen}\n                      className=\"bg-gray-900 text-white px-1 py-0.5 text-xs hover:bg-gray-800 flex-shrink-0\"\n                    >\n                      ASK\n                    </button>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"w-full p-2\">\n                <h3 className=\"text-xs font-semibold text-gray-900 mb-1\">SUPPORTING CONTENT</h3>\n                <p className=\"text-gray-500 text-xs\">Select an episode to view supporting content</p>\n              </div>\n            )}\n          </div>\n\n          {/* Frame 2.2 - Bottom Section (95% of middle panel) */}\n          <div className=\"content-area\" style={{ overflowY: 'auto', minHeight: 0, height: '100%' }}>\n            {selectedEpisode ? (\n              episodeIsHtml ? (\n                <HtmlRenderer html={episodeContent} basePath={`/lessons/${selectedEpisode.id}/`} />\n              ) : (\n                <MarkdownRenderer content={episodeContent} selectedEpisode={selectedEpisode} />\n              )\n            ) : (\n              <div className=\"flex items-center justify-center h-full\">\n                <div className=\"text-center text-gray-500\">\n                  <h3 className=\"text-lg font-medium mb-2\">SELECT AN EPISODE TO BEGIN</h3>\n                  <p className=\"text-sm\">Choose from the left panel to view episode content</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Frame 3.0 - Right Panel (20%) */}\n        <div className=\"right-panel\" style={{ overflowY: 'auto' }}>\n          {selectedEpisode ? (\n            <DiscussionForum\n              comments={comments}\n              newComment={newComment}\n              setNewComment={setNewComment}\n              user={user ? { id: user.id, email: user.email } : null}\n              replyingTo={replyingTo}\n              setReplyingTo={setReplyingTo}\n              replyText={replyText}\n              setReplyText={setReplyText}\n              showModeration={showModeration}\n              setShowModeration={setShowModeration}\n              handleCommentSubmit={handleCommentSubmit}\n              handleReplySubmit={handleReplySubmit}\n              handleLikeComment={handleLikeComment}\n              handleReportComment={handleReportComment}\n              handleModerateComment={handleModerateComment}\n              isProminent={true}\n              hideModeration={true}\n              onLogin={handleLogin}\n              onRegister={handleRegister}\n            />\n          ) : (\n            <div className=\"w-full p-2\">\n              <h3 className=\"text-xs font-semibold text-gray-900 mb-2\">DISCUSSION FORUM</h3>\n              <p className=\"text-gray-500 text-xs\">Select an episode to view discussion</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Actual Footer Component */}\n    </div>\n  );\n};\n\nexport default SimpleTestPage;\n","size_bytes":24983},"src/pages/ThreeDAnimationPage.tsx":{"content":"import React from 'react';\n\nconst ThreeDAnimationPage: React.FC = () => {\n  return (\n    <div style={{ width: '100%', height: '100%', display: 'flex', flexDirection: 'column' }}>\n      <div style={{ flex: 1, minHeight: 0 }}>\n        <iframe\n          src=\"/3danimation/index.html\"\n          title=\"3D Animation\"\n          style={{ border: '0', width: '100%', height: '100%' }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ThreeDAnimationPage;\n","size_bytes":457},"src/pages/UnifiedHomePage.tsx":{"content":"import React, { useEffect, useRef, useState, useCallback, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport * as THREE from 'three';\n\ninterface ScrollingSection {\n  title: string;\n  subtitle: string;\n  text: string;\n  triggerRange: [number, number]; // [start%, end%] as 0-1\n  position: 'left' | 'right' | 'center' | 'bottom';\n  animation: 'slide-left' | 'slide-right' | 'fade-up' | 'fade-in';\n}\n\nconst UnifiedHomePage: React.FC = () => {\n  // Canvas and THREE.js refs\n  const containerRef = useRef<HTMLDivElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const sceneRef = useRef<THREE.Scene | null>(null);\n  const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\n  const cameraRef = useRef<THREE.PerspectiveCamera | null>(null);\n  const animationFrameRef = useRef<number | undefined>(undefined);\n\n  // State\n  const [scrollProgress, setScrollProgress] = useState(0);\n  const [currentTextSection, setCurrentTextSection] = useState(0);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // Text content configuration\n  const scrollingSections: ScrollingSection[] = useMemo(() => [\n    {\n      title: \"Transforming Strategy Execution\",\n      subtitle: \"RETHINK COMPLEXITY, MAKE IT YOUR ASSET.\",\n      text: \"Re-defining how you experience complex transformations. Labels like planning, monitoring, risks, dashboard etc remain the same, everything else changes. Not only from a look and feel, we re-defined what it means, how it is done and its role in an integrated model.\",\n      triggerRange: [0, 0.125],\n      position: 'left',\n      animation: 'slide-left'\n    },\n    {\n      title: \"Imagine a parallel universe where strategy execution finally makes sense.\",\n      subtitle: \"BEYOND THEORY, A WORKING SOLUTION\",\n      text: \"We heard it all: Science fiction, Consultants Jargon, Another framework. Even the \\\"its farfetched\\\", \\\"something for another generation\\\". Our answer. IT IS A DEVELOPED SOLUTION. Specifically, a Net.js Webapp with a Supabase Database and a tailored Gemini Assistant coupled with a 5 year dataset of an entity's national transformation.\",\n      triggerRange: [0.125, 0.25],\n      position: 'right',\n      animation: 'slide-right'\n    },\n    {\n      title: \"So, How does that work?\",\n      subtitle: \"ONLY GREAT QUESTIONS UNLOCK GREAT ANSWERS\",\n      text: \"We understand, you have questions and you will get the answers. But before you can receive the answers, you must understand what are the right questions and how they evolved. So keep scrolling and start your initiation journey.\",\n      triggerRange: [0.25, 0.375],\n      position: 'center',\n      animation: 'fade-up'\n    },\n    {\n      title: \"Your Organization\",\n      subtitle: \"Much like a Rubik's cube\",\n      text: \"Each of its 27 cubes represents a piece of the puzzle. Strategy, Performance, Policies, People, Process, Tools add external like globalization, events etc..all interacting. Transforming means solving the cube and to do that, you need to understand how these different cubes interact together. We had to dismantle and examine its anatomy.\",\n      triggerRange: [0.375, 0.5],\n      position: 'left',\n      animation: 'slide-left'\n    },\n    {\n      title: \"Hidden Relations Unveiled\",\n      subtitle: \"Relations ran Deeper\",\n      text: \"While deciphering the cubes, and focusing on what role they play, how they interact, their inputs/outputs, a model began to appear. A sketchy pattern that made sense and felt right but remained elusive. We had to go deeper on each one. Every cube had to be dismantled further.\",\n      triggerRange: [0.5, 0.625],\n      position: 'right',\n      animation: 'slide-right'\n    },\n    {\n      title: \"Where others stop\",\n      subtitle: \"Facing Complexity Head On\",\n      text: \"Two truths became evident. First, the scale of complexity was much more than our highest expectations with layers of dependencies involved. Second, the scarcity in helping resources. Few have gone this deep covering everything holistically. We had to research everywhere and in some cases develop missing gaps. the slow process began, covering them one by one.\",\n      triggerRange: [0.625, 0.75],\n      position: 'bottom',\n      animation: 'fade-up'\n    },\n    {\n      title: \"2 years later…\",\n      subtitle: \"Mission Accomplished, Just in Time\",\n      text: \"Finally, all the components where dissected, analyzed and mapped. A twin model that bridged every relation and interaction across a complex web of complex dependencies. Just when AI breakthroughs accelerated, became accessible,and at shockingly affordable costs.\",\n      triggerRange: [0.75, 0.875],\n      position: 'left',\n      animation: 'slide-left'\n    },\n    {\n      title: \"The future, today\",\n      subtitle: \"Digital Twin Model of an Organization\",\n      text: \"The final element, the heart of the solution was plugged in. Bringing the Digital Twin to life, and bringing hope back to transformations. From here you and us have two paths:\",\n      triggerRange: [0.875, 1.0],\n      position: 'center',\n      animation: 'fade-in'\n    }\n  ], []);\n\n  // THREE.js initialization\n  const initThreeJS = useCallback(async () => {\n    if (!canvasRef.current || !containerRef.current) return;\n\n    const canvas = canvasRef.current;\n    const container = containerRef.current;\n\n    // Scene setup\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0x000511);\n\n    // Camera setup\n    const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);\n    camera.position.set(6, 4, 12);\n\n    // Renderer setup\n    const renderer = new THREE.WebGLRenderer({ \n      canvas, \n      antialias: true, \n      alpha: true \n    });\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n\n    // Lighting\n    const ambientLight = new THREE.AmbientLight(0x404040, 0.4);\n    scene.add(ambientLight);\n\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 1.0);\n    directionalLight.position.set(6, 10, 8);\n    directionalLight.castShadow = true;\n    scene.add(directionalLight);\n\n    // Load faces.json patterns\n    let facePatternsData = null;\n    try {\n      const response = await fetch('/faces.json');\n      facePatternsData = await response.json();\n    } catch (error) {\n      console.warn('Could not load faces.json, using fallback');\n      facePatternsData = {\n        palette: ['#00F0FF', '#0EA5E9', '#38BDF8', '#7DD3FC', '#A5F3FC', '#CFFAFE'],\n        patterns: [\n          { id: 0, pattern: 'grid' },\n          { id: 1, pattern: 'stripes' },\n          { id: 2, pattern: 'ring' },\n          { id: 3, pattern: 'chevron' },\n          { id: 4, pattern: 'hex' },\n          { id: 5, pattern: 'wave' }\n        ]\n      };\n    }\n\n    // Create Rubik's cube structure (27 cubes in 3x3x3)\n    const cubeGroup = new THREE.Group();\n    const cubes: THREE.Mesh[] = [];\n    const STEP = 2.2;\n    \n    // Create materials with face patterns\n    const createFaceTexture = (patternType: string, size = 256): THREE.CanvasTexture => {\n      const canvas = document.createElement('canvas');\n      canvas.width = size;\n      canvas.height = size;\n      const ctx = canvas.getContext('2d')!;\n      \n      const palette = facePatternsData.palette;\n      const baseColor = palette[0];\n      \n      // Fill with base gradient\n      const gradient = ctx.createLinearGradient(0, 0, size, size);\n      gradient.addColorStop(0, baseColor);\n      gradient.addColorStop(1, palette[2]);\n      ctx.fillStyle = gradient;\n      ctx.fillRect(0, 0, size, size);\n      \n      // Set stroke style\n      ctx.strokeStyle = '#ffffff';\n      ctx.lineWidth = 2;\n      ctx.globalAlpha = 0.8;\n      \n      // Pattern-specific drawing\n      switch (patternType) {\n        case 'grid':\n          const gridSpacing = size / 8;\n          for (let i = 0; i <= 8; i++) {\n            const pos = i * gridSpacing;\n            ctx.beginPath();\n            ctx.moveTo(pos, 0);\n            ctx.lineTo(pos, size);\n            ctx.moveTo(0, pos);\n            ctx.lineTo(size, pos);\n            ctx.stroke();\n          }\n          break;\n        case 'stripes':\n          const stripeSpacing = size / 12;\n          for (let i = -size; i < size * 2; i += stripeSpacing) {\n            ctx.beginPath();\n            ctx.moveTo(i, 0);\n            ctx.lineTo(i + size, size);\n            ctx.stroke();\n          }\n          break;\n        case 'ring':\n          const centerX = size / 2;\n          const centerY = size / 2;\n          for (let r = size / 16; r < size / 2; r += size / 8) {\n            ctx.beginPath();\n            ctx.arc(centerX, centerY, r, 0, Math.PI * 2);\n            ctx.stroke();\n          }\n          break;\n      }\n      \n      return new THREE.CanvasTexture(canvas);\n    };\n\n    // Create materials for different faces\n    const materials = facePatternsData.patterns.map((pattern: any) => {\n      const texture = createFaceTexture(pattern.pattern);\n      return new THREE.MeshLambertMaterial({\n        map: texture,\n        transparent: true,\n        opacity: 0.9\n      });\n    });\n\n    // Create 27 cubes (3x3x3)\n    for (let x = -1; x <= 1; x++) {\n      for (let y = -1; y <= 1; y++) {\n        for (let z = -1; z <= 1; z++) {\n          const geometry = new THREE.BoxGeometry(1.8, 1.8, 1.8);\n          const material = materials[Math.floor(Math.random() * materials.length)];\n          const cube = new THREE.Mesh(geometry, material);\n          \n          cube.position.set(x * STEP, y * STEP, z * STEP);\n          cube.castShadow = true;\n          cube.receiveShadow = true;\n          \n          cubes.push(cube);\n          cubeGroup.add(cube);\n        }\n      }\n    }\n\n    scene.add(cubeGroup);\n\n    // Store refs\n    sceneRef.current = scene;\n    rendererRef.current = renderer;\n    cameraRef.current = camera;\n\n    // Initial resize\n    const resizeHandler = () => {\n      if (!container || !renderer || !camera) return;\n      \n      const rect = container.getBoundingClientRect();\n      const width = rect.width;\n      const height = rect.height;\n      \n      renderer.setSize(width, height);\n      camera.aspect = width / height;\n      camera.updateProjectionMatrix();\n    };\n\n    resizeHandler();\n    window.addEventListener('resize', resizeHandler);\n\n    setIsLoaded(true);\n\n    // Animation loop\n    const animate = () => {\n      if (renderer && scene && camera) {\n        // Apply animations based on scroll progress\n        applyScrollAnimations(scrollProgress, cubes, cubeGroup);\n        renderer.render(scene, camera);\n      }\n      animationFrameRef.current = requestAnimationFrame(animate);\n    };\n\n    animate();\n\n    return () => {\n      window.removeEventListener('resize', resizeHandler);\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [scrollProgress]);\n\n  // Animation logic based on scroll progress\n  const applyScrollAnimations = (progress: number, cubes: THREE.Mesh[], group: THREE.Group) => {\n    // Phase 1 (0-12.5%): Initial state with gentle rotation\n    if (progress < 0.125) {\n      const t = progress / 0.125;\n      group.rotation.y = Math.sin(Date.now() * 0.001) * 0.1;\n      group.rotation.x = Math.cos(Date.now() * 0.001) * 0.05;\n    }\n    \n    // Phase 2 (12.5-25%): Dismantle into cloud\n    else if (progress < 0.25) {\n      const t = (progress - 0.125) / 0.125;\n      cubes.forEach((cube, i) => {\n        const angle = (i / cubes.length) * Math.PI * 2;\n        const radius = t * 8;\n        cube.position.x = Math.cos(angle) * radius;\n        cube.position.y = Math.sin(angle * 0.7) * radius * 0.5;\n        cube.position.z = Math.sin(angle) * radius;\n        cube.rotation.x = t * Math.PI;\n        cube.rotation.y = t * Math.PI * 0.7;\n      });\n    }\n    \n    // Phase 3 (25-50%): Transform into different patterns\n    else if (progress < 0.5) {\n      const t = (progress - 0.25) / 0.25;\n      cubes.forEach((cube, i) => {\n        // Grid formation\n        const gridSize = 3;\n        const x = (i % gridSize) - 1;\n        const y = Math.floor((i / gridSize) % gridSize) - 1;\n        const z = Math.floor(i / (gridSize * gridSize)) - 1;\n        \n        cube.position.x = x * 3 * (1 + t);\n        cube.position.y = y * 3 * (1 + t);\n        cube.position.z = z * 3 * (1 + t);\n        cube.rotation.x = t * Math.PI * 2;\n        cube.rotation.y = t * Math.PI * 1.5;\n      });\n    }\n    \n    // Phase 4 (50-75%): Morph into brain-like structure\n    else if (progress < 0.75) {\n      const t = (progress - 0.5) / 0.25;\n      cubes.forEach((cube, i) => {\n        const angle = (i / cubes.length) * Math.PI * 4;\n        const radius = 4 + Math.sin(angle * 3) * 2;\n        cube.position.x = Math.cos(angle) * radius * t;\n        cube.position.y = Math.sin(angle * 2) * 3 * t;\n        cube.position.z = Math.sin(angle) * radius * t;\n        cube.scale.setScalar(0.5 + t * 0.5);\n      });\n    }\n    \n    // Phase 5 (75-100%): Final formation\n    else {\n      const t = (progress - 0.75) / 0.25;\n      cubes.forEach((cube, i) => {\n        // Return to organized formation\n        const gridSize = 3;\n        const x = (i % gridSize) - 1;\n        const y = Math.floor((i / gridSize) % gridSize) - 1;\n        const z = Math.floor(i / (gridSize * gridSize)) - 1;\n        \n        cube.position.x = x * 2.2;\n        cube.position.y = y * 2.2;\n        cube.position.z = z * 2.2;\n        cube.rotation.x = 0;\n        cube.rotation.y = 0;\n        cube.scale.setScalar(1);\n      });\n      \n      // Gentle rotation of the whole group\n      group.rotation.y = t * Math.PI * 2;\n    }\n  };\n\n  // Scroll handler\n  const handleScroll = useCallback(() => {\n    if (!containerRef.current) return;\n    \n    const scrollTop = window.pageYOffset;\n    const documentHeight = document.documentElement.scrollHeight - window.innerHeight;\n    const progress = Math.min(Math.max(scrollTop / documentHeight, 0), 1);\n    \n    setScrollProgress(progress);\n    \n    // Determine current text section\n    const activeSection = scrollingSections.findIndex(section => \n      progress >= section.triggerRange[0] && progress < section.triggerRange[1]\n    );\n    \n    if (activeSection !== -1 && activeSection !== currentTextSection) {\n      setCurrentTextSection(activeSection);\n    }\n  }, [scrollingSections, currentTextSection]);\n\n  // Initialize THREE.js and scroll handler\n  useEffect(() => {\n    initThreeJS();\n    \n    window.addEventListener('scroll', handleScroll, { passive: true });\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [initThreeJS, handleScroll]);\n\n  // Get animation variants for text sections\n  const getAnimationVariants = (animation: string) => {\n    switch (animation) {\n      case 'slide-left':\n        return {\n          initial: { x: -100, opacity: 0 },\n          animate: { x: 0, opacity: 1 },\n          exit: { x: 100, opacity: 0 }\n        };\n      case 'slide-right':\n        return {\n          initial: { x: 100, opacity: 0 },\n          animate: { x: 0, opacity: 1 },\n          exit: { x: -100, opacity: 0 }\n        };\n      case 'fade-up':\n        return {\n          initial: { y: 50, opacity: 0 },\n          animate: { y: 0, opacity: 1 },\n          exit: { y: -50, opacity: 0 }\n        };\n      default:\n        return {\n          initial: { opacity: 0 },\n          animate: { opacity: 1 },\n          exit: { opacity: 0 }\n        };\n    }\n  };\n\n  // Get position classes for text sections\n  const getPositionClasses = (position: string) => {\n    switch (position) {\n      case 'left':\n        return 'left-8 top-1/4 w-96';\n      case 'right':\n        return 'right-8 top-1/4 w-96';\n      case 'center':\n        return 'left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96';\n      case 'bottom':\n        return 'bottom-8 left-1/2 transform -translate-x-1/2 w-96';\n      default:\n        return 'left-8 top-1/4 w-96';\n    }\n  };\n\n  const currentSection = scrollingSections[currentTextSection];\n\n  return (\n    <div className=\"relative w-full h-screen overflow-hidden\">\n      {/* THREE.js Canvas Container */}\n      <div ref={containerRef} className=\"absolute inset-0\">\n        <canvas \n          ref={canvasRef} \n          className=\"w-full h-full\"\n          style={{ display: isLoaded ? 'block' : 'none' }}\n        />\n        {!isLoaded && (\n          <div className=\"absolute inset-0 flex items-center justify-center bg-black\">\n            <div className=\"text-white text-xl\">Loading...</div>\n          </div>\n        )}\n      </div>\n\n      {/* Text Overlays */}\n      <div className=\"absolute inset-0 pointer-events-none z-10\">\n        <AnimatePresence mode=\"wait\">\n          {currentSection && (\n            <motion.div\n              key={currentTextSection}\n              className={`absolute ${getPositionClasses(currentSection.position)} \n                         bg-black/70 backdrop-blur-sm rounded-lg p-6 text-white`}\n              variants={getAnimationVariants(currentSection.animation)}\n              initial=\"initial\"\n              animate=\"animate\"\n              exit=\"exit\"\n              transition={{ duration: 0.8, ease: \"easeOut\" }}\n            >\n              <h2 className=\"text-2xl font-bold mb-2 text-blue-400\">\n                {currentSection.title}\n              </h2>\n              <h3 className=\"text-lg font-semibold mb-4 text-blue-200\">\n                {currentSection.subtitle}\n              </h3>\n              <p className=\"text-sm leading-relaxed text-gray-200\">\n                {currentSection.text}\n              </p>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n\n      {/* Scrollable content for scroll-driven animation */}\n      <div className=\"absolute top-0 left-0 w-full opacity-0 pointer-events-none\">\n        <div style={{ height: '500vh' }} />\n      </div>\n\n      {/* Progress indicator */}\n      <div className=\"absolute top-4 right-4 z-20 text-white text-sm\">\n        Progress: {(scrollProgress * 100).toFixed(1)}%\n      </div>\n    </div>\n  );\n};\n\nexport default UnifiedHomePage;\n","size_bytes":18050},"src/services/geminiService.ts":{"content":"// This file has been removed as part of the migration to stash.\n","size_bytes":65},"src/services/supabaseClient.ts":{"content":"import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error('Missing Supabase environment variables');\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    autoRefreshToken: false,\n    persistSession: true,\n    detectSessionInUrl: true\n  },\n  global: {\n    fetch: async (input, init) => {\n      try {\n        return await fetch(input as RequestInfo, init as RequestInit);\n      } catch (err) {\n        console.error('Supabase network request failed', err);\n        throw err as any;\n      }\n    }\n  }\n});\n","size_bytes":711},"src/utils/htmlFetch.ts":{"content":"function normalizeWeirdChars(s: string): string {\n  // Fix common mis-decoded sequences\n  // 1) EF BF BD (UTF-8 for U+FFFD) decoded as Latin-1 => \"ï¿½\"\n  s = s.replace(/\\u00EF\\u00BF\\u00BD/g, '\"');\n  // 2) Actual U+FFFD inside the stream – map to better guesses\n  // between alphanumerics -> apostrophe\n  s = s.replace(/([\\p{L}\\p{N}])\\uFFFD([\\p{L}\\p{N}])/gu, '$1’$2');\n  // standalone -> double quote\n  s = s.replace(/\\uFFFD/g, '\"');\n  return s;\n}\n\nexport async function fetchHtmlWithEncoding(url: string): Promise<string | null> {\n  try {\n    const res = await fetch(url);\n    if (!res.ok) return null;\n\n    const buffer = await res.arrayBuffer();\n\n    const readHead = (enc: string) => new TextDecoder(enc as any, { fatal: false }).decode(buffer.slice(0, Math.min(4096, buffer.byteLength)));\n    const headLatin1 = readHead('iso-8859-1');\n\n    const findCharset = (s: string): string | null => {\n      const m1 = s.match(/<meta[^>]*charset=[\"']?([^\\s\"'>]+)/i);\n      if (m1 && m1[1]) return m1[1].toLowerCase();\n      const m2 = s.match(/<meta[^>]*http-equiv=[\"']content-type[\"'][^>]*content=[\"'][^\"']*charset=([^\"'>\\s]+)/i);\n      if (m2 && m2[1]) return m2[1].toLowerCase();\n      return null;\n    };\n\n    let enc = findCharset(headLatin1);\n    if (enc) {\n      if (enc === 'utf8') enc = 'utf-8';\n      if (enc === 'latin1') enc = 'iso-8859-1';\n    }\n\n    const decode = (encoding: string) => new TextDecoder(encoding as any, { fatal: false }).decode(buffer);\n\n    if (enc) {\n      try {\n        return normalizeWeirdChars(decode(enc));\n      } catch {\n        // fall through to heuristic\n      }\n    }\n\n    const utf8 = decode('utf-8');\n    const hasReplacement = /\\uFFFD/.test(utf8);\n    const hasCp1252Artifacts = /Ã.|â€™|â€œ|â€\\x9d|â€”|â€“/.test(utf8);\n\n    if (hasReplacement || hasCp1252Artifacts) {\n      try {\n        const cp1252 = decode('windows-1252');\n        const countFFFD = (s: string) => (s.match(/\\uFFFD/g) || []).length;\n        const cp1252Norm = normalizeWeirdChars(cp1252);\n        const utf8Norm = normalizeWeirdChars(utf8);\n        if (countFFFD(cp1252Norm) < countFFFD(utf8Norm)) return cp1252Norm;\n        // Try windows-1256 (Arabic locales) as a last resort\n        try {\n          const cp1256 = normalizeWeirdChars(decode('windows-1256'));\n          if (countFFFD(cp1256) < countFFFD(utf8Norm)) return cp1256;\n        } catch {}\n        return utf8Norm;\n      } catch {\n        return normalizeWeirdChars(utf8);\n      }\n    }\n\n    return normalizeWeirdChars(utf8);\n  } catch {\n    return null;\n  }\n}\n","size_bytes":2565},"public/3danimation/src/App-Builder.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useLocation } from 'react-router-dom';\nimport { BuilderComponent, builder } from '@builder.io/react';\nimport { RubiksCubeExperience } from './components/RubiksCubeExperience';\nimport { BuilderPage } from './components/BuilderPage';\nimport './components/BuilderIntegration'; // Register custom components\n\n// Configure Builder.io\nbuilder.init('YOUR_BUILDER_PUBLIC_KEY'); // Replace with your actual key\n\n// Navigation component\nconst Navigation = () => {\n  const location = useLocation();\n  const isExperiencePage = location.pathname === '/experience';\n\n  return (\n    <nav className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${\n      isExperiencePage ? 'bg-black/20 backdrop-blur-sm' : 'bg-white/90 backdrop-blur-sm'\n    }`}>\n      <div className=\"max-w-6xl mx-auto px-4 py-4 flex justify-between items-center\">\n        <Link \n          to=\"/\" \n          className={`text-xl font-bold ${\n            isExperiencePage ? 'text-white' : 'text-gray-900'\n          }`}\n        >\n          Neural Cube\n        </Link>\n        \n        <div className=\"flex space-x-6\">\n          <Link \n            to=\"/\" \n            className={`transition-colors ${\n              isExperiencePage \n                ? 'text-white/80 hover:text-white' \n                : 'text-gray-600 hover:text-gray-900'\n            }`}\n          >\n            Home\n          </Link>\n          <Link \n            to=\"/experience\" \n            className={`transition-colors ${\n              isExperiencePage \n                ? 'text-cyan-400 hover:text-cyan-300' \n                : 'text-blue-600 hover:text-blue-800'\n            }`}\n          >\n            3D Experience\n          </Link>\n          <Link \n            to=\"/about\" \n            className={`transition-colors ${\n              isExperiencePage \n                ? 'text-white/80 hover:text-white' \n                : 'text-gray-600 hover:text-gray-900'\n            }`}\n          >\n            About\n          </Link>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\n// Pure 3D Experience Page\nconst ExperiencePage = () => {\n  return (\n    <div className=\"size-full bg-black min-h-screen\">\n      <RubiksCubeExperience />\n    </div>\n  );\n};\n\n// Builder.io managed pages\nconst BuilderManagedPage = ({ path }: { path: string }) => {\n  const [content, setContent] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    builder\n      .get('page', {\n        url: path,\n        options: {\n          includeRefs: true,\n        },\n      })\n      .promise()\n      .then((content) => {\n        setContent(content);\n        setLoading(false);\n      })\n      .catch(() => {\n        setLoading(false);\n      });\n  }, [path]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-white flex items-center justify-center\">\n        <div className=\"text-gray-600\">Loading...</div>\n      </div>\n    );\n  }\n\n  if (!content) {\n    // Fallback content if Builder.io page not found\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-cyan-100 pt-20\">\n        <div className=\"max-w-4xl mx-auto px-4 py-20 text-center\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-6\">\n            Neural Transformation Experience\n          </h1>\n          <p className=\"text-xl text-gray-600 mb-8\">\n            Experience the evolution from geometric precision to organic intelligence\n          </p>\n          <Link \n            to=\"/experience\"\n            className=\"inline-block px-8 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg font-medium hover:from-cyan-600 hover:to-blue-700 transition-all\"\n          >\n            Start Experience\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"pt-16\">\n      <BuilderComponent model=\"page\" content={content} />\n    </div>\n  );\n};\n\n// Main App with routing\nexport default function App() {\n  return (\n    <Router>\n      <div className=\"min-h-screen\">\n        <Navigation />\n        \n        <Routes>\n          {/* Pure 3D Experience - no Builder.io interference */}\n          <Route path=\"/experience\" element={<ExperiencePage />} />\n          \n          {/* Builder.io managed pages */}\n          <Route path=\"/\" element={<BuilderManagedPage path=\"/\" />} />\n          <Route path=\"/about\" element={<BuilderManagedPage path=\"/about\" />} />\n          <Route path=\"/features\" element={<BuilderManagedPage path=\"/features\" />} />\n          \n          {/* Catch-all for Builder.io dynamic pages */}\n          <Route path=\"*\" element={<BuilderManagedPage path={window.location.pathname} />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}","size_bytes":4742},"public/3danimation/src/App-ThreeFrame.tsx":{"content":"import { Suspense } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { BuilderComponent, builder } from '@builder.io/react';\nimport RubiksCubeExperience from './components/RubiksCubeExperience';\nimport { BuilderRubiksCubeContent } from './components/BuilderRubiksCubeContent';\n\n// Import your Builder.io component registrations\nimport './components/BuilderIntegration';\n\n// Initialize Builder.io with your public API key\nbuilder.init('YOUR_BUILDER_PUBLIC_KEY'); // Replace with your actual key\n\n// React 19 Loading Component\nfunction Loading() {\n  return (\n    <div className=\"flex items-center justify-center size-full bg-black text-cyan-400\">\n      <div className=\"text-center\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-cyan-400 border-t-transparent rounded-full mx-auto mb-4\"></div>\n        <p>Loading 3D Experience...</p>\n      </div>\n    </div>\n  );\n}\n\n// Example Three-Row Layout Component\nfunction ThreeRowLayoutExample() {\n  return (\n    <div className=\"min-h-screen flex flex-col bg-gray-50\">\n      {/* TOP FRAME: Navigation */}\n      <nav className=\"bg-white shadow-sm border-b z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between h-16\">\n            <div className=\"flex items-center\">\n              <h1 className=\"text-xl font-bold text-gray-900\">3D Experience Site</h1>\n            </div>\n            <div className=\"flex items-center space-x-8\">\n              <a href=\"#home\" className=\"text-gray-700 hover:text-gray-900\">Home</a>\n              <a href=\"#about\" className=\"text-gray-700 hover:text-gray-900\">About</a>\n              <a href=\"#experience\" className=\"text-gray-700 hover:text-gray-900\">Experience</a>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      {/* MIDDLE FRAME: Main Content - This is where the sophisticated animation goes */}\n      <main className=\"flex-1 relative bg-black\">\n        <BuilderRubiksCubeContent\n          height=\"100%\"\n          width=\"100%\"\n          showPhaseInfo={true}\n          enableMouseRotation={true}\n          startingPhase={1}\n        />\n      </main>\n\n      {/* BOTTOM FRAME: Footer */}\n      <footer className=\"bg-gray-900 text-white z-50\">\n        <div className=\"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\n            <div>\n              <h3 className=\"text-sm font-semibold uppercase tracking-wider\">Company</h3>\n              <ul className=\"mt-4 space-y-4\">\n                <li><a href=\"#about\" className=\"text-gray-300 hover:text-white\">About</a></li>\n                <li><a href=\"#careers\" className=\"text-gray-300 hover:text-white\">Careers</a></li>\n              </ul>\n            </div>\n            <div>\n              <h3 className=\"text-sm font-semibold uppercase tracking-wider\">Technology</h3>\n              <ul className=\"mt-4 space-y-4\">\n                <li><span className=\"text-gray-300\">React 19 + Three.js 0.172.0</span></li>\n                <li><span className=\"text-gray-300\">4-Octave Noise Brain Formation</span></li>\n                <li><span className=\"text-gray-300\">729 Instanced Cubes</span></li>\n              </ul>\n            </div>\n            <div>\n              <h3 className=\"text-sm font-semibold uppercase tracking-wider\">Features</h3>\n              <ul className=\"mt-4 space-y-4\">\n                <li><span className=\"text-gray-300\">9 Animation Phases</span></li>\n                <li><span className=\"text-gray-300\">Mouse-Controlled Rotation</span></li>\n                <li><span className=\"text-gray-300\">Ultra-Slow Spiral Formation</span></li>\n              </ul>\n            </div>\n            <div>\n              <h3 className=\"text-sm font-semibold uppercase tracking-wider\">Experience</h3>\n              <ul className=\"mt-4 space-y-4\">\n                <li><span className=\"text-gray-300\">Scroll within frame to animate</span></li>\n                <li><span className=\"text-gray-300\">True morphing transformations</span></li>\n                <li><span className=\"text-gray-300\">Neuroanatomically accurate</span></li>\n              </ul>\n            </div>\n          </div>\n          <div className=\"mt-8 border-t border-gray-700 pt-8\">\n            <p className=\"text-center text-gray-400\">\n              © 2024 3D Experience. Powered by Builder.io integration.\n            </p>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\nexport default function App() {\n  return (\n    <Router>\n      <Routes>\n        {/* Builder.io managed pages (your three-row layout) */}\n        <Route \n          path=\"/\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <BuilderComponent model=\"page\" />\n            </Suspense>\n          } \n        />\n        <Route \n          path=\"/about\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <BuilderComponent model=\"page\" />\n            </Suspense>\n          } \n        />\n        <Route \n          path=\"/features\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <BuilderComponent model=\"page\" />\n            </Suspense>\n          } \n        />\n        \n        {/* Pure 3D experience page (your original sophisticated setup) */}\n        <Route \n          path=\"/experience\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <div className=\"size-full bg-black\">\n                <RubiksCubeExperience />\n              </div>\n            </Suspense>\n          } \n        />\n        \n        {/* Demo three-row layout */}\n        <Route \n          path=\"/demo\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <ThreeRowLayoutExample />\n            </Suspense>\n          } \n        />\n        \n        {/* Catch-all for Builder.io pages */}\n        <Route \n          path=\"*\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <BuilderComponent model=\"page\" />\n            </Suspense>\n          } \n        />\n      </Routes>\n    </Router>\n  );\n}","size_bytes":6107},"public/3danimation/src/App-final.tsx":{"content":"import { Suspense } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { BuilderComponent, builder } from '@builder.io/react';\nimport { RubiksCubeExperience } from './components/RubiksCubeExperience';\n\n// Import your Builder.io component registrations\nimport './components/BuilderIntegration';\n\n// Initialize Builder.io with your public API key\nbuilder.init('YOUR_BUILDER_PUBLIC_KEY'); // Replace with your actual key\n\n// React 19 Loading Component\nfunction Loading() {\n  return (\n    <div className=\"flex items-center justify-center size-full bg-black text-cyan-400\">\n      <div className=\"text-center\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-cyan-400 border-t-transparent rounded-full mx-auto mb-4\"></div>\n        <p>Loading 3D Experience...</p>\n      </div>\n    </div>\n  );\n}\n\nexport default function App() {\n  return (\n    <Router>\n      <Routes>\n        {/* Builder.io managed pages (your three-row layout) */}\n        <Route \n          path=\"/\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <BuilderComponent model=\"page\" />\n            </Suspense>\n          } \n        />\n        <Route \n          path=\"/about\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <BuilderComponent model=\"page\" />\n            </Suspense>\n          } \n        />\n        <Route \n          path=\"/features\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <BuilderComponent model=\"page\" />\n            </Suspense>\n          } \n        />\n        \n        {/* Pure 3D experience page (your current setup) */}\n        <Route \n          path=\"/experience\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <div className=\"size-full bg-black\">\n                <RubiksCubeExperience />\n              </div>\n            </Suspense>\n          } \n        />\n        \n        {/* Catch-all for Builder.io pages */}\n        <Route \n          path=\"*\" \n          element={\n            <Suspense fallback={<Loading />}>\n              <BuilderComponent model=\"page\" />\n            </Suspense>\n          } \n        />\n      </Routes>\n    </Router>\n  );\n}","size_bytes":2223},"public/3danimation/src/App.tsx":{"content":"import React from \"react\";\nimport RubiksCubeExperience from \"./components/RubiksCubeExperienceProper\";\nimport \"./styles/globals.css\";\n\nexport default function App() {\n  return (\n    <div className=\"bg-black\" style={{ height: '1140vh' }}>\n      {/* Fixed 3D Canvas that stays in viewport */}\n      <div className=\"fixed inset-0 z-0\">\n        <RubiksCubeExperience />\n      </div>\n      \n      {/* Scrollable content to trigger complex 10-phase animation - 1140vh total (added 100vh for new Phase 6) */}\n      <div className=\"relative z-10 pointer-events-none\">\n        {/* Phase 1: Group Rotate (0-2.01%) */}\n        <div className=\"h-[21vh] flex items-center justify-center\">\n          <div className=\"text-center text-white pointer-events-auto\">\n            <h1 className=\"text-4xl font-bold mb-4 text-cyan-400\">Ultra-Sophisticated Rubik's Cube</h1>\n            <p className=\"text-xl text-cyan-300 mb-8\">React 19 + Three.js 0.172.0 + 4-Octave Noise</p>\n            <div className=\"text-lg opacity-80 mb-4\">\n              Phase 1: Mouse-Controlled Group Rotation (0-2.01%)\n            </div>\n            <div className=\"text-sm opacity-60\">\n              Move mouse to rotate the 1.5x sized unified cube • 27 pieces as one object\n            </div>\n          </div>\n        </div>\n\n        {/* Phase 2: First Dismantle (2.01-12.06%) */}\n        <div className=\"h-[105vh] flex items-center justify-center\">\n          <div className=\"text-center text-white pointer-events-auto\">\n            <h2 className=\"text-3xl font-bold mb-4 text-orange-400\">Phase 2: First Dismantle (2.01-12.06%)</h2>\n            <p className=\"text-lg opacity-80 mb-2\">27 large pieces explode into dramatic cloud</p>\n            <p className=\"text-sm opacity-60 mb-2\">Screen-adaptive spread with 5% padding • Fills 90% of visible area</p>\n            <div className=\"text-xs opacity-40\">\n              Butter-smooth easing • Dynamic spread calculation\n            </div>\n          </div>\n        </div>\n\n        {/* Phase 3: Settle with Perspective (12.06-14.48%) */}\n        <div className=\"h-[25vh] flex items-center justify-center\">\n          <div className=\"text-center text-white pointer-events-auto\">\n            <h2 className=\"text-3xl font-bold mb-4 text-yellow-400\">Phase 3: Settle with Perspective (12.06-14.48%)</h2>\n            <p className=\"text-lg opacity-80 mb-2\">Large pieces hold dramatic positions</p>\n            <p className=\"text-sm opacity-60\">Perspective scaling: Bottom large (1.0) → Top small (0.25)</p>\n          </div>\n        </div>\n\n        {/* Phase 4: CANCELLED - Time redistributed */}\n        <div className=\"h-0\"></div>\n\n        {/* Phase 5: Rubik's Cube Transform (14.48-26.32%) */}\n        <div className=\"h-[118vh] flex items-center justify-center\">\n          <div className=\"text-center text-white pointer-events-auto\">\n            <h2 className=\"text-3xl font-bold mb-4 text-green-400\">Phase 5: Rubik's Cube Transform (14.48-26.32%)</h2>\n            <p className=\"text-lg opacity-80 mb-2\">Each of 27 pieces becomes its own Rubik's cube</p>\n            <p className=\"text-sm opacity-60 mb-2\">27 individual 3×3×3 formations appearing</p>\n            <div className=\"text-xs opacity-40\">\n              Original pieces fade as mini-Rubik's cubes appear\n            </div>\n          </div>\n        </div>\n\n        {/* Phase 6: NEW - Rubik's Cube Showcase (26.32-35.09%) */}\n        <div className=\"h-[100vh] flex items-center justify-center\">\n          <div className=\"text-center text-white pointer-events-auto\">\n            <h2 className=\"text-3xl font-bold mb-4 text-emerald-400\">✨ Phase 6: Rubik's Cube Showcase (26.32-35.09%)</h2>\n            <p className=\"text-lg opacity-80 mb-2\">FULL DISPLAY: 27 perfect Rubik's cubes with crystal-clear white edges</p>\n            <p className=\"text-sm opacity-60 mb-2\">Complete visibility • Individual rotations • Perfect contrast</p>\n            <div className=\"text-xs opacity-40 mb-2\">\n              Dedicated showcase phase • Breathing animations • Living movement\n            </div>\n            <div className=\"text-xs text-emerald-300\">\n              🎯 NEW PHASE: Full appreciation of 27 mini-Rubik's cubes\n            </div>\n          </div>\n        </div>\n\n        {/* Phase 7: Second Dismantle (35.09-43.86%) */}\n        <div className=\"h-[100vh] flex items-center justify-center\">\n          <div className=\"text-center text-white pointer-events-auto\">\n            <h2 className=\"text-3xl font-bold mb-4 text-blue-400\">Phase 7: Second Dismantle (35.09-43.86%)</h2>\n            <p className=\"text-lg opacity-80 mb-2\">27 Rubik's cubes → 729 pieces</p>\n            <p className=\"text-sm opacity-60 mb-2\">Each 3×3×3 splits into 27 pieces • Fixed constraints</p>\n            <div className=\"text-xs opacity-40\">\n              Instanced rendering for 729 pieces • White contrasting edges\n            </div>\n          </div>\n        </div>\n\n        {/* Phase 8: Independent Rotation (43.86-52.63%) */}\n        <div className=\"h-[100vh] flex items-center justify-center\">\n          <div className=\"text-center text-white pointer-events-auto\">\n            <h2 className=\"text-3xl font-bold mb-4 text-indigo-400\">Phase 8: Independent Rotation (43.86-52.63%)</h2>\n            <p className=\"text-lg opacity-80 mb-2\">729 pieces with living movement</p>\n            <p className=\"text-sm opacity-60 mb-2\">Continuous hovering • Individual rotation axes • All visible</p>\n            <div className=\"text-xs opacity-40\">\n              Gentle hovering motion • Unique rotation speeds per piece\n            </div>\n          </div>\n        </div>\n\n        {/* Phase 9: Neuromorphic Brain Transform (52.63-70.18%) */}\n        <div className=\"h-[200vh] flex items-center justify-center\">\n          <div className=\"text-center text-white pointer-events-auto\">\n            <h2 className=\"text-3xl font-bold mb-4 text-purple-400\">Phase 9: Neuromorphic Brain Transform (52.63-70.18%)</h2>\n            <p className=\"text-lg opacity-80 mb-2\">ULTRA-ENHANCED: Cubes morph into neuromorphic brain tissue</p>\n            <p className=\"text-sm opacity-60 mb-2\">Wave-based transformation • 100 cubes simultaneously • 16×16 sphere resolution</p>\n            <div className=\"text-xs opacity-40 mb-2\">\n              FIXED: Pink brain material with WHITE edges for contrast\n            </div>\n            <div className=\"text-xs text-pink-300 mb-2\">\n              4-octave noise cortical folding • Anatomically accurate regions\n            </div>\n            <div className=\"text-xs text-purple-300\">\n              ✨ React 19 + Three.js 0.172.0 neuromorphic enhancements\n            </div>\n          </div>\n        </div>\n\n        {/* Phase 10: Ultra-Realistic Brain Formation (70.18-100%) - EXTENDED RANGE */}\n        <div className=\"h-[340vh] flex items-center justify-center\">\n          <div className=\"text-center text-white pointer-events-auto\">\n            <h2 className=\"text-3xl font-bold mb-4 text-pink-400\">Phase 10: Ultra-Realistic Brain Formation (70.18-100%)</h2>\n            <p className=\"text-lg opacity-80 mb-2\">Ultra-slow spiral → Mouse-rotatable ULTRA-REALISTIC brain</p>\n            <p className=\"text-sm opacity-60 mb-2\">ENHANCED: Thousands of equal-sized brain pieces • No perspective scaling</p>\n            <div className=\"text-xs opacity-40 mb-2\">\n              Enhanced 4-octave noise folding • Region-specific cortical complexity\n            </div>\n            <div className=\"text-xs text-pink-300 mb-2\">\n              Frontal lobe prominence • Enhanced cerebellum foliation • Brain stem narrowing\n            </div>\n            <div className=\"text-xs text-cyan-300 mb-2\">\n              ULTRA-SLOW VISIBLE SPIRAL: Full 2π rotation over extended range\n            </div>\n            <div className=\"text-xs text-emerald-300\">\n              🚀 ENHANCED: 3000+ equal-sized brain pieces for ultra-realistic detail\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":7998},"public/3danimation/src/Attributions.md":{"content":"This Figma Make file includes components from [shadcn/ui](https://ui.shadcn.com/) used under [MIT license](https://github.com/shadcn-ui/ui/blob/main/LICENSE.md).\n\nThis Figma Make file includes photos from [Unsplash](https://unsplash.com) used under [license](https://unsplash.com/license).","size_bytes":289},"public/3danimation/src/Enhanced-Features-Summary.md":{"content":"# 🚀 Enhanced 3D Features with React 19 + Three.js 0.172.0\n\n## **Solved Problems with Latest Upgrades:**\n\n### **1. 🧠 BRAIN REALISM - MAJOR ENHANCEMENT**\n\n#### **Before:** Simple noise-based brain shape\n#### **After:** Neuroanatomically accurate brain with multi-octave detailing\n\n```tsx\n// Three.js 0.172.0: Multi-octave noise for REALISTIC brain texture\nconst primaryNoise = noise3D(x * noiseScale, y * noiseScale, z * noiseScale) * 4;     // Cortical folding\nconst secondaryNoise = noise3D(x * noiseScale * 2, y * noiseScale * 2, z * noiseScale * 2) * 2;  // Smaller ridges  \nconst tertiaryNoise = noise3D(x * noiseScale * 4, y * noiseScale * 4, z * noiseScale * 4) * 1;   // Micro-folds\nconst neuralNoise = noise3D(x * noiseScale * 6, y * noiseScale * 6, z * noiseScale * 6) * 0.5;   // Neural pathways\n\n// Region-specific folding patterns\nif (z > brainDepth * 0.2) regionFoldingMultiplier = 1.4;        // Frontal cortex: complex folding\nelse if (Math.abs(x) > brainWidth * 0.3) regionFoldingMultiplier = 1.2;  // Temporal: deeper sulci\nelse if (y < -brainHeight * 0.1) regionFoldingMultiplier = 0.8;          // Cerebellum: fine texture\n```\n\n**✅ Results:**\n- **Realistic cortical folding** (gyri and sulci)\n- **Anatomically correct brain regions** (frontal, parietal, temporal, occipital, cerebellum)\n- **Neural pathway complexity** with 4-octave noise\n- **Regional texture variation** for different brain areas\n\n---\n\n### **2. ⚡ EDGE DEFINITION - CRYSTAL CLEAR**\n\n#### **Before:** Basic wireframe edges\n#### **After:** Three.js 0.172.0 enhanced edge geometry with higher thresholds\n\n```tsx\n// Enhanced edge geometry with better definition\nconst edgeGeo = new THREE.EdgesGeometry(boxGeo, 40); // Higher threshold for cleaner edges\n\n// Enhanced edge material with better visibility\nconst edgeMaterial = new THREE.LineBasicMaterial({\n  color: \"#ffffff\",\n  linewidth: 8,        // Thicker lines for better visibility\n  transparent: false,\n  opacity: 1,\n  depthWrite: true,    // Better depth handling\n  depthTest: true,\n});\n```\n\n**✅ Results:**\n- **Sharper edge definition** with higher geometry thresholds\n- **Thicker white edges** (8px vs 6px) for maximum contrast against blue cubes\n- **Better depth testing** for proper edge rendering in 3D space\n- **No transparency issues** - fully opaque edges\n\n---\n\n### **3. 🌊 SMOOTHER MORPHING - REACT 19 POWER**\n\n#### **Before:** Standard morphing transitions\n#### **After:** React 19 useOptimistic + enhanced concurrent rendering\n\n```tsx\n// React 19: useOptimistic for instant visual feedback during morphing\nconst [optimisticProgress, setOptimisticProgress] = useOptimistic(\n  scrollProgress,\n  (state, newProgress) => newProgress\n);\n\n// React 19 Enhanced Performance Monitoring\nconst { isPending, startTransition } = useEnhancedPerformance();\n\n// Update optimistic state for instant feedback\nconst updateAnimationState = (newState: Partial<AnimationState>) => {\n  startTransition(() => {\n    setOptimisticState(newState);\n  });\n};\n```\n\n**✅ Results:**\n- **Instant visual feedback** during scroll-based morphing\n- **React Compiler automatic optimization** of 3D calculations\n- **Enhanced concurrent scheduling** for 60fps performance\n- **Predictive UI updates** before animation completion\n\n---\n\n### **4. 🎮 ENHANCED INSTANCING - BETTER PERFORMANCE**\n\n#### **Before:** Basic instanced rendering\n#### **After:** Three.js 0.172.0 optimized instancing with pre-computed geometry\n\n```tsx\n// Three.js 0.172.0: Enhanced geometries with better instancing\nconst cubeGeo = useMemo(() => {\n  const geo = new THREE.BoxGeometry(2.1, 2.1, 2.1);\n  geo.computeBoundingBox();     // Pre-compute for better performance\n  geo.computeBoundingSphere();\n  return geo;\n}, []);\n\n// Enhanced brain sphere geometry with more detail\nconst sphereGeo = useMemo(() => {\n  const geo = new THREE.SphereGeometry(2.1 * 0.7, 16, 16); // Higher detail (12->16)\n  geo.computeBoundingBox();\n  geo.computeBoundingSphere();\n  return geo;\n}, []);\n```\n\n**✅ Results:**\n- **Better memory management** with pre-computed bounding volumes\n- **Higher detail brain spheres** (16x16 vs 12x12 segments)\n- **Optimized render pipeline** for 729 pieces\n- **Reduced GPU overhead** with enhanced instancing\n\n---\n\n### **5. 🎨 DYNAMIC BRAIN MATERIALS**\n\n#### **Before:** Static brain material\n#### **After:** Enhanced materials with neural activity and dynamic properties\n\n```tsx\n// Enhanced brain material with dynamic neural activity\nconst brainMat = useMemo(() => {\n  const material = new THREE.MeshStandardMaterial({\n    color: \"#ff4488\",\n    emissive: \"#ff2266\", \n    emissiveIntensity: 0.6,\n    metalness: 0.2,        // Less metallic for organic feel\n    roughness: 0.4,        // More rough for brain texture\n    transparent: true,\n    opacity: 1,\n  });\n  \n  // Three.js 0.172.0: Enhanced material properties\n  material.envMapIntensity = 0.8;\n  material.normalScale = new THREE.Vector2(1.5, 1.5);\n  \n  return material;\n}, []);\n```\n\n**✅ Results:**\n- **More organic brain texture** with higher roughness\n- **Enhanced environmental reflections** with envMapIntensity\n- **Better normal mapping** for surface detail\n- **Regional color variation** by brain area\n\n---\n\n## **🎯 Performance Improvements:**\n\n### **React 19 Benefits:**\n- **React Compiler**: Automatic optimization of 3D components\n- **Enhanced Concurrent Features**: Better 60fps scheduling\n- **useOptimistic**: Instant visual feedback\n- **useTransition**: Non-blocking state updates\n\n### **Three.js 0.172.0 Benefits:**\n- **Enhanced Instancing**: Better memory management for 729 pieces\n- **Improved Geometry Processing**: Pre-computed bounding volumes\n- **Better Edge Rendering**: Higher threshold edge detection\n- **Advanced Material System**: Enhanced environmental mapping\n\n### **React Three Fiber 8.18.2 Benefits:**\n- **React 19 Integration**: Full compatibility with new features\n- **Better Suspense**: Smoother 3D asset loading\n- **Enhanced Cleanup**: Less memory leaks during transitions\n- **Concurrent Rendering**: Better frame scheduling\n\n---\n\n## **🧠 Brain Enhancement Comparison:**\n\n| Feature | Before | After (Enhanced) |\n|---------|--------|------------------|\n| **Surface Texture** | Single noise layer | 4-octave multi-layer noise |\n| **Folding Patterns** | Uniform | Region-specific (frontal 1.4x, temporal 1.2x) |\n| **Neural Detail** | Basic | Neural pathway complexity |\n| **Anatomical Accuracy** | Simple ellipsoid | Neuroanatomically correct regions |\n| **Visual Realism** | ⭐⭐ | ⭐⭐⭐⭐⭐ |\n\n## **⚡ Edge Enhancement Comparison:**\n\n| Feature | Before | After (Enhanced) |\n|---------|--------|------------------|\n| **Edge Threshold** | Default (15) | High precision (40) |\n| **Line Width** | 6px | 8px (33% thicker) |\n| **Depth Testing** | Basic | Enhanced (depthWrite + depthTest) |\n| **Color Contrast** | Standard white | Maximum contrast white |\n| **Visual Clarity** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |\n\n## **🌊 Morphing Enhancement Comparison:**\n\n| Feature | Before | After (Enhanced) |\n|---------|--------|------------------|\n| **Visual Feedback** | Delayed | Instant (useOptimistic) |\n| **Frame Scheduling** | Standard | Enhanced concurrent |\n| **Optimization** | Manual useMemo | Automatic (React Compiler) |\n| **Transition Smoothness** | Good | Exceptional |\n| **Performance** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |\n\n---\n\n## **🎮 Next Level Features Unlocked:**\n\n1. **Neuroanatomically Accurate Brain** with region-specific textures\n2. **Crystal Clear Edges** with enhanced Three.js rendering\n3. **Butter-Smooth Morphing** with React 19 optimizations\n4. **60fps Guaranteed Performance** with concurrent features\n5. **Automatic Code Optimization** via React Compiler\n6. **Enhanced 3D Materials** with dynamic properties\n7. **Professional-Grade Instancing** for complex animations\n\nYour Rubik's cube to brain transformation now leverages the absolute latest in web 3D technology! 🚀","size_bytes":7895},"public/3danimation/src/RUBIKS_CUBE_ANIMATION_SPECIFICATION.md":{"content":"# RUBIK'S CUBE 3D INTERACTIVE ANIMATION - ULTRA-DETAILED SPECIFICATION\n\n## 🎯 CORE VISION\nA sophisticated 3D Rubik's cube that transforms through 10 precise scroll-triggered phases, from a unified rotating cube to 729 mini-cubes that become brains merging into one large brain. Each phase must be directly scroll-responsive with smooth 60fps performance and DRAMATIC visual impact.\n\n## 🚨 CRITICAL PROBLEM DIAGNOSIS\n**CURRENT ISSUE**: Animation is broken because spread values have been over-constrained:\n- Current code uses: `maxSpreadX = 35, maxSpreadY = 20, maxSpreadZ = 25` \n- This creates minimal spreading instead of dramatic explosion\n- **SOLUTION**: Restore original dramatic spreading with proper screen adaptation\n\n## 🎨 VISUAL REQUIREMENTS\n- **Cube Color**: Fluorescent neon blue (#00ffff) with emissive glow\n- **Edges**: White contrasting wireframe edges (#ffffff) for distinctness\n- **Scene**: Dark atmospheric theme with multiple colored lights\n- **Performance**: Smooth 60fps, no jerky animations\n- **Responsiveness**: Direct scroll synchronization without excessive smoothing/lerping\n- **Screen Bounds**: Effects adapt to screen size while maintaining dramatic spread\n\n## 📐 TECHNICAL FOUNDATION\n- **Original Cube Size**: 8.55 units per cube piece\n- **Cube Spacing**: 9.9 units (creates tight 3x3x3 formation)  \n- **Camera Distance**: 50 units from origin\n- **Total Scroll Height**: 500vh (5x viewport height)\n- **Phase Transitions**: Immediate, scroll-driven (no smoothing delays)\n- **Viewport Detection**: Use `window.innerWidth` and `window.innerHeight` for screen adaptation\n- **Z-Distance Scaling**: Objects further from camera appear smaller naturally\n\n---\n\n## 🎬 PHASE-BY-PHASE DETAILED SPECIFICATION\n\n### PHASE 1: GROUP ROTATE (0% - 20% scroll)\n**Duration**: 100vh of scroll\n**State**: Single unified massive cube\n\n**Behavior**:\n- **Mouse Control**: ACTIVE - full 360° rotation on both X and Y axes\n- **Rotation Strength**: 1.0 (full sensitivity)\n- **Cube State**: All 27 pieces stay in original grid positions\n  - Position: [x * 9.9, y * 9.9, z * 9.9] where x,y,z = -1,0,1\n- **Visual Effect**: Massive cohesive cube rotating as one unit\n- **Lighting**: Full atmospheric lighting reveals cube details\n\n**Technical Notes**:\n- Group rotation applied to parent group, not individual cubes\n- Individual cube positions remain unchanged\n- Smooth mouse tracking with immediate response\n\n---\n\n### PHASE 2: FIRST DISMANTLE (20% - 35% scroll)  \n**Duration**: 75vh of scroll (15% of total)\n**State**: 27 individual cubes spreading apart DRAMATICALLY across entire screen\n\n## 🚨 EXACT IMPLEMENTATION FOR DRAMATIC SPREAD\n\n### **SCREEN ADAPTATION FORMULAS**:\n```javascript\n// Dynamic screen-based spread calculation\nconst viewportWidth = window.innerWidth;\nconst viewportHeight = window.innerHeight;\nconst aspectRatio = viewportWidth / viewportHeight;\n\n// Calculate field of view coverage at camera distance (50 units)\nconst fov = 75; // degrees\nconst fovRad = (fov * Math.PI) / 180;\nconst screenWidth3D = 2 * Math.tan(fovRad / 2) * 50; // ~63 units\nconst screenHeight3D = screenWidth3D / aspectRatio; // ~35 units for 16:9\n\n// Dramatic spread ranges (USE THESE VALUES)\nconst maxSpreadX = screenWidth3D * 0.8; // ~50 units (80% of screen width)\nconst maxSpreadY = screenHeight3D * 0.8; // ~28 units (80% of screen height)  \nconst maxSpreadZ = 60; // Deep Z spread for 3D effect\n```\n\n### **BASESPREAD GENERATION** (Run once during cube creation):\n```javascript\n// Generate dramatic baseSpread for each cube (PRESERVE THESE VALUES)\nbaseSpread: [\n  (Math.random() - 0.5) * 2,  // -1 to +1 normalized range\n  (Math.random() - 0.5) * 2,  // -1 to +1 normalized range\n  (Math.random() - 0.5) * 2   // -1 to +1 normalized range\n]\n```\n\n### **POSITION CALCULATION** (Run every frame during Phase 2):\n```javascript\nconst dismantleProgress = (scrollProgress - 0.20) / 0.15; // 0 to 1\n\n// CRITICAL: Apply full dramatic spread\nposition = [\n  cubeData.position[0] + cubeData.baseSpread[0] * dismantleProgress * maxSpreadX,\n  cubeData.position[1] + cubeData.baseSpread[1] * dismantleProgress * maxSpreadY,\n  cubeData.position[2] + cubeData.baseSpread[2] * dismantleProgress * maxSpreadZ\n];\n```\n\n### **VISUAL BEHAVIOR**:\n- **Mouse Control**: DISABLED - group rotation locked at [0,0,0]\n- **Animation**: Cubes fly from tight formation to dramatic spread positions\n- **Scale**: All cubes maintain original size (scale = 1.0) \n[USER: INCORRECT, IMPLEMENT A PERSPECTIVE EFFECT AS EXPLAINED IN LATER SECTIONS. HAVING THIS STATEMENT AT START RISKS AN AI READING INITIAL PART AND ASSUMING THERE IS NO SCALING]\n- **Screen Coverage**: Cubes spread across 80% of visible screen area\n- **3D Depth**: Full Z-axis spread for dramatic 3D effect\n\n### **EXPECTED VISUAL RESULT**: \n- Cubes explode outward from center in all directions\n- Some cubes fly to screen edges, others stay near center  \n- Full 3D depth variation with cubes at different Z distances [MAKE SURE THIS IS ACHIEVED IN THE MANNER I EXPLAINED FOR PERSPECTIVE EFFECT]\n- Dramatic \"explosion\" effect that fills most of the screen\n- No cube clustering - each has unique random position\n- Smooth transition from tight formation to wide spread over 15% scroll\n\n---\n\n### PHASE 3: SETTLE PAUSE (35% - 45% scroll)\n**Duration**: 50vh of scroll (10% of total)\n**State**: 27 cubes hold spread positions with perspective scaling [THIS IS NOT A SUDDEN STATE, THE SCALING STARTS FROM DISMANTLINGTILL ENDS IN THIS STATE]\n\n## 🎯 EXACT IMPLEMENTATION FOR PERSPECTIVE SCALING\n\n### **POSITION LOCKING** (Use final positions from Phase 2):\n```javascript\n// CRITICAL: Maintain dramatic spread positions from Phase 2\nconst maxSpreadX = screenWidth3D * 0.8;  // Same values as Phase 2\nconst maxSpreadY = screenHeight3D * 0.8;\nconst maxSpreadZ = 60;\n\n// Lock positions at full spread\nposition = [\n  cubeData.position[0] + cubeData.baseSpread[0] * maxSpreadX,\n  cubeData.position[1] + cubeData.baseSpread[1] * maxSpreadY,\n  cubeData.position[2] + cubeData.baseSpread[2] * maxSpreadZ\n];\n```\n\n### **PERSPECTIVE SCALING FORMULA**:\n```javascript\n// Create 2D plane illusion with perspective scaling\nconst minY = -maxSpreadY; // Bottom of spread area\nconst maxY = maxSpreadY;  // Top of spread area\n\n// Normalize Y position to 0-1 range\nconst normalizedY = (position[1] - minY) / (maxY - minY);\n\n// Apply perspective scaling: bottom = large, top = small\nconst scale = 1.0 - (normalizedY * 0.75); // 1.0 to 0.25 range\nconst clampedScale = Math.max(0.25, Math.min(1.0, scale));\n\n// Apply scale to cube\ngroupRef.current.scale.setScalar(clampedScale);\n```\n\n### **VISUAL BEHAVIOR**:\n- **Position**: LOCKED at dramatic spread positions (NO MOVEMENT)\n- **Scale Animation**: Gradual size changes based on Y position\n- **Bottom Cubes**: Scale = 1.0 (full size, appear close) [ THE MOST BOTTOM IS 1.0, A SLIGHTLY LESS AT BOTTOM SHOULD BE SLIGHTLY LESS IN SCALE, THIS IS A GRADIENT SCALINE]\n- **Top Cubes**: Scale = 0.25 (quarter size, appear distant)\n- **Middle Cubes**: Scale = 0.625 (intermediate scaling)\n\n### **EXPECTED VISUAL RESULT**:\n- All cubes maintain their dramatic spread positions from Phase 2\n- Cubes at bottom of screen appear large (scale 1.0)\n- Cubes at top of screen appear small (scale 0.25)  \n- Creates convincing 2D plane perspective illusion\n- Smooth size transitions create depth perception\n- Foundation set for upcoming rotation and transformation phases\n\n---\n\n### PHASE 4: PER-CUBE ROTATE (45% - 55% scroll)\n**Duration**: 50vh of scroll (10% of total) \n**State**: 27 cubes rotating independently while maintaining spread positions\n\n## 🌪️ EXACT IMPLEMENTATION FOR INDIVIDUAL ROTATIONS\n\n### **ROTATION DATA GENERATION** (Initialize once per cube):\n```javascript\n// Generate unique rotation properties for each cube\nconst cubeRotationData = {\n  rotationSpeed: (Math.random() * 0.015) + 0.005, // 0.005 to 0.02 rad/frame\n  rotationAxis: new THREE.Vector3(\n    Math.random() - 0.5,  // -0.5 to 0.5\n    Math.random() - 0.5,  // -0.5 to 0.5  \n    Math.random() - 0.5   // -0.5 to 0.5\n  ).normalize(), // Normalize to unit vector\n  accumulatedRotation: new THREE.Euler(0, 0, 0)\n};\n```\n\n### **ROTATION CALCULATION** (Run every frame during Phase 4):\n```javascript\nconst phaseProgress = (scrollProgress - 0.45) / 0.10; // 0 to 1 over Phase 4\n\nif (scrollProgress >= 0.45 && scrollProgress < 0.55) {\n  // Calculate rotation amount for this frame\n  const rotationAmount = cubeRotationData.rotationSpeed * phaseProgress;\n  \n  // Apply rotation around the random axis\n  const rotationMatrix = new THREE.Matrix4().makeRotationAxis(\n    cubeRotationData.rotationAxis, \n    rotationAmount\n  );\n  \n  // Accumulate rotation\n  cubeRotationData.accumulatedRotation.x += cubeRotationData.rotationAxis.x * rotationAmount;\n  cubeRotationData.accumulatedRotation.y += cubeRotationData.rotationAxis.y * rotationAmount;\n  cubeRotationData.accumulatedRotation.z += cubeRotationData.rotationAxis.z * rotationAmount;\n  \n  // Apply to cube\n  groupRef.current.rotation.copy(cubeRotationData.accumulatedRotation);\n}\n```\n\n### **POSITION & SCALE MAINTENANCE**:\n```javascript\n// CRITICAL: Keep all Phase 3 positioning and scaling\nposition = [/* Same as Phase 3 - LOCKED */];\nscale = /* Same as Phase 3 - perspective scaling maintained */;\n\n// Apply position and scale (unchanged from Phase 3)\ngroupRef.current.position.set(...position);\ngroupRef.current.scale.setScalar(scale);\n```\n\n### **VISUAL BEHAVIOR**:\n- **Position**: ABSOLUTELY LOCKED (no movement from Phase 3)\n- **Scale**: MAINTAINED perspective scaling from Phase 3\n- **Rotation**: NEW - Each cube spins around its own random axis\n- **Rotation Speed**: Varies per cube (0.005 to 0.02 rad/frame)\n- **Rotation Axis**: Random per cube, normalized to unit vector\n- **Accumulation**: Rotation builds up over time during phase\n\n### **EXPECTED VISUAL RESULT**:\n- 27 cubes maintain their dramatic spread positions\n- Each cube maintains its perspective scale (large at bottom, small at top)\n- Each cube begins spinning around its own unique axis\n- Different rotation speeds create varied spinning effects\n- Creates mesmerizing field of independently rotating cubes\n- Builds visual complexity while maintaining spatial distribution\n- Sets stage for mini-cube transformation in Phase 5\n\n---\n\n### PHASE 5: MINI-CUBE TRANSFORM (55% - 65% scroll)\n**Duration**: 50vh of scroll (10% of total)\n**State**: Each cube splits into 27 mini-cubes = 729 total pieces\n\n## 🧊 EXACT IMPLEMENTATION FOR 27→729 TRANSFORMATION\n\n### **MINI-CUBE DATA STRUCTURE**:\n```javascript\ninterface MiniCubeData {\n  id: string;\n  parentCubeIndex: number;\n  localPosition: [number, number, number]; // Position relative to parent\n  miniBaseSpread: [number, number, number]; // For additional spreading\n  size: number; // 2.85 units (1/3 of original 8.55)\n}\n```\n\n### **MINI-CUBE GENERATION** (Initialize once during Phase 5 start):\n```javascript\nconst miniCubes: MiniCubeData[] = [];\nlet miniCubeId = 0;\n\n// For each of the original 27 cubes\noriginalCubes.forEach((parentCube, parentIndex) => {\n  // Generate 27 mini-cubes per parent (3x3x3 formation)\n  for (let x = -1; x <= 1; x++) {\n    for (let y = -1; y <= 1; y++) {\n      for (let z = -1; z <= 1; z++) {\n        miniCubes.push({\n          id: `mini_${parentIndex}_${x}_${y}_${z}`,\n          parentCubeIndex: parentIndex,\n          localPosition: [x * 2.85, y * 2.85, z * 2.85], // 2.85 = 8.55/3\n          miniBaseSpread: [\n            (Math.random() - 0.5) * 2, // -1 to +1 for additional spread\n            (Math.random() - 0.5) * 2,\n            (Math.random() - 0.5) * 2\n          ],\n          size: 2.85\n        });\n        miniCubeId++;\n      }\n    }\n  }\n});\n```\n\n### **MINI-CUBE POSITION CALCULATION**:\n```javascript\nconst transformProgress = (scrollProgress - 0.55) / 0.10; // 0 to 1 over Phase 5\n\nminiCubes.forEach((miniCube) => {\n  const parentCube = originalCubes[miniCube.parentCubeIndex];\n  \n  // Get parent cube's final position from Phase 4\n  const parentPosition = [\n    parentCube.position[0] + parentCube.baseSpread[0] * maxSpreadX,\n    parentCube.position[1] + parentCube.baseSpread[1] * maxSpreadY,\n    parentCube.position[2] + parentCube.baseSpread[2] * maxSpreadZ\n  ];\n  \n  // Calculate mini-cube spread from parent position\n  const miniSpreadRange = 15; // Additional spread range for mini-cubes\n  \n  const finalPosition = [\n    parentPosition[0] + miniCube.localPosition[0] + \n    (miniCube.miniBaseSpread[0] * miniSpreadRange * transformProgress),\n    \n    parentPosition[1] + miniCube.localPosition[1] + \n    (miniCube.miniBaseSpread[1] * miniSpreadRange * transformProgress),\n    \n    parentPosition[2] + miniCube.localPosition[2] + \n    (miniCube.miniBaseSpread[2] * miniSpreadRange * transformProgress)\n  ];\n  \n  // Inherit perspective scaling from parent cube\n  const normalizedY = (finalPosition[1] - (-maxSpreadY)) / (2 * maxSpreadY);\n  const perspectiveScale = 1.0 - (normalizedY * 0.75);\n  const parentScale = Math.max(0.25, Math.min(1.0, perspectiveScale));\n  \n  // Mini-cube is 1/3 size of parent + perspective scaling\n  const miniScale = (1/3) * parentScale;\n  \n  return {\n    position: finalPosition,\n    scale: miniScale\n  };\n});\n```\n\n### **VISUAL BEHAVIOR**:\n- **Transformation**: Original 27 cubes disappear, 729 mini-cubes appear\n- **Initial Position**: Mini-cubes start at parent cube positions in 3x3x3 formations\n- **Spreading**: Mini-cubes spread outward from parent positions\n- **Size**: Each mini-cube is 1/3 the size of original cubes (2.85 units)\n[MATHEMATICALLY INCORRECT SINCE THE CUBES HAVE VARYING SIZES]\n- **Perspective**: Mini-cubes inherit perspective scaling from parent positions\n- **Distribution**: 729 pieces spread across 95% of screen area\n\n### **EXPECTED VISUAL RESULT**:\n- Dramatic transformation from 27 large cubes to 729 tiny cubes\n[USER: THE 27 ARE NOT LARGE, THEY ARE SMALLER THAN THE FIRST CUBE AND LARGER THAN THE SMALLER CUBES]\n- Each group of 27 mini-cubes originates from a parent cube position\n- Mini-cubes spread outward creating incredible detail density\n- Perspective scaling maintained (small at top, large at bottom)\n- Screen filled with tiny neon blue cubes creating particle-like effect\n- Foundation established for Phase 6 mini-cube rotations\n\n---\n\n### PHASE 6: MINI-CUBE ROTATE (65% - 75% scroll)\n**Duration**: 50vh of scroll (10% of total)\n**State**: 729 mini-cubes rotating independently\n\n## 🌪️ EXACT IMPLEMENTATION FOR 729 INDIVIDUAL ROTATIONS\n\n### **MINI-CUBE ROTATION DATA**:\n```javascript\n// Generate unique rotation for each of 729 mini-cubes\nconst miniCubeRotations = miniCubes.map(() => ({\n  rotationSpeed: (Math.random() * 0.02) + 0.003, // 0.003 to 0.023 rad/frame\n  rotationAxis: new THREE.Vector3(\n    Math.random() - 0.5,\n    Math.random() - 0.5, \n    Math.random() - 0.5\n  ).normalize(),\n  accumulatedRotation: new THREE.Euler(0, 0, 0)\n}));\n```\n\n### **ROTATION APPLICATION**:\n```javascript\nconst rotateProgress = (scrollProgress - 0.65) / 0.10; // 0 to 1 over Phase 6\n\nminiCubes.forEach((miniCube, index) => {\n  // Maintain position and scale from Phase 5\n  const position = /* Same as Phase 5 final positions */;\n  const scale = /* Same as Phase 5 perspective scaling */;\n  \n  // Apply individual rotation\n  const rotData = miniCubeRotations[index];\n  const rotationAmount = rotData.rotationSpeed * rotateProgress;\n  \n  rotData.accumulatedRotation.x += rotData.rotationAxis.x * rotationAmount;\n  rotData.accumulatedRotation.y += rotData.rotationAxis.y * rotationAmount;\n  rotData.accumulatedRotation.z += rotData.rotationAxis.z * rotationAmount;\n  \n  miniCubeRef.current.rotation.copy(rotData.accumulatedRotation);\n});\n```\n\n---\n\n### PHASE 7: SECOND DISMANTLE (75% - 85% scroll)\n**Duration**: 50vh of scroll (10% of total)\n**State**: 729 mini-cubes scatter further apart\n\n## 💥 EXACT IMPLEMENTATION FOR MAXIMUM SCATTER\n\n### **ADDITIONAL SCATTER CALCULATION**:\n```javascript\nconst scatterProgress = (scrollProgress - 0.75) / 0.10; // 0 to 1 over Phase 7\n\n// Additional scatter range (larger than Phase 5)\nconst additionalScatterRange = 25; // Larger scatter for maximum spread\n\nminiCubes.forEach((miniCube) => {\n  // Start from Phase 5 final positions\n  const phase5Position = /* Final positions from Phase 5 */;\n  \n  // Apply additional scatter\n  const scatteredPosition = [\n    phase5Position[0] + (miniCube.miniBaseSpread[0] * additionalScatterRange * scatterProgress),\n    phase5Position[1] + (miniCube.miniBaseSpread[1] * additionalScatterRange * scatterProgress),\n    phase5Position[2] + (miniCube.miniBaseSpread[2] * additionalScatterRange * scatterProgress)\n  ];\n  \n  return scatteredPosition;\n});\n```\n\n---\n\n### PHASE 8: INDEPENDENT ROTATION (43.86% - 52.63% scroll)\n**Duration**: 87.7vh of scroll (8.77% of total)\n**State**: 729 mini-cubes rotating independently with living movement\n\n## 🌪️ EXACT IMPLEMENTATION FOR 729 INDEPENDENT ROTATIONS\n\n### **LIVING MOVEMENT ANIMATION**:\n```javascript\nconst rotationProgress = (scrollProgress - 0.4386) / 0.0877; // 0 to 1 over Phase 8\n\n// Base position with hovering motion\nconst time = Date.now() * 0.001;\nconst hoverAmplitude = 1.5; // Gentle hovering\nconst hoverX = Math.sin(time + i * 0.1) * hoverAmplitude;\nconst hoverY = Math.cos(time * 0.7 + i * 0.15) * hoverAmplitude;\nconst hoverZ = Math.sin(time * 0.5 + i * 0.12) * hoverAmplitude;\n\n// Enhanced rotation with multiple axes for variety\nconst continuousRotation = time * 0.5;\nrotation.x = rotationData.rotationAxis.x * continuousRotation;\nrotation.y = rotationData.rotationAxis.y * continuousRotation;\nrotation.z = rotationData.rotationAxis.z * continuousRotation;\n```\n\n---\n\n### PHASE 9: NEUROMORPHIC BRAIN TRANSFORM (52.63% - 70.18% scroll)\n**Duration**: 175.5vh of scroll (17.55% of total)\n**State**: POPCORN-STYLE morphing from cubes to brain pieces\n\n## 🧠 EXACT IMPLEMENTATION FOR POPCORN BRAIN TRANSFORMATION\n\n### **CRITICAL MORPHING RULES**:\n1. **CONTINUITY**: Start from exact positions where Phase 8 ended\n2. **POPCORN STYLE**: Individual pieces transform randomly like popcorn popping\n3. **FADE TRANSITION**: Fade OUT cube, fade IN brain at same position\n4. **NO SIZE CHANGE**: Maintain same overall size during morph\n5. **WHITE EDGES**: Brain pieces must have WHITE edges for visibility\n\n### **POPCORN MORPHING IMPLEMENTATION**:\n```javascript\nconst transformProgress = (scrollProgress - 0.5263) / 0.1755; // 0 to 1 over Phase 9\n\n// Wave-based transformation with large simultaneous groups\nconst waveSize = 100; // Transform 100 cubes at once (popcorn bursts)\nconst waveIndex = Math.floor(cubeIndex / waveSize);\nconst totalWaves = Math.ceil(729 / waveSize);\n\n// Each wave starts with delay but transforms quickly\nconst waveStartDelay = (waveIndex / totalWaves) * 0.4;\nconst waveProgress = Math.max(0, (transformProgress - waveStartDelay) / (1 - waveStartDelay));\nconst individualTransform = Math.min(1, easeInOutCubic(waveProgress) * 1.5);\n\n// CRITICAL: Fade out cube, fade in brain at SAME position\nif (individualTransform > 0) {\n  // Show cube form (fading out)\n  dummy.position.set(position[0], position[1], position[2]);\n  dummy.scale.setScalar(scale * (1 - individualTransform)); // Cube fades out\n  mesh.setMatrixAt(i, dummy.matrix);\n\n  // Show brain form (fading in) at SAME position\n  dummy.scale.setScalar(scale * individualTransform); // Brain fades in\n  sphereMesh.setMatrixAt(i, dummy.matrix);\n}\n```\n\n---\n\n### PHASE 10: ULTRA-REALISTIC BRAIN FORMATION (70.18% - 100% scroll)\n**Duration**: 298.2vh of scroll (29.82% of total)\n**State**: Two sub-phases for brain formation\n\n## 🌊 EXACT IMPLEMENTATION FOR SPIRAL BRAIN FORMATION\n\n### **PHASE 10A: 729 Pieces Spiral (70.18% - 90%)**:\n```javascript\n// CRITICAL: Start from exact Phase 9 end positions (no snapping!)\nconst spiralProgress = (scrollProgress - 0.7018) / 0.1982;\nconst startPosition = [phase9EndX, phase9EndY, phase9EndZ]; // From Phase 9\n\n// Spiral parameters\nconst spiralRadius = 30 * (1 - spiralProgress);\nconst spiralAngle = spiralProgress * Math.PI * 4; // 2 full rotations\nconst spiralCenter = [0, 0, 0];\n\n// Smooth interpolation from Phase 9 position to spiral to center\nconst spiralX = Math.cos(spiralAngle + i * 0.1) * spiralRadius;\nconst spiralY = Math.sin(spiralAngle + i * 0.05) * spiralRadius;\nconst spiralZ = Math.sin(spiralAngle + i * 0.08) * spiralRadius;\n\nposition = [\n  startPosition[0] + (spiralX - startPosition[0]) * spiralProgress,\n  startPosition[1] + (spiralY - startPosition[1]) * spiralProgress,\n  startPosition[2] + (spiralZ - startPosition[2]) * spiralProgress\n];\n```\n\n### **PHASE 10B: 3000 Smaller Pieces Appear (90% - 100%)**:\n```javascript\n// 729 pieces fade out, 3000 smaller pieces appear\nconst finalProgress = (scrollProgress - 0.90) / 0.10;\n\n// 3000 pieces are 50% smaller than smallest 729 piece\nconst smallest729Size = 0.25 * 2.1 * 0.7; // Minimum perspective * cube size * brain factor\nconst piece3000Size = smallest729Size * 0.5; // 50% smaller\n\n// CRITICAL: Final brain must be MOUSE ROTATABLE\n// Apply mouse rotation to entire brain formation\nif (scrollProgress >= 0.90) {\n  // Enable mouse control for final brain (like Phase 1)\n  const rotationX = (mousePos.y * Math.PI) / 6;\n  const rotationY = (mousePos.x * Math.PI) / 6;\n  brainGroupRef.current.rotation.x = rotationX;\n  brainGroupRef.current.rotation.y = rotationY;\n}\n```\n\n### **EXPECTED FINAL RESULT**:\nSpectacular finale where 729 scattered brain pieces spiral smoothly toward center, then 3000 smaller pieces form the ultra-realistic final brain that responds to mouse rotation, completing the journey from mechanical cube to organic consciousness.\n\n---\n\n## 🔧 CRITICAL IMPLEMENTATION NOTES\n\n### **IMMEDIATE FIXES REQUIRED**:\n1. **RESTORE DRAMATIC SPREADING** - Current `maxSpreadX=35, maxSpreadY=20` is TOO SMALL\n   - Use dynamic screen-based calculation: `screenWidth3D * 0.8`\n   - Remove over-constraining that breaks the explosion effect\n\n2. **EXACT POSITION FORMULAS** - Follow the specific calculations above\n   - Phase 2: `position + baseSpread * dismantleProgress * maxSpread`\n   - Phase 3+: Lock positions, add perspective scaling\n   - Phase 4: Add rotation while maintaining position/scale\n\n3. **PERFORMANCE OPTIMIZATION**:\n   - Pre-calculate baseSpread values (don't regenerate each frame)\n   - Use `useRef` for rotation accumulation\n   - Batch position updates in `useFrame`\n\n4. **VISUAL CONSISTENCY**:\n   - Neon blue cubes: `#00ffff` with emissive `#0088aa`\n   - White wireframe edges: `#ffffff`\n   - Dark atmospheric scene with colored lights\n\n### **SCREEN ADAPTATION**:\n```javascript\n// Use these exact calculations for screen responsiveness\nconst fov = 75;\nconst fovRad = (fov * Math.PI) / 180;\nconst screenWidth3D = 2 * Math.tan(fovRad / 2) * 50;\nconst screenHeight3D = screenWidth3D / (window.innerWidth / window.innerHeight);\nconst maxSpreadX = screenWidth3D * 0.8; // 80% screen coverage\nconst maxSpreadY = screenHeight3D * 0.8;\n```\n\n### **PHASE TRANSITION RULES**:\n- **Phase 1→2**: Disable mouse control, enable spreading\n- **Phase 2→3**: Lock positions, enable perspective scaling  \n- **Phase 3→4**: Add rotations, maintain position/scale\n- **Phase 4→5**: Replace 27 cubes with 729 mini-cubes\n- **Phase 5→6**: Add mini-cube rotations\n- **Phase 6→7**: Additional scattering\n- **Phase 7→8**: Brain transformation and spiral convergence\n\n## ✅ APPROVAL REQUIRED\nThis ultra-detailed specification must be explicitly approved before any code implementation begins.\n\n**CRITICAL**: The current code is broken due to over-constraining. This specification provides exact formulas to restore the dramatic effect while maintaining screen responsiveness.\n\n**User Approval**: [ ] APPROVED / [ ] NEEDS CHANGES\n\n---\n\n*Document Version: 2.0 - ULTRA-DETAILED*  \n*Updated: With exact implementation formulas and screen adaptation*\n*Problem Diagnosis: Identified over-constraining causing animation failure*","size_bytes":23814},"public/3danimation/src/RUBIKS_FIXES_SUMMARY.md":{"content":"# 🎯 **RUBIK'S CUBE ANIMATION FIXES IMPLEMENTED**\n\n## ✅ **1. PHASE 5.5 SEPARATE SHOWCASE (EXACTLY LIKE PHASE 7)**\n\n### **Phase Structure Fixed**:\n- **Phase 5 (14.48-24.14%)**: Rubik's Cube Transform - 72vh\n- **Phase 5.5 (24.14-33.8%)**: Mini-Rubik's Cube Showcase - 97vh (EXACTLY like Phase 7)\n- **Phase 6 (33.8-43.45%)**: Second Dismantle\n- **Phase 7 (43.45-53.11%)**: Independent Rotation\n- **Phase 8 (53.11-72.42%)**: Neuromorphic Brain Transform\n- **Phase 9 (72.42-100%)**: Ultra-Realistic Brain Formation\n\n### **Phase 5.5 Implementation**:\n```typescript\n// EXACTLY like Phase 7: Hovering motion with individual rotation\nconst time = Date.now() * 0.001;\nconst hoverAmplitude = 1.5; // Same as Phase 7\nconst hoverX = Math.sin(time + i * 0.1) * hoverAmplitude;\nconst hoverY = Math.cos(time * 0.7 + i * 0.15) * hoverAmplitude;\nconst hoverZ = Math.sin(time * 0.5 + i * 0.12) * hoverAmplitude;\n\n// EXACTLY like Phase 7: Continuous gentle rotation\nconst continuousRotation = time * 0.5;\nrotation.x = packed.rotAxis[i * 3 + 0] * continuousRotation;\nrotation.y = packed.rotAxis[i * 3 + 1] * continuousRotation;\nrotation.z = packed.rotAxis[i * 3 + 2] * continuousRotation;\n```\n\n## ✅ **2. BRAIN FIXES FOR VISIBILITY**\n\n### **White Edges for Brain Pieces**:\n```typescript\n// WHITE edge material for brain spheres - to make brain details visible\nconst brainWireMat = useMemo(() => \n  new THREE.LineBasicMaterial({\n    color: \"#ffffff\", // WHITE edges for brain pieces to show cortical detail\n    transparent: false,\n    opacity: 1,\n    linewidth: 6,\n  }), []);\n```\n\n### **Uniform Brain Piece Sizes**:\n```typescript\n// FIXED: Uniform brain piece size - much smaller for human recognition\nconst uniformBrainSize = 0.8; // Much smaller than original cubes\nscale = uniformBrainSize * (0.3 + spiralProgress * 0.7);\n```\n\n### **Increased Brain Piece Count & Smaller Size**:\n- Changed from variable sizes to uniform small size (0.8 units)\n- Brain pieces now use WHITE edges instead of pink/black\n- Higher resolution sphere geometry (16×16 instead of 12×12)\n- Enhanced cortical folding with 4-octave noise\n\n## ✅ **3. VISUAL IMPROVEMENTS**\n\n### **Enhanced Brain Material**:\n```typescript\nconst brainMat = new THREE.MeshStandardMaterial({\n  color: \"#ff4488\",\n  emissive: \"#ff2266\", \n  emissiveIntensity: 0.8, // Increased for organic glow\n  metalness: 0.15, // Reduced for biological appearance\n  roughness: 0.7, // Increased for brain tissue texture\n  transparent: true,\n  opacity: 0.95, // Slightly transparent for organic feel\n});\n```\n\n### **Key Changes Made**:\n1. **Phase 5.5 has EXACT same timing and motion as Phase 7** (97vh, floating + rotation)\n2. **Brain pieces use WHITE edges** for cortical detail visibility against pink tissue\n3. **Final brain uses uniform small piece sizes** for better human brain recognition\n4. **Enhanced neuromorphic geometry** with region-specific cortical complexity\n\n## 🎮 **Expected User Experience**:\n1. **Phase 5**: Mini-Rubik's cubes form (14.48-24.14%)\n2. **Phase 5.5**: Perfect showcase with floating motion (24.14-33.8%) - **EXACTLY like Phase 7**\n3. **Phase 8**: Brain transformation with **WHITE edge visibility**\n4. **Phase 9**: Final brain with **uniform small pieces** and **WHITE cortical detail lines**\n\nThe brain should now be clearly recognizable as a human brain with visible cortical folding patterns thanks to the WHITE edges contrasting against the pink brain tissue, and the uniform small piece sizes creating better overall brain shape recognition.","size_bytes":3502},"public/3danimation/src/builder-setup.md":{"content":"# Builder.io Integration Setup\n\n## Prerequisites\n\n1. Create a Builder.io account at https://builder.io\n2. Get your public API key from Builder.io dashboard\n3. Install Builder.io dependencies:\n\n```bash\nnpm install @builder.io/react @builder.io/sdk\n```\n\n## Integration Options\n\n### Option 1: Custom Component Registration\n\nUse `BuilderIntegration.tsx` to register your 3D component:\n\n1. **In your main app file**, import the registration:\n```tsx\nimport './components/BuilderIntegration';\n```\n\n2. **In Builder.io visual editor**:\n   - Your \"3D Rubik's Cube Animation\" component will appear in the components panel\n   - Drag and drop it into any page\n   - Configure height, debug mode, and autoplay options\n\n### Option 2: Headless CMS Integration\n\nUse `BuilderPage.tsx` for content-driven pages:\n\n1. **Create content models** in Builder.io:\n   - Page title, description, hero text\n   - Feature list with icons\n   - Animation position settings\n\n2. **Update your App.tsx**:\n```tsx\nimport { BuilderPage } from './components/BuilderPage';\n\nexport default function App() {\n  return <BuilderPage urlPath={window.location.pathname} />;\n}\n```\n\n### Option 3: Hybrid Architecture\n\nUse `App-Builder.tsx` for full integration:\n\n1. **Install React Router**:\n```bash\nnpm install react-router-dom\n```\n\n2. **Replace your App.tsx** with App-Builder.tsx content\n\n3. **Configure routes**:\n   - `/experience` - Pure 3D experience\n   - `/` - Builder.io managed home page\n   - `/about` - Builder.io managed about page\n   - Dynamic pages handled by Builder.io\n\n## Builder.io Configuration\n\n### 1. API Key Setup\n\nReplace `YOUR_BUILDER_PUBLIC_KEY` in the integration files with your actual key:\n\n```tsx\nbuilder.init('your-actual-public-key-here');\n```\n\n### 2. Content Models\n\nCreate these content models in Builder.io:\n\n**Page Model**:\n- `title` (Text)\n- `description` (Long Text)\n- `heroText` (Long Text)\n- `callToAction` (Text)\n- `showAnimation` (Boolean)\n- `features` (List of Objects with title, description, icon)\n\n**Component Registration**:\nYour 3D component will automatically appear in the visual editor after registration.\n\n### 3. Custom CSS for Builder.io\n\nAdd to your `globals.css`:\n\n```css\n/* Builder.io specific styles */\n.builder-content {\n  background: transparent;\n}\n\n.builder-3d-wrapper {\n  position: relative;\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n}\n\n/* Hide debug info in Builder.io preview */\n.builder-preview .fixed.top-4.right-4 {\n  display: none;\n}\n```\n\n## Deployment Considerations\n\n### 1. Environment Variables\n\nCreate `.env` file:\n```\nVITE_BUILDER_PUBLIC_KEY=your-builder-public-key\nVITE_BUILDER_PRIVATE_KEY=your-builder-private-key\n```\n\n### 2. Build Optimization\n\nFor production builds with Builder.io:\n\n```bash\n# Build with Builder.io optimizations\nnpm run build\n\n# Ensure Three.js and Builder.io are properly bundled\n```\n\n### 3. Performance Tips\n\n- Use `React.lazy()` for code splitting between 3D and Builder.io content\n- Preload 3D assets on Builder.io managed pages\n- Use Builder.io's image optimization for marketing content\n\n## Usage Examples\n\n### Marketing Landing Page (Builder.io)\n```\n/ -> Builder.io managed marketing page with embedded 3D component\n```\n\n### Pure 3D Experience\n```\n/experience -> Your full RubiksCubeExperience component\n```\n\n### Hybrid Content Pages\n```\n/about -> Builder.io content with optional 3D elements\n/features -> Builder.io managed with custom 3D components\n```\n\n## Troubleshooting\n\n### Common Issues:\n\n1. **Three.js conflicts**: Use the single Three.js import pattern we fixed\n2. **Builder.io preview**: 3D may not render in Builder.io preview - use preview mode\n3. **Performance**: Large 3D scenes may slow Builder.io editor - use simplified previews\n\n### Debug Mode:\n\nEnable debug mode in your 3D component when using Builder.io:\n\n```tsx\n<BuilderRubiksCube enableDebug={true} />\n```\n\nThis setup gives you the flexibility to use Builder.io for marketing content while preserving your sophisticated 3D experience exactly as designed.","size_bytes":3985},"public/3danimation/src/index.css":{"content":"/*! tailwindcss v4.1.3 | MIT License | https://tailwindcss.com */\n@layer properties {\n  @supports (((-webkit-hyphens: none)) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color: rgb(from red r g b)))) {\n    *, :before, :after, ::backdrop {\n      --tw-translate-x: 0;\n      --tw-translate-y: 0;\n      --tw-translate-z: 0;\n      --tw-rotate-x: rotateX(0);\n      --tw-rotate-y: rotateY(0);\n      --tw-rotate-z: rotateZ(0);\n      --tw-skew-x: skewX(0);\n      --tw-skew-y: skewY(0);\n      --tw-space-y-reverse: 0;\n      --tw-space-x-reverse: 0;\n      --tw-border-style: solid;\n      --tw-gradient-position: initial;\n      --tw-gradient-from: #0000;\n      --tw-gradient-via: #0000;\n      --tw-gradient-to: #0000;\n      --tw-gradient-stops: initial;\n      --tw-gradient-via-stops: initial;\n      --tw-gradient-from-position: 0%;\n      --tw-gradient-via-position: 50%;\n      --tw-gradient-to-position: 100%;\n      --tw-leading: initial;\n      --tw-font-weight: initial;\n      --tw-tracking: initial;\n      --tw-ordinal: initial;\n      --tw-slashed-zero: initial;\n      --tw-numeric-figure: initial;\n      --tw-numeric-spacing: initial;\n      --tw-numeric-fraction: initial;\n      --tw-shadow: 0 0 #0000;\n      --tw-shadow-color: initial;\n      --tw-shadow-alpha: 100%;\n      --tw-inset-shadow: 0 0 #0000;\n      --tw-inset-shadow-color: initial;\n      --tw-inset-shadow-alpha: 100%;\n      --tw-ring-color: initial;\n      --tw-ring-shadow: 0 0 #0000;\n      --tw-inset-ring-color: initial;\n      --tw-inset-ring-shadow: 0 0 #0000;\n      --tw-ring-inset: initial;\n      --tw-ring-offset-width: 0px;\n      --tw-ring-offset-color: #fff;\n      --tw-ring-offset-shadow: 0 0 #0000;\n      --tw-outline-style: solid;\n      --tw-blur: initial;\n      --tw-brightness: initial;\n      --tw-contrast: initial;\n      --tw-grayscale: initial;\n      --tw-hue-rotate: initial;\n      --tw-invert: initial;\n      --tw-opacity: initial;\n      --tw-saturate: initial;\n      --tw-sepia: initial;\n      --tw-drop-shadow: initial;\n      --tw-drop-shadow-color: initial;\n      --tw-drop-shadow-alpha: 100%;\n      --tw-drop-shadow-size: initial;\n      --tw-backdrop-blur: initial;\n      --tw-backdrop-brightness: initial;\n      --tw-backdrop-contrast: initial;\n      --tw-backdrop-grayscale: initial;\n      --tw-backdrop-hue-rotate: initial;\n      --tw-backdrop-invert: initial;\n      --tw-backdrop-opacity: initial;\n      --tw-backdrop-saturate: initial;\n      --tw-backdrop-sepia: initial;\n      --tw-duration: initial;\n      --tw-ease: initial;\n      --tw-content: \"\";\n    }\n  }\n}\n\n@layer theme {\n  :root, :host {\n    --font-sans: ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\";\n    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n    --color-red-400: oklch(.704 .191 22.216);\n    --color-orange-400: oklch(.75 .183 55.934);\n    --color-yellow-400: oklch(.852 .199 91.936);\n    --color-green-400: oklch(.792 .209 151.711);\n    --color-emerald-300: oklch(.845 .143 164.978);\n    --color-emerald-400: oklch(.765 .177 163.223);\n    --color-cyan-100: oklch(.956 .045 203.388);\n    --color-cyan-300: oklch(.865 .127 207.078);\n    --color-cyan-400: oklch(.789 .154 211.53);\n    --color-cyan-500: oklch(.715 .143 215.221);\n    --color-cyan-600: oklch(.609 .126 221.723);\n    --color-blue-50: oklch(.97 .014 254.604);\n    --color-blue-400: oklch(.707 .165 254.624);\n    --color-blue-600: oklch(.546 .245 262.881);\n    --color-blue-700: oklch(.488 .243 264.376);\n    --color-blue-800: oklch(.424 .199 265.638);\n    --color-indigo-400: oklch(.673 .182 276.935);\n    --color-purple-300: oklch(.827 .119 306.383);\n    --color-purple-400: oklch(.714 .203 305.504);\n    --color-purple-500: oklch(.627 .265 303.9);\n    --color-pink-300: oklch(.823 .12 346.018);\n    --color-pink-400: oklch(.718 .202 349.761);\n    --color-gray-50: oklch(.985 .002 247.839);\n    --color-gray-100: oklch(.967 .003 264.542);\n    --color-gray-300: oklch(.872 .01 258.338);\n    --color-gray-400: oklch(.707 .022 261.325);\n    --color-gray-600: oklch(.446 .03 256.802);\n    --color-gray-700: oklch(.373 .034 259.733);\n    --color-gray-800: oklch(.278 .033 256.848);\n    --color-gray-900: oklch(.21 .034 264.665);\n    --color-black: #000;\n    --color-white: #fff;\n    --spacing: .25rem;\n    --container-sm: 24rem;\n    --container-md: 28rem;\n    --container-lg: 32rem;\n    --container-4xl: 56rem;\n    --container-6xl: 72rem;\n    --container-7xl: 80rem;\n    --text-xs: .75rem;\n    --text-xs--line-height: calc(1 / .75);\n    --text-sm: .875rem;\n    --text-sm--line-height: calc(1.25 / .875);\n    --text-base: 1rem;\n    --text-base--line-height: calc(1.5 / 1);\n    --text-lg: 1.125rem;\n    --text-lg--line-height: calc(1.75 / 1.125);\n    --text-xl: 1.25rem;\n    --text-xl--line-height: calc(1.75 / 1.25);\n    --text-2xl: 1.5rem;\n    --text-3xl: 1.875rem;\n    --text-3xl--line-height: calc(2.25 / 1.875);\n    --text-4xl: 2.25rem;\n    --text-4xl--line-height: calc(2.5 / 2.25);\n    --text-6xl: 3.75rem;\n    --text-6xl--line-height: 1;\n    --font-weight-normal: 400;\n    --font-weight-medium: 500;\n    --font-weight-semibold: 600;\n    --font-weight-bold: 700;\n    --tracking-tight: -.025em;\n    --tracking-wider: .05em;\n    --tracking-widest: .1em;\n    --leading-relaxed: 1.625;\n    --radius-xs: .125rem;\n    --ease-in-out: cubic-bezier(.4, 0, .2, 1);\n    --animate-spin: spin 1s linear infinite;\n    --animate-pulse: pulse 2s cubic-bezier(.4, 0, .6, 1) infinite;\n    --animate-bounce: bounce 1s infinite;\n    --blur-sm: 8px;\n    --aspect-video: 16 / 9;\n    --default-transition-duration: .15s;\n    --default-transition-timing-function: cubic-bezier(.4, 0, .2, 1);\n    --default-font-family: var(--font-sans);\n    --default-font-feature-settings: var(--font-sans--font-feature-settings);\n    --default-font-variation-settings: var(--font-sans--font-variation-settings);\n    --default-mono-font-family: var(--font-mono);\n    --default-mono-font-feature-settings: var(--font-mono--font-feature-settings);\n    --default-mono-font-variation-settings: var(--font-mono--font-variation-settings);\n    --color-border: var(--border);\n  }\n}\n\n@layer base {\n  *, :after, :before, ::backdrop {\n    box-sizing: border-box;\n    border: 0 solid;\n    margin: 0;\n    padding: 0;\n  }\n\n  ::file-selector-button {\n    box-sizing: border-box;\n    border: 0 solid;\n    margin: 0;\n    padding: 0;\n  }\n\n  html, :host {\n    -webkit-text-size-adjust: 100%;\n    tab-size: 4;\n    line-height: 1.5;\n    font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\");\n    font-feature-settings: var(--default-font-feature-settings, normal);\n    font-variation-settings: var(--default-font-variation-settings, normal);\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  body {\n    line-height: inherit;\n  }\n\n  hr {\n    height: 0;\n    color: inherit;\n    border-top-width: 1px;\n  }\n\n  abbr:where([title]) {\n    -webkit-text-decoration: underline dotted;\n    text-decoration: underline dotted;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    font-size: inherit;\n    font-weight: inherit;\n  }\n\n  a {\n    color: inherit;\n    -webkit-text-decoration: inherit;\n    -webkit-text-decoration: inherit;\n    text-decoration: inherit;\n  }\n\n  b, strong {\n    font-weight: bolder;\n  }\n\n  code, kbd, samp, pre {\n    font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace);\n    font-feature-settings: var(--default-mono-font-feature-settings, normal);\n    font-variation-settings: var(--default-mono-font-variation-settings, normal);\n    font-size: 1em;\n  }\n\n  small {\n    font-size: 80%;\n  }\n\n  sub, sup {\n    vertical-align: baseline;\n    font-size: 75%;\n    line-height: 0;\n    position: relative;\n  }\n\n  sub {\n    bottom: -.25em;\n  }\n\n  sup {\n    top: -.5em;\n  }\n\n  table {\n    text-indent: 0;\n    border-color: inherit;\n    border-collapse: collapse;\n  }\n\n  :-moz-focusring {\n    outline: auto;\n  }\n\n  progress {\n    vertical-align: baseline;\n  }\n\n  summary {\n    display: list-item;\n  }\n\n  ol, ul, menu {\n    list-style: none;\n  }\n\n  img, svg, video, canvas, audio, iframe, embed, object {\n    vertical-align: middle;\n    display: block;\n  }\n\n  img, video {\n    max-width: 100%;\n    height: auto;\n  }\n\n  button, input, select, optgroup, textarea {\n    font: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n    opacity: 1;\n    background-color: #0000;\n    border-radius: 0;\n  }\n\n  ::file-selector-button {\n    font: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n    opacity: 1;\n    background-color: #0000;\n    border-radius: 0;\n  }\n\n  :where(select:is([multiple], [size])) optgroup {\n    font-weight: bolder;\n  }\n\n  :where(select:is([multiple], [size])) optgroup option {\n    padding-inline-start: 20px;\n  }\n\n  ::file-selector-button {\n    margin-inline-end: 4px;\n  }\n\n  ::placeholder {\n    opacity: 1;\n    color: currentColor;\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    ::placeholder {\n      color: color-mix(in oklab, currentColor 50%, transparent);\n    }\n  }\n\n  textarea {\n    resize: vertical;\n  }\n\n  ::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n\n  ::-webkit-date-and-time-value {\n    min-height: 1lh;\n    text-align: inherit;\n  }\n\n  ::-webkit-datetime-edit {\n    display: inline-flex;\n  }\n\n  ::-webkit-datetime-edit-fields-wrapper {\n    padding: 0;\n  }\n\n  ::-webkit-datetime-edit {\n    padding-block: 0;\n  }\n\n  ::-webkit-datetime-edit-year-field {\n    padding-block: 0;\n  }\n\n  ::-webkit-datetime-edit-month-field {\n    padding-block: 0;\n  }\n\n  ::-webkit-datetime-edit-day-field {\n    padding-block: 0;\n  }\n\n  ::-webkit-datetime-edit-hour-field {\n    padding-block: 0;\n  }\n\n  ::-webkit-datetime-edit-minute-field {\n    padding-block: 0;\n  }\n\n  ::-webkit-datetime-edit-second-field {\n    padding-block: 0;\n  }\n\n  ::-webkit-datetime-edit-millisecond-field {\n    padding-block: 0;\n  }\n\n  ::-webkit-datetime-edit-meridiem-field {\n    padding-block: 0;\n  }\n\n  :-moz-ui-invalid {\n    box-shadow: none;\n  }\n\n  button, input:where([type=\"button\"], [type=\"reset\"], [type=\"submit\"]) {\n    appearance: button;\n  }\n\n  ::file-selector-button {\n    appearance: button;\n  }\n\n  ::-webkit-inner-spin-button {\n    height: auto;\n  }\n\n  ::-webkit-outer-spin-button {\n    height: auto;\n  }\n\n  [hidden]:where(:not([hidden=\"until-found\"])) {\n    display: none !important;\n  }\n\n  * {\n    border-color: var(--border);\n    outline-color: var(--ring);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    * {\n      outline-color: color-mix(in oklab, var(--ring) 50%, transparent);\n    }\n  }\n\n  * {\n    border-color: var(--border);\n    outline-color: var(--ring);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    * {\n      outline-color: color-mix(in oklab, var(--ring) 50%, transparent);\n    }\n  }\n\n  body {\n    background-color: var(--background);\n    color: var(--foreground);\n  }\n\n  :where(:not(:has([class*=\" text-\"]), :not(:has([class^=\"text-\"])))) h1 {\n    font-size: var(--text-2xl);\n    font-weight: var(--font-weight-medium);\n    line-height: 1.5;\n  }\n\n  :where(:not(:has([class*=\" text-\"]), :not(:has([class^=\"text-\"])))) h2 {\n    font-size: var(--text-xl);\n    font-weight: var(--font-weight-medium);\n    line-height: 1.5;\n  }\n\n  :where(:not(:has([class*=\" text-\"]), :not(:has([class^=\"text-\"])))) h3 {\n    font-size: var(--text-lg);\n    font-weight: var(--font-weight-medium);\n    line-height: 1.5;\n  }\n\n  :where(:not(:has([class*=\" text-\"]), :not(:has([class^=\"text-\"])))) h4 {\n    font-size: var(--text-base);\n    font-weight: var(--font-weight-medium);\n    line-height: 1.5;\n  }\n\n  :where(:not(:has([class*=\" text-\"]), :not(:has([class^=\"text-\"])))) p {\n    font-size: var(--text-base);\n    font-weight: var(--font-weight-normal);\n    line-height: 1.5;\n  }\n\n  :where(:not(:has([class*=\" text-\"]), :not(:has([class^=\"text-\"])))) label, :where(:not(:has([class*=\" text-\"]), :not(:has([class^=\"text-\"])))) button {\n    font-size: var(--text-base);\n    font-weight: var(--font-weight-medium);\n    line-height: 1.5;\n  }\n\n  :where(:not(:has([class*=\" text-\"]), :not(:has([class^=\"text-\"])))) input {\n    font-size: var(--text-base);\n    font-weight: var(--font-weight-normal);\n    line-height: 1.5;\n  }\n}\n\n@layer utilities {\n  .\\@container\\/card-header {\n    container: card-header / inline-size;\n  }\n\n  .pointer-events-auto {\n    pointer-events: auto;\n  }\n\n  .pointer-events-none {\n    pointer-events: none;\n  }\n\n  .invisible {\n    visibility: hidden;\n  }\n\n  .visible {\n    visibility: visible;\n  }\n\n  .sr-only {\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border-width: 0;\n    width: 1px;\n    height: 1px;\n    margin: -1px;\n    padding: 0;\n    position: absolute;\n    overflow: hidden;\n  }\n\n  .absolute {\n    position: absolute;\n  }\n\n  .fixed {\n    position: fixed;\n  }\n\n  .relative {\n    position: relative;\n  }\n\n  .inset-0 {\n    inset: calc(var(--spacing) * 0);\n  }\n\n  .inset-x-0 {\n    inset-inline: calc(var(--spacing) * 0);\n  }\n\n  .inset-y-0 {\n    inset-block: calc(var(--spacing) * 0);\n  }\n\n  .-top-12 {\n    top: calc(var(--spacing) * -12);\n  }\n\n  .top-0 {\n    top: calc(var(--spacing) * 0);\n  }\n\n  .top-1\\.5 {\n    top: calc(var(--spacing) * 1.5);\n  }\n\n  .top-1\\/2 {\n    top: 50%;\n  }\n\n  .top-3\\.5 {\n    top: calc(var(--spacing) * 3.5);\n  }\n\n  .top-4 {\n    top: calc(var(--spacing) * 4);\n  }\n\n  .top-\\[1px\\] {\n    top: 1px;\n  }\n\n  .top-\\[50\\%\\] {\n    top: 50%;\n  }\n\n  .top-\\[60\\%\\] {\n    top: 60%;\n  }\n\n  .top-full {\n    top: 100%;\n  }\n\n  .-right-12 {\n    right: calc(var(--spacing) * -12);\n  }\n\n  .right-0 {\n    right: calc(var(--spacing) * 0);\n  }\n\n  .right-1 {\n    right: calc(var(--spacing) * 1);\n  }\n\n  .right-2 {\n    right: calc(var(--spacing) * 2);\n  }\n\n  .right-3 {\n    right: calc(var(--spacing) * 3);\n  }\n\n  .right-4 {\n    right: calc(var(--spacing) * 4);\n  }\n\n  .-bottom-12 {\n    bottom: calc(var(--spacing) * -12);\n  }\n\n  .bottom-0 {\n    bottom: calc(var(--spacing) * 0);\n  }\n\n  .bottom-4 {\n    bottom: calc(var(--spacing) * 4);\n  }\n\n  .-left-12 {\n    left: calc(var(--spacing) * -12);\n  }\n\n  .left-0 {\n    left: calc(var(--spacing) * 0);\n  }\n\n  .left-1 {\n    left: calc(var(--spacing) * 1);\n  }\n\n  .left-1\\/2 {\n    left: 50%;\n  }\n\n  .left-2 {\n    left: calc(var(--spacing) * 2);\n  }\n\n  .left-4 {\n    left: calc(var(--spacing) * 4);\n  }\n\n  .left-\\[50\\%\\] {\n    left: 50%;\n  }\n\n  .isolate {\n    isolation: isolate;\n  }\n\n  .z-0 {\n    z-index: 0;\n  }\n\n  .z-10 {\n    z-index: 10;\n  }\n\n  .z-20 {\n    z-index: 20;\n  }\n\n  .z-30 {\n    z-index: 30;\n  }\n\n  .z-50 {\n    z-index: 50;\n  }\n\n  .z-\\[1\\] {\n    z-index: 1;\n  }\n\n  .col-start-2 {\n    grid-column-start: 2;\n  }\n\n  .row-span-2 {\n    grid-row: span 2 / span 2;\n  }\n\n  .row-start-1 {\n    grid-row-start: 1;\n  }\n\n  .\\!container {\n    width: 100% !important;\n  }\n\n  @media (width >= 40rem) {\n    .\\!container {\n      max-width: 40rem !important;\n    }\n  }\n\n  @media (width >= 48rem) {\n    .\\!container {\n      max-width: 48rem !important;\n    }\n  }\n\n  @media (width >= 64rem) {\n    .\\!container {\n      max-width: 64rem !important;\n    }\n  }\n\n  @media (width >= 80rem) {\n    .\\!container {\n      max-width: 80rem !important;\n    }\n  }\n\n  @media (width >= 96rem) {\n    .\\!container {\n      max-width: 96rem !important;\n    }\n  }\n\n  .container {\n    width: 100%;\n  }\n\n  @media (width >= 40rem) {\n    .container {\n      max-width: 40rem;\n    }\n  }\n\n  @media (width >= 48rem) {\n    .container {\n      max-width: 48rem;\n    }\n  }\n\n  @media (width >= 64rem) {\n    .container {\n      max-width: 64rem;\n    }\n  }\n\n  @media (width >= 80rem) {\n    .container {\n      max-width: 80rem;\n    }\n  }\n\n  @media (width >= 96rem) {\n    .container {\n      max-width: 96rem;\n    }\n  }\n\n  .-mx-1 {\n    margin-inline: calc(var(--spacing) * -1);\n  }\n\n  .mx-2 {\n    margin-inline: calc(var(--spacing) * 2);\n  }\n\n  .mx-3\\.5 {\n    margin-inline: calc(var(--spacing) * 3.5);\n  }\n\n  .mx-auto {\n    margin-inline: auto;\n  }\n\n  .my-0\\.5 {\n    margin-block: calc(var(--spacing) * .5);\n  }\n\n  .my-1 {\n    margin-block: calc(var(--spacing) * 1);\n  }\n\n  .-mt-4 {\n    margin-top: calc(var(--spacing) * -4);\n  }\n\n  .mt-1 {\n    margin-top: calc(var(--spacing) * 1);\n  }\n\n  .mt-1\\.5 {\n    margin-top: calc(var(--spacing) * 1.5);\n  }\n\n  .mt-2 {\n    margin-top: calc(var(--spacing) * 2);\n  }\n\n  .mt-3 {\n    margin-top: calc(var(--spacing) * 3);\n  }\n\n  .mt-4 {\n    margin-top: calc(var(--spacing) * 4);\n  }\n\n  .mt-8 {\n    margin-top: calc(var(--spacing) * 8);\n  }\n\n  .mt-auto {\n    margin-top: auto;\n  }\n\n  .mb-2 {\n    margin-bottom: calc(var(--spacing) * 2);\n  }\n\n  .mb-3 {\n    margin-bottom: calc(var(--spacing) * 3);\n  }\n\n  .mb-4 {\n    margin-bottom: calc(var(--spacing) * 4);\n  }\n\n  .mb-6 {\n    margin-bottom: calc(var(--spacing) * 6);\n  }\n\n  .mb-8 {\n    margin-bottom: calc(var(--spacing) * 8);\n  }\n\n  .-ml-4 {\n    margin-left: calc(var(--spacing) * -4);\n  }\n\n  .ml-1 {\n    margin-left: calc(var(--spacing) * 1);\n  }\n\n  .ml-auto {\n    margin-left: auto;\n  }\n\n  .line-clamp-1 {\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n    display: -webkit-box;\n    overflow: hidden;\n  }\n\n  .block {\n    display: block;\n  }\n\n  .flex {\n    display: flex;\n  }\n\n  .grid {\n    display: grid;\n  }\n\n  .hidden {\n    display: none;\n  }\n\n  .inline-block {\n    display: inline-block;\n  }\n\n  .inline-flex {\n    display: inline-flex;\n  }\n\n  .table {\n    display: table;\n  }\n\n  .table-caption {\n    display: table-caption;\n  }\n\n  .table-cell {\n    display: table-cell;\n  }\n\n  .table-row {\n    display: table-row;\n  }\n\n  .field-sizing-content {\n    field-sizing: content;\n  }\n\n  .aspect-square {\n    aspect-ratio: 1;\n  }\n\n  .aspect-video {\n    aspect-ratio: var(--aspect-video);\n  }\n\n  .size-2 {\n    width: calc(var(--spacing) * 2);\n    height: calc(var(--spacing) * 2);\n  }\n\n  .size-2\\.5 {\n    width: calc(var(--spacing) * 2.5);\n    height: calc(var(--spacing) * 2.5);\n  }\n\n  .size-3 {\n    width: calc(var(--spacing) * 3);\n    height: calc(var(--spacing) * 3);\n  }\n\n  .size-3\\.5 {\n    width: calc(var(--spacing) * 3.5);\n    height: calc(var(--spacing) * 3.5);\n  }\n\n  .size-4 {\n    width: calc(var(--spacing) * 4);\n    height: calc(var(--spacing) * 4);\n  }\n\n  .size-7 {\n    width: calc(var(--spacing) * 7);\n    height: calc(var(--spacing) * 7);\n  }\n\n  .size-8 {\n    width: calc(var(--spacing) * 8);\n    height: calc(var(--spacing) * 8);\n  }\n\n  .size-9 {\n    width: calc(var(--spacing) * 9);\n    height: calc(var(--spacing) * 9);\n  }\n\n  .size-10 {\n    width: calc(var(--spacing) * 10);\n    height: calc(var(--spacing) * 10);\n  }\n\n  .size-full {\n    width: 100%;\n    height: 100%;\n  }\n\n  .h-0 {\n    height: calc(var(--spacing) * 0);\n  }\n\n  .h-1\\.5 {\n    height: calc(var(--spacing) * 1.5);\n  }\n\n  .h-2 {\n    height: calc(var(--spacing) * 2);\n  }\n\n  .h-2\\.5 {\n    height: calc(var(--spacing) * 2.5);\n  }\n\n  .h-4 {\n    height: calc(var(--spacing) * 4);\n  }\n\n  .h-5 {\n    height: calc(var(--spacing) * 5);\n  }\n\n  .h-6 {\n    height: calc(var(--spacing) * 6);\n  }\n\n  .h-7 {\n    height: calc(var(--spacing) * 7);\n  }\n\n  .h-8 {\n    height: calc(var(--spacing) * 8);\n  }\n\n  .h-9 {\n    height: calc(var(--spacing) * 9);\n  }\n\n  .h-10 {\n    height: calc(var(--spacing) * 10);\n  }\n\n  .h-12 {\n    height: calc(var(--spacing) * 12);\n  }\n\n  .h-16 {\n    height: calc(var(--spacing) * 16);\n  }\n\n  .h-\\[1\\.15rem\\] {\n    height: 1.15rem;\n  }\n\n  .h-\\[21vh\\] {\n    height: 21vh;\n  }\n\n  .h-\\[25vh\\] {\n    height: 25vh;\n  }\n\n  .h-\\[97vh\\] {\n    height: 97vh;\n  }\n\n  .h-\\[100vh\\] {\n    height: 100vh;\n  }\n\n  .h-\\[105vh\\] {\n    height: 105vh;\n  }\n\n  .h-\\[118vh\\] {\n    height: 118vh;\n  }\n\n  .h-\\[169vh\\] {\n    height: 169vh;\n  }\n\n  .h-\\[193vh\\] {\n    height: 193vh;\n  }\n\n  .h-\\[200vh\\] {\n    height: 200vh;\n  }\n\n  .h-\\[312vh\\] {\n    height: 312vh;\n  }\n\n  .h-\\[340vh\\] {\n    height: 340vh;\n  }\n\n  .h-\\[1040vh\\] {\n    height: 1040vh;\n  }\n\n  .h-\\[calc\\(100\\%-1px\\)\\] {\n    height: calc(100% - 1px);\n  }\n\n  .h-\\[var\\(--radix-navigation-menu-viewport-height\\)\\] {\n    height: var(--radix-navigation-menu-viewport-height);\n  }\n\n  .h-\\[var\\(--radix-select-trigger-height\\)\\] {\n    height: var(--radix-select-trigger-height);\n  }\n\n  .h-auto {\n    height: auto;\n  }\n\n  .h-full {\n    height: 100%;\n  }\n\n  .h-px {\n    height: 1px;\n  }\n\n  .h-svh {\n    height: 100svh;\n  }\n\n  .max-h-\\(--radix-context-menu-content-available-height\\) {\n    max-height: var(--radix-context-menu-content-available-height);\n  }\n\n  .max-h-\\(--radix-dropdown-menu-content-available-height\\) {\n    max-height: var(--radix-dropdown-menu-content-available-height);\n  }\n\n  .max-h-\\(--radix-select-content-available-height\\) {\n    max-height: var(--radix-select-content-available-height);\n  }\n\n  .max-h-\\[300px\\] {\n    max-height: 300px;\n  }\n\n  .min-h-0 {\n    min-height: calc(var(--spacing) * 0);\n  }\n\n  .min-h-4 {\n    min-height: calc(var(--spacing) * 4);\n  }\n\n  .min-h-16 {\n    min-height: calc(var(--spacing) * 16);\n  }\n\n  .min-h-screen {\n    min-height: 100vh;\n  }\n\n  .min-h-svh {\n    min-height: 100svh;\n  }\n\n  .w-\\(--sidebar-width\\) {\n    width: var(--sidebar-width);\n  }\n\n  .w-0 {\n    width: calc(var(--spacing) * 0);\n  }\n\n  .w-1 {\n    width: calc(var(--spacing) * 1);\n  }\n\n  .w-2 {\n    width: calc(var(--spacing) * 2);\n  }\n\n  .w-2\\.5 {\n    width: calc(var(--spacing) * 2.5);\n  }\n\n  .w-3 {\n    width: calc(var(--spacing) * 3);\n  }\n\n  .w-3\\/4 {\n    width: 75%;\n  }\n\n  .w-4 {\n    width: calc(var(--spacing) * 4);\n  }\n\n  .w-5 {\n    width: calc(var(--spacing) * 5);\n  }\n\n  .w-6 {\n    width: calc(var(--spacing) * 6);\n  }\n\n  .w-8 {\n    width: calc(var(--spacing) * 8);\n  }\n\n  .w-9 {\n    width: calc(var(--spacing) * 9);\n  }\n\n  .w-12 {\n    width: calc(var(--spacing) * 12);\n  }\n\n  .w-64 {\n    width: calc(var(--spacing) * 64);\n  }\n\n  .w-72 {\n    width: calc(var(--spacing) * 72);\n  }\n\n  .w-\\[100px\\] {\n    width: 100px;\n  }\n\n  .w-auto {\n    width: auto;\n  }\n\n  .w-fit {\n    width: fit-content;\n  }\n\n  .w-full {\n    width: 100%;\n  }\n\n  .w-max {\n    width: max-content;\n  }\n\n  .w-px {\n    width: 1px;\n  }\n\n  .max-w-\\(--skeleton-width\\) {\n    max-width: var(--skeleton-width);\n  }\n\n  .max-w-4xl {\n    max-width: var(--container-4xl);\n  }\n\n  .max-w-6xl {\n    max-width: var(--container-6xl);\n  }\n\n  .max-w-7xl {\n    max-width: var(--container-7xl);\n  }\n\n  .max-w-\\[calc\\(100\\%-2rem\\)\\] {\n    max-width: calc(100% - 2rem);\n  }\n\n  .max-w-max {\n    max-width: max-content;\n  }\n\n  .max-w-md {\n    max-width: var(--container-md);\n  }\n\n  .min-w-0 {\n    min-width: calc(var(--spacing) * 0);\n  }\n\n  .min-w-5 {\n    min-width: calc(var(--spacing) * 5);\n  }\n\n  .min-w-8 {\n    min-width: calc(var(--spacing) * 8);\n  }\n\n  .min-w-9 {\n    min-width: calc(var(--spacing) * 9);\n  }\n\n  .min-w-10 {\n    min-width: calc(var(--spacing) * 10);\n  }\n\n  .min-w-\\[8rem\\] {\n    min-width: 8rem;\n  }\n\n  .min-w-\\[12rem\\] {\n    min-width: 12rem;\n  }\n\n  .min-w-\\[var\\(--radix-select-trigger-width\\)\\] {\n    min-width: var(--radix-select-trigger-width);\n  }\n\n  .flex-1 {\n    flex: 1;\n  }\n\n  .shrink-0 {\n    flex-shrink: 0;\n  }\n\n  .grow {\n    flex-grow: 1;\n  }\n\n  .grow-0 {\n    flex-grow: 0;\n  }\n\n  .basis-full {\n    flex-basis: 100%;\n  }\n\n  .caption-bottom {\n    caption-side: bottom;\n  }\n\n  .border-collapse {\n    border-collapse: collapse;\n  }\n\n  .origin-\\(--radix-context-menu-content-transform-origin\\) {\n    transform-origin: var(--radix-context-menu-content-transform-origin);\n  }\n\n  .origin-\\(--radix-dropdown-menu-content-transform-origin\\) {\n    transform-origin: var(--radix-dropdown-menu-content-transform-origin);\n  }\n\n  .origin-\\(--radix-hover-card-content-transform-origin\\) {\n    transform-origin: var(--radix-hover-card-content-transform-origin);\n  }\n\n  .origin-\\(--radix-menubar-content-transform-origin\\) {\n    transform-origin: var(--radix-menubar-content-transform-origin);\n  }\n\n  .origin-\\(--radix-popover-content-transform-origin\\) {\n    transform-origin: var(--radix-popover-content-transform-origin);\n  }\n\n  .origin-\\(--radix-select-content-transform-origin\\) {\n    transform-origin: var(--radix-select-content-transform-origin);\n  }\n\n  .origin-\\(--radix-tooltip-content-transform-origin\\) {\n    transform-origin: var(--radix-tooltip-content-transform-origin);\n  }\n\n  .-translate-x-1\\/2 {\n    --tw-translate-x: calc(calc(1 / 2 * 100%) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .-translate-x-px {\n    --tw-translate-x: -1px;\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .translate-x-\\[-50\\%\\] {\n    --tw-translate-x: -50%;\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .translate-x-px {\n    --tw-translate-x: 1px;\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .-translate-y-1\\/2 {\n    --tw-translate-y: calc(calc(1 / 2 * 100%) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .translate-y-0\\.5 {\n    --tw-translate-y: calc(var(--spacing) * .5);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .translate-y-\\[-50\\%\\] {\n    --tw-translate-y: -50%;\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .translate-y-\\[calc\\(-50\\%_-_2px\\)\\] {\n    --tw-translate-y: calc(-50% - 2px);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .rotate-45 {\n    rotate: 45deg;\n  }\n\n  .rotate-90 {\n    rotate: 90deg;\n  }\n\n  .transform {\n    transform: var(--tw-rotate-x) var(--tw-rotate-y) var(--tw-rotate-z) var(--tw-skew-x) var(--tw-skew-y);\n  }\n\n  .animate-bounce {\n    animation: var(--animate-bounce);\n  }\n\n  .animate-caret-blink {\n    animation: 1.25s ease-out infinite caret-blink;\n  }\n\n  .animate-in {\n    animation: enter var(--tw-duration, .15s) var(--tw-ease, ease);\n  }\n\n  .animate-pulse {\n    animation: var(--animate-pulse);\n  }\n\n  .animate-spin {\n    animation: var(--animate-spin);\n  }\n\n  .cursor-default {\n    cursor: default;\n  }\n\n  .touch-none {\n    touch-action: none;\n  }\n\n  .resize-none {\n    resize: none;\n  }\n\n  .scroll-my-1 {\n    scroll-margin-block: calc(var(--spacing) * 1);\n  }\n\n  .scroll-py-1 {\n    scroll-padding-block: calc(var(--spacing) * 1);\n  }\n\n  .list-none {\n    list-style-type: none;\n  }\n\n  .auto-rows-min {\n    grid-auto-rows: min-content;\n  }\n\n  .grid-cols-1 {\n    grid-template-columns: repeat(1, minmax(0, 1fr));\n  }\n\n  .grid-cols-\\[0_1fr\\] {\n    grid-template-columns: 0 1fr;\n  }\n\n  .grid-rows-\\[auto_auto\\] {\n    grid-template-rows: auto auto;\n  }\n\n  .flex-col {\n    flex-direction: column;\n  }\n\n  .flex-col-reverse {\n    flex-direction: column-reverse;\n  }\n\n  .flex-row {\n    flex-direction: row;\n  }\n\n  .flex-wrap {\n    flex-wrap: wrap;\n  }\n\n  .items-center {\n    align-items: center;\n  }\n\n  .items-end {\n    align-items: flex-end;\n  }\n\n  .items-start {\n    align-items: flex-start;\n  }\n\n  .items-stretch {\n    align-items: stretch;\n  }\n\n  .justify-between {\n    justify-content: space-between;\n  }\n\n  .justify-center {\n    justify-content: center;\n  }\n\n  .justify-items-start {\n    justify-items: start;\n  }\n\n  .gap-1 {\n    gap: calc(var(--spacing) * 1);\n  }\n\n  .gap-1\\.5 {\n    gap: calc(var(--spacing) * 1.5);\n  }\n\n  .gap-2 {\n    gap: calc(var(--spacing) * 2);\n  }\n\n  .gap-3 {\n    gap: calc(var(--spacing) * 3);\n  }\n\n  .gap-4 {\n    gap: calc(var(--spacing) * 4);\n  }\n\n  .gap-6 {\n    gap: calc(var(--spacing) * 6);\n  }\n\n  .gap-8 {\n    gap: calc(var(--spacing) * 8);\n  }\n\n  :where(.space-y-1 > :not(:last-child)) {\n    --tw-space-y-reverse: 0;\n    margin-block-start: calc(calc(var(--spacing) * 1) * var(--tw-space-y-reverse));\n    margin-block-end: calc(calc(var(--spacing) * 1) * calc(1 - var(--tw-space-y-reverse)));\n  }\n\n  :where(.space-y-4 > :not(:last-child)) {\n    --tw-space-y-reverse: 0;\n    margin-block-start: calc(calc(var(--spacing) * 4) * var(--tw-space-y-reverse));\n    margin-block-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-y-reverse)));\n  }\n\n  :where(.space-x-1 > :not(:last-child)) {\n    --tw-space-x-reverse: 0;\n    margin-inline-start: calc(calc(var(--spacing) * 1) * var(--tw-space-x-reverse));\n    margin-inline-end: calc(calc(var(--spacing) * 1) * calc(1 - var(--tw-space-x-reverse)));\n  }\n\n  :where(.space-x-4 > :not(:last-child)) {\n    --tw-space-x-reverse: 0;\n    margin-inline-start: calc(calc(var(--spacing) * 4) * var(--tw-space-x-reverse));\n    margin-inline-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-x-reverse)));\n  }\n\n  :where(.space-x-6 > :not(:last-child)) {\n    --tw-space-x-reverse: 0;\n    margin-inline-start: calc(calc(var(--spacing) * 6) * var(--tw-space-x-reverse));\n    margin-inline-end: calc(calc(var(--spacing) * 6) * calc(1 - var(--tw-space-x-reverse)));\n  }\n\n  :where(.space-x-8 > :not(:last-child)) {\n    --tw-space-x-reverse: 0;\n    margin-inline-start: calc(calc(var(--spacing) * 8) * var(--tw-space-x-reverse));\n    margin-inline-end: calc(calc(var(--spacing) * 8) * calc(1 - var(--tw-space-x-reverse)));\n  }\n\n  .gap-y-0\\.5 {\n    row-gap: calc(var(--spacing) * .5);\n  }\n\n  .self-start {\n    align-self: flex-start;\n  }\n\n  .justify-self-end {\n    justify-self: flex-end;\n  }\n\n  .overflow-auto {\n    overflow: auto;\n  }\n\n  .overflow-hidden {\n    overflow: hidden;\n  }\n\n  .overflow-x-auto {\n    overflow-x: auto;\n  }\n\n  .overflow-x-hidden {\n    overflow-x: hidden;\n  }\n\n  .overflow-y-auto {\n    overflow-y: auto;\n  }\n\n  .rounded {\n    border-radius: .25rem;\n  }\n\n  .rounded-\\[2px\\] {\n    border-radius: 2px;\n  }\n\n  .rounded-\\[4px\\] {\n    border-radius: 4px;\n  }\n\n  .rounded-\\[inherit\\] {\n    border-radius: inherit;\n  }\n\n  .rounded-full {\n    border-radius: 3.40282e38px;\n  }\n\n  .rounded-lg {\n    border-radius: var(--radius);\n  }\n\n  .rounded-md {\n    border-radius: calc(var(--radius)  - 2px);\n  }\n\n  .rounded-none {\n    border-radius: 0;\n  }\n\n  .rounded-sm {\n    border-radius: calc(var(--radius)  - 4px);\n  }\n\n  .rounded-xl {\n    border-radius: calc(var(--radius)  + 4px);\n  }\n\n  .rounded-xs {\n    border-radius: var(--radius-xs);\n  }\n\n  .rounded-tl-sm {\n    border-top-left-radius: calc(var(--radius)  - 4px);\n  }\n\n  .border {\n    border-style: var(--tw-border-style);\n    border-width: 1px;\n  }\n\n  .border-2 {\n    border-style: var(--tw-border-style);\n    border-width: 2px;\n  }\n\n  .border-4 {\n    border-style: var(--tw-border-style);\n    border-width: 4px;\n  }\n\n  .border-\\[1\\.5px\\] {\n    border-style: var(--tw-border-style);\n    border-width: 1.5px;\n  }\n\n  .border-y {\n    border-block-style: var(--tw-border-style);\n    border-block-width: 1px;\n  }\n\n  .border-t {\n    border-top-style: var(--tw-border-style);\n    border-top-width: 1px;\n  }\n\n  .border-r {\n    border-right-style: var(--tw-border-style);\n    border-right-width: 1px;\n  }\n\n  .border-b {\n    border-bottom-style: var(--tw-border-style);\n    border-bottom-width: 1px;\n  }\n\n  .border-l {\n    border-left-style: var(--tw-border-style);\n    border-left-width: 1px;\n  }\n\n  .border-dashed {\n    --tw-border-style: dashed;\n    border-style: dashed;\n  }\n\n  .border-\\(--color-border\\) {\n    border-color: var(--color-border);\n  }\n\n  .border-border\\/50 {\n    border-color: var(--border);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .border-border\\/50 {\n      border-color: color-mix(in oklab, var(--border) 50%, transparent);\n    }\n  }\n\n  .border-cyan-400 {\n    border-color: var(--color-cyan-400);\n  }\n\n  .border-cyan-500\\/30 {\n    border-color: color-mix(in srgb, oklch(.715 .143 215.221) 30%, transparent);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .border-cyan-500\\/30 {\n      border-color: color-mix(in oklab, var(--color-cyan-500) 30%, transparent);\n    }\n  }\n\n  .border-gray-700 {\n    border-color: var(--color-gray-700);\n  }\n\n  .border-gray-800 {\n    border-color: var(--color-gray-800);\n  }\n\n  .border-input {\n    border-color: var(--input);\n  }\n\n  .border-primary {\n    border-color: var(--primary);\n  }\n\n  .border-purple-500\\/30 {\n    border-color: color-mix(in srgb, oklch(.627 .265 303.9) 30%, transparent);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .border-purple-500\\/30 {\n      border-color: color-mix(in oklab, var(--color-purple-500) 30%, transparent);\n    }\n  }\n\n  .border-sidebar-border {\n    border-color: var(--sidebar-border);\n  }\n\n  .border-transparent {\n    border-color: #0000;\n  }\n\n  .border-t-transparent {\n    border-top-color: #0000;\n  }\n\n  .border-l-transparent {\n    border-left-color: #0000;\n  }\n\n  .bg-\\(--color-bg\\) {\n    background-color: var(--color-bg);\n  }\n\n  .bg-accent {\n    background-color: var(--accent);\n  }\n\n  .bg-background {\n    background-color: var(--background);\n  }\n\n  .bg-black {\n    background-color: var(--color-black);\n  }\n\n  .bg-black\\/20 {\n    background-color: #0003;\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .bg-black\\/20 {\n      background-color: color-mix(in oklab, var(--color-black) 20%, transparent);\n    }\n  }\n\n  .bg-black\\/50 {\n    background-color: #00000080;\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .bg-black\\/50 {\n      background-color: color-mix(in oklab, var(--color-black) 50%, transparent);\n    }\n  }\n\n  .bg-black\\/60 {\n    background-color: #0009;\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .bg-black\\/60 {\n      background-color: color-mix(in oklab, var(--color-black) 60%, transparent);\n    }\n  }\n\n  .bg-black\\/80 {\n    background-color: #000c;\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .bg-black\\/80 {\n      background-color: color-mix(in oklab, var(--color-black) 80%, transparent);\n    }\n  }\n\n  .bg-border {\n    background-color: var(--border);\n  }\n\n  .bg-card {\n    background-color: var(--card);\n  }\n\n  .bg-destructive {\n    background-color: var(--destructive);\n  }\n\n  .bg-foreground {\n    background-color: var(--foreground);\n  }\n\n  .bg-gray-50 {\n    background-color: var(--color-gray-50);\n  }\n\n  .bg-gray-100 {\n    background-color: var(--color-gray-100);\n  }\n\n  .bg-gray-900 {\n    background-color: var(--color-gray-900);\n  }\n\n  .bg-input-background {\n    background-color: var(--input-background);\n  }\n\n  .bg-muted {\n    background-color: var(--muted);\n  }\n\n  .bg-muted\\/50 {\n    background-color: var(--muted);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .bg-muted\\/50 {\n      background-color: color-mix(in oklab, var(--muted) 50%, transparent);\n    }\n  }\n\n  .bg-popover {\n    background-color: var(--popover);\n  }\n\n  .bg-primary {\n    background-color: var(--primary);\n  }\n\n  .bg-primary\\/20 {\n    background-color: var(--primary);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .bg-primary\\/20 {\n      background-color: color-mix(in oklab, var(--primary) 20%, transparent);\n    }\n  }\n\n  .bg-secondary {\n    background-color: var(--secondary);\n  }\n\n  .bg-sidebar {\n    background-color: var(--sidebar);\n  }\n\n  .bg-sidebar-border {\n    background-color: var(--sidebar-border);\n  }\n\n  .bg-transparent {\n    background-color: #0000;\n  }\n\n  .bg-white {\n    background-color: var(--color-white);\n  }\n\n  .bg-white\\/90 {\n    background-color: #ffffffe6;\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .bg-white\\/90 {\n      background-color: color-mix(in oklab, var(--color-white) 90%, transparent);\n    }\n  }\n\n  .bg-gradient-to-b {\n    --tw-gradient-position: to bottom in oklab;\n    background-image: linear-gradient(var(--tw-gradient-stops));\n  }\n\n  .bg-gradient-to-br {\n    --tw-gradient-position: to bottom right in oklab;\n    background-image: linear-gradient(var(--tw-gradient-stops));\n  }\n\n  .bg-gradient-to-r {\n    --tw-gradient-position: to right in oklab;\n    background-image: linear-gradient(var(--tw-gradient-stops));\n  }\n\n  .bg-gradient-to-t {\n    --tw-gradient-position: to top in oklab;\n    background-image: linear-gradient(var(--tw-gradient-stops));\n  }\n\n  .from-black {\n    --tw-gradient-from: var(--color-black);\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  .from-black\\/80 {\n    --tw-gradient-from: #000c;\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .from-black\\/80 {\n      --tw-gradient-from: color-mix(in oklab, var(--color-black) 80%, transparent);\n    }\n  }\n\n  .from-blue-50 {\n    --tw-gradient-from: var(--color-blue-50);\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  .from-cyan-400 {\n    --tw-gradient-from: var(--color-cyan-400);\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  .from-cyan-500 {\n    --tw-gradient-from: var(--color-cyan-500);\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  .from-cyan-500\\/20 {\n    --tw-gradient-from: color-mix(in srgb, oklch(.715 .143 215.221) 20%, transparent);\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .from-cyan-500\\/20 {\n      --tw-gradient-from: color-mix(in oklab, var(--color-cyan-500) 20%, transparent);\n    }\n  }\n\n  .via-black\\/40 {\n    --tw-gradient-via: #0006;\n    --tw-gradient-via-stops: var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-via) var(--tw-gradient-via-position), var(--tw-gradient-to) var(--tw-gradient-to-position);\n    --tw-gradient-stops: var(--tw-gradient-via-stops);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .via-black\\/40 {\n      --tw-gradient-via: color-mix(in oklab, var(--color-black) 40%, transparent);\n    }\n  }\n\n  .via-gray-900 {\n    --tw-gradient-via: var(--color-gray-900);\n    --tw-gradient-via-stops: var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-via) var(--tw-gradient-via-position), var(--tw-gradient-to) var(--tw-gradient-to-position);\n    --tw-gradient-stops: var(--tw-gradient-via-stops);\n  }\n\n  .via-transparent {\n    --tw-gradient-via: transparent;\n    --tw-gradient-via-stops: var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-via) var(--tw-gradient-via-position), var(--tw-gradient-to) var(--tw-gradient-to-position);\n    --tw-gradient-stops: var(--tw-gradient-via-stops);\n  }\n\n  .to-black {\n    --tw-gradient-to: var(--color-black);\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  .to-blue-600 {\n    --tw-gradient-to: var(--color-blue-600);\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  .to-cyan-100 {\n    --tw-gradient-to: var(--color-cyan-100);\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  .to-cyan-500\\/20 {\n    --tw-gradient-to: color-mix(in srgb, oklch(.715 .143 215.221) 20%, transparent);\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .to-cyan-500\\/20 {\n      --tw-gradient-to: color-mix(in oklab, var(--color-cyan-500) 20%, transparent);\n    }\n  }\n\n  .to-transparent {\n    --tw-gradient-to: transparent;\n    --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n  }\n\n  .bg-clip-text {\n    background-clip: text;\n  }\n\n  .fill-current {\n    fill: currentColor;\n  }\n\n  .fill-primary {\n    fill: var(--primary);\n  }\n\n  .p-0 {\n    padding: calc(var(--spacing) * 0);\n  }\n\n  .p-1 {\n    padding: calc(var(--spacing) * 1);\n  }\n\n  .p-2 {\n    padding: calc(var(--spacing) * 2);\n  }\n\n  .p-3 {\n    padding: calc(var(--spacing) * 3);\n  }\n\n  .p-4 {\n    padding: calc(var(--spacing) * 4);\n  }\n\n  .p-6 {\n    padding: calc(var(--spacing) * 6);\n  }\n\n  .p-\\[3px\\] {\n    padding: 3px;\n  }\n\n  .p-px {\n    padding: 1px;\n  }\n\n  .px-1 {\n    padding-inline: calc(var(--spacing) * 1);\n  }\n\n  .px-1\\.5 {\n    padding-inline: calc(var(--spacing) * 1.5);\n  }\n\n  .px-2 {\n    padding-inline: calc(var(--spacing) * 2);\n  }\n\n  .px-2\\.5 {\n    padding-inline: calc(var(--spacing) * 2.5);\n  }\n\n  .px-3 {\n    padding-inline: calc(var(--spacing) * 3);\n  }\n\n  .px-4 {\n    padding-inline: calc(var(--spacing) * 4);\n  }\n\n  .px-6 {\n    padding-inline: calc(var(--spacing) * 6);\n  }\n\n  .px-8 {\n    padding-inline: calc(var(--spacing) * 8);\n  }\n\n  .py-0\\.5 {\n    padding-block: calc(var(--spacing) * .5);\n  }\n\n  .py-1 {\n    padding-block: calc(var(--spacing) * 1);\n  }\n\n  .py-1\\.5 {\n    padding-block: calc(var(--spacing) * 1.5);\n  }\n\n  .py-2 {\n    padding-block: calc(var(--spacing) * 2);\n  }\n\n  .py-3 {\n    padding-block: calc(var(--spacing) * 3);\n  }\n\n  .py-4 {\n    padding-block: calc(var(--spacing) * 4);\n  }\n\n  .py-6 {\n    padding-block: calc(var(--spacing) * 6);\n  }\n\n  .py-12 {\n    padding-block: calc(var(--spacing) * 12);\n  }\n\n  .py-20 {\n    padding-block: calc(var(--spacing) * 20);\n  }\n\n  .pt-0 {\n    padding-top: calc(var(--spacing) * 0);\n  }\n\n  .pt-1 {\n    padding-top: calc(var(--spacing) * 1);\n  }\n\n  .pt-3 {\n    padding-top: calc(var(--spacing) * 3);\n  }\n\n  .pt-4 {\n    padding-top: calc(var(--spacing) * 4);\n  }\n\n  .pt-6 {\n    padding-top: calc(var(--spacing) * 6);\n  }\n\n  .pt-8 {\n    padding-top: calc(var(--spacing) * 8);\n  }\n\n  .pt-16 {\n    padding-top: calc(var(--spacing) * 16);\n  }\n\n  .pt-20 {\n    padding-top: calc(var(--spacing) * 20);\n  }\n\n  .pr-2 {\n    padding-right: calc(var(--spacing) * 2);\n  }\n\n  .pr-2\\.5 {\n    padding-right: calc(var(--spacing) * 2.5);\n  }\n\n  .pr-8 {\n    padding-right: calc(var(--spacing) * 8);\n  }\n\n  .pb-3 {\n    padding-bottom: calc(var(--spacing) * 3);\n  }\n\n  .pb-4 {\n    padding-bottom: calc(var(--spacing) * 4);\n  }\n\n  .pb-6 {\n    padding-bottom: calc(var(--spacing) * 6);\n  }\n\n  .pb-20 {\n    padding-bottom: calc(var(--spacing) * 20);\n  }\n\n  .pl-2 {\n    padding-left: calc(var(--spacing) * 2);\n  }\n\n  .pl-4 {\n    padding-left: calc(var(--spacing) * 4);\n  }\n\n  .pl-8 {\n    padding-left: calc(var(--spacing) * 8);\n  }\n\n  .text-center {\n    text-align: center;\n  }\n\n  .text-left {\n    text-align: left;\n  }\n\n  .align-middle {\n    vertical-align: middle;\n  }\n\n  .font-mono {\n    font-family: var(--font-mono);\n  }\n\n  .text-3xl {\n    font-size: var(--text-3xl);\n    line-height: var(--tw-leading, var(--text-3xl--line-height));\n  }\n\n  .text-4xl {\n    font-size: var(--text-4xl);\n    line-height: var(--tw-leading, var(--text-4xl--line-height));\n  }\n\n  .text-6xl {\n    font-size: var(--text-6xl);\n    line-height: var(--tw-leading, var(--text-6xl--line-height));\n  }\n\n  .text-base {\n    font-size: var(--text-base);\n    line-height: var(--tw-leading, var(--text-base--line-height));\n  }\n\n  .text-lg {\n    font-size: var(--text-lg);\n    line-height: var(--tw-leading, var(--text-lg--line-height));\n  }\n\n  .text-sm {\n    font-size: var(--text-sm);\n    line-height: var(--tw-leading, var(--text-sm--line-height));\n  }\n\n  .text-xl {\n    font-size: var(--text-xl);\n    line-height: var(--tw-leading, var(--text-xl--line-height));\n  }\n\n  .text-xs {\n    font-size: var(--text-xs);\n    line-height: var(--tw-leading, var(--text-xs--line-height));\n  }\n\n  .text-\\[0\\.8rem\\] {\n    font-size: .8rem;\n  }\n\n  .leading-none {\n    --tw-leading: 1;\n    line-height: 1;\n  }\n\n  .font-bold {\n    --tw-font-weight: var(--font-weight-bold);\n    font-weight: var(--font-weight-bold);\n  }\n\n  .font-medium {\n    --tw-font-weight: var(--font-weight-medium);\n    font-weight: var(--font-weight-medium);\n  }\n\n  .font-normal {\n    --tw-font-weight: var(--font-weight-normal);\n    font-weight: var(--font-weight-normal);\n  }\n\n  .font-semibold {\n    --tw-font-weight: var(--font-weight-semibold);\n    font-weight: var(--font-weight-semibold);\n  }\n\n  .tracking-tight {\n    --tw-tracking: var(--tracking-tight);\n    letter-spacing: var(--tracking-tight);\n  }\n\n  .tracking-wider {\n    --tw-tracking: var(--tracking-wider);\n    letter-spacing: var(--tracking-wider);\n  }\n\n  .tracking-widest {\n    --tw-tracking: var(--tracking-widest);\n    letter-spacing: var(--tracking-widest);\n  }\n\n  .text-balance {\n    text-wrap: balance;\n  }\n\n  .break-words {\n    overflow-wrap: break-word;\n  }\n\n  .whitespace-nowrap {\n    white-space: nowrap;\n  }\n\n  .text-accent-foreground {\n    color: var(--accent-foreground);\n  }\n\n  .text-blue-400 {\n    color: var(--color-blue-400);\n  }\n\n  .text-blue-600 {\n    color: var(--color-blue-600);\n  }\n\n  .text-card-foreground {\n    color: var(--card-foreground);\n  }\n\n  .text-current {\n    color: currentColor;\n  }\n\n  .text-cyan-300 {\n    color: var(--color-cyan-300);\n  }\n\n  .text-cyan-400 {\n    color: var(--color-cyan-400);\n  }\n\n  .text-destructive {\n    color: var(--destructive);\n  }\n\n  .text-emerald-300 {\n    color: var(--color-emerald-300);\n  }\n\n  .text-emerald-400 {\n    color: var(--color-emerald-400);\n  }\n\n  .text-foreground {\n    color: var(--foreground);\n  }\n\n  .text-gray-300 {\n    color: var(--color-gray-300);\n  }\n\n  .text-gray-400 {\n    color: var(--color-gray-400);\n  }\n\n  .text-gray-600 {\n    color: var(--color-gray-600);\n  }\n\n  .text-gray-700 {\n    color: var(--color-gray-700);\n  }\n\n  .text-gray-900 {\n    color: var(--color-gray-900);\n  }\n\n  .text-green-400 {\n    color: var(--color-green-400);\n  }\n\n  .text-indigo-400 {\n    color: var(--color-indigo-400);\n  }\n\n  .text-muted-foreground {\n    color: var(--muted-foreground);\n  }\n\n  .text-orange-400 {\n    color: var(--color-orange-400);\n  }\n\n  .text-pink-300 {\n    color: var(--color-pink-300);\n  }\n\n  .text-pink-400 {\n    color: var(--color-pink-400);\n  }\n\n  .text-popover-foreground {\n    color: var(--popover-foreground);\n  }\n\n  .text-primary {\n    color: var(--primary);\n  }\n\n  .text-primary-foreground {\n    color: var(--primary-foreground);\n  }\n\n  .text-purple-300 {\n    color: var(--color-purple-300);\n  }\n\n  .text-purple-400 {\n    color: var(--color-purple-400);\n  }\n\n  .text-red-400 {\n    color: var(--color-red-400);\n  }\n\n  .text-secondary-foreground {\n    color: var(--secondary-foreground);\n  }\n\n  .text-sidebar-foreground {\n    color: var(--sidebar-foreground);\n  }\n\n  .text-sidebar-foreground\\/70 {\n    color: var(--sidebar-foreground);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .text-sidebar-foreground\\/70 {\n      color: color-mix(in oklab, var(--sidebar-foreground) 70%, transparent);\n    }\n  }\n\n  .text-transparent {\n    color: #0000;\n  }\n\n  .text-white {\n    color: var(--color-white);\n  }\n\n  .text-white\\/60 {\n    color: #fff9;\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .text-white\\/60 {\n      color: color-mix(in oklab, var(--color-white) 60%, transparent);\n    }\n  }\n\n  .text-white\\/70 {\n    color: #ffffffb3;\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .text-white\\/70 {\n      color: color-mix(in oklab, var(--color-white) 70%, transparent);\n    }\n  }\n\n  .text-white\\/80 {\n    color: #fffc;\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .text-white\\/80 {\n      color: color-mix(in oklab, var(--color-white) 80%, transparent);\n    }\n  }\n\n  .text-yellow-400 {\n    color: var(--color-yellow-400);\n  }\n\n  .uppercase {\n    text-transform: uppercase;\n  }\n\n  .tabular-nums {\n    --tw-numeric-spacing: tabular-nums;\n    font-variant-numeric: var(--tw-ordinal, ) var(--tw-slashed-zero, ) var(--tw-numeric-figure, ) var(--tw-numeric-spacing, ) var(--tw-numeric-fraction, );\n  }\n\n  .underline-offset-4 {\n    text-underline-offset: 4px;\n  }\n\n  .opacity-40 {\n    opacity: .4;\n  }\n\n  .opacity-50 {\n    opacity: .5;\n  }\n\n  .opacity-60 {\n    opacity: .6;\n  }\n\n  .opacity-70 {\n    opacity: .7;\n  }\n\n  .opacity-80 {\n    opacity: .8;\n  }\n\n  .shadow {\n    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, #0000001a), 0 1px 2px -1px var(--tw-shadow-color, #0000001a);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .shadow-2xl {\n    --tw-shadow: 0 25px 50px -12px var(--tw-shadow-color, #00000040);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .shadow-\\[0_0_0_1px_hsl\\(var\\(--sidebar-border\\)\\)\\] {\n    --tw-shadow: 0 0 0 1px var(--tw-shadow-color, hsl(var(--sidebar-border)));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .shadow-lg {\n    --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, #0000001a), 0 4px 6px -4px var(--tw-shadow-color, #0000001a);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .shadow-md {\n    --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, #0000001a), 0 2px 4px -2px var(--tw-shadow-color, #0000001a);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .shadow-none {\n    --tw-shadow: 0 0 #0000;\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .shadow-sm {\n    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, #0000001a), 0 1px 2px -1px var(--tw-shadow-color, #0000001a);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .shadow-xl {\n    --tw-shadow: 0 20px 25px -5px var(--tw-shadow-color, #0000001a), 0 8px 10px -6px var(--tw-shadow-color, #0000001a);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .shadow-xs {\n    --tw-shadow: 0 1px 2px 0 var(--tw-shadow-color, #0000000d);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .ring-0 {\n    --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .shadow-cyan-500\\/20 {\n    --tw-shadow-color: color-mix(in srgb, oklch(.715 .143 215.221) 20%, transparent);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .shadow-cyan-500\\/20 {\n      --tw-shadow-color: color-mix(in oklab, color-mix(in oklab, var(--color-cyan-500) 20%, transparent) var(--tw-shadow-alpha), transparent);\n    }\n  }\n\n  .ring-ring\\/50 {\n    --tw-ring-color: var(--ring);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .ring-ring\\/50 {\n      --tw-ring-color: color-mix(in oklab, var(--ring) 50%, transparent);\n    }\n  }\n\n  .ring-sidebar-ring {\n    --tw-ring-color: var(--sidebar-ring);\n  }\n\n  .ring-offset-background {\n    --tw-ring-offset-color: var(--background);\n  }\n\n  .outline-hidden {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n\n  @media (forced-colors: active) {\n    .outline-hidden {\n      outline-offset: 2px;\n      outline: 2px solid #0000;\n    }\n  }\n\n  .outline {\n    outline-style: var(--tw-outline-style);\n    outline-width: 1px;\n  }\n\n  .filter {\n    filter: var(--tw-blur, ) var(--tw-brightness, ) var(--tw-contrast, ) var(--tw-grayscale, ) var(--tw-hue-rotate, ) var(--tw-invert, ) var(--tw-saturate, ) var(--tw-sepia, ) var(--tw-drop-shadow, );\n  }\n\n  .backdrop-blur {\n    --tw-backdrop-blur: blur(8px);\n    -webkit-backdrop-filter: var(--tw-backdrop-blur, ) var(--tw-backdrop-brightness, ) var(--tw-backdrop-contrast, ) var(--tw-backdrop-grayscale, ) var(--tw-backdrop-hue-rotate, ) var(--tw-backdrop-invert, ) var(--tw-backdrop-opacity, ) var(--tw-backdrop-saturate, ) var(--tw-backdrop-sepia, );\n    backdrop-filter: var(--tw-backdrop-blur, ) var(--tw-backdrop-brightness, ) var(--tw-backdrop-contrast, ) var(--tw-backdrop-grayscale, ) var(--tw-backdrop-hue-rotate, ) var(--tw-backdrop-invert, ) var(--tw-backdrop-opacity, ) var(--tw-backdrop-saturate, ) var(--tw-backdrop-sepia, );\n  }\n\n  .backdrop-blur-sm {\n    --tw-backdrop-blur: blur(var(--blur-sm));\n    -webkit-backdrop-filter: var(--tw-backdrop-blur, ) var(--tw-backdrop-brightness, ) var(--tw-backdrop-contrast, ) var(--tw-backdrop-grayscale, ) var(--tw-backdrop-hue-rotate, ) var(--tw-backdrop-invert, ) var(--tw-backdrop-opacity, ) var(--tw-backdrop-saturate, ) var(--tw-backdrop-sepia, );\n    backdrop-filter: var(--tw-backdrop-blur, ) var(--tw-backdrop-brightness, ) var(--tw-backdrop-contrast, ) var(--tw-backdrop-grayscale, ) var(--tw-backdrop-hue-rotate, ) var(--tw-backdrop-invert, ) var(--tw-backdrop-opacity, ) var(--tw-backdrop-saturate, ) var(--tw-backdrop-sepia, );\n  }\n\n  .transition {\n    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, -webkit-backdrop-filter, backdrop-filter;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-\\[color\\,box-shadow\\] {\n    transition-property: color, box-shadow;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-\\[left\\,right\\,width\\] {\n    transition-property: left, right, width;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-\\[margin\\,opacity\\] {\n    transition-property: margin, opacity;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-\\[width\\,height\\,padding\\] {\n    transition-property: width, height, padding;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-\\[width\\] {\n    transition-property: width;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-all {\n    transition-property: all;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-colors {\n    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-opacity {\n    transition-property: opacity;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-shadow {\n    transition-property: box-shadow;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-transform {\n    transition-property: transform, translate, scale, rotate;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n\n  .transition-none {\n    transition-property: none;\n  }\n\n  .duration-200 {\n    --tw-duration: .2s;\n    transition-duration: .2s;\n  }\n\n  .duration-300 {\n    --tw-duration: .3s;\n    transition-duration: .3s;\n  }\n\n  .duration-1000 {\n    --tw-duration: 1s;\n    transition-duration: 1s;\n  }\n\n  .ease-in-out {\n    --tw-ease: var(--ease-in-out);\n    transition-timing-function: var(--ease-in-out);\n  }\n\n  .ease-linear {\n    --tw-ease: linear;\n    transition-timing-function: linear;\n  }\n\n  .outline-none {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n\n  .select-none {\n    -webkit-user-select: none;\n    user-select: none;\n  }\n\n  .fade-in-0 {\n    --tw-enter-opacity: 0;\n  }\n\n  .zoom-in-95 {\n    --tw-enter-scale: .95;\n  }\n\n  .group-focus-within\\/menu-item\\:opacity-100:is(:where(.group\\/menu-item):focus-within *) {\n    opacity: 1;\n  }\n\n  @media (hover: hover) {\n    .group-hover\\/menu-item\\:opacity-100:is(:where(.group\\/menu-item):hover *) {\n      opacity: 1;\n    }\n  }\n\n  .group-has-data-\\[sidebar\\=menu-action\\]\\/menu-item\\:pr-8:is(:where(.group\\/menu-item):has([data-sidebar=\"menu-action\"]) *) {\n    padding-right: calc(var(--spacing) * 8);\n  }\n\n  .group-data-\\[collapsible\\=icon\\]\\:-mt-8:is(:where(.group)[data-collapsible=\"icon\"] *) {\n    margin-top: calc(var(--spacing) * -8);\n  }\n\n  .group-data-\\[collapsible\\=icon\\]\\:hidden:is(:where(.group)[data-collapsible=\"icon\"] *) {\n    display: none;\n  }\n\n  .group-data-\\[collapsible\\=icon\\]\\:size-8\\!:is(:where(.group)[data-collapsible=\"icon\"] *) {\n    width: calc(var(--spacing) * 8) !important;\n    height: calc(var(--spacing) * 8) !important;\n  }\n\n  .group-data-\\[collapsible\\=icon\\]\\:w-\\(--sidebar-width-icon\\):is(:where(.group)[data-collapsible=\"icon\"] *) {\n    width: var(--sidebar-width-icon);\n  }\n\n  .group-data-\\[collapsible\\=icon\\]\\:w-\\[calc\\(var\\(--sidebar-width-icon\\)\\+\\(--spacing\\(4\\)\\)\\)\\]:is(:where(.group)[data-collapsible=\"icon\"] *) {\n    width: calc(var(--sidebar-width-icon)  + (calc(var(--spacing) * 4)));\n  }\n\n  .group-data-\\[collapsible\\=icon\\]\\:w-\\[calc\\(var\\(--sidebar-width-icon\\)\\+\\(--spacing\\(4\\)\\)\\+2px\\)\\]:is(:where(.group)[data-collapsible=\"icon\"] *) {\n    width: calc(var(--sidebar-width-icon)  + (calc(var(--spacing) * 4))  + 2px);\n  }\n\n  .group-data-\\[collapsible\\=icon\\]\\:overflow-hidden:is(:where(.group)[data-collapsible=\"icon\"] *) {\n    overflow: hidden;\n  }\n\n  .group-data-\\[collapsible\\=icon\\]\\:p-0\\!:is(:where(.group)[data-collapsible=\"icon\"] *) {\n    padding: calc(var(--spacing) * 0) !important;\n  }\n\n  .group-data-\\[collapsible\\=icon\\]\\:p-2\\!:is(:where(.group)[data-collapsible=\"icon\"] *) {\n    padding: calc(var(--spacing) * 2) !important;\n  }\n\n  .group-data-\\[collapsible\\=icon\\]\\:opacity-0:is(:where(.group)[data-collapsible=\"icon\"] *) {\n    opacity: 0;\n  }\n\n  .group-data-\\[collapsible\\=offcanvas\\]\\:right-\\[calc\\(var\\(--sidebar-width\\)\\*-1\\)\\]:is(:where(.group)[data-collapsible=\"offcanvas\"] *) {\n    right: calc(var(--sidebar-width) * -1);\n  }\n\n  .group-data-\\[collapsible\\=offcanvas\\]\\:left-\\[calc\\(var\\(--sidebar-width\\)\\*-1\\)\\]:is(:where(.group)[data-collapsible=\"offcanvas\"] *) {\n    left: calc(var(--sidebar-width) * -1);\n  }\n\n  .group-data-\\[collapsible\\=offcanvas\\]\\:w-0:is(:where(.group)[data-collapsible=\"offcanvas\"] *) {\n    width: calc(var(--spacing) * 0);\n  }\n\n  .group-data-\\[collapsible\\=offcanvas\\]\\:translate-x-0:is(:where(.group)[data-collapsible=\"offcanvas\"] *) {\n    --tw-translate-x: calc(var(--spacing) * 0);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .group-data-\\[disabled\\=true\\]\\:pointer-events-none:is(:where(.group)[data-disabled=\"true\"] *) {\n    pointer-events: none;\n  }\n\n  .group-data-\\[disabled\\=true\\]\\:opacity-50:is(:where(.group)[data-disabled=\"true\"] *) {\n    opacity: .5;\n  }\n\n  .group-data-\\[side\\=left\\]\\:-right-4:is(:where(.group)[data-side=\"left\"] *) {\n    right: calc(var(--spacing) * -4);\n  }\n\n  .group-data-\\[side\\=left\\]\\:border-r:is(:where(.group)[data-side=\"left\"] *) {\n    border-right-style: var(--tw-border-style);\n    border-right-width: 1px;\n  }\n\n  .group-data-\\[side\\=right\\]\\:left-0:is(:where(.group)[data-side=\"right\"] *) {\n    left: calc(var(--spacing) * 0);\n  }\n\n  .group-data-\\[side\\=right\\]\\:rotate-180:is(:where(.group)[data-side=\"right\"] *) {\n    rotate: 180deg;\n  }\n\n  .group-data-\\[side\\=right\\]\\:border-l:is(:where(.group)[data-side=\"right\"] *) {\n    border-left-style: var(--tw-border-style);\n    border-left-width: 1px;\n  }\n\n  .group-data-\\[state\\=open\\]\\:rotate-180:is(:where(.group)[data-state=\"open\"] *) {\n    rotate: 180deg;\n  }\n\n  .group-data-\\[variant\\=floating\\]\\:rounded-lg:is(:where(.group)[data-variant=\"floating\"] *) {\n    border-radius: var(--radius);\n  }\n\n  .group-data-\\[variant\\=floating\\]\\:border:is(:where(.group)[data-variant=\"floating\"] *) {\n    border-style: var(--tw-border-style);\n    border-width: 1px;\n  }\n\n  .group-data-\\[variant\\=floating\\]\\:border-sidebar-border:is(:where(.group)[data-variant=\"floating\"] *) {\n    border-color: var(--sidebar-border);\n  }\n\n  .group-data-\\[variant\\=floating\\]\\:shadow-sm:is(:where(.group)[data-variant=\"floating\"] *) {\n    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, #0000001a), 0 1px 2px -1px var(--tw-shadow-color, #0000001a);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .group-data-\\[vaul-drawer-direction\\=bottom\\]\\/drawer-content\\:block:is(:where(.group\\/drawer-content)[data-vaul-drawer-direction=\"bottom\"] *) {\n    display: block;\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:top-full:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *) {\n    top: 100%;\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:mt-1\\.5:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *) {\n    margin-top: calc(var(--spacing) * 1.5);\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:overflow-hidden:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *) {\n    overflow: hidden;\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:rounded-md:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *) {\n    border-radius: calc(var(--radius)  - 2px);\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:border:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *) {\n    border-style: var(--tw-border-style);\n    border-width: 1px;\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:bg-popover:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *) {\n    background-color: var(--popover);\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:text-popover-foreground:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *) {\n    color: var(--popover-foreground);\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:shadow:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *) {\n    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, #0000001a), 0 1px 2px -1px var(--tw-shadow-color, #0000001a);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:duration-200:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *) {\n    --tw-duration: .2s;\n    transition-duration: .2s;\n  }\n\n  @media (hover: hover) {\n    .peer-hover\\/menu-button\\:text-sidebar-accent-foreground:is(:where(.peer\\/menu-button):hover ~ *) {\n      color: var(--sidebar-accent-foreground);\n    }\n  }\n\n  .peer-disabled\\:cursor-not-allowed:is(:where(.peer):disabled ~ *) {\n    cursor: not-allowed;\n  }\n\n  .peer-disabled\\:opacity-50:is(:where(.peer):disabled ~ *) {\n    opacity: .5;\n  }\n\n  .peer-data-\\[active\\=true\\]\\/menu-button\\:text-sidebar-accent-foreground:is(:where(.peer\\/menu-button)[data-active=\"true\"] ~ *) {\n    color: var(--sidebar-accent-foreground);\n  }\n\n  .peer-data-\\[size\\=default\\]\\/menu-button\\:top-1\\.5:is(:where(.peer\\/menu-button)[data-size=\"default\"] ~ *) {\n    top: calc(var(--spacing) * 1.5);\n  }\n\n  .peer-data-\\[size\\=lg\\]\\/menu-button\\:top-2\\.5:is(:where(.peer\\/menu-button)[data-size=\"lg\"] ~ *) {\n    top: calc(var(--spacing) * 2.5);\n  }\n\n  .peer-data-\\[size\\=sm\\]\\/menu-button\\:top-1:is(:where(.peer\\/menu-button)[data-size=\"sm\"] ~ *) {\n    top: calc(var(--spacing) * 1);\n  }\n\n  .selection\\:bg-primary ::selection, .selection\\:bg-primary::selection {\n    background-color: var(--primary);\n  }\n\n  .selection\\:text-primary-foreground ::selection, .selection\\:text-primary-foreground::selection {\n    color: var(--primary-foreground);\n  }\n\n  .file\\:inline-flex::file-selector-button {\n    display: inline-flex;\n  }\n\n  .file\\:h-7::file-selector-button {\n    height: calc(var(--spacing) * 7);\n  }\n\n  .file\\:border-0::file-selector-button {\n    border-style: var(--tw-border-style);\n    border-width: 0;\n  }\n\n  .file\\:bg-transparent::file-selector-button {\n    background-color: #0000;\n  }\n\n  .file\\:text-sm::file-selector-button {\n    font-size: var(--text-sm);\n    line-height: var(--tw-leading, var(--text-sm--line-height));\n  }\n\n  .file\\:font-medium::file-selector-button {\n    --tw-font-weight: var(--font-weight-medium);\n    font-weight: var(--font-weight-medium);\n  }\n\n  .file\\:text-foreground::file-selector-button {\n    color: var(--foreground);\n  }\n\n  .placeholder\\:text-muted-foreground::placeholder {\n    color: var(--muted-foreground);\n  }\n\n  .after\\:absolute:after {\n    content: var(--tw-content);\n    position: absolute;\n  }\n\n  .after\\:-inset-2:after {\n    content: var(--tw-content);\n    inset: calc(var(--spacing) * -2);\n  }\n\n  .after\\:inset-y-0:after {\n    content: var(--tw-content);\n    inset-block: calc(var(--spacing) * 0);\n  }\n\n  .after\\:left-1\\/2:after {\n    content: var(--tw-content);\n    left: 50%;\n  }\n\n  .after\\:w-1:after {\n    content: var(--tw-content);\n    width: calc(var(--spacing) * 1);\n  }\n\n  .after\\:w-\\[2px\\]:after {\n    content: var(--tw-content);\n    width: 2px;\n  }\n\n  .after\\:-translate-x-1\\/2:after {\n    content: var(--tw-content);\n    --tw-translate-x: calc(calc(1 / 2 * 100%) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .group-data-\\[collapsible\\=offcanvas\\]\\:after\\:left-full:is(:where(.group)[data-collapsible=\"offcanvas\"] *):after {\n    content: var(--tw-content);\n    left: 100%;\n  }\n\n  .first\\:rounded-l-md:first-child {\n    border-top-left-radius: calc(var(--radius)  - 2px);\n    border-bottom-left-radius: calc(var(--radius)  - 2px);\n  }\n\n  .first\\:border-l:first-child {\n    border-left-style: var(--tw-border-style);\n    border-left-width: 1px;\n  }\n\n  .last\\:rounded-r-md:last-child {\n    border-top-right-radius: calc(var(--radius)  - 2px);\n    border-bottom-right-radius: calc(var(--radius)  - 2px);\n  }\n\n  .last\\:border-b-0:last-child {\n    border-bottom-style: var(--tw-border-style);\n    border-bottom-width: 0;\n  }\n\n  .focus-within\\:relative:focus-within {\n    position: relative;\n  }\n\n  .focus-within\\:z-20:focus-within {\n    z-index: 20;\n  }\n\n  @media (hover: hover) {\n    .hover\\:bg-accent:hover {\n      background-color: var(--accent);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:bg-destructive\\/90:hover {\n      background-color: var(--destructive);\n    }\n\n    @supports (color: color-mix(in lab, red, red)) {\n      .hover\\:bg-destructive\\/90:hover {\n        background-color: color-mix(in oklab, var(--destructive) 90%, transparent);\n      }\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:bg-muted:hover {\n      background-color: var(--muted);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:bg-muted\\/50:hover {\n      background-color: var(--muted);\n    }\n\n    @supports (color: color-mix(in lab, red, red)) {\n      .hover\\:bg-muted\\/50:hover {\n        background-color: color-mix(in oklab, var(--muted) 50%, transparent);\n      }\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:bg-primary:hover {\n      background-color: var(--primary);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:bg-primary\\/90:hover {\n      background-color: var(--primary);\n    }\n\n    @supports (color: color-mix(in lab, red, red)) {\n      .hover\\:bg-primary\\/90:hover {\n        background-color: color-mix(in oklab, var(--primary) 90%, transparent);\n      }\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:bg-secondary\\/80:hover {\n      background-color: var(--secondary);\n    }\n\n    @supports (color: color-mix(in lab, red, red)) {\n      .hover\\:bg-secondary\\/80:hover {\n        background-color: color-mix(in oklab, var(--secondary) 80%, transparent);\n      }\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:bg-sidebar-accent:hover {\n      background-color: var(--sidebar-accent);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:from-cyan-600:hover {\n      --tw-gradient-from: var(--color-cyan-600);\n      --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:to-blue-700:hover {\n      --tw-gradient-to: var(--color-blue-700);\n      --tw-gradient-stops: var(--tw-gradient-via-stops, var(--tw-gradient-position), var(--tw-gradient-from) var(--tw-gradient-from-position), var(--tw-gradient-to) var(--tw-gradient-to-position));\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:text-accent-foreground:hover {\n      color: var(--accent-foreground);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:text-blue-800:hover {\n      color: var(--color-blue-800);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:text-cyan-300:hover {\n      color: var(--color-cyan-300);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:text-foreground:hover {\n      color: var(--foreground);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:text-gray-900:hover {\n      color: var(--color-gray-900);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:text-muted-foreground:hover {\n      color: var(--muted-foreground);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:text-primary-foreground:hover {\n      color: var(--primary-foreground);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:text-sidebar-accent-foreground:hover {\n      color: var(--sidebar-accent-foreground);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:text-white:hover {\n      color: var(--color-white);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:underline:hover {\n      text-decoration-line: underline;\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:opacity-100:hover {\n      opacity: 1;\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:shadow-\\[0_0_0_1px_hsl\\(var\\(--sidebar-accent\\)\\)\\]:hover {\n      --tw-shadow: 0 0 0 1px var(--tw-shadow-color, hsl(var(--sidebar-accent)));\n      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:ring-4:hover {\n      --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:group-data-\\[collapsible\\=offcanvas\\]\\:bg-sidebar:hover:is(:where(.group)[data-collapsible=\"offcanvas\"] *) {\n      background-color: var(--sidebar);\n    }\n  }\n\n  @media (hover: hover) {\n    .hover\\:after\\:bg-sidebar-border:hover:after {\n      content: var(--tw-content);\n      background-color: var(--sidebar-border);\n    }\n  }\n\n  .focus\\:z-10:focus {\n    z-index: 10;\n  }\n\n  .focus\\:bg-accent:focus {\n    background-color: var(--accent);\n  }\n\n  .focus\\:bg-primary:focus {\n    background-color: var(--primary);\n  }\n\n  .focus\\:text-accent-foreground:focus {\n    color: var(--accent-foreground);\n  }\n\n  .focus\\:text-primary-foreground:focus {\n    color: var(--primary-foreground);\n  }\n\n  .focus\\:ring-2:focus {\n    --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .focus\\:ring-ring:focus {\n    --tw-ring-color: var(--ring);\n  }\n\n  .focus\\:ring-offset-2:focus {\n    --tw-ring-offset-width: 2px;\n    --tw-ring-offset-shadow: var(--tw-ring-inset, ) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n  }\n\n  .focus\\:outline-hidden:focus {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n\n  @media (forced-colors: active) {\n    .focus\\:outline-hidden:focus {\n      outline-offset: 2px;\n      outline: 2px solid #0000;\n    }\n  }\n\n  .focus-visible\\:z-10:focus-visible {\n    z-index: 10;\n  }\n\n  .focus-visible\\:border-ring:focus-visible {\n    border-color: var(--ring);\n  }\n\n  .focus-visible\\:ring-1:focus-visible {\n    --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .focus-visible\\:ring-2:focus-visible {\n    --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .focus-visible\\:ring-4:focus-visible {\n    --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .focus-visible\\:ring-\\[3px\\]:focus-visible {\n    --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .focus-visible\\:ring-destructive\\/20:focus-visible {\n    --tw-ring-color: var(--destructive);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .focus-visible\\:ring-destructive\\/20:focus-visible {\n      --tw-ring-color: color-mix(in oklab, var(--destructive) 20%, transparent);\n    }\n  }\n\n  .focus-visible\\:ring-ring:focus-visible {\n    --tw-ring-color: var(--ring);\n  }\n\n  .focus-visible\\:ring-ring\\/50:focus-visible {\n    --tw-ring-color: var(--ring);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .focus-visible\\:ring-ring\\/50:focus-visible {\n      --tw-ring-color: color-mix(in oklab, var(--ring) 50%, transparent);\n    }\n  }\n\n  .focus-visible\\:ring-offset-1:focus-visible {\n    --tw-ring-offset-width: 1px;\n    --tw-ring-offset-shadow: var(--tw-ring-inset, ) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n  }\n\n  .focus-visible\\:outline-hidden:focus-visible {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n\n  @media (forced-colors: active) {\n    .focus-visible\\:outline-hidden:focus-visible {\n      outline-offset: 2px;\n      outline: 2px solid #0000;\n    }\n  }\n\n  .focus-visible\\:outline-1:focus-visible {\n    outline-style: var(--tw-outline-style);\n    outline-width: 1px;\n  }\n\n  .focus-visible\\:outline-ring:focus-visible {\n    outline-color: var(--ring);\n  }\n\n  .active\\:bg-sidebar-accent:active {\n    background-color: var(--sidebar-accent);\n  }\n\n  .active\\:text-sidebar-accent-foreground:active {\n    color: var(--sidebar-accent-foreground);\n  }\n\n  .disabled\\:pointer-events-none:disabled {\n    pointer-events: none;\n  }\n\n  .disabled\\:cursor-not-allowed:disabled {\n    cursor: not-allowed;\n  }\n\n  .disabled\\:opacity-50:disabled {\n    opacity: .5;\n  }\n\n  :where([data-side=\"left\"]) .in-data-\\[side\\=left\\]\\:cursor-w-resize {\n    cursor: w-resize;\n  }\n\n  :where([data-side=\"right\"]) .in-data-\\[side\\=right\\]\\:cursor-e-resize {\n    cursor: e-resize;\n  }\n\n  .has-disabled\\:opacity-50:has(:disabled) {\n    opacity: .5;\n  }\n\n  .has-data-\\[slot\\=card-action\\]\\:grid-cols-\\[1fr_auto\\]:has([data-slot=\"card-action\"]) {\n    grid-template-columns: 1fr auto;\n  }\n\n  .has-data-\\[variant\\=inset\\]\\:bg-sidebar:has([data-variant=\"inset\"]) {\n    background-color: var(--sidebar);\n  }\n\n  .has-\\[\\>svg\\]\\:grid-cols-\\[calc\\(var\\(--spacing\\)\\*4\\)_1fr\\]:has( > svg) {\n    grid-template-columns: calc(var(--spacing) * 4) 1fr;\n  }\n\n  .has-\\[\\>svg\\]\\:gap-x-3:has( > svg) {\n    column-gap: calc(var(--spacing) * 3);\n  }\n\n  .has-\\[\\>svg\\]\\:px-2\\.5:has( > svg) {\n    padding-inline: calc(var(--spacing) * 2.5);\n  }\n\n  .has-\\[\\>svg\\]\\:px-3:has( > svg) {\n    padding-inline: calc(var(--spacing) * 3);\n  }\n\n  .has-\\[\\>svg\\]\\:px-4:has( > svg) {\n    padding-inline: calc(var(--spacing) * 4);\n  }\n\n  .aria-disabled\\:pointer-events-none[aria-disabled=\"true\"] {\n    pointer-events: none;\n  }\n\n  .aria-disabled\\:opacity-50[aria-disabled=\"true\"] {\n    opacity: .5;\n  }\n\n  .aria-invalid\\:border-destructive[aria-invalid=\"true\"] {\n    border-color: var(--destructive);\n  }\n\n  .aria-invalid\\:ring-destructive\\/20[aria-invalid=\"true\"] {\n    --tw-ring-color: var(--destructive);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .aria-invalid\\:ring-destructive\\/20[aria-invalid=\"true\"] {\n      --tw-ring-color: color-mix(in oklab, var(--destructive) 20%, transparent);\n    }\n  }\n\n  .aria-selected\\:bg-accent[aria-selected=\"true\"] {\n    background-color: var(--accent);\n  }\n\n  .aria-selected\\:bg-primary[aria-selected=\"true\"] {\n    background-color: var(--primary);\n  }\n\n  .aria-selected\\:text-accent-foreground[aria-selected=\"true\"] {\n    color: var(--accent-foreground);\n  }\n\n  .aria-selected\\:text-muted-foreground[aria-selected=\"true\"] {\n    color: var(--muted-foreground);\n  }\n\n  .aria-selected\\:text-primary-foreground[aria-selected=\"true\"] {\n    color: var(--primary-foreground);\n  }\n\n  .aria-selected\\:opacity-100[aria-selected=\"true\"] {\n    opacity: 1;\n  }\n\n  .data-\\[active\\=true\\]\\:z-10[data-active=\"true\"] {\n    z-index: 10;\n  }\n\n  .data-\\[active\\=true\\]\\:border-ring[data-active=\"true\"] {\n    border-color: var(--ring);\n  }\n\n  .data-\\[active\\=true\\]\\:bg-accent\\/50[data-active=\"true\"] {\n    background-color: var(--accent);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .data-\\[active\\=true\\]\\:bg-accent\\/50[data-active=\"true\"] {\n      background-color: color-mix(in oklab, var(--accent) 50%, transparent);\n    }\n  }\n\n  .data-\\[active\\=true\\]\\:bg-sidebar-accent[data-active=\"true\"] {\n    background-color: var(--sidebar-accent);\n  }\n\n  .data-\\[active\\=true\\]\\:font-medium[data-active=\"true\"] {\n    --tw-font-weight: var(--font-weight-medium);\n    font-weight: var(--font-weight-medium);\n  }\n\n  .data-\\[active\\=true\\]\\:text-accent-foreground[data-active=\"true\"] {\n    color: var(--accent-foreground);\n  }\n\n  .data-\\[active\\=true\\]\\:text-sidebar-accent-foreground[data-active=\"true\"] {\n    color: var(--sidebar-accent-foreground);\n  }\n\n  .data-\\[active\\=true\\]\\:ring-\\[3px\\][data-active=\"true\"] {\n    --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .data-\\[active\\=true\\]\\:ring-ring\\/50[data-active=\"true\"] {\n    --tw-ring-color: var(--ring);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .data-\\[active\\=true\\]\\:ring-ring\\/50[data-active=\"true\"] {\n      --tw-ring-color: color-mix(in oklab, var(--ring) 50%, transparent);\n    }\n  }\n\n  @media (hover: hover) {\n    .data-\\[active\\=true\\]\\:hover\\:bg-accent[data-active=\"true\"]:hover {\n      background-color: var(--accent);\n    }\n  }\n\n  .data-\\[active\\=true\\]\\:focus\\:bg-accent[data-active=\"true\"]:focus {\n    background-color: var(--accent);\n  }\n\n  .data-\\[active\\=true\\]\\:aria-invalid\\:border-destructive[data-active=\"true\"][aria-invalid=\"true\"] {\n    border-color: var(--destructive);\n  }\n\n  .data-\\[active\\=true\\]\\:aria-invalid\\:ring-destructive\\/20[data-active=\"true\"][aria-invalid=\"true\"] {\n    --tw-ring-color: var(--destructive);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .data-\\[active\\=true\\]\\:aria-invalid\\:ring-destructive\\/20[data-active=\"true\"][aria-invalid=\"true\"] {\n      --tw-ring-color: color-mix(in oklab, var(--destructive) 20%, transparent);\n    }\n  }\n\n  .data-\\[disabled\\]\\:pointer-events-none[data-disabled] {\n    pointer-events: none;\n  }\n\n  .data-\\[disabled\\]\\:opacity-50[data-disabled] {\n    opacity: .5;\n  }\n\n  .data-\\[disabled\\=true\\]\\:pointer-events-none[data-disabled=\"true\"] {\n    pointer-events: none;\n  }\n\n  .data-\\[disabled\\=true\\]\\:opacity-50[data-disabled=\"true\"] {\n    opacity: .5;\n  }\n\n  .data-\\[error\\=true\\]\\:text-destructive[data-error=\"true\"] {\n    color: var(--destructive);\n  }\n\n  .data-\\[inset\\]\\:pl-8[data-inset] {\n    padding-left: calc(var(--spacing) * 8);\n  }\n\n  .data-\\[motion\\=from-end\\]\\:slide-in-from-right-52[data-motion=\"from-end\"] {\n    --tw-enter-translate-x: calc(52 * var(--spacing));\n  }\n\n  .data-\\[motion\\=from-start\\]\\:slide-in-from-left-52[data-motion=\"from-start\"] {\n    --tw-enter-translate-x: calc(52 * var(--spacing) * -1);\n  }\n\n  .data-\\[motion\\=to-end\\]\\:slide-out-to-right-52[data-motion=\"to-end\"] {\n    --tw-exit-translate-x: calc(52 * var(--spacing));\n  }\n\n  .data-\\[motion\\=to-start\\]\\:slide-out-to-left-52[data-motion=\"to-start\"] {\n    --tw-exit-translate-x: calc(52 * var(--spacing) * -1);\n  }\n\n  .data-\\[motion\\^\\=from-\\]\\:animate-in[data-motion^=\"from-\"] {\n    animation: enter var(--tw-duration, .15s) var(--tw-ease, ease);\n  }\n\n  .data-\\[motion\\^\\=from-\\]\\:fade-in[data-motion^=\"from-\"] {\n    --tw-enter-opacity: 0;\n  }\n\n  .data-\\[motion\\^\\=to-\\]\\:animate-out[data-motion^=\"to-\"] {\n    animation: exit var(--tw-duration, .15s) var(--tw-ease, ease);\n  }\n\n  .data-\\[motion\\^\\=to-\\]\\:fade-out[data-motion^=\"to-\"] {\n    --tw-exit-opacity: 0;\n  }\n\n  .data-\\[orientation\\=horizontal\\]\\:h-4[data-orientation=\"horizontal\"] {\n    height: calc(var(--spacing) * 4);\n  }\n\n  .data-\\[orientation\\=horizontal\\]\\:h-full[data-orientation=\"horizontal\"] {\n    height: 100%;\n  }\n\n  .data-\\[orientation\\=horizontal\\]\\:h-px[data-orientation=\"horizontal\"] {\n    height: 1px;\n  }\n\n  .data-\\[orientation\\=horizontal\\]\\:w-full[data-orientation=\"horizontal\"] {\n    width: 100%;\n  }\n\n  .data-\\[orientation\\=vertical\\]\\:h-full[data-orientation=\"vertical\"] {\n    height: 100%;\n  }\n\n  .data-\\[orientation\\=vertical\\]\\:min-h-44[data-orientation=\"vertical\"] {\n    min-height: calc(var(--spacing) * 44);\n  }\n\n  .data-\\[orientation\\=vertical\\]\\:w-1\\.5[data-orientation=\"vertical\"] {\n    width: calc(var(--spacing) * 1.5);\n  }\n\n  .data-\\[orientation\\=vertical\\]\\:w-auto[data-orientation=\"vertical\"] {\n    width: auto;\n  }\n\n  .data-\\[orientation\\=vertical\\]\\:w-full[data-orientation=\"vertical\"] {\n    width: 100%;\n  }\n\n  .data-\\[orientation\\=vertical\\]\\:w-px[data-orientation=\"vertical\"] {\n    width: 1px;\n  }\n\n  .data-\\[orientation\\=vertical\\]\\:flex-col[data-orientation=\"vertical\"] {\n    flex-direction: column;\n  }\n\n  .data-\\[panel-group-direction\\=vertical\\]\\:h-px[data-panel-group-direction=\"vertical\"] {\n    height: 1px;\n  }\n\n  .data-\\[panel-group-direction\\=vertical\\]\\:w-full[data-panel-group-direction=\"vertical\"] {\n    width: 100%;\n  }\n\n  .data-\\[panel-group-direction\\=vertical\\]\\:flex-col[data-panel-group-direction=\"vertical\"] {\n    flex-direction: column;\n  }\n\n  .data-\\[panel-group-direction\\=vertical\\]\\:after\\:left-0[data-panel-group-direction=\"vertical\"]:after {\n    content: var(--tw-content);\n    left: calc(var(--spacing) * 0);\n  }\n\n  .data-\\[panel-group-direction\\=vertical\\]\\:after\\:h-1[data-panel-group-direction=\"vertical\"]:after {\n    content: var(--tw-content);\n    height: calc(var(--spacing) * 1);\n  }\n\n  .data-\\[panel-group-direction\\=vertical\\]\\:after\\:w-full[data-panel-group-direction=\"vertical\"]:after {\n    content: var(--tw-content);\n    width: 100%;\n  }\n\n  .data-\\[panel-group-direction\\=vertical\\]\\:after\\:translate-x-0[data-panel-group-direction=\"vertical\"]:after {\n    content: var(--tw-content);\n    --tw-translate-x: calc(var(--spacing) * 0);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .data-\\[panel-group-direction\\=vertical\\]\\:after\\:-translate-y-1\\/2[data-panel-group-direction=\"vertical\"]:after {\n    content: var(--tw-content);\n    --tw-translate-y: calc(calc(1 / 2 * 100%) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .data-\\[placeholder\\]\\:text-muted-foreground[data-placeholder] {\n    color: var(--muted-foreground);\n  }\n\n  .data-\\[selected\\=true\\]\\:bg-accent[data-selected=\"true\"] {\n    background-color: var(--accent);\n  }\n\n  .data-\\[selected\\=true\\]\\:text-accent-foreground[data-selected=\"true\"] {\n    color: var(--accent-foreground);\n  }\n\n  .data-\\[side\\=bottom\\]\\:translate-y-1[data-side=\"bottom\"] {\n    --tw-translate-y: calc(var(--spacing) * 1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .data-\\[side\\=bottom\\]\\:slide-in-from-top-2[data-side=\"bottom\"] {\n    --tw-enter-translate-y: calc(2 * var(--spacing) * -1);\n  }\n\n  .data-\\[side\\=left\\]\\:-translate-x-1[data-side=\"left\"] {\n    --tw-translate-x: calc(var(--spacing) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .data-\\[side\\=left\\]\\:slide-in-from-right-2[data-side=\"left\"] {\n    --tw-enter-translate-x: calc(2 * var(--spacing));\n  }\n\n  .data-\\[side\\=right\\]\\:translate-x-1[data-side=\"right\"] {\n    --tw-translate-x: calc(var(--spacing) * 1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .data-\\[side\\=right\\]\\:slide-in-from-left-2[data-side=\"right\"] {\n    --tw-enter-translate-x: calc(2 * var(--spacing) * -1);\n  }\n\n  .data-\\[side\\=top\\]\\:-translate-y-1[data-side=\"top\"] {\n    --tw-translate-y: calc(var(--spacing) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .data-\\[side\\=top\\]\\:slide-in-from-bottom-2[data-side=\"top\"] {\n    --tw-enter-translate-y: calc(2 * var(--spacing));\n  }\n\n  .data-\\[size\\=default\\]\\:h-9[data-size=\"default\"] {\n    height: calc(var(--spacing) * 9);\n  }\n\n  .data-\\[size\\=sm\\]\\:h-8[data-size=\"sm\"] {\n    height: calc(var(--spacing) * 8);\n  }\n\n  :is(.\\*\\:data-\\[slot\\=alert-description\\]\\:text-destructive\\/90 > *)[data-slot=\"alert-description\"] {\n    color: var(--destructive);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    :is(.\\*\\:data-\\[slot\\=alert-description\\]\\:text-destructive\\/90 > *)[data-slot=\"alert-description\"] {\n      color: color-mix(in oklab, var(--destructive) 90%, transparent);\n    }\n  }\n\n  :is(.\\*\\*\\:data-\\[slot\\=command-input-wrapper\\]\\:h-12 *)[data-slot=\"command-input-wrapper\"] {\n    height: calc(var(--spacing) * 12);\n  }\n\n  :is(.\\*\\*\\:data-\\[slot\\=navigation-menu-link\\]\\:focus\\:ring-0 *)[data-slot=\"navigation-menu-link\"]:focus {\n    --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  :is(.\\*\\*\\:data-\\[slot\\=navigation-menu-link\\]\\:focus\\:outline-none *)[data-slot=\"navigation-menu-link\"]:focus {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n\n  :is(.\\*\\:data-\\[slot\\=select-value\\]\\:line-clamp-1 > *)[data-slot=\"select-value\"] {\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n    display: -webkit-box;\n    overflow: hidden;\n  }\n\n  :is(.\\*\\:data-\\[slot\\=select-value\\]\\:flex > *)[data-slot=\"select-value\"] {\n    display: flex;\n  }\n\n  :is(.\\*\\:data-\\[slot\\=select-value\\]\\:items-center > *)[data-slot=\"select-value\"] {\n    align-items: center;\n  }\n\n  :is(.\\*\\:data-\\[slot\\=select-value\\]\\:gap-2 > *)[data-slot=\"select-value\"] {\n    gap: calc(var(--spacing) * 2);\n  }\n\n  .data-\\[state\\=active\\]\\:bg-card[data-state=\"active\"] {\n    background-color: var(--card);\n  }\n\n  .data-\\[state\\=checked\\]\\:translate-x-\\[calc\\(100\\%-2px\\)\\][data-state=\"checked\"] {\n    --tw-translate-x: calc(100% - 2px);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .data-\\[state\\=checked\\]\\:border-primary[data-state=\"checked\"] {\n    border-color: var(--primary);\n  }\n\n  .data-\\[state\\=checked\\]\\:bg-primary[data-state=\"checked\"] {\n    background-color: var(--primary);\n  }\n\n  .data-\\[state\\=checked\\]\\:text-primary-foreground[data-state=\"checked\"] {\n    color: var(--primary-foreground);\n  }\n\n  .data-\\[state\\=closed\\]\\:animate-accordion-up[data-state=\"closed\"] {\n    animation: accordion-up var(--tw-duration, .2s) ease-out;\n  }\n\n  .data-\\[state\\=closed\\]\\:animate-out[data-state=\"closed\"] {\n    animation: exit var(--tw-duration, .15s) var(--tw-ease, ease);\n  }\n\n  .data-\\[state\\=closed\\]\\:duration-300[data-state=\"closed\"] {\n    --tw-duration: .3s;\n    transition-duration: .3s;\n  }\n\n  .data-\\[state\\=closed\\]\\:fade-out-0[data-state=\"closed\"] {\n    --tw-exit-opacity: 0;\n  }\n\n  .data-\\[state\\=closed\\]\\:slide-out-to-bottom[data-state=\"closed\"] {\n    --tw-exit-translate-y: 100%;\n  }\n\n  .data-\\[state\\=closed\\]\\:slide-out-to-left[data-state=\"closed\"] {\n    --tw-exit-translate-x: -100%;\n  }\n\n  .data-\\[state\\=closed\\]\\:slide-out-to-right[data-state=\"closed\"] {\n    --tw-exit-translate-x: 100%;\n  }\n\n  .data-\\[state\\=closed\\]\\:slide-out-to-top[data-state=\"closed\"] {\n    --tw-exit-translate-y: -100%;\n  }\n\n  .data-\\[state\\=closed\\]\\:zoom-out-95[data-state=\"closed\"] {\n    --tw-exit-scale: .95;\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:data-\\[state\\=closed\\]\\:animate-out:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *)[data-state=\"closed\"] {\n    animation: exit var(--tw-duration, .15s) var(--tw-ease, ease);\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:data-\\[state\\=closed\\]\\:fade-out-0:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *)[data-state=\"closed\"] {\n    --tw-exit-opacity: 0;\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:data-\\[state\\=closed\\]\\:zoom-out-95:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *)[data-state=\"closed\"] {\n    --tw-exit-scale: .95;\n  }\n\n  .data-\\[state\\=hidden\\]\\:animate-out[data-state=\"hidden\"] {\n    animation: exit var(--tw-duration, .15s) var(--tw-ease, ease);\n  }\n\n  .data-\\[state\\=hidden\\]\\:fade-out[data-state=\"hidden\"] {\n    --tw-exit-opacity: 0;\n  }\n\n  .data-\\[state\\=on\\]\\:bg-accent[data-state=\"on\"] {\n    background-color: var(--accent);\n  }\n\n  .data-\\[state\\=on\\]\\:text-accent-foreground[data-state=\"on\"] {\n    color: var(--accent-foreground);\n  }\n\n  .data-\\[state\\=open\\]\\:animate-accordion-down[data-state=\"open\"] {\n    animation: accordion-down var(--tw-duration, .2s) ease-out;\n  }\n\n  .data-\\[state\\=open\\]\\:animate-in[data-state=\"open\"] {\n    animation: enter var(--tw-duration, .15s) var(--tw-ease, ease);\n  }\n\n  .data-\\[state\\=open\\]\\:bg-accent[data-state=\"open\"] {\n    background-color: var(--accent);\n  }\n\n  .data-\\[state\\=open\\]\\:bg-accent\\/50[data-state=\"open\"] {\n    background-color: var(--accent);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .data-\\[state\\=open\\]\\:bg-accent\\/50[data-state=\"open\"] {\n      background-color: color-mix(in oklab, var(--accent) 50%, transparent);\n    }\n  }\n\n  .data-\\[state\\=open\\]\\:bg-secondary[data-state=\"open\"] {\n    background-color: var(--secondary);\n  }\n\n  .data-\\[state\\=open\\]\\:text-accent-foreground[data-state=\"open\"] {\n    color: var(--accent-foreground);\n  }\n\n  .data-\\[state\\=open\\]\\:text-muted-foreground[data-state=\"open\"] {\n    color: var(--muted-foreground);\n  }\n\n  .data-\\[state\\=open\\]\\:opacity-100[data-state=\"open\"] {\n    opacity: 1;\n  }\n\n  .data-\\[state\\=open\\]\\:duration-500[data-state=\"open\"] {\n    --tw-duration: .5s;\n    transition-duration: .5s;\n  }\n\n  .data-\\[state\\=open\\]\\:fade-in-0[data-state=\"open\"] {\n    --tw-enter-opacity: 0;\n  }\n\n  .data-\\[state\\=open\\]\\:slide-in-from-bottom[data-state=\"open\"] {\n    --tw-enter-translate-y: 100%;\n  }\n\n  .data-\\[state\\=open\\]\\:slide-in-from-left[data-state=\"open\"] {\n    --tw-enter-translate-x: -100%;\n  }\n\n  .data-\\[state\\=open\\]\\:slide-in-from-right[data-state=\"open\"] {\n    --tw-enter-translate-x: 100%;\n  }\n\n  .data-\\[state\\=open\\]\\:slide-in-from-top[data-state=\"open\"] {\n    --tw-enter-translate-y: -100%;\n  }\n\n  .data-\\[state\\=open\\]\\:zoom-in-90[data-state=\"open\"] {\n    --tw-enter-scale: .9;\n  }\n\n  .data-\\[state\\=open\\]\\:zoom-in-95[data-state=\"open\"] {\n    --tw-enter-scale: .95;\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:data-\\[state\\=open\\]\\:animate-in:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *)[data-state=\"open\"] {\n    animation: enter var(--tw-duration, .15s) var(--tw-ease, ease);\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:data-\\[state\\=open\\]\\:fade-in-0:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *)[data-state=\"open\"] {\n    --tw-enter-opacity: 0;\n  }\n\n  .group-data-\\[viewport\\=false\\]\\/navigation-menu\\:data-\\[state\\=open\\]\\:zoom-in-95:is(:where(.group\\/navigation-menu)[data-viewport=\"false\"] *)[data-state=\"open\"] {\n    --tw-enter-scale: .95;\n  }\n\n  @media (hover: hover) {\n    .data-\\[state\\=open\\]\\:hover\\:bg-accent[data-state=\"open\"]:hover {\n      background-color: var(--accent);\n    }\n  }\n\n  @media (hover: hover) {\n    .data-\\[state\\=open\\]\\:hover\\:bg-sidebar-accent[data-state=\"open\"]:hover {\n      background-color: var(--sidebar-accent);\n    }\n  }\n\n  @media (hover: hover) {\n    .data-\\[state\\=open\\]\\:hover\\:text-sidebar-accent-foreground[data-state=\"open\"]:hover {\n      color: var(--sidebar-accent-foreground);\n    }\n  }\n\n  .data-\\[state\\=open\\]\\:focus\\:bg-accent[data-state=\"open\"]:focus {\n    background-color: var(--accent);\n  }\n\n  .data-\\[state\\=selected\\]\\:bg-muted[data-state=\"selected\"] {\n    background-color: var(--muted);\n  }\n\n  .data-\\[state\\=unchecked\\]\\:translate-x-0[data-state=\"unchecked\"] {\n    --tw-translate-x: calc(var(--spacing) * 0);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .data-\\[state\\=unchecked\\]\\:bg-switch-background[data-state=\"unchecked\"] {\n    background-color: var(--switch-background);\n  }\n\n  .data-\\[state\\=visible\\]\\:animate-in[data-state=\"visible\"] {\n    animation: enter var(--tw-duration, .15s) var(--tw-ease, ease);\n  }\n\n  .data-\\[state\\=visible\\]\\:fade-in[data-state=\"visible\"] {\n    --tw-enter-opacity: 0;\n  }\n\n  .data-\\[variant\\=destructive\\]\\:text-destructive[data-variant=\"destructive\"] {\n    color: var(--destructive);\n  }\n\n  .data-\\[variant\\=destructive\\]\\:focus\\:bg-destructive\\/10[data-variant=\"destructive\"]:focus {\n    background-color: var(--destructive);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .data-\\[variant\\=destructive\\]\\:focus\\:bg-destructive\\/10[data-variant=\"destructive\"]:focus {\n      background-color: color-mix(in oklab, var(--destructive) 10%, transparent);\n    }\n  }\n\n  .data-\\[variant\\=destructive\\]\\:focus\\:text-destructive[data-variant=\"destructive\"]:focus {\n    color: var(--destructive);\n  }\n\n  .data-\\[variant\\=outline\\]\\:border-l-0[data-variant=\"outline\"] {\n    border-left-style: var(--tw-border-style);\n    border-left-width: 0;\n  }\n\n  .data-\\[variant\\=outline\\]\\:shadow-xs[data-variant=\"outline\"] {\n    --tw-shadow: 0 1px 2px 0 var(--tw-shadow-color, #0000000d);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n\n  .data-\\[variant\\=outline\\]\\:first\\:border-l[data-variant=\"outline\"]:first-child {\n    border-left-style: var(--tw-border-style);\n    border-left-width: 1px;\n  }\n\n  .data-\\[vaul-drawer-direction\\=bottom\\]\\:inset-x-0[data-vaul-drawer-direction=\"bottom\"] {\n    inset-inline: calc(var(--spacing) * 0);\n  }\n\n  .data-\\[vaul-drawer-direction\\=bottom\\]\\:bottom-0[data-vaul-drawer-direction=\"bottom\"] {\n    bottom: calc(var(--spacing) * 0);\n  }\n\n  .data-\\[vaul-drawer-direction\\=bottom\\]\\:mt-24[data-vaul-drawer-direction=\"bottom\"] {\n    margin-top: calc(var(--spacing) * 24);\n  }\n\n  .data-\\[vaul-drawer-direction\\=bottom\\]\\:max-h-\\[80vh\\][data-vaul-drawer-direction=\"bottom\"] {\n    max-height: 80vh;\n  }\n\n  .data-\\[vaul-drawer-direction\\=bottom\\]\\:rounded-t-lg[data-vaul-drawer-direction=\"bottom\"] {\n    border-top-left-radius: var(--radius);\n    border-top-right-radius: var(--radius);\n  }\n\n  .data-\\[vaul-drawer-direction\\=bottom\\]\\:border-t[data-vaul-drawer-direction=\"bottom\"] {\n    border-top-style: var(--tw-border-style);\n    border-top-width: 1px;\n  }\n\n  .data-\\[vaul-drawer-direction\\=left\\]\\:inset-y-0[data-vaul-drawer-direction=\"left\"] {\n    inset-block: calc(var(--spacing) * 0);\n  }\n\n  .data-\\[vaul-drawer-direction\\=left\\]\\:left-0[data-vaul-drawer-direction=\"left\"] {\n    left: calc(var(--spacing) * 0);\n  }\n\n  .data-\\[vaul-drawer-direction\\=left\\]\\:w-3\\/4[data-vaul-drawer-direction=\"left\"] {\n    width: 75%;\n  }\n\n  .data-\\[vaul-drawer-direction\\=left\\]\\:border-r[data-vaul-drawer-direction=\"left\"] {\n    border-right-style: var(--tw-border-style);\n    border-right-width: 1px;\n  }\n\n  .data-\\[vaul-drawer-direction\\=right\\]\\:inset-y-0[data-vaul-drawer-direction=\"right\"] {\n    inset-block: calc(var(--spacing) * 0);\n  }\n\n  .data-\\[vaul-drawer-direction\\=right\\]\\:right-0[data-vaul-drawer-direction=\"right\"] {\n    right: calc(var(--spacing) * 0);\n  }\n\n  .data-\\[vaul-drawer-direction\\=right\\]\\:w-3\\/4[data-vaul-drawer-direction=\"right\"] {\n    width: 75%;\n  }\n\n  .data-\\[vaul-drawer-direction\\=right\\]\\:border-l[data-vaul-drawer-direction=\"right\"] {\n    border-left-style: var(--tw-border-style);\n    border-left-width: 1px;\n  }\n\n  .data-\\[vaul-drawer-direction\\=top\\]\\:inset-x-0[data-vaul-drawer-direction=\"top\"] {\n    inset-inline: calc(var(--spacing) * 0);\n  }\n\n  .data-\\[vaul-drawer-direction\\=top\\]\\:top-0[data-vaul-drawer-direction=\"top\"] {\n    top: calc(var(--spacing) * 0);\n  }\n\n  .data-\\[vaul-drawer-direction\\=top\\]\\:mb-24[data-vaul-drawer-direction=\"top\"] {\n    margin-bottom: calc(var(--spacing) * 24);\n  }\n\n  .data-\\[vaul-drawer-direction\\=top\\]\\:max-h-\\[80vh\\][data-vaul-drawer-direction=\"top\"] {\n    max-height: 80vh;\n  }\n\n  .data-\\[vaul-drawer-direction\\=top\\]\\:rounded-b-lg[data-vaul-drawer-direction=\"top\"] {\n    border-bottom-right-radius: var(--radius);\n    border-bottom-left-radius: var(--radius);\n  }\n\n  .data-\\[vaul-drawer-direction\\=top\\]\\:border-b[data-vaul-drawer-direction=\"top\"] {\n    border-bottom-style: var(--tw-border-style);\n    border-bottom-width: 1px;\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:block {\n      display: block;\n    }\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:flex {\n      display: flex;\n    }\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:max-w-lg {\n      max-width: var(--container-lg);\n    }\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:max-w-sm {\n      max-width: var(--container-sm);\n    }\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:flex-row {\n      flex-direction: row;\n    }\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:justify-end {\n      justify-content: flex-end;\n    }\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:gap-2\\.5 {\n      gap: calc(var(--spacing) * 2.5);\n    }\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:px-6 {\n      padding-inline: calc(var(--spacing) * 6);\n    }\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:pr-2\\.5 {\n      padding-right: calc(var(--spacing) * 2.5);\n    }\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:pl-2\\.5 {\n      padding-left: calc(var(--spacing) * 2.5);\n    }\n  }\n\n  @media (width >= 40rem) {\n    .sm\\:text-left {\n      text-align: left;\n    }\n  }\n\n  @media (width >= 40rem) {\n    .data-\\[vaul-drawer-direction\\=left\\]\\:sm\\:max-w-sm[data-vaul-drawer-direction=\"left\"] {\n      max-width: var(--container-sm);\n    }\n  }\n\n  @media (width >= 40rem) {\n    .data-\\[vaul-drawer-direction\\=right\\]\\:sm\\:max-w-sm[data-vaul-drawer-direction=\"right\"] {\n      max-width: var(--container-sm);\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:absolute {\n      position: absolute;\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:block {\n      display: block;\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:flex {\n      display: flex;\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:w-\\[var\\(--radix-navigation-menu-viewport-width\\)\\] {\n      width: var(--radix-navigation-menu-viewport-width);\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:w-auto {\n      width: auto;\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:grid-cols-3 {\n      grid-template-columns: repeat(3, minmax(0, 1fr));\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:grid-cols-4 {\n      grid-template-columns: repeat(4, minmax(0, 1fr));\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:text-sm {\n      font-size: var(--text-sm);\n      line-height: var(--tw-leading, var(--text-sm--line-height));\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:opacity-0 {\n      opacity: 0;\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:peer-data-\\[variant\\=inset\\]\\:m-2:is(:where(.peer)[data-variant=\"inset\"] ~ *) {\n      margin: calc(var(--spacing) * 2);\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:peer-data-\\[variant\\=inset\\]\\:ml-0:is(:where(.peer)[data-variant=\"inset\"] ~ *) {\n      margin-left: calc(var(--spacing) * 0);\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:peer-data-\\[variant\\=inset\\]\\:rounded-xl:is(:where(.peer)[data-variant=\"inset\"] ~ *) {\n      border-radius: calc(var(--radius)  + 4px);\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:peer-data-\\[variant\\=inset\\]\\:shadow-sm:is(:where(.peer)[data-variant=\"inset\"] ~ *) {\n      --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, #0000001a), 0 1px 2px -1px var(--tw-shadow-color, #0000001a);\n      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:peer-data-\\[variant\\=inset\\]\\:peer-data-\\[state\\=collapsed\\]\\:ml-2:is(:where(.peer)[data-variant=\"inset\"] ~ *):is(:where(.peer)[data-state=\"collapsed\"] ~ *) {\n      margin-left: calc(var(--spacing) * 2);\n    }\n  }\n\n  @media (width >= 48rem) {\n    .md\\:after\\:hidden:after {\n      content: var(--tw-content);\n      display: none;\n    }\n  }\n\n  @media (width >= 64rem) {\n    .lg\\:px-8 {\n      padding-inline: calc(var(--spacing) * 8);\n    }\n  }\n\n  .dark\\:border-input:is(.dark *) {\n    border-color: var(--input);\n  }\n\n  .dark\\:bg-destructive\\/60:is(.dark *) {\n    background-color: var(--destructive);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .dark\\:bg-destructive\\/60:is(.dark *) {\n      background-color: color-mix(in oklab, var(--destructive) 60%, transparent);\n    }\n  }\n\n  .dark\\:bg-input\\/30:is(.dark *) {\n    background-color: var(--input);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .dark\\:bg-input\\/30:is(.dark *) {\n      background-color: color-mix(in oklab, var(--input) 30%, transparent);\n    }\n  }\n\n  .dark\\:text-muted-foreground:is(.dark *) {\n    color: var(--muted-foreground);\n  }\n\n  @media (hover: hover) {\n    .dark\\:hover\\:bg-accent\\/50:is(.dark *):hover {\n      background-color: var(--accent);\n    }\n\n    @supports (color: color-mix(in lab, red, red)) {\n      .dark\\:hover\\:bg-accent\\/50:is(.dark *):hover {\n        background-color: color-mix(in oklab, var(--accent) 50%, transparent);\n      }\n    }\n  }\n\n  @media (hover: hover) {\n    .dark\\:hover\\:bg-input\\/50:is(.dark *):hover {\n      background-color: var(--input);\n    }\n\n    @supports (color: color-mix(in lab, red, red)) {\n      .dark\\:hover\\:bg-input\\/50:is(.dark *):hover {\n        background-color: color-mix(in oklab, var(--input) 50%, transparent);\n      }\n    }\n  }\n\n  .dark\\:focus-visible\\:ring-destructive\\/40:is(.dark *):focus-visible {\n    --tw-ring-color: var(--destructive);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .dark\\:focus-visible\\:ring-destructive\\/40:is(.dark *):focus-visible {\n      --tw-ring-color: color-mix(in oklab, var(--destructive) 40%, transparent);\n    }\n  }\n\n  .dark\\:aria-invalid\\:ring-destructive\\/40:is(.dark *)[aria-invalid=\"true\"] {\n    --tw-ring-color: var(--destructive);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .dark\\:aria-invalid\\:ring-destructive\\/40:is(.dark *)[aria-invalid=\"true\"] {\n      --tw-ring-color: color-mix(in oklab, var(--destructive) 40%, transparent);\n    }\n  }\n\n  .dark\\:data-\\[active\\=true\\]\\:aria-invalid\\:ring-destructive\\/40:is(.dark *)[data-active=\"true\"][aria-invalid=\"true\"] {\n    --tw-ring-color: var(--destructive);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .dark\\:data-\\[active\\=true\\]\\:aria-invalid\\:ring-destructive\\/40:is(.dark *)[data-active=\"true\"][aria-invalid=\"true\"] {\n      --tw-ring-color: color-mix(in oklab, var(--destructive) 40%, transparent);\n    }\n  }\n\n  .dark\\:data-\\[state\\=active\\]\\:border-input:is(.dark *)[data-state=\"active\"] {\n    border-color: var(--input);\n  }\n\n  .dark\\:data-\\[state\\=active\\]\\:bg-input\\/30:is(.dark *)[data-state=\"active\"] {\n    background-color: var(--input);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .dark\\:data-\\[state\\=active\\]\\:bg-input\\/30:is(.dark *)[data-state=\"active\"] {\n      background-color: color-mix(in oklab, var(--input) 30%, transparent);\n    }\n  }\n\n  .dark\\:data-\\[state\\=active\\]\\:text-foreground:is(.dark *)[data-state=\"active\"] {\n    color: var(--foreground);\n  }\n\n  .dark\\:data-\\[state\\=checked\\]\\:bg-primary:is(.dark *)[data-state=\"checked\"] {\n    background-color: var(--primary);\n  }\n\n  .dark\\:data-\\[state\\=checked\\]\\:bg-primary-foreground:is(.dark *)[data-state=\"checked\"] {\n    background-color: var(--primary-foreground);\n  }\n\n  .dark\\:data-\\[state\\=unchecked\\]\\:bg-card-foreground:is(.dark *)[data-state=\"unchecked\"] {\n    background-color: var(--card-foreground);\n  }\n\n  .dark\\:data-\\[state\\=unchecked\\]\\:bg-input\\/80:is(.dark *)[data-state=\"unchecked\"] {\n    background-color: var(--input);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .dark\\:data-\\[state\\=unchecked\\]\\:bg-input\\/80:is(.dark *)[data-state=\"unchecked\"] {\n      background-color: color-mix(in oklab, var(--input) 80%, transparent);\n    }\n  }\n\n  .dark\\:data-\\[variant\\=destructive\\]\\:focus\\:bg-destructive\\/20:is(.dark *)[data-variant=\"destructive\"]:focus {\n    background-color: var(--destructive);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .dark\\:data-\\[variant\\=destructive\\]\\:focus\\:bg-destructive\\/20:is(.dark *)[data-variant=\"destructive\"]:focus {\n      background-color: color-mix(in oklab, var(--destructive) 20%, transparent);\n    }\n  }\n\n  .\\[\\&_\\.recharts-cartesian-axis-tick_text\\]\\:fill-muted-foreground .recharts-cartesian-axis-tick text {\n    fill: var(--muted-foreground);\n  }\n\n  .\\[\\&_\\.recharts-cartesian-grid_line\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border\\/50 .recharts-cartesian-grid line[stroke=\"#ccc\"] {\n    stroke: var(--border);\n  }\n\n  @supports (color: color-mix(in lab, red, red)) {\n    .\\[\\&_\\.recharts-cartesian-grid_line\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border\\/50 .recharts-cartesian-grid line[stroke=\"#ccc\"] {\n      stroke: color-mix(in oklab, var(--border) 50%, transparent);\n    }\n  }\n\n  .\\[\\&_\\.recharts-curve\\.recharts-tooltip-cursor\\]\\:stroke-border .recharts-curve.recharts-tooltip-cursor {\n    stroke: var(--border);\n  }\n\n  .\\[\\&_\\.recharts-dot\\[stroke\\=\\'\\#fff\\'\\]\\]\\:stroke-transparent .recharts-dot[stroke=\"#fff\"] {\n    stroke: #0000;\n  }\n\n  .\\[\\&_\\.recharts-layer\\]\\:outline-hidden .recharts-layer {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n\n  @media (forced-colors: active) {\n    .\\[\\&_\\.recharts-layer\\]\\:outline-hidden .recharts-layer {\n      outline-offset: 2px;\n      outline: 2px solid #0000;\n    }\n  }\n\n  .\\[\\&_\\.recharts-polar-grid_\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border .recharts-polar-grid [stroke=\"#ccc\"] {\n    stroke: var(--border);\n  }\n\n  .\\[\\&_\\.recharts-radial-bar-background-sector\\]\\:fill-muted .recharts-radial-bar-background-sector {\n    fill: var(--muted);\n  }\n\n  .\\[\\&_\\.recharts-rectangle\\.recharts-tooltip-cursor\\]\\:fill-muted .recharts-rectangle.recharts-tooltip-cursor {\n    fill: var(--muted);\n  }\n\n  .\\[\\&_\\.recharts-reference-line_\\[stroke\\=\\'\\#ccc\\'\\]\\]\\:stroke-border .recharts-reference-line [stroke=\"#ccc\"] {\n    stroke: var(--border);\n  }\n\n  .\\[\\&_\\.recharts-sector\\]\\:outline-hidden .recharts-sector {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n\n  @media (forced-colors: active) {\n    .\\[\\&_\\.recharts-sector\\]\\:outline-hidden .recharts-sector {\n      outline-offset: 2px;\n      outline: 2px solid #0000;\n    }\n  }\n\n  .\\[\\&_\\.recharts-sector\\[stroke\\=\\'\\#fff\\'\\]\\]\\:stroke-transparent .recharts-sector[stroke=\"#fff\"] {\n    stroke: #0000;\n  }\n\n  .\\[\\&_\\.recharts-surface\\]\\:outline-hidden .recharts-surface {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n\n  @media (forced-colors: active) {\n    .\\[\\&_\\.recharts-surface\\]\\:outline-hidden .recharts-surface {\n      outline-offset: 2px;\n      outline: 2px solid #0000;\n    }\n  }\n\n  .\\[\\&_\\[cmdk-group-heading\\]\\]\\:px-2 [cmdk-group-heading] {\n    padding-inline: calc(var(--spacing) * 2);\n  }\n\n  .\\[\\&_\\[cmdk-group-heading\\]\\]\\:py-1\\.5 [cmdk-group-heading] {\n    padding-block: calc(var(--spacing) * 1.5);\n  }\n\n  .\\[\\&_\\[cmdk-group-heading\\]\\]\\:text-xs [cmdk-group-heading] {\n    font-size: var(--text-xs);\n    line-height: var(--tw-leading, var(--text-xs--line-height));\n  }\n\n  .\\[\\&_\\[cmdk-group-heading\\]\\]\\:font-medium [cmdk-group-heading] {\n    --tw-font-weight: var(--font-weight-medium);\n    font-weight: var(--font-weight-medium);\n  }\n\n  .\\[\\&_\\[cmdk-group-heading\\]\\]\\:text-muted-foreground [cmdk-group-heading] {\n    color: var(--muted-foreground);\n  }\n\n  .\\[\\&_\\[cmdk-group\\]\\]\\:px-2 [cmdk-group] {\n    padding-inline: calc(var(--spacing) * 2);\n  }\n\n  .\\[\\&_\\[cmdk-group\\]\\:not\\(\\[hidden\\]\\)_\\~\\[cmdk-group\\]\\]\\:pt-0 [cmdk-group]:not([hidden]) ~ [cmdk-group] {\n    padding-top: calc(var(--spacing) * 0);\n  }\n\n  .\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:h-5 [cmdk-input-wrapper] svg {\n    height: calc(var(--spacing) * 5);\n  }\n\n  .\\[\\&_\\[cmdk-input-wrapper\\]_svg\\]\\:w-5 [cmdk-input-wrapper] svg {\n    width: calc(var(--spacing) * 5);\n  }\n\n  .\\[\\&_\\[cmdk-input\\]\\]\\:h-12 [cmdk-input] {\n    height: calc(var(--spacing) * 12);\n  }\n\n  .\\[\\&_\\[cmdk-item\\]\\]\\:px-2 [cmdk-item] {\n    padding-inline: calc(var(--spacing) * 2);\n  }\n\n  .\\[\\&_\\[cmdk-item\\]\\]\\:py-3 [cmdk-item] {\n    padding-block: calc(var(--spacing) * 3);\n  }\n\n  .\\[\\&_\\[cmdk-item\\]_svg\\]\\:h-5 [cmdk-item] svg {\n    height: calc(var(--spacing) * 5);\n  }\n\n  .\\[\\&_\\[cmdk-item\\]_svg\\]\\:w-5 [cmdk-item] svg {\n    width: calc(var(--spacing) * 5);\n  }\n\n  .\\[\\&_p\\]\\:leading-relaxed p {\n    --tw-leading: var(--leading-relaxed);\n    line-height: var(--leading-relaxed);\n  }\n\n  .\\[\\&_svg\\]\\:pointer-events-none svg {\n    pointer-events: none;\n  }\n\n  .\\[\\&_svg\\]\\:shrink-0 svg {\n    flex-shrink: 0;\n  }\n\n  .\\[\\&_svg\\:not\\(\\[class\\*\\=\\'size-\\'\\]\\)\\]\\:size-4 svg:not([class*=\"size-\"]) {\n    width: calc(var(--spacing) * 4);\n    height: calc(var(--spacing) * 4);\n  }\n\n  .\\[\\&_svg\\:not\\(\\[class\\*\\=\\'text-\\'\\]\\)\\]\\:text-muted-foreground svg:not([class*=\"text-\"]) {\n    color: var(--muted-foreground);\n  }\n\n  .\\[\\&_tr\\]\\:border-b tr {\n    border-bottom-style: var(--tw-border-style);\n    border-bottom-width: 1px;\n  }\n\n  .\\[\\&_tr\\:last-child\\]\\:border-0 tr:last-child {\n    border-style: var(--tw-border-style);\n    border-width: 0;\n  }\n\n  .\\[\\&\\:has\\(\\>\\.day-range-end\\)\\]\\:rounded-r-md:has( > .day-range-end) {\n    border-top-right-radius: calc(var(--radius)  - 2px);\n    border-bottom-right-radius: calc(var(--radius)  - 2px);\n  }\n\n  .\\[\\&\\:has\\(\\>\\.day-range-start\\)\\]\\:rounded-l-md:has( > .day-range-start) {\n    border-top-left-radius: calc(var(--radius)  - 2px);\n    border-bottom-left-radius: calc(var(--radius)  - 2px);\n  }\n\n  .\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-md:has([aria-selected]) {\n    border-radius: calc(var(--radius)  - 2px);\n  }\n\n  .\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:bg-accent:has([aria-selected]) {\n    background-color: var(--accent);\n  }\n\n  .first\\:\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-l-md:first-child:has([aria-selected]) {\n    border-top-left-radius: calc(var(--radius)  - 2px);\n    border-bottom-left-radius: calc(var(--radius)  - 2px);\n  }\n\n  .last\\:\\[\\&\\:has\\(\\[aria-selected\\]\\)\\]\\:rounded-r-md:last-child:has([aria-selected]) {\n    border-top-right-radius: calc(var(--radius)  - 2px);\n    border-bottom-right-radius: calc(var(--radius)  - 2px);\n  }\n\n  .\\[\\&\\:has\\(\\[aria-selected\\]\\.day-range-end\\)\\]\\:rounded-r-md:has([aria-selected].day-range-end) {\n    border-top-right-radius: calc(var(--radius)  - 2px);\n    border-bottom-right-radius: calc(var(--radius)  - 2px);\n  }\n\n  .\\[\\&\\:has\\(\\[role\\=checkbox\\]\\)\\]\\:pr-0:has([role=\"checkbox\"]) {\n    padding-right: calc(var(--spacing) * 0);\n  }\n\n  .\\[\\.border-b\\]\\:pb-6.border-b {\n    padding-bottom: calc(var(--spacing) * 6);\n  }\n\n  .\\[\\.border-t\\]\\:pt-6.border-t {\n    padding-top: calc(var(--spacing) * 6);\n  }\n\n  :is(.\\*\\:\\[span\\]\\:last\\:flex > *):is(span):last-child {\n    display: flex;\n  }\n\n  :is(.\\*\\:\\[span\\]\\:last\\:items-center > *):is(span):last-child {\n    align-items: center;\n  }\n\n  :is(.\\*\\:\\[span\\]\\:last\\:gap-2 > *):is(span):last-child {\n    gap: calc(var(--spacing) * 2);\n  }\n\n  :is(.data-\\[variant\\=destructive\\]\\:\\*\\:\\[svg\\]\\:\\!text-destructive[data-variant=\"destructive\"] > *):is(svg) {\n    color: var(--destructive) !important;\n  }\n\n  .\\[\\&\\:last-child\\]\\:pb-6:last-child {\n    padding-bottom: calc(var(--spacing) * 6);\n  }\n\n  .\\[\\&\\>\\[role\\=checkbox\\]\\]\\:translate-y-\\[2px\\] > [role=\"checkbox\"] {\n    --tw-translate-y: 2px;\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .\\[\\&\\>button\\]\\:hidden > button {\n    display: none;\n  }\n\n  .\\[\\&\\>span\\:last-child\\]\\:truncate > span:last-child {\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n\n  .\\[\\&\\>svg\\]\\:pointer-events-none > svg {\n    pointer-events: none;\n  }\n\n  .\\[\\&\\>svg\\]\\:size-3 > svg {\n    width: calc(var(--spacing) * 3);\n    height: calc(var(--spacing) * 3);\n  }\n\n  .\\[\\&\\>svg\\]\\:size-3\\.5 > svg {\n    width: calc(var(--spacing) * 3.5);\n    height: calc(var(--spacing) * 3.5);\n  }\n\n  .\\[\\&\\>svg\\]\\:size-4 > svg {\n    width: calc(var(--spacing) * 4);\n    height: calc(var(--spacing) * 4);\n  }\n\n  .\\[\\&\\>svg\\]\\:h-2\\.5 > svg {\n    height: calc(var(--spacing) * 2.5);\n  }\n\n  .\\[\\&\\>svg\\]\\:h-3 > svg {\n    height: calc(var(--spacing) * 3);\n  }\n\n  .\\[\\&\\>svg\\]\\:w-2\\.5 > svg {\n    width: calc(var(--spacing) * 2.5);\n  }\n\n  .\\[\\&\\>svg\\]\\:w-3 > svg {\n    width: calc(var(--spacing) * 3);\n  }\n\n  .\\[\\&\\>svg\\]\\:shrink-0 > svg {\n    flex-shrink: 0;\n  }\n\n  .\\[\\&\\>svg\\]\\:translate-y-0\\.5 > svg {\n    --tw-translate-y: calc(var(--spacing) * .5);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n\n  .\\[\\&\\>svg\\]\\:text-current > svg {\n    color: currentColor;\n  }\n\n  .\\[\\&\\>svg\\]\\:text-muted-foreground > svg {\n    color: var(--muted-foreground);\n  }\n\n  .\\[\\&\\>svg\\]\\:text-sidebar-accent-foreground > svg {\n    color: var(--sidebar-accent-foreground);\n  }\n\n  .\\[\\&\\>tr\\]\\:last\\:border-b-0 > tr:last-child {\n    border-bottom-style: var(--tw-border-style);\n    border-bottom-width: 0;\n  }\n\n  .\\[\\&\\[data-panel-group-direction\\=vertical\\]\\>div\\]\\:rotate-90[data-panel-group-direction=\"vertical\"] > div {\n    rotate: 90deg;\n  }\n\n  .\\[\\&\\[data-state\\=open\\]\\>svg\\]\\:rotate-180[data-state=\"open\"] > svg {\n    rotate: 180deg;\n  }\n\n  [data-side=\"left\"][data-collapsible=\"offcanvas\"] .\\[\\[data-side\\=left\\]\\[data-collapsible\\=offcanvas\\]_\\&\\]\\:-right-2 {\n    right: calc(var(--spacing) * -2);\n  }\n\n  [data-side=\"left\"][data-state=\"collapsed\"] .\\[\\[data-side\\=left\\]\\[data-state\\=collapsed\\]_\\&\\]\\:cursor-e-resize {\n    cursor: e-resize;\n  }\n\n  [data-side=\"right\"][data-collapsible=\"offcanvas\"] .\\[\\[data-side\\=right\\]\\[data-collapsible\\=offcanvas\\]_\\&\\]\\:-left-2 {\n    left: calc(var(--spacing) * -2);\n  }\n\n  [data-side=\"right\"][data-state=\"collapsed\"] .\\[\\[data-side\\=right\\]\\[data-state\\=collapsed\\]_\\&\\]\\:cursor-w-resize {\n    cursor: w-resize;\n  }\n\n  @media (hover: hover) {\n    a.\\[a\\&\\]\\:hover\\:bg-accent:hover {\n      background-color: var(--accent);\n    }\n  }\n\n  @media (hover: hover) {\n    a.\\[a\\&\\]\\:hover\\:bg-destructive\\/90:hover {\n      background-color: var(--destructive);\n    }\n\n    @supports (color: color-mix(in lab, red, red)) {\n      a.\\[a\\&\\]\\:hover\\:bg-destructive\\/90:hover {\n        background-color: color-mix(in oklab, var(--destructive) 90%, transparent);\n      }\n    }\n  }\n\n  @media (hover: hover) {\n    a.\\[a\\&\\]\\:hover\\:bg-primary\\/90:hover {\n      background-color: var(--primary);\n    }\n\n    @supports (color: color-mix(in lab, red, red)) {\n      a.\\[a\\&\\]\\:hover\\:bg-primary\\/90:hover {\n        background-color: color-mix(in oklab, var(--primary) 90%, transparent);\n      }\n    }\n  }\n\n  @media (hover: hover) {\n    a.\\[a\\&\\]\\:hover\\:bg-secondary\\/90:hover {\n      background-color: var(--secondary);\n    }\n\n    @supports (color: color-mix(in lab, red, red)) {\n      a.\\[a\\&\\]\\:hover\\:bg-secondary\\/90:hover {\n        background-color: color-mix(in oklab, var(--secondary) 90%, transparent);\n      }\n    }\n  }\n\n  @media (hover: hover) {\n    a.\\[a\\&\\]\\:hover\\:text-accent-foreground:hover {\n      color: var(--accent-foreground);\n    }\n  }\n}\n\n:root {\n  --font-size: 14px;\n  --background: #fff;\n  --foreground: oklch(.145 0 0);\n  --card: #fff;\n  --card-foreground: oklch(.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(.145 0 0);\n  --primary: #030213;\n  --primary-foreground: oklch(1 0 0);\n  --secondary: oklch(.95 .0058 264.53);\n  --secondary-foreground: #030213;\n  --muted: #ececf0;\n  --muted-foreground: #717182;\n  --accent: #e9ebef;\n  --accent-foreground: #030213;\n  --destructive: #d4183d;\n  --destructive-foreground: #fff;\n  --border: #0000001a;\n  --input: transparent;\n  --input-background: #f3f3f5;\n  --switch-background: #cbced4;\n  --font-weight-medium: 500;\n  --font-weight-normal: 400;\n  --ring: oklch(.708 0 0);\n  --chart-1: oklch(.646 .222 41.116);\n  --chart-2: oklch(.6 .118 184.704);\n  --chart-3: oklch(.398 .07 227.392);\n  --chart-4: oklch(.828 .189 84.429);\n  --chart-5: oklch(.769 .188 70.08);\n  --radius: .625rem;\n  --sidebar: oklch(.985 0 0);\n  --sidebar-foreground: oklch(.145 0 0);\n  --sidebar-primary: #030213;\n  --sidebar-primary-foreground: oklch(.985 0 0);\n  --sidebar-accent: oklch(.97 0 0);\n  --sidebar-accent-foreground: oklch(.205 0 0);\n  --sidebar-border: oklch(.922 0 0);\n  --sidebar-ring: oklch(.708 0 0);\n  --cube-neon-blue: #0ff;\n  --cube-neon-blue-emissive: #08a;\n  --brain-primary: #f48;\n  --brain-emissive: #f26;\n  --edge-white: #fff;\n  --edge-black: #000;\n  --animation-duration-fast: .2s;\n  --animation-duration-medium: .5s;\n  --animation-duration-slow: 1s;\n  --easing-smooth: cubic-bezier(.4, 0, .2, 1);\n  --easing-elastic: cubic-bezier(.68, -.55, .265, 1.55);\n}\n\n.dark {\n  --background: oklch(.145 0 0);\n  --foreground: oklch(.985 0 0);\n  --card: oklch(.145 0 0);\n  --card-foreground: oklch(.985 0 0);\n  --popover: oklch(.145 0 0);\n  --popover-foreground: oklch(.985 0 0);\n  --primary: oklch(.985 0 0);\n  --primary-foreground: oklch(.205 0 0);\n  --secondary: oklch(.269 0 0);\n  --secondary-foreground: oklch(.985 0 0);\n  --muted: oklch(.269 0 0);\n  --muted-foreground: oklch(.708 0 0);\n  --accent: oklch(.269 0 0);\n  --accent-foreground: oklch(.985 0 0);\n  --destructive: oklch(.396 .141 25.723);\n  --destructive-foreground: oklch(.637 .237 25.331);\n  --border: oklch(.269 0 0);\n  --input: oklch(.269 0 0);\n  --ring: oklch(.439 0 0);\n  --font-weight-medium: 500;\n  --font-weight-normal: 400;\n  --chart-1: oklch(.488 .243 264.376);\n  --chart-2: oklch(.696 .17 162.48);\n  --chart-3: oklch(.769 .188 70.08);\n  --chart-4: oklch(.627 .265 303.9);\n  --chart-5: oklch(.645 .246 16.439);\n  --sidebar: oklch(.205 0 0);\n  --sidebar-foreground: oklch(.985 0 0);\n  --sidebar-primary: oklch(.488 .243 264.376);\n  --sidebar-primary-foreground: oklch(.985 0 0);\n  --sidebar-accent: oklch(.269 0 0);\n  --sidebar-accent-foreground: oklch(.985 0 0);\n  --sidebar-border: oklch(.269 0 0);\n  --sidebar-ring: oklch(.439 0 0);\n  --cube-neon-blue: #0ff;\n  --cube-neon-blue-emissive: #08a;\n  --brain-primary: #f48;\n  --brain-emissive: #f26;\n  --edge-white: #fff;\n  --edge-black: #000;\n}\n\nhtml {\n  font-size: var(--font-size);\n  scroll-behavior: smooth;\n}\n\n.scroll-container {\n  scroll-snap-type: y mandatory;\n  height: 100vh;\n  overflow-y: auto;\n}\n\n.scroll-section {\n  scroll-snap-align: start;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  display: flex;\n}\n\n* {\n  scrollbar-width: thin;\n  scrollbar-color: #0ff #1a1a1a;\n}\n\n::-webkit-scrollbar {\n  width: 8px;\n}\n\n::-webkit-scrollbar-track {\n  background: #1a1a1a;\n}\n\n::-webkit-scrollbar-thumb {\n  background: linear-gradient(#0ff, #f48);\n  border-radius: 4px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(#0dd, #f36);\n}\n\n.phase-indicator {\n  transition: all var(--animation-duration-medium) var(--easing-smooth);\n}\n\n.cube-container {\n  will-change: transform;\n  transform-style: preserve-3d;\n}\n\n@property --tw-translate-x {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0;\n}\n\n@property --tw-translate-y {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0;\n}\n\n@property --tw-translate-z {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0;\n}\n\n@property --tw-rotate-x {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: rotateX(0);\n}\n\n@property --tw-rotate-y {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: rotateY(0);\n}\n\n@property --tw-rotate-z {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: rotateZ(0);\n}\n\n@property --tw-skew-x {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: skewX(0);\n}\n\n@property --tw-skew-y {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: skewY(0);\n}\n\n@property --tw-space-y-reverse {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0;\n}\n\n@property --tw-space-x-reverse {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0;\n}\n\n@property --tw-border-style {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: solid;\n}\n\n@property --tw-gradient-position {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-gradient-from {\n  syntax: \"<color>\";\n  inherits: false;\n  initial-value: #0000;\n}\n\n@property --tw-gradient-via {\n  syntax: \"<color>\";\n  inherits: false;\n  initial-value: #0000;\n}\n\n@property --tw-gradient-to {\n  syntax: \"<color>\";\n  inherits: false;\n  initial-value: #0000;\n}\n\n@property --tw-gradient-stops {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-gradient-via-stops {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-gradient-from-position {\n  syntax: \"<length-percentage>\";\n  inherits: false;\n  initial-value: 0%;\n}\n\n@property --tw-gradient-via-position {\n  syntax: \"<length-percentage>\";\n  inherits: false;\n  initial-value: 50%;\n}\n\n@property --tw-gradient-to-position {\n  syntax: \"<length-percentage>\";\n  inherits: false;\n  initial-value: 100%;\n}\n\n@property --tw-leading {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-font-weight {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-tracking {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-ordinal {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-slashed-zero {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-numeric-figure {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-numeric-spacing {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-numeric-fraction {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-shadow {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n\n@property --tw-shadow-color {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-shadow-alpha {\n  syntax: \"<percentage>\";\n  inherits: false;\n  initial-value: 100%;\n}\n\n@property --tw-inset-shadow {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n\n@property --tw-inset-shadow-color {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-inset-shadow-alpha {\n  syntax: \"<percentage>\";\n  inherits: false;\n  initial-value: 100%;\n}\n\n@property --tw-ring-color {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-ring-shadow {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n\n@property --tw-inset-ring-color {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-inset-ring-shadow {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n\n@property --tw-ring-inset {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-ring-offset-width {\n  syntax: \"<length>\";\n  inherits: false;\n  initial-value: 0;\n}\n\n@property --tw-ring-offset-color {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: #fff;\n}\n\n@property --tw-ring-offset-shadow {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n\n@property --tw-outline-style {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: solid;\n}\n\n@property --tw-blur {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-brightness {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-contrast {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-grayscale {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-hue-rotate {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-invert {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-opacity {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-saturate {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-sepia {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-drop-shadow {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-drop-shadow-color {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-drop-shadow-alpha {\n  syntax: \"<percentage>\";\n  inherits: false;\n  initial-value: 100%;\n}\n\n@property --tw-drop-shadow-size {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-backdrop-blur {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-backdrop-brightness {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-backdrop-contrast {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-backdrop-grayscale {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-backdrop-hue-rotate {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-backdrop-invert {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-backdrop-opacity {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-backdrop-saturate {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-backdrop-sepia {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-duration {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-ease {\n  syntax: \"*\";\n  inherits: false\n}\n\n@property --tw-content {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: \"\";\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes pulse {\n  50% {\n    opacity: .5;\n  }\n}\n\n@keyframes bounce {\n  0%, 100% {\n    animation-timing-function: cubic-bezier(.8, 0, 1, 1);\n    transform: translateY(-25%);\n  }\n\n  50% {\n    animation-timing-function: cubic-bezier(0, 0, .2, 1);\n    transform: none;\n  }\n}\n\n@keyframes enter {\n  from {\n    opacity: var(--tw-enter-opacity, 1);\n    transform: translate3d(var(--tw-enter-translate-x, 0), var(--tw-enter-translate-y, 0), 0) scale3d(var(--tw-enter-scale, 1), var(--tw-enter-scale, 1), var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0));\n  }\n}\n\n@keyframes exit {\n  to {\n    opacity: var(--tw-exit-opacity, 1);\n    transform: translate3d(var(--tw-exit-translate-x, 0), var(--tw-exit-translate-y, 0), 0) scale3d(var(--tw-exit-scale, 1), var(--tw-exit-scale, 1), var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0));\n  }\n}\n\n@keyframes accordion-down {\n  from {\n    height: 0;\n  }\n\n  to {\n    height: var(--radix-accordion-content-height, var(--bits-accordion-content-height));\n  }\n}\n\n@keyframes accordion-up {\n  from {\n    height: var(--radix-accordion-content-height, var(--bits-accordion-content-height));\n  }\n\n  to {\n    height: 0;\n  }\n}\n\n@keyframes caret-blink {\n  0%, 70%, 100% {\n    opacity: 1;\n  }\n\n  20%, 50% {\n    opacity: 0;\n  }\n}\n\n/* virtual-fs:file:///styles/globals.css */\n@custom-variant dark (&:is(.dark *));\n:root {\n  --font-size: 14px;\n  --background: #ffffff;\n  --foreground: oklch(0.145 0 0);\n  --card: #ffffff;\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: #030213;\n  --primary-foreground: oklch(1 0 0);\n  --secondary: oklch(0.95 0.0058 264.53);\n  --secondary-foreground: #030213;\n  --muted: #ececf0;\n  --muted-foreground: #717182;\n  --accent: #e9ebef;\n  --accent-foreground: #030213;\n  --destructive: #d4183d;\n  --destructive-foreground: #ffffff;\n  --border: rgba(0, 0, 0, 0.1);\n  --input: transparent;\n  --input-background: #f3f3f5;\n  --switch-background: #cbced4;\n  --font-weight-medium: 500;\n  --font-weight-normal: 400;\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.646 0.222 41.116);\n  --chart-2: oklch(0.6 0.118 184.704);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --radius: 0.625rem;\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: #030213;\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n  --cube-neon-blue: #00ffff;\n  --cube-neon-blue-emissive: #0088aa;\n  --brain-primary: #ff4488;\n  --brain-emissive: #ff2266;\n  --edge-white: #ffffff;\n  --edge-black: #000000;\n  --animation-duration-fast: 0.2s;\n  --animation-duration-medium: 0.5s;\n  --animation-duration-slow: 1s;\n  --easing-smooth: cubic-bezier(0.4, 0, 0.2, 1);\n  --easing-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.145 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.145 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.985 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.269 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.396 0.141 25.723);\n  --destructive-foreground: oklch(0.637 0.237 25.331);\n  --border: oklch(0.269 0 0);\n  --input: oklch(0.269 0 0);\n  --ring: oklch(0.439 0 0);\n  --font-weight-medium: 500;\n  --font-weight-normal: 400;\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(0.269 0 0);\n  --sidebar-ring: oklch(0.439 0 0);\n  --cube-neon-blue: #00ffff;\n  --cube-neon-blue-emissive: #0088aa;\n  --brain-primary: #ff4488;\n  --brain-emissive: #ff2266;\n  --edge-white: #ffffff;\n  --edge-black: #000000;\n}\n@theme inline { --color-background: var(--background); --color-foreground: var(--foreground); --color-card: var(--card); --color-card-foreground: var(--card-foreground); --color-popover: var(--popover); --color-popover-foreground: var(--popover-foreground); --color-primary: var(--primary); --color-primary-foreground: var(--primary-foreground); --color-secondary: var(--secondary); --color-secondary-foreground: var(--secondary-foreground); --color-muted: var(--muted); --color-muted-foreground: var(--muted-foreground); --color-accent: var(--accent); --color-accent-foreground: var(--accent-foreground); --color-destructive: var(--destructive); --color-destructive-foreground: var(--destructive-foreground); --color-border: var(--border); --color-input: var(--input); --color-input-background: var(--input-background); --color-switch-background: var(--switch-background); --color-ring: var(--ring); --color-chart-1: var(--chart-1); --color-chart-2: var(--chart-2); --color-chart-3: var(--chart-3); --color-chart-4: var(--chart-4); --color-chart-5: var(--chart-5); --radius-sm: calc(var(--radius) - 4px); --radius-md: calc(var(--radius) - 2px); --radius-lg: var(--radius); --radius-xl: calc(var(--radius) + 4px); --color-sidebar: var(--sidebar); --color-sidebar-foreground: var(--sidebar-foreground); --color-sidebar-primary: var(--sidebar-primary); --color-sidebar-primary-foreground: var(--sidebar-primary-foreground); --color-sidebar-accent: var(--sidebar-accent); --color-sidebar-accent-foreground: var(--sidebar-accent-foreground); --color-sidebar-border: var(--sidebar-border); --color-sidebar-ring: var(--sidebar-ring); --color-cube-neon-blue: var(--cube-neon-blue); --color-cube-neon-blue-emissive: var(--cube-neon-blue-emissive); --color-brain-primary: var(--brain-primary); --color-brain-emissive: var(--brain-emissive); --color-edge-white: var(--edge-white); --color-edge-black: var(--edge-black); }\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n@layer base {\n  :where(:not(:has([class*=\" text-\"]), :not(:has([class^=text-])))) {\n    h1 {\n      font-size: var(--text-2xl);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n    h2 {\n      font-size: var(--text-xl);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n    h3 {\n      font-size: var(--text-lg);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n    h4 {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n    p {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-normal);\n      line-height: 1.5;\n    }\n    label {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n    button {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n    input {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-normal);\n      line-height: 1.5;\n    }\n  }\n}\nhtml {\n  font-size: var(--font-size);\n  scroll-behavior: smooth;\n}\n.scroll-container {\n  height: 100vh;\n  overflow-y: auto;\n  scroll-snap-type: y mandatory;\n}\n.scroll-section {\n  height: 100vh;\n  scroll-snap-align: start;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n* {\n  scrollbar-width: thin;\n  scrollbar-color: #00ffff #1a1a1a;\n}\n*::-webkit-scrollbar {\n  width: 8px;\n}\n*::-webkit-scrollbar-track {\n  background: #1a1a1a;\n}\n*::-webkit-scrollbar-thumb {\n  background:\n    linear-gradient(\n      to bottom,\n      #00ffff,\n      #ff4488);\n  border-radius: 4px;\n}\n*::-webkit-scrollbar-thumb:hover {\n  background:\n    linear-gradient(\n      to bottom,\n      #00dddd,\n      #ff3366);\n}\n.phase-indicator {\n  transition: all var(--animation-duration-medium) var(--easing-smooth);\n}\n.cube-container {\n  will-change: transform;\n  transform-style: preserve-3d;\n}\n/*# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3R5bGVzL2dsb2JhbHMuY3NzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJAY3VzdG9tLXZhcmlhbnQgZGFyayAoJjppcyguZGFyayAqKSk7XG5cbjpyb290IHtcbiAgLS1mb250LXNpemU6IDE0cHg7XG4gIC0tYmFja2dyb3VuZDogI2ZmZmZmZjtcbiAgLS1mb3JlZ3JvdW5kOiBva2xjaCgwLjE0NSAwIDApO1xuICAtLWNhcmQ6ICNmZmZmZmY7XG4gIC0tY2FyZC1mb3JlZ3JvdW5kOiBva2xjaCgwLjE0NSAwIDApO1xuICAtLXBvcG92ZXI6IG9rbGNoKDEgMCAwKTtcbiAgLS1wb3BvdmVyLWZvcmVncm91bmQ6IG9rbGNoKDAuMTQ1IDAgMCk7XG4gIC0tcHJpbWFyeTogIzAzMDIxMztcbiAgLS1wcmltYXJ5LWZvcmVncm91bmQ6IG9rbGNoKDEgMCAwKTtcbiAgLS1zZWNvbmRhcnk6IG9rbGNoKDAuOTUgMC4wMDU4IDI2NC41Myk7XG4gIC0tc2Vjb25kYXJ5LWZvcmVncm91bmQ6ICMwMzAyMTM7XG4gIC0tbXV0ZWQ6ICNlY2VjZjA7XG4gIC0tbXV0ZWQtZm9yZWdyb3VuZDogIzcxNzE4MjtcbiAgLS1hY2NlbnQ6ICNlOWViZWY7XG4gIC0tYWNjZW50LWZvcmVncm91bmQ6ICMwMzAyMTM7XG4gIC0tZGVzdHJ1Y3RpdmU6ICNkNDE4M2Q7XG4gIC0tZGVzdHJ1Y3RpdmUtZm9yZWdyb3VuZDogI2ZmZmZmZjtcbiAgLS1ib3JkZXI6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgLS1pbnB1dDogdHJhbnNwYXJlbnQ7XG4gIC0taW5wdXQtYmFja2dyb3VuZDogI2YzZjNmNTtcbiAgLS1zd2l0Y2gtYmFja2dyb3VuZDogI2NiY2VkNDtcbiAgLS1mb250LXdlaWdodC1tZWRpdW06IDUwMDtcbiAgLS1mb250LXdlaWdodC1ub3JtYWw6IDQwMDtcbiAgLS1yaW5nOiBva2xjaCgwLjcwOCAwIDApO1xuICAtLWNoYXJ0LTE6IG9rbGNoKDAuNjQ2IDAuMjIyIDQxLjExNik7XG4gIC0tY2hhcnQtMjogb2tsY2goMC42IDAuMTE4IDE4NC43MDQpO1xuICAtLWNoYXJ0LTM6IG9rbGNoKDAuMzk4IDAuMDcgMjI3LjM5Mik7XG4gIC0tY2hhcnQtNDogb2tsY2goMC44MjggMC4xODkgODQuNDI5KTtcbiAgLS1jaGFydC01OiBva2xjaCgwLjc2OSAwLjE4OCA3MC4wOCk7XG4gIC0tcmFkaXVzOiAwLjYyNXJlbTtcbiAgLS1zaWRlYmFyOiBva2xjaCgwLjk4NSAwIDApO1xuICAtLXNpZGViYXItZm9yZWdyb3VuZDogb2tsY2goMC4xNDUgMCAwKTtcbiAgLS1zaWRlYmFyLXByaW1hcnk6ICMwMzAyMTM7XG4gIC0tc2lkZWJhci1wcmltYXJ5LWZvcmVncm91bmQ6IG9rbGNoKDAuOTg1IDAgMCk7XG4gIC0tc2lkZWJhci1hY2NlbnQ6IG9rbGNoKDAuOTcgMCAwKTtcbiAgLS1zaWRlYmFyLWFjY2VudC1mb3JlZ3JvdW5kOiBva2xjaCgwLjIwNSAwIDApO1xuICAtLXNpZGViYXItYm9yZGVyOiBva2xjaCgwLjkyMiAwIDApO1xuICAtLXNpZGViYXItcmluZzogb2tsY2goMC43MDggMCAwKTtcbiAgXG4gIC8qIEVuaGFuY2VkIDNEIEFuaW1hdGlvbiBWYXJpYWJsZXMgKi9cbiAgLS1jdWJlLW5lb24tYmx1ZTogIzAwZmZmZjtcbiAgLS1jdWJlLW5lb24tYmx1ZS1lbWlzc2l2ZTogIzAwODhhYTtcbiAgLS1icmFpbi1wcmltYXJ5OiAjZmY0NDg4O1xuICAtLWJyYWluLWVtaXNzaXZlOiAjZmYyMjY2O1xuICAtLWVkZ2Utd2hpdGU6ICNmZmZmZmY7XG4gIC0tZWRnZS1ibGFjazogIzAwMDAwMDtcbiAgXG4gIC8qIFBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB2YXJpYWJsZXMgKi9cbiAgLS1hbmltYXRpb24tZHVyYXRpb24tZmFzdDogMC4ycztcbiAgLS1hbmltYXRpb24tZHVyYXRpb24tbWVkaXVtOiAwLjVzO1xuICAtLWFuaW1hdGlvbi1kdXJhdGlvbi1zbG93OiAxcztcbiAgLS1lYXNpbmctc21vb3RoOiBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpO1xuICAtLWVhc2luZy1lbGFzdGljOiBjdWJpYy1iZXppZXIoMC42OCwgLTAuNTUsIDAuMjY1LCAxLjU1KTtcbn1cblxuLmRhcmsge1xuICAtLWJhY2tncm91bmQ6IG9rbGNoKDAuMTQ1IDAgMCk7XG4gIC0tZm9yZWdyb3VuZDogb2tsY2goMC45ODUgMCAwKTtcbiAgLS1jYXJkOiBva2xjaCgwLjE0NSAwIDApO1xuICAtLWNhcmQtZm9yZWdyb3VuZDogb2tsY2goMC45ODUgMCAwKTtcbiAgLS1wb3BvdmVyOiBva2xjaCgwLjE0NSAwIDApO1xuICAtLXBvcG92ZXItZm9yZWdyb3VuZDogb2tsY2goMC45ODUgMCAwKTtcbiAgLS1wcmltYXJ5OiBva2xjaCgwLjk4NSAwIDApO1xuICAtLXByaW1hcnktZm9yZWdyb3VuZDogb2tsY2goMC4yMDUgMCAwKTtcbiAgLS1zZWNvbmRhcnk6IG9rbGNoKDAuMjY5IDAgMCk7XG4gIC0tc2Vjb25kYXJ5LWZvcmVncm91bmQ6IG9rbGNoKDAuOTg1IDAgMCk7XG4gIC0tbXV0ZWQ6IG9rbGNoKDAuMjY5IDAgMCk7XG4gIC0tbXV0ZWQtZm9yZWdyb3VuZDogb2tsY2goMC43MDggMCAwKTtcbiAgLS1hY2NlbnQ6IG9rbGNoKDAuMjY5IDAgMCk7XG4gIC0tYWNjZW50LWZvcmVncm91bmQ6IG9rbGNoKDAuOTg1IDAgMCk7XG4gIC0tZGVzdHJ1Y3RpdmU6IG9rbGNoKDAuMzk2IDAuMTQxIDI1LjcyMyk7XG4gIC0tZGVzdHJ1Y3RpdmUtZm9yZWdyb3VuZDogb2tsY2goMC42MzcgMC4yMzcgMjUuMzMxKTtcbiAgLS1ib3JkZXI6IG9rbGNoKDAuMjY5IDAgMCk7XG4gIC0taW5wdXQ6IG9rbGNoKDAuMjY5IDAgMCk7XG4gIC0tcmluZzogb2tsY2goMC40MzkgMCAwKTtcbiAgLS1mb250LXdlaWdodC1tZWRpdW06IDUwMDtcbiAgLS1mb250LXdlaWdodC1ub3JtYWw6IDQwMDtcbiAgLS1jaGFydC0xOiBva2xjaCgwLjQ4OCAwLjI0MyAyNjQuMzc2KTtcbiAgLS1jaGFydC0yOiBva2xjaCgwLjY5NiAwLjE3IDE2Mi40OCk7XG4gIC0tY2hhcnQtMzogb2tsY2goMC43NjkgMC4xODggNzAuMDgpO1xuICAtLWNoYXJ0LTQ6IG9rbGNoKDAuNjI3IDAuMjY1IDMwMy45KTtcbiAgLS1jaGFydC01OiBva2xjaCgwLjY0NSAwLjI0NiAxNi40MzkpO1xuICAtLXNpZGViYXI6IG9rbGNoKDAuMjA1IDAgMCk7XG4gIC0tc2lkZWJhci1mb3JlZ3JvdW5kOiBva2xjaCgwLjk4NSAwIDApO1xuICAtLXNpZGViYXItcHJpbWFyeTogb2tsY2goMC40ODggMC4yNDMgMjY0LjM3Nik7XG4gIC0tc2lkZWJhci1wcmltYXJ5LWZvcmVncm91bmQ6IG9rbGNoKDAuOTg1IDAgMCk7XG4gIC0tc2lkZWJhci1hY2NlbnQ6IG9rbGNoKDAuMjY5IDAgMCk7XG4gIC0tc2lkZWJhci1hY2NlbnQtZm9yZWdyb3VuZDogb2tsY2goMC45ODUgMCAwKTtcbiAgLS1zaWRlYmFyLWJvcmRlcjogb2tsY2goMC4yNjkgMCAwKTtcbiAgLS1zaWRlYmFyLXJpbmc6IG9rbGNoKDAuNDM5IDAgMCk7XG4gIFxuICAvKiBFbmhhbmNlZCAzRCBBbmltYXRpb24gVmFyaWFibGVzIC0gRGFyayBNb2RlICovXG4gIC0tY3ViZS1uZW9uLWJsdWU6ICMwMGZmZmY7XG4gIC0tY3ViZS1uZW9uLWJsdWUtZW1pc3NpdmU6ICMwMDg4YWE7XG4gIC0tYnJhaW4tcHJpbWFyeTogI2ZmNDQ4ODtcbiAgLS1icmFpbi1lbWlzc2l2ZTogI2ZmMjI2NjtcbiAgLS1lZGdlLXdoaXRlOiAjZmZmZmZmO1xuICAtLWVkZ2UtYmxhY2s6ICMwMDAwMDA7XG59XG5cbkB0aGVtZSBpbmxpbmUge1xuICAtLWNvbG9yLWJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQpO1xuICAtLWNvbG9yLWZvcmVncm91bmQ6IHZhcigtLWZvcmVncm91bmQpO1xuICAtLWNvbG9yLWNhcmQ6IHZhcigtLWNhcmQpO1xuICAtLWNvbG9yLWNhcmQtZm9yZWdyb3VuZDogdmFyKC0tY2FyZC1mb3JlZ3JvdW5kKTtcbiAgLS1jb2xvci1wb3BvdmVyOiB2YXIoLS1wb3BvdmVyKTtcbiAgLS1jb2xvci1wb3BvdmVyLWZvcmVncm91bmQ6IHZhcigtLXBvcG92ZXItZm9yZWdyb3VuZCk7XG4gIC0tY29sb3ItcHJpbWFyeTogdmFyKC0tcHJpbWFyeSk7XG4gIC0tY29sb3ItcHJpbWFyeS1mb3JlZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWZvcmVncm91bmQpO1xuICAtLWNvbG9yLXNlY29uZGFyeTogdmFyKC0tc2Vjb25kYXJ5KTtcbiAgLS1jb2xvci1zZWNvbmRhcnktZm9yZWdyb3VuZDogdmFyKC0tc2Vjb25kYXJ5LWZvcmVncm91bmQpO1xuICAtLWNvbG9yLW11dGVkOiB2YXIoLS1tdXRlZCk7XG4gIC0tY29sb3ItbXV0ZWQtZm9yZWdyb3VuZDogdmFyKC0tbXV0ZWQtZm9yZWdyb3VuZCk7XG4gIC0tY29sb3ItYWNjZW50OiB2YXIoLS1hY2NlbnQpO1xuICAtLWNvbG9yLWFjY2VudC1mb3JlZ3JvdW5kOiB2YXIoLS1hY2NlbnQtZm9yZWdyb3VuZCk7XG4gIC0tY29sb3ItZGVzdHJ1Y3RpdmU6IHZhcigtLWRlc3RydWN0aXZlKTtcbiAgLS1jb2xvci1kZXN0cnVjdGl2ZS1mb3JlZ3JvdW5kOiB2YXIoLS1kZXN0cnVjdGl2ZS1mb3JlZ3JvdW5kKTtcbiAgLS1jb2xvci1ib3JkZXI6IHZhcigtLWJvcmRlcik7XG4gIC0tY29sb3ItaW5wdXQ6IHZhcigtLWlucHV0KTtcbiAgLS1jb2xvci1pbnB1dC1iYWNrZ3JvdW5kOiB2YXIoLS1pbnB1dC1iYWNrZ3JvdW5kKTtcbiAgLS1jb2xvci1zd2l0Y2gtYmFja2dyb3VuZDogdmFyKC0tc3dpdGNoLWJhY2tncm91bmQpO1xuICAtLWNvbG9yLXJpbmc6IHZhcigtLXJpbmcpO1xuICAtLWNvbG9yLWNoYXJ0LTE6IHZhcigtLWNoYXJ0LTEpO1xuICAtLWNvbG9yLWNoYXJ0LTI6IHZhcigtLWNoYXJ0LTIpO1xuICAtLWNvbG9yLWNoYXJ0LTM6IHZhcigtLWNoYXJ0LTMpO1xuICAtLWNvbG9yLWNoYXJ0LTQ6IHZhcigtLWNoYXJ0LTQpO1xuICAtLWNvbG9yLWNoYXJ0LTU6IHZhcigtLWNoYXJ0LTUpO1xuICAtLXJhZGl1cy1zbTogY2FsYyh2YXIoLS1yYWRpdXMpIC0gNHB4KTtcbiAgLS1yYWRpdXMtbWQ6IGNhbGModmFyKC0tcmFkaXVzKSAtIDJweCk7XG4gIC0tcmFkaXVzLWxnOiB2YXIoLS1yYWRpdXMpO1xuICAtLXJhZGl1cy14bDogY2FsYyh2YXIoLS1yYWRpdXMpICsgNHB4KTtcbiAgLS1jb2xvci1zaWRlYmFyOiB2YXIoLS1zaWRlYmFyKTtcbiAgLS1jb2xvci1zaWRlYmFyLWZvcmVncm91bmQ6IHZhcigtLXNpZGViYXItZm9yZWdyb3VuZCk7XG4gIC0tY29sb3Itc2lkZWJhci1wcmltYXJ5OiB2YXIoLS1zaWRlYmFyLXByaW1hcnkpO1xuICAtLWNvbG9yLXNpZGViYXItcHJpbWFyeS1mb3JlZ3JvdW5kOiB2YXIoLS1zaWRlYmFyLXByaW1hcnktZm9yZWdyb3VuZCk7XG4gIC0tY29sb3Itc2lkZWJhci1hY2NlbnQ6IHZhcigtLXNpZGViYXItYWNjZW50KTtcbiAgLS1jb2xvci1zaWRlYmFyLWFjY2VudC1mb3JlZ3JvdW5kOiB2YXIoLS1zaWRlYmFyLWFjY2VudC1mb3JlZ3JvdW5kKTtcbiAgLS1jb2xvci1zaWRlYmFyLWJvcmRlcjogdmFyKC0tc2lkZWJhci1ib3JkZXIpO1xuICAtLWNvbG9yLXNpZGViYXItcmluZzogdmFyKC0tc2lkZWJhci1yaW5nKTtcbiAgXG4gIC8qIEVuaGFuY2VkIDNEIEFuaW1hdGlvbiBDb2xvcnMgKi9cbiAgLS1jb2xvci1jdWJlLW5lb24tYmx1ZTogdmFyKC0tY3ViZS1uZW9uLWJsdWUpO1xuICAtLWNvbG9yLWN1YmUtbmVvbi1ibHVlLWVtaXNzaXZlOiB2YXIoLS1jdWJlLW5lb24tYmx1ZS1lbWlzc2l2ZSk7XG4gIC0tY29sb3ItYnJhaW4tcHJpbWFyeTogdmFyKC0tYnJhaW4tcHJpbWFyeSk7XG4gIC0tY29sb3ItYnJhaW4tZW1pc3NpdmU6IHZhcigtLWJyYWluLWVtaXNzaXZlKTtcbiAgLS1jb2xvci1lZGdlLXdoaXRlOiB2YXIoLS1lZGdlLXdoaXRlKTtcbiAgLS1jb2xvci1lZGdlLWJsYWNrOiB2YXIoLS1lZGdlLWJsYWNrKTtcbn1cblxuQGxheWVyIGJhc2Uge1xuICAqIHtcbiAgICBAYXBwbHkgYm9yZGVyLWJvcmRlciBvdXRsaW5lLXJpbmcvNTA7XG4gIH1cblxuICBib2R5IHtcbiAgICBAYXBwbHkgYmctYmFja2dyb3VuZCB0ZXh0LWZvcmVncm91bmQ7XG4gIH1cbn1cblxuLyoqXG4gKiBCYXNlIHR5cG9ncmFwaHkuIFRoaXMgaXMgbm90IGFwcGxpZWQgdG8gZWxlbWVudHMgd2hpY2ggaGF2ZSBhbiBhbmNlc3RvciB3aXRoIGEgVGFpbHdpbmQgdGV4dCBjbGFzcy5cbiAqL1xuQGxheWVyIGJhc2Uge1xuICA6d2hlcmUoOm5vdCg6aGFzKFtjbGFzcyo9XCIgdGV4dC1cIl0pLCA6bm90KDpoYXMoW2NsYXNzXj1cInRleHQtXCJdKSkpKSB7XG4gICAgaDEge1xuICAgICAgZm9udC1zaXplOiB2YXIoLS10ZXh0LTJ4bCk7XG4gICAgICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtbWVkaXVtKTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgfVxuXG4gICAgaDIge1xuICAgICAgZm9udC1zaXplOiB2YXIoLS10ZXh0LXhsKTtcbiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1tZWRpdW0pO1xuICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICB9XG5cbiAgICBoMyB7XG4gICAgICBmb250LXNpemU6IHZhcigtLXRleHQtbGcpO1xuICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LW1lZGl1bSk7XG4gICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgIH1cblxuICAgIGg0IHtcbiAgICAgIGZvbnQtc2l6ZTogdmFyKC0tdGV4dC1iYXNlKTtcbiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1tZWRpdW0pO1xuICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICB9XG5cbiAgICBwIHtcbiAgICAgIGZvbnQtc2l6ZTogdmFyKC0tdGV4dC1iYXNlKTtcbiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1ub3JtYWwpO1xuICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICB9XG5cbiAgICBsYWJlbCB7XG4gICAgICBmb250LXNpemU6IHZhcigtLXRleHQtYmFzZSk7XG4gICAgICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtbWVkaXVtKTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgfVxuXG4gICAgYnV0dG9uIHtcbiAgICAgIGZvbnQtc2l6ZTogdmFyKC0tdGV4dC1iYXNlKTtcbiAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1tZWRpdW0pO1xuICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICB9XG5cbiAgICBpbnB1dCB7XG4gICAgICBmb250LXNpemU6IHZhcigtLXRleHQtYmFzZSk7XG4gICAgICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtbm9ybWFsKTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgfVxuICB9XG59XG5cbmh0bWwge1xuICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZSk7XG4gIHNjcm9sbC1iZWhhdmlvcjogc21vb3RoO1xufVxuXG4vKiBFbmhhbmNlZCAzRCBFeHBlcmllbmNlIFN0eWxlcyAqL1xuLnNjcm9sbC1jb250YWluZXIge1xuICBoZWlnaHQ6IDEwMHZoO1xuICBvdmVyZmxvdy15OiBhdXRvO1xuICBzY3JvbGwtc25hcC10eXBlOiB5IG1hbmRhdG9yeTtcbn1cblxuLnNjcm9sbC1zZWN0aW9uIHtcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgc2Nyb2xsLXNuYXAtYWxpZ246IHN0YXJ0O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLyogU21vb3RoIHNjcm9sbGluZyBmb3IgYmV0dGVyIGFuaW1hdGlvbiAqL1xuKiB7XG4gIHNjcm9sbGJhci13aWR0aDogdGhpbjtcbiAgc2Nyb2xsYmFyLWNvbG9yOiAjMDBmZmZmICMxYTFhMWE7XG59XG5cbio6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgd2lkdGg6IDhweDtcbn1cblxuKjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xuICBiYWNrZ3JvdW5kOiAjMWExYTFhO1xufVxuXG4qOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICMwMGZmZmYsICNmZjQ0ODgpO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG59XG5cbio6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzAwZGRkZCwgI2ZmMzM2Nik7XG59XG5cbi8qIFBoYXNlIHRyYW5zaXRpb24gYW5pbWF0aW9ucyAqL1xuLnBoYXNlLWluZGljYXRvciB7XG4gIHRyYW5zaXRpb246IGFsbCB2YXIoLS1hbmltYXRpb24tZHVyYXRpb24tbWVkaXVtKSB2YXIoLS1lYXNpbmctc21vb3RoKTtcbn1cblxuLmN1YmUtY29udGFpbmVyIHtcbiAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTtcbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBQSxnQkFBZ0IsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSztBQUVqQztBQUNFLGVBQWE7QUFDYixnQkFBYztBQUNkLGdCQUFjLE1BQU0sTUFBTSxFQUFFO0FBQzVCLFVBQVE7QUFDUixxQkFBbUIsTUFBTSxNQUFNLEVBQUU7QUFDakMsYUFBVyxNQUFNLEVBQUUsRUFBRTtBQUNyQix3QkFBc0IsTUFBTSxNQUFNLEVBQUU7QUFDcEMsYUFBVztBQUNYLHdCQUFzQixNQUFNLEVBQUUsRUFBRTtBQUNoQyxlQUFhLE1BQU0sS0FBSyxPQUFPO0FBQy9CLDBCQUF3QjtBQUN4QixXQUFTO0FBQ1Qsc0JBQW9CO0FBQ3BCLFlBQVU7QUFDVix1QkFBcUI7QUFDckIsaUJBQWU7QUFDZiw0QkFBMEI7QUFDMUIsWUFBVSxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ3hCLFdBQVM7QUFDVCxzQkFBb0I7QUFDcEIsdUJBQXFCO0FBQ3JCLHdCQUFzQjtBQUN0Qix3QkFBc0I7QUFDdEIsVUFBUSxNQUFNLE1BQU0sRUFBRTtBQUN0QixhQUFXLE1BQU0sTUFBTSxNQUFNO0FBQzdCLGFBQVcsTUFBTSxJQUFJLE1BQU07QUFDM0IsYUFBVyxNQUFNLE1BQU0sS0FBSztBQUM1QixhQUFXLE1BQU0sTUFBTSxNQUFNO0FBQzdCLGFBQVcsTUFBTSxNQUFNLE1BQU07QUFDN0IsWUFBVTtBQUNWLGFBQVcsTUFBTSxNQUFNLEVBQUU7QUFDekIsd0JBQXNCLE1BQU0sTUFBTSxFQUFFO0FBQ3BDLHFCQUFtQjtBQUNuQixnQ0FBOEIsTUFBTSxNQUFNLEVBQUU7QUFDNUMsb0JBQWtCLE1BQU0sS0FBSyxFQUFFO0FBQy9CLCtCQUE2QixNQUFNLE1BQU0sRUFBRTtBQUMzQyxvQkFBa0IsTUFBTSxNQUFNLEVBQUU7QUFDaEMsa0JBQWdCLE1BQU0sTUFBTSxFQUFFO0FBRzlCLG9CQUFrQjtBQUNsQiw2QkFBMkI7QUFDM0IsbUJBQWlCO0FBQ2pCLG9CQUFrQjtBQUNsQixnQkFBYztBQUNkLGdCQUFjO0FBR2QsNkJBQTJCO0FBQzNCLCtCQUE2QjtBQUM3Qiw2QkFBMkI7QUFDM0IsbUJBQWlCLGFBQWEsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUU7QUFDM0Msb0JBQWtCLGFBQWEsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDckQ7QUFFQSxDQUFDO0FBQ0MsZ0JBQWMsTUFBTSxNQUFNLEVBQUU7QUFDNUIsZ0JBQWMsTUFBTSxNQUFNLEVBQUU7QUFDNUIsVUFBUSxNQUFNLE1BQU0sRUFBRTtBQUN0QixxQkFBbUIsTUFBTSxNQUFNLEVBQUU7QUFDakMsYUFBVyxNQUFNLE1BQU0sRUFBRTtBQUN6Qix3QkFBc0IsTUFBTSxNQUFNLEVBQUU7QUFDcEMsYUFBVyxNQUFNLE1BQU0sRUFBRTtBQUN6Qix3QkFBc0IsTUFBTSxNQUFNLEVBQUU7QUFDcEMsZUFBYSxNQUFNLE1BQU0sRUFBRTtBQUMzQiwwQkFBd0IsTUFBTSxNQUFNLEVBQUU7QUFDdEMsV0FBUyxNQUFNLE1BQU0sRUFBRTtBQUN2QixzQkFBb0IsTUFBTSxNQUFNLEVBQUU7QUFDbEMsWUFBVSxNQUFNLE1BQU0sRUFBRTtBQUN4Qix1QkFBcUIsTUFBTSxNQUFNLEVBQUU7QUFDbkMsaUJBQWUsTUFBTSxNQUFNLE1BQU07QUFDakMsNEJBQTBCLE1BQU0sTUFBTSxNQUFNO0FBQzVDLFlBQVUsTUFBTSxNQUFNLEVBQUU7QUFDeEIsV0FBUyxNQUFNLE1BQU0sRUFBRTtBQUN2QixVQUFRLE1BQU0sTUFBTSxFQUFFO0FBQ3RCLHdCQUFzQjtBQUN0Qix3QkFBc0I7QUFDdEIsYUFBVyxNQUFNLE1BQU0sTUFBTTtBQUM3QixhQUFXLE1BQU0sTUFBTSxLQUFLO0FBQzVCLGFBQVcsTUFBTSxNQUFNLE1BQU07QUFDN0IsYUFBVyxNQUFNLE1BQU0sTUFBTTtBQUM3QixhQUFXLE1BQU0sTUFBTSxNQUFNO0FBQzdCLGFBQVcsTUFBTSxNQUFNLEVBQUU7QUFDekIsd0JBQXNCLE1BQU0sTUFBTSxFQUFFO0FBQ3BDLHFCQUFtQixNQUFNLE1BQU0sTUFBTTtBQUNyQyxnQ0FBOEIsTUFBTSxNQUFNLEVBQUU7QUFDNUMsb0JBQWtCLE1BQU0sTUFBTSxFQUFFO0FBQ2hDLCtCQUE2QixNQUFNLE1BQU0sRUFBRTtBQUMzQyxvQkFBa0IsTUFBTSxNQUFNLEVBQUU7QUFDaEMsa0JBQWdCLE1BQU0sTUFBTSxFQUFFO0FBRzlCLG9CQUFrQjtBQUNsQiw2QkFBMkI7QUFDM0IsbUJBQWlCO0FBQ2pCLG9CQUFrQjtBQUNsQixnQkFBYztBQUNkLGdCQUFjO0FBQ2hCO0FBRUEsT0FBTyxPQUFPLEVBQ1osa0JBQWtCLEVBQUUsSUFBSSxhQUFhLEVBQ3JDLGtCQUFrQixFQUFFLElBQUksYUFBYSxFQUNyQyxZQUFZLEVBQUUsSUFBSSxPQUFPLEVBQ3pCLHVCQUF1QixFQUFFLElBQUksa0JBQWtCLEVBQy9DLGVBQWUsRUFBRSxJQUFJLFVBQVUsRUFDL0IsMEJBQTBCLEVBQUUsSUFBSSxxQkFBcUIsRUFDckQsZUFBZSxFQUFFLElBQUksVUFBVSxFQUMvQiwwQkFBMEIsRUFBRSxJQUFJLHFCQUFxQixFQUNyRCxpQkFBaUIsRUFBRSxJQUFJLFlBQVksRUFDbkMsNEJBQTRCLEVBQUUsSUFBSSx1QkFBdUIsRUFDekQsYUFBYSxFQUFFLElBQUksUUFBUSxFQUMzQix3QkFBd0IsRUFBRSxJQUFJLG1CQUFtQixFQUNqRCxjQUFjLEVBQUUsSUFBSSxTQUFTLEVBQzdCLHlCQUF5QixFQUFFLElBQUksb0JBQW9CLEVBQ25ELG1CQUFtQixFQUFFLElBQUksY0FBYyxFQUN2Qyw4QkFBOEIsRUFBRSxJQUFJLHlCQUF5QixFQUM3RCxjQUFjLEVBQUUsSUFBSSxTQUFTLEVBQzdCLGFBQWEsRUFBRSxJQUFJLFFBQVEsRUFDM0Isd0JBQXdCLEVBQUUsSUFBSSxtQkFBbUIsRUFDakQseUJBQXlCLEVBQUUsSUFBSSxvQkFBb0IsRUFDbkQsWUFBWSxFQUFFLElBQUksT0FBTyxFQUN6QixlQUFlLEVBQUUsSUFBSSxVQUFVLEVBQy9CLGVBQWUsRUFBRSxJQUFJLFVBQVUsRUFDL0IsZUFBZSxFQUFFLElBQUksVUFBVSxFQUMvQixlQUFlLEVBQUUsSUFBSSxVQUFVLEVBQy9CLGVBQWUsRUFBRSxJQUFJLFVBQVUsRUFDL0IsV0FBVyxFQUFFLEtBQUssSUFBSSxVQUFVLEVBQUUsSUFBSSxFQUN0QyxXQUFXLEVBQUUsS0FBSyxJQUFJLFVBQVUsRUFBRSxJQUFJLEVBQ3RDLFdBQVcsRUFBRSxJQUFJLFNBQVMsRUFDMUIsV0FBVyxFQUFFLEtBQUssSUFBSSxVQUFVLEVBQUUsSUFBSSxFQUN0QyxlQUFlLEVBQUUsSUFBSSxVQUFVLEVBQy9CLDBCQUEwQixFQUFFLElBQUkscUJBQXFCLEVBQ3JELHVCQUF1QixFQUFFLElBQUksa0JBQWtCLEVBQy9DLGtDQUFrQyxFQUFFLElBQUksNkJBQTZCLEVBQ3JFLHNCQUFzQixFQUFFLElBQUksaUJBQWlCLEVBQzdDLGlDQUFpQyxFQUFFLElBQUksNEJBQTRCLEVBQ25FLHNCQUFzQixFQUFFLElBQUksaUJBQWlCLEVBQzdDLG9CQUFvQixFQUFFLElBQUksZUFBZSxFQUd6QyxzQkFBc0IsRUFBRSxJQUFJLGlCQUFpQixFQUM3QywrQkFBK0IsRUFBRSxJQUFJLDBCQUEwQixFQUMvRCxxQkFBcUIsRUFBRSxJQUFJLGdCQUFnQixFQUMzQyxzQkFBc0IsRUFBRSxJQUFJLGlCQUFpQixFQUM3QyxrQkFBa0IsRUFBRSxJQUFJLGFBQWEsRUFDckMsa0JBQWtCLEVBQUUsSUFBSSxhQUFhO0FBR3ZDO0FBQ0U7QUFDRSxXQUFPLGNBQWMsWUFBWSxDQUFDO0FBQ3BDO0FBRUE7QUFDRSxXQUFPLGNBQWM7QUFDdkI7QUFDRjtBQUtBO0FBQ0UsU0FBTyxLQUFLLEtBQUssQ0FBQyxtQkFBbUIsS0FBSyxLQUFLLENBQUM7QUFDOUM7QUFDRSxpQkFBVyxJQUFJO0FBQ2YsbUJBQWEsSUFBSTtBQUNqQixtQkFBYTtBQUNmO0FBRUE7QUFDRSxpQkFBVyxJQUFJO0FBQ2YsbUJBQWEsSUFBSTtBQUNqQixtQkFBYTtBQUNmO0FBRUE7QUFDRSxpQkFBVyxJQUFJO0FBQ2YsbUJBQWEsSUFBSTtBQUNqQixtQkFBYTtBQUNmO0FBRUE7QUFDRSxpQkFBVyxJQUFJO0FBQ2YsbUJBQWEsSUFBSTtBQUNqQixtQkFBYTtBQUNmO0FBRUE7QUFDRSxpQkFBVyxJQUFJO0FBQ2YsbUJBQWEsSUFBSTtBQUNqQixtQkFBYTtBQUNmO0FBRUE7QUFDRSxpQkFBVyxJQUFJO0FBQ2YsbUJBQWEsSUFBSTtBQUNqQixtQkFBYTtBQUNmO0FBRUE7QUFDRSxpQkFBVyxJQUFJO0FBQ2YsbUJBQWEsSUFBSTtBQUNqQixtQkFBYTtBQUNmO0FBRUE7QUFDRSxpQkFBVyxJQUFJO0FBQ2YsbUJBQWEsSUFBSTtBQUNqQixtQkFBYTtBQUNmO0FBQ0Y7QUFDRjtBQUVBO0FBQ0UsYUFBVyxJQUFJO0FBQ2YsbUJBQWlCO0FBQ25CO0FBR0EsQ0FBQztBQUNDLFVBQVE7QUFDUixjQUFZO0FBQ1osb0JBQWtCLEVBQUU7QUFDdEI7QUFFQSxDQUFDO0FBQ0MsVUFBUTtBQUNSLHFCQUFtQjtBQUNuQixXQUFTO0FBQ1QsZUFBYTtBQUNiLG1CQUFpQjtBQUNuQjtBQUdBO0FBQ0UsbUJBQWlCO0FBQ2pCLG1CQUFpQixRQUFRO0FBQzNCO0FBRUEsQ0FBQztBQUNDLFNBQU87QUFDVDtBQUVBLENBQUM7QUFDQyxjQUFZO0FBQ2Q7QUFFQSxDQUFDO0FBQ0M7QUFBQSxJQUFZO0FBQUEsTUFBZ0IsR0FBRyxNQUFuQjtBQUFBLE1BQTJCLE9BQTNCO0FBQUEsTUFBb0M7QUFDaEQsaUJBQWU7QUFDakI7QUFFQSxDQUFDLHlCQUF5QjtBQUN4QjtBQUFBLElBQVk7QUFBQSxNQUFnQixHQUFHLE1BQW5CO0FBQUEsTUFBMkIsT0FBM0I7QUFBQSxNQUFvQztBQUNsRDtBQUdBLENBQUM7QUFDQyxjQUFZLElBQUksSUFBSSw2QkFBNkIsSUFBSTtBQUN2RDtBQUVBLENBQUM7QUFDQyxlQUFhO0FBQ2IsbUJBQWlCO0FBQ25COyIsCiAgIm5hbWVzIjogW10KfQo= */\n","size_bytes":151832},"public/3danimation/src/main.tsx":{"content":"import React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport App from './App';\n\nconst container = document.getElementById('root');\nif (!container) {\n  throw new Error('Root element not found');\n}\n\nconst root = createRoot(container);\nroot.render(<App />);","size_bytes":274},"public/3danimation/src/search_for_scene.js":{"content":"// Simple search to find where the Canvas/Scene components are located\n// This will help me find the main rendering section","size_bytes":123},"public/3danimation/src/search_scene_fix.tsx":{"content":"// Quick fix script - add UnifiedRubiksCubes to main rendering\n\n// The problem: Phase 6 shows nothing because UnifiedRubiksCubes component \n// is created but not added to the main scene.\n\n// Solution: Find where components are rendered in RubiksCubeExperience.tsx\n// and add: <UnifiedRubiksCubes parentCubes={cubes} scrollProgress={scrollProgress} />\n\n// Looking for the main component section that combines all pieces together","size_bytes":427},"public/3danimation/src/three-row-setup.md":{"content":"# Three-Row Layout Setup with Builder.io\n\n## Quick Setup for Nav-Content-Footer Layout\n\n### 1. Install Dependencies\n```bash\nnpm install @builder.io/react @builder.io/sdk react-router-dom\n```\n\n### 2. Register Components\nImport the registration in your main app:\n\n```tsx\n// In App.tsx or main.tsx\nimport './components/BuilderIntegration';\n```\n\n### 3. Builder.io Account Setup\n1. Create account at https://builder.io\n2. Get your public API key\n3. Replace `YOUR_BUILDER_PUBLIC_KEY` in the files\n\n### 4. Create Your Three-Row Page in Builder.io\n\n#### Step 1: Page Structure\n```\n┌─────────────────────────────────────────────┐\n│ 🧭 NAVIGATION SECTION                       │\n│ • Add: Logo, Menu items, CTA button         │\n│ • Height: auto                              │\n│ • Background: white/dark theme              │\n└─────────────────────────────────────────────┘\n│ 📖 CONTENT SECTION                          │\n│ • Add: Hero text, features, etc.            │\n│ • DRAG: \"3D Rubik's Cube (Framed)\" here     │\n│ • Configure: height=600px, style=rounded    │\n│ • Add: More content below                   │\n└─────────────────────────────────────────────┘\n│ 🦶 FOOTER SECTION                           │\n│ • Add: Copyright, links, contact info       │\n│ • Height: auto                              │\n│ • Background: dark/light theme              │\n└─────────────────────────────────────────────┘\n```\n\n#### Step 2: Configure 3D Component\nWhen you drag the \"3D Rubik's Cube (Framed)\" component:\n\n**Settings Panel:**\n- **Height**: `600px` (good for content sections)\n- **Width**: `100%` (responsive)\n- **Container Style**: `rounded` (professional)\n- **Enable Debug**: `false` (clean for users)\n- **Auto Play**: `true` (demo scroll)\n- **Show Scroll Hint**: `true` (helps users understand)\n\n### 5. App.tsx Setup Options\n\n#### Option A: Pure Builder.io (Recommended for Three-Row)\n```tsx\nimport { BuilderComponent, builder } from '@builder.io/react';\nimport './components/BuilderIntegration';\n\nbuilder.init('YOUR_BUILDER_PUBLIC_KEY');\n\nexport default function App() {\n  return (\n    <BuilderComponent model=\"page\" />\n  );\n}\n```\n\n#### Option B: Hybrid with Builder.io Pages\n```tsx\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { BuilderComponent, builder } from '@builder.io/react';\nimport { RubiksCubeExperience } from './components/RubiksCubeExperience';\nimport './components/BuilderIntegration';\n\nbuilder.init('YOUR_BUILDER_PUBLIC_KEY');\n\nexport default function App() {\n  return (\n    <Router>\n      <Routes>\n        {/* Builder.io managed pages with three-row layout */}\n        <Route path=\"/\" element={<BuilderComponent model=\"page\" />} />\n        <Route path=\"/about\" element={<BuilderComponent model=\"page\" />} />\n        \n        {/* Optional: Pure 3D experience page */}\n        <Route path=\"/experience\" element={\n          <div className=\"size-full bg-black\">\n            <RubiksCubeExperience />\n          </div>\n        } />\n      </Routes>\n    </Router>\n  );\n}\n```\n\n### 6. Example Three-Row Layout in Builder.io\n\n#### Navigation Section:\n- **Component**: Section\n- **Settings**: `bg-white border-b py-4`\n- **Content**: Logo + Menu + CTA Button\n\n#### Content Section:\n- **Component**: Section  \n- **Settings**: `py-20 px-4`\n- **Content**: \n  - Hero Text Block\n  - **Your 3D Component** (height: 600px)\n  - Features Grid\n  - Call-to-Action\n\n#### Footer Section:\n- **Component**: Section\n- **Settings**: `bg-gray-900 text-white py-12`\n- **Content**: Copyright + Links + Contact\n\n### 7. Advanced Configuration\n\n#### Custom Frame Sizes by Section:\n- **Hero sections**: `height=\"80vh\"` (large showcase)\n- **Content sections**: `height=\"600px\"` (contained demo)  \n- **Feature sections**: `height=\"400px\"` (compact preview)\n\n#### Responsive Breakpoints:\n- **Desktop**: Full 600px height\n- **Tablet**: 400px height (automatic via CSS)\n- **Mobile**: 300px height (automatic via CSS)\n\n### 8. User Experience Flow\n\n1. **User visits your site** → See Builder.io three-row layout\n2. **Navigation** → Builder.io managed nav with your branding\n3. **Content area** → Scroll to see 3D animation in frame\n4. **Animation interaction** → Mouse rotation + scroll within frame\n5. **More content** → Builder.io managed features/text below\n6. **Footer** → Builder.io managed footer with links\n\n### 9. Benefits of This Approach\n\n✅ **Professional Layout**: Builder.io handles site structure  \n✅ **Contained Animation**: 3D fits perfectly in content sections  \n✅ **No Performance Issues**: Animation only loads when visible  \n✅ **Easy Content Updates**: Non-technical team can update text/layout  \n✅ **Responsive Design**: Works on all devices  \n✅ **SEO Friendly**: Builder.io handles meta tags and structure  \n\n### 10. Troubleshooting\n\n**Animation not showing?**\n- Check Builder.io component registration\n- Verify API key is correct\n- Ensure component is dragged into content area\n\n**Performance issues?**\n- Use framed version (not fullscreen) in content sections\n- Enable autoPlay only for demo purposes\n- Consider lazy loading for below-fold content\n\n**Styling conflicts?**\n- The framed component is self-contained\n- Uses Tailwind classes that don't conflict\n- Dark theme animation works on any background\n\nThis setup gives you the perfect three-row website with your sophisticated 3D animation contained beautifully within the content section!","size_bytes":5835},"public/3danimation/src/vite.config.ts":{"content":"import { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\n\n// Vite 6.0 configuration optimized for React 19 + Three.js\nexport default defineConfig({\n  plugins: [\n    react({\n      // Enable React 19 features\n      jsxImportSource: 'react',\n      babel: {\n        // Enable React Compiler if available\n        plugins: [\n          // React Compiler will be automatically detected\n        ],\n      },\n    }),\n  ],\n  optimizeDeps: {\n    // Pre-bundle Three.js and related packages for faster dev server\n    include: [\n      'three',\n      '@react-three/fiber',\n      '@builder.io/react',\n      '@builder.io/sdk',\n      'react-router-dom'\n    ],\n    // Exclude packages that should not be pre-bundled\n    exclude: [],\n  },\n  build: {\n    // Optimize for modern browsers (React 19 + WebGL)\n    target: ['es2022', 'chrome100', 'safari14'],\n    // Better code splitting for large 3D assets\n    rollupOptions: {\n      output: {\n        // Separate chunks for better caching\n        manualChunks: {\n          'three-vendor': ['three'],\n          'react-three': ['@react-three/fiber'],\n          'builder': ['@builder.io/react', '@builder.io/sdk'],\n          'router': ['react-router-dom'],\n        },\n      },\n    },\n    // Enable source maps for debugging\n    sourcemap: true,\n  },\n  server: {\n    // Enhanced HMR for React 19\n    hmr: {\n      overlay: true,\n    },\n    // Faster dev server startup\n    fs: {\n      // Allow serving files from one level up (for Builder.io assets)\n      allow: ['..'],\n    },\n  },\n  // Enhanced CSS handling for Tailwind V4\n  css: {\n    devSourcemap: true,\n    transformer: 'postcss',\n  },\n  // Better resolution for ESM packages\n  resolve: {\n    alias: {\n      // Ensure consistent Three.js version across all imports\n      'three': 'three',\n    },\n  },\n  // Environment variables for different environments\n  define: {\n    // Enable React DevTools in development\n    __DEV__: JSON.stringify(process.env.NODE_ENV === 'development'),\n  },\n});","size_bytes":1987},"public/lessons/1.1/Episodeeeeeee.md":{"content":"# Episode 1.1: What is an Organizational Transformation?\r\n\r\n#### **The Anatomy of an Organization**\r\n\r\nOrganizations, particularly in the public sector, function as integrated systems composed of interdependent components that collectively generate value. At a structural level, these components can be categorized as follows:\r\n\r\n- **Strategy**: Articulates long-term objectives and organizational priorities, typically revisited annually to ensure alignment with evolving mandates.  \r\n- **Operations**: Encompasses the people, processes, technologies, and physical assets mobilized to implement strategic intent and deliver tangible outcomes.  \r\n- **Target Setting and Value Delivery**: Strategic targets cascade to operational units, where value is generated for designated stakeholders or beneficiaries through specific delivery channels.  \r\n- **Performance Monitoring**: Execution outcomes are tracked via performance metrics, enabling feedback loops that inform future strategic refinements.\r\n\r\nIn standard conditions, organizations evolve gradually by expanding either their capacity (i.e., scaling existing operations) or capabilities (i.e., adopting new competencies or serving novel stakeholder groups). These evolutionary steps typically preserve the recognizable structure and identity of the organization.\r\n\r\n![Organizational structure before transformation](/img/episode-1.1_1.png)\r\n\r\n#### **What Constitutes a Transformation?**\r\n\r\nA transformation signifies a deliberate, often disruptive, departure from the established organizational form. It entails a fundamental redefinition of the organization’s architecture, such that its post-transformation state may no longer resemble its previous form.\r\n\r\nFor example, in a digital transformation, technology becomes a core element of service delivery and internal operations, rather than a supportive adjunct. Similarly, transformations targeting people, products, or processes imply that those domains have been reimagined at their core. In the case of an organizational transformation, it is the entire operational and structural logic that is reconstructed.\r\n\r\nBy contrast, incremental changes—such as performance optimizations or departmental upgrades—may improve efficiency but do not meet the threshold for transformation.\r\n\r\n![Organizational structure after transformation](/img/episode-1.1_2.png)\r\n\r\n#### **When is Transformation Required?**\r\n\r\nAn organizational transformation becomes necessary when existing systems, processes, and capabilities are insufficient to deliver on a new set of strategic ambitions. This shift is driven not by marginal gaps but by structural misalignment between desired outcomes and current institutional design.\r\n\r\n##### A. Strategic Ambition Exceeds Operational Capability\r\n\r\nA new opportunity or mandate—such as economic diversification, national digitalization, or large-scale citizen service reform—requires capabilities that the current organizational model cannot provide. No amount of incremental effort can bridge this gap.\r\n\r\n##### B. Change is Sanctioned and Funded\r\n\r\nThe transformation is formalized through an endorsed change agenda and the allocation of fiscal and human capital. This authorization triggers structured initiatives aimed at closing the capability gap.\r\n\r\n##### C. Institutional Value Creation is Reengineered\r\n\r\nThese initiatives reconfigure the organization’s mechanisms for value creation. The scope of change may involve:\r\n\r\n- Realignment of structures, job roles, and decision-making authority.  \r\n- Redefinition of core services or product offerings.  \r\n- Redesign of stakeholder interaction models and delivery mechanisms.\r\n\r\nIn public-sector contexts, transformational triggers often include:\r\n\r\n- System-wide reforms requiring regulatory and oversight innovations, as well as mechanisms to attract and manage investment.  \r\n- Escalating citizen expectations that necessitate major upgrades in service delivery modalities.\r\n\r\n#### A Common Transformation Pattern: From Operations to Strategy\r\n\r\nOne of the most prevalent types of holistic transformation is the shift from an operational focus to a strategic oversight and industry development role. This transition requires more than changing job titles—it involves building the foundations of a different kind of organization. Key enablers include:\r\n\r\n| Enabler | Description |\r\n| ----- | ----- |\r\n| Legislative clarity | Mandate that separates operational roles from strategic functions |\r\n| Governance reforms | Independent boards, advisory councils, and transparent decision-making |\r\n| Capability building | Strategic planning, foresight, data analytics, market intelligence |\r\n| Digital infrastructure | Core to moving from enforcement to insight-driven regulation |\r\n| Stakeholder engagement | Formal industry partnerships, public consultation mechanisms |\r\n| Metrics & KPIs redefined | From output-based to impact and ecosystem health-based indicators |\r\n\r\n#### Case Illustration: A Ministry’s Structural Overhaul\r\n\r\n###### *Business-as-Usual (Pre-Transformation):*\r\n\r\n- Strategic targets emphasize marginal gains, such as 5% annual performance improvements.  \r\n- Departments recycle prior-year plans with minimal modifications, often coordinated by financial teams.  \r\n- Operational workflows dominate the institutional focus, leading to procedural inertia.  \r\n- Change proposals face cultural and procedural resistance due to lack of systemic urgency or mandate.\r\n\r\n###### *Post-Transformation Mode:*\r\n\r\n- National strategies introduce disruptive goals, such as shifting from transactional licensing metrics to macroeconomic contributions (e.g., GDP impact).  \r\n- Departmental planning is held to new standards of accountability, with alignment to strategic key performance indicators (KPIs).  \r\n- Project governance structures are introduced to coordinate and sequence transformation initiatives, forcing operational focus to expand to include strategic program delivery and transformation outcomes.  \r\n- Change management becomes a central function, with frequent monitoring and real-time course correction.\r\n\r\nThis transformation represents not a superficial overhaul but a foundational redesign of how the ministry governs, delivers, and evolves.\r\n\r\n### **Key Takeaways**\r\n\r\n- Organizational transformation is a structural response to strategic ambition that exceeds current institutional capacity.  \r\n- It involves holistic redesign, not just digital upgrades or isolated initiatives.  \r\n- Success requires reconfiguring internal roles, governance structures, value chains, and planning logic.  \r\n- Legacy frameworks are inherently resistant to radical objectives—new outcomes demand new operating models.\r\n","size_bytes":6727},"public/lessons/1.2/Episode 1.2.md":{"content":"# Episode 1.2: What is a Sector Transformation?\r\n\r\n#### **The Anatomy of a Sector**\r\n\r\nThe starting point is understanding the Sector Value Chain. The value chain is a known concept (Porter, 1985)[^1] described from a private sector company point of view. The same concept has been adapted later to allow for:\r\n\r\n- **Scale** across multiple private sector companies (the definition we want) and to:  \r\n    \r\n  *“At the **industry or sector level**, value chains map the full progression of activities—sourcing, production, distribution, sales, and end-of-life across multiple firms and geographies”*  \r\n    \r\n- **Different outcomes** suited to the public sector focusing on public services leading to citizen trust. This is where Episode 1.1 focused.\r\n\r\nWithin the sector value chain, roles differ and are complex and highly specialized. However, a simple framing that works in most cases is to look at it as follows:\r\n\r\n![Sector Transformation](/img/episode-1.2_1.png)\r\n\r\n#### **What Constitutes a Transformation?**\r\n\r\nA transformation signifies a shift in the sector’s operating logic, where the government engages in producing a Suite of Reform Policies that aims to change the investment map to a new unrecognizable state.\r\n\r\n#### **Conditions That Trigger Sector Reform**\r\n\r\nSector transformations typically arise when:\r\n\r\n- The outcome is citizen-facing but cannot be owned end-to-end by a single entity (e.g., job creation, food security, investment attraction).  \r\n- Major reforms require shared infrastructure (e.g., unified data platforms, joint permitting systems, federated service portals).  \r\n- Cross-ministry strategies emerge (e.g., Vision 2030-style national plans).\r\n\r\nFor example, in Mining, the realization of the rich and diverse presence of natural minerals against the demand triggered a change in the sector from an operating ministry to issue basic licenses for building materials, to a global hub for innovation and home to critical minerals in demand.\r\n\r\nOnce the reform is in place, the sector settles into normal policy tools being utilized. Sectors require stability and hence the exceptional injection of policies cannot become an ongoing state and will cool down at some point once the intended objectives are achieved.\r\n\r\n#### **Why Sector Transformation is So Hard**\r\n\r\n#### Policy Execution is a “Full-Time” Job and Needs Focus\r\n\r\nWhile the leading ministry focuses on its prime role as a regulator, most of the other tools (although remaining under the Ministry’s accountability) are typically delegated to entities in the ecosystem that specialize in them.\r\n\r\nThis means creating new entities or adapting existing ones to a new role, resulting in multiple organizational transformations at the same time.\r\n\r\nMinistries siloed by mandate, funding, and KPIs must collaborate.\r\n\r\nLeading Ministries have to focus on planning policy execution across sectors and intersecting national programs to:\r\n\r\n- Avoid conflict with existing laws—even outside their direct jurisdiction.  \r\n- Anticipate long-term ripple effects across the sector.  \r\n- Include mechanisms to monitor, evaluate, and adjust based on real-world performance data.\r\n\r\n#### Driven by Opportunity, Not Competition\r\n\r\nUnlike the private sector, there is no competitive pressure forcing integration. Sector transformation must be designed intentionally and push through resistance. Change becomes more difficult as it requires bringing the buy-in of public staff to new ways of working based on the fear of losing on an opportunity, making a highly illogical step from a public servant perspective.\r\n\r\n#### Example: Unlocking the Mineral Resources Economic Potential\r\n\r\n###### *Business-as-Usual (Pre-Transformation):*\r\n\r\n- Ministry dominated by licensing basic building materials with minimal inspections.  \r\n- GIS maps from exploration indicated massive opportunities.  \r\n- Without an incentive to pursue these opportunities, the ministry stayed stagnant for over 70 years.\r\n\r\n###### *Post-Transformation Mode:*\r\n\r\n- A major shift in positioning the natural resources as global opportunities in an industry tapping out in finding rich resources to mine.  \r\n- A growing international leader in the mining global sector with the investment opportunities presented and supported by a government.  \r\n- The ecosystem reshaped with multiple entities either re-imagining their role for more specialization and other new ones established to fill gaps.\r\n\r\n### **Key Takeaways**\r\n\r\n- A sector transformation redesigns the full ecosystem—not just one organization.  \r\n- New ecosystem roles change, resulting in new entities set up and existing ones shifting.  \r\n- It is triggered when no single entity can deliver the outcome alone.  \r\n- Success requires shared goals, joint planning, aligned incentives, and real-time data exchange.  \r\n- With all this, the sector players from investors and workforce look nothing like before.\r\n","size_bytes":4933},"public/lessons/1.3/Episode 1.3.md":{"content":"# Episode 1.3: The People Transformation\r\n\r\n*“Complex change fails when experience digs in and energy burns out. Fuse them and complexity becomes leverage.”*\r\n\r\n#### **Why People Transformation is Pivotal**\r\n\r\n- As Org charts, processes, and even whole directorates are reinvented; the human mix must evolve even faster to be able to lead and shape the change.  \r\n- Two distinct talent pools begin to appear:  \r\n  - **Old Guard (OG)**: Career civil-servants, custodians of the government reputation, deeply empathetic to citizen trust, and shielded by a civil-service contract that rewards patience.  \r\n  - **New Pioneers (NP)**: Private-sector entrants hungry for quick wins, self-burdened to show value, and still decoding the ministry’s political compass.  \r\n- Left to default behavior, the gap widens; harnessed well, they deliver a hybrid advantage—**institutional memory plus disruptive practice**.\r\n\r\n#### **The Double-Edged Sword Dynamic**\r\n\r\n| Trait | Old Guard (OG) | New Pioneers (NP) | Risk if Unmanaged | Opportunity if Fused |\r\n| :---- | :---- | :---- | :---- | :---- |\r\n| Core driver | Reputation first, beneficiary-centric | Prove worth through rapid results | Conflicting agendas stalls progress | Calculated risks at high value opps |\r\n| Observed Behavior | Conservative and slow adoption | High risk appetite to experiment | Random pursuits, hit and miss | Real opportunities pursued |\r\n| Time horizon | Long-term | Yearly renewal | Parallel plans, mis-aligned priorities | Balanced quick wins & legacy upgrades |\r\n| Stakeholder map | Deep, informal networks | Limited, high-profile contacts | NP push change without OG political cover | OG opens doors, NP reshapes processes |\r\n\r\n#### **Two Battlefronts for Integration**\r\n\r\n#### 1\\. Culture by Design – Winning Hearts\r\n\r\n- Craft a Mission Culture Canvas that:  \r\n  - Ties OG job security to citizen-trust KPIs.  \r\n  - Channels NP entrepreneurial spirit toward public-value problem-solving.  \r\n  - Positions the ministry as a talent hotspot—“where purpose meets innovation.”  \r\n- Embed the canvas in HR touchpoints: onboarding, pulse surveys, promotion panels, recognition schemes.\r\n\r\n#### 2\\. Cascading Change Interventions – Winning Minds\r\n\r\nTo penetrate the Break high-level change campaigns into deliverable-adoption micro-interventions:\r\n\r\n- Define who must use each deliverable, how, and by when.  \r\n  - Pair mixed OG & NP champion pairs accountable for adoption metrics.  \r\n  - Publicly track adoption rates against programme milestones.\r\n\r\n#### **From → To Framing**\r\n\r\n| From (Legacy Split) | To (Complexity-Ready Fusion) |\r\n| :---- | :---- |\r\n| OG guards stability / NP chase quick wins | Unified value narrative linking reputation and innovation |\r\n| Siloed change campaigns | Deliverable-adoption micro-interventions with shared accountability |\r\n| Culture emerges by chance | Mission Culture Canvas engineered & audited quarterly |\r\n","size_bytes":2936},"public/lessons/1.4/Episode 1.4.md":{"content":" **Recap**\n\n*“The sector is where we set the destination; the organization is where we build the vehicle for the journey; and people are the ones who must work together to win the race.”*  \nIn 1.1, we saw how organizations transform themselves; in 1.2, how sectors reshape roles and set national ambitions; and in 1.3 how people are the ones to manifest real change.  \nIn an entangled transformation, these journeys are woven together.\n\n **Episode 1.4: The Entangled Transformation**\n\n### **A.**    **Choosing the right arsenal per Complexity level**\n\nIn sector-wide public transformation programs—where ministries, authorities, and agencies must evolve together—the challenge is not just the ambition of change, but its complexity. Until now, there has been no structured, quantifiable way to assess that complexity before execution begins.\n\nThis proposal introduces a Public Sector Complexity Index (CI) \\- a simple, scalable formula designed to do just that. It allows program leaders and transformation designers to measure the true burden of change across a multi-entity ecosystem. \n\n##### **🔹 Complexity Index (CI)**\n\n**![][image1]**\n\n| Symbol | Meaning | Scale |\n| :---- | :---- | :---- |\n| ![][image2] | Strategic weight or importance of entity (i) amongst others (how much of the sector transformation is relying on the entity) | % weight out of the whole |\n| ![][image3] | Severity of transformation required for entity (i) (1–5 scale) | 1 – Manageable 5 – New entity |\n| ![][image4] | ![][image5] | Ratio |\n|   | ![][image6] Number of non-established external stakeholders entity ( i ) must coordinate with (never worked with before) | Count |\n|   | ![][image7] Baseline manageable number of external dependencies (sector-specific) | Avg of 5 |\n\n##### **🔍 What It Captures**\n\nThis single weighted-average formula collapses three dimensions of transformation into one score:\n\n1. **Internal disruption** — how deep each entity’s change is.  \n2. **Strategic role** — how central each entity is to the sector’s mission.  \n3. **External Load** — how many other players each entity must engage with.\n\n \n\nEach entity’s individual transformation burden is scaled based on its real-world coordination load. The output is a single number that reflects the system-wide complexity of execution.  \n**Example**\n\n| Entity | Weight ![][image8] | Severity ![][image9] | External\u000b New ![][image10] | External Load ![][image11] | Contribution\u000b ![][image12] x  *![][image13]* x *![][image14]* |\n| :---- | ----- | ----- | ----- | ----- | ----- |\n| Ministry A | 5 | 5 | 15 | 1.5 | 37.5 |\n| Regulator B | 3 | 4 | 10 | 1.0 | 12.0 |\n| Operator C | 2 | 2 | 4 | 0.4 | 1.6 |\n| Support Unit D | 1 | 1 | 2 | 0.2 | 0.2 |\n\n{Total Weighted Contribution} \\= 37.5 \\+ 12.0 \\+ 1.6 \\+ 0.2 \\= 51.3\n\n{Total Weight} \\= 5 \\+ 3 \\+ 2 \\+ 1 \\= 11\n\n{CI} \\= {51.3}{11} \\= 4.66\n\n \n\nThis CI of 4.66 reflects the overall complexity of the transformation. **But it also opens the door to something deeper.**\n\n---\n\n##### **🧠 Beyond the Average: Diagnostic Insights**\n\nAfter computing the CI, each entity’s normalized complexity score can be calculated:\n\n **Normalized Complexity\\_i \\= s\\_i {E\\_i}{B}**\n\n Comparing this against the system-wide average (CI) reveals outliers—entities whose burden is disproportionately high. This flags potential issues in the operating model design.\n\n##### **🔁 What to Do with Outliers:**\n\n\\-        **Too high?** Consider breaking apart roles, delegating delivery, or spinning off entities (e.g., create an authority or SOE).\n\n\\-        **Too low?** Consider absorbing adjacent responsibilities to improve efficiency.\n\n---\n\n##### **📌 Why It Matters**\n\nThis Complexity Index is more than a metric. It’s a planning instrument, early-warning signal, and design aid that lets public-sector leaders:\n\n\\-        Quantify and compare transformation efforts before they begin.\n\n\\-        Spot operating model overload before failure.\n\n\\-        Redesign ecosystem roles and delivery logic to normalize transformation load.\n\n It brings clarity to an area too often driven by guesswork—and gives transformation offices the numbers they need to act.\n\n### \n\n### \n\n### \n\n### **B.**    **Mapping to Archetype and Practices**\n\nYour complexity profile determines your transformation archetype and toolkit.\n\n| Complexity Profile | Transformation Archetype | Practice Approach |\n| :---- | :---- | :---- |\n| Low on all axes | Localized/Focused | Traditional project management |\n| Moderate (2 axes high) | Holistic/Entity-wide | Standard portfolio tools |\n| High on 3-4 axes | Value Chain/Integrated | Capability architecture, cross-team |\n| All axes high | Sector Maestro/Systemic | Full architecture, portfolio, change management |\n\nWhen you land in the “**Sector Maestro**”/high complexity zone, you must use the full suite of advanced practices—capability-based architecture, outcome-based planning, strategic portfolio management, and more. \n\n#### **Cascading & Capability Dissection**\n\nCascading is the process of breaking the sector strategy into actionable layers—L0 (strategy) to L3 (execution)—across every domain.\n\n| Domain | L0 | L1 | L2 | L3 |\n| :---- | :---- | :---- | :---- | :---- |\n| Strategy & KPIs | Strategic Objective | Leading Indicators | Operational KPIs | Process Metrics |\n| Portfolios | Transformation Portfolio | Programs | Initiatives | Master Deliverables |\n| Processes | High-Level Functions | Process Groups | Categories | Steps |\n| Org Structure | Entity | Main Unit | SubUnit | Teams/Individuals |\n| Change & Culture | Narrative | Target Behaviors | Enablement Tools | Habits & Rituals |\n| Planning & Cadence | Multi-Year Strategy | Annual Plans | Quarterly Cycles | Weekly Activities |\n\n### **C.**    **Sector Capability Mapping: The Heart of Entangled Transformation**\n\nIn an entangled transformation, the sector is the master architect.\n\n·        National Strategic Objectives (SOs) (e.g., “Grow Clean Energy Sector”) sit at the top.\n\n·        These SOs cascade into Sector Capabilities—policy tools like regulations, platforms, incentives, and enforcement.\n\n·        Each capability is assigned to one or more entities (ministries, agencies, authorities)—not just departments.\n\n·        This triggers org-level transformation in each entity, aligning teams, systems, and processes to deliver their assigned policy tool.\n\n·        Execution at each org then feeds back into overall sector outcomes.\n\n \n\n### **D.**    **From Strategy to Impact – and back: Key Chains**\n\nForward flow reflects strategic planning, while the return path reflects monitoring and tracking\n\n| 1.0 Sector Operations |  |  |  |  |  |  |  |  |  |  |  |  |\n| :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- |\n| Objectives | ⇨ | Realized Via Policy Tools | ⇨ | Refers To Admin Records | ⇨ | Applied On Business | ⇨ | Triggers Event \\- Data Transaction | ⇨ | Measured By Performance | ⇨ | Aggregates To Objectives |\n|  |  |  |  |  | ⇨ | Applied On Gov. Entities | ⇨ |  |  |  |  |  |\n|  |  |  |  |  | ⇨ | Applied On Citizens | ⇨ |  |  |  |  |  |\n\n \n\n| 2.0 Strategic to Tactical Planning |  |  |  |  |  |  |  |  |  |  |  |\n| :---- | :---- | :---- | :---- | :---- | ----- | :---- | :---- | :---- | :---- | :---- | :---- |\n| Objectives | ⇨ | Realized Via Policy Tools | ⇨ | Priority Areas Capability | ⇨ | Defines ·\tRole Gaps ·\tKnowledge ·\tAutomation | Organization | ⇨ | Close Gaps Projects Outputs | ⇨ | Plan Jointly Change Architecture |\n|   |   |   |   |   |   |  | Processes |  |  |  |  |\n| Objectives | ⇨ | Cascaded Via Performance | ⇨ | Operational Targets Capability | \\--\\> |  | IT Systems |  |  |  |  |\n\n \n\n| 3.0 Tactical to Strategic Execution |  |  |  |  |  |  |  |  |  |  |  |  |\n| :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- |\n| Change Architecture | ⇨ | Increase Adoption Projects Outputs | ⇨ | Closes Gaps Organization Processes IT Systems | ⇨ | Unlocks Capability | ⇨ | Reports Performance | ⇨ | Aggregates to | Objectives |   |\n|  |  |  |  |  |  |  | ⇨ | Enable Executing Policy Tools | ⇨ | Governed by |  |   |\n\n \n\n| 4.0 Integrated Risk |  |  |  |  |\n| :---- | :---- | :---- | :---- | :---- |\n| Capability | ⇨ | Monitored by Risks | ⇨ | Informs Policy Tools |\n|  |  |  | ⇨ | Informs Performance |\n\n \n\n| 5.0 Entity Operations |  |  |  |  |  |  |  |  |\n| :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- |\n| Culture Health | ⇨ | Monitors For Organization | ⇨ | Apply Processes | ⇨ | Utilize IT Systems | ⇨ | Depends On Vendors SLA |\n\n **Examples**\n\n**Sector Objective**: Boost national manufacturing share\n\n**Sector Capabilities (Policy Tools)**:\n\n\\-        Regulation (new investment law)\n\n\\-        Service Platform (export licensing portal)\n\n\\-        Incentive (capital subsidy scheme)\n\n\\-        Enforcement (market inspection regime)\n\n**Entities**:\n\n\\-        Ministry of Industry (leads regulation)\n\n\\-        Export Authority (operates platform)\n\n\\-        Investment Agency (delivers subsidy)\n\n\\-        Quality Authority (runs inspection)\n\n**Org Capabilities**:\n\n\\-        Regulatory drafting teams\n\n\\-        Digital process units\n\n\\-        Analytics and outreach\n\n**Execution**:\n\nEach policy tool is rolled out, with cross-entity feedback, KPIs tracked at sector level\n\nThis alignment ensures the vertical clarity of L0–L3 is achieved across the sector, not just inside one organization.\n\n#### \n\n#### **Key Takeaways**\n\n§  **Sector-as-Master**: Entangled transformations are sector-driven, with the sector’s capability map assigning priorities to each entity.\n\n§  **Complexity Matrix**: Use scale, change radius, severity, and dependencies to diagnose your starting point.\n\n§  **Cascade & Capability**: Trace every SO down to policy tools and responsible entities, ensuring capabilities are mapped and built for delivery.\n\n§  **Alignment at All Levels**: Organizational transformations are triggered and shaped by sector needs, not just internal ambitions.\n\n§  **End-to-End Logic**: The journey runs from sector objective → sector capability (policy tool) → entity assignment → org transformation → execution and impact.\n\n[image1]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAAAdCAYAAADb0uIeAAAGG0lEQVR4Xu2bi5HjIAxAnbYoiD62A18z3l7WvYSzkAWyELb82SS+Y2fe5A4wCNAHFKf7+vrqGo3GMYqCRqNhpyhoNBp2ioJGo2GnKGhkxqEP3rng+jHIusa/T/j2Tzftvx/GMP09ZD1QFNwV33Wh24ULk11UDaN32Mb3Q4Dlk/WN/4MRjGjSF9CVTjGi4oH40OBRwYbseaETUDzpjcOkXqhsXbRU2der4HIAsn7RluanGFAIQwBjlHVj7woj9ENus1Ufxj7QGiamBnL8dyHXTyLbvxtVXraeUD942JNpn3+mXfWP1Gb6fBT9jX+e7oH9uOkBWd87eB774oZUCEaKMAivO3jsnCvFos71b/fUXEk1OVO7AIuoGxDNU5bHaDQ7CHQwS2fC60EOWQ+b6TxGMxz/M9aMIGXMMk4KyJyCtlbvJMo7rR+ersZZzrynXF+nj0cI30//wD3S1vzbd0/cE1/oPpAMbBrzh9UvG82KAYIUHcS6snPyBDIyvYscCUpZOZoBZQP05RxZ22QAs8cr6+cNXYkwRw0ojuWX8mn0rpzfGjV5YD2d2x5vDbk+GqhHdpmdkFU6zq31l0zjP2FdQWd4hOGQkfnhmfplHeDRBRrsMQZ6bs3jvxIe2tfmoRkQea2152iMtQ2y1h9ZM3JyUvZFm43xNfa238PakZlIx7GDMvA9xxPAugM9AiQVHiDjZLxhNrJUecR4APL40nPV4IZqp4yIW6RnFa+qwaOPZeFj35XNJkOsjQ31R4yHQ+siIx+NrY27Rt4TH49Fsv4s+WRQkbmyVlbkHVTWrwHHuzT3Zz0CxSgV70LQVhiQNjkLtTtDjVcZEB/D4hTS8dW4kbGtYkCLZIHSF9XL5/YiFZIbD4wr228B889Jjv3rbYHLDP8/Y/CSZZLGfuTkyYNagoGT7kpzu1RR2/A1uDHIuneT73M2hUiba1wDWnBelo6PDpMIsq98vLRv8BqL+95G1LPAlRCSCbL+ClKSajxn8BKui9boTsYDc41z7n+mTz36EOMfF49xkEiY/h7z4PvPzPG5tODbCvoO0gZ12x4utTWugdYWlQMjQr3evsEWFkeXE8ZDWO+QZ7haZsCagU3t5+93wGhQ/8sUtUbFgMgC9y1Y9vLXeNSr4V5p62h61oBoLWgNt+qvIiv8/uN3jeRQjffBveT+r5OZfydkWWMwHj9gxIl3IIfpaTAK2ZajG9D8vYXFcomjnupVd6A4ViUtrXHkCEfzjg5IPBf7mg1Iq5ccOTJlmeEIx/69Mg4hL++QQuZvXeQvx/W+jsgLpCNcgC83s8yy3R5S1s3g0CERgONmQ4F7DaSmeVmN6wxoZ8hMz73IgLiBW+Q7kkSIKdN5PlJpF/WurD/L4v4z973nTrEVEXGProsQAJeZys4mEWifYY+PXCnAoCCzJo9v0F+nGJSaRKAjXE3RYJKyjB/frlaOK9h7JDuSxnY9vGy6VIhl/WBKGoAS+Ioi19DWPkUVg0ImZa6sT6yrOJMj8moGT32dSWOTHmJfelILooZmDPGZOZHA09ffHtqX2TgyNpyHlsZWFpMmLsuvyPr8Jntl25vFwUUEdC+9VU9QhFprI8E90Q09Rd6NufMsJT+OhZgdg/51uY/IC+BYdZkt+0Vvx9PYyemxiEt6GYM/GOec2OHRZTH2/OUoGFAYweHhK1eyXWwbXwfCPaX+FpOI72uljQfB8DUOOBsvOpqPfFxJ5GDvgod0WbfFnjtTfGdsRYmcx/e0ZDkRx5oVRovwNeL8LK/yTG22lBwVzE9y5H1EucvoclTeNI5BFovMI8g7y1p7U35xNxzXM2tgFOhwfHx5uqtEKoCOb/xl06LR3alFTAmmMEtFIQ8my6+GlJEin6z/NO4m79WYXia9O3siCHqS0oBIQbY84RmiR543AWX+nAiucTd5fwPzzxnuSr7D6Gd3Dv0coXbMS2nRjX6uAO8iaPAwrq+cvz+Fu8l7BZA8iEdGJTNXNL4ryzuZBYuhYZZNi1RXkd+W0C/Yn8bd5D3Df/WT7tJAttg2oFdAdzbtMvyJ3E3e36YoaDQadoqCRqNhpyhoNBp2ioJGo2HnL/+bL9+9rosaAAAAAElFTkSuQmCC>\n\n[image2]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAMAAABhTZc9AAADAFBMVEUAAAAAAAAAADoAAGYAOmYAOpAAZrY6AAA6ADo6OgA6OpA6ZpA6ZrY6kJA6kLY6kNtmAABmOgBmOjpmZpBmZrZmkNtmtttmtv+QOgCQZjqQZmaQ2/+2ZgC2Zjq2Zma2kDq2kGa22/+2///bkDrbtmbbtpDb2//b////tmb/25D/27b//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADUF3LnAAAAAXRSTlMAQObYZgAAAO9JREFUeF7VkEFrwkAQhd8m0YQoTbZYRbuWNgomZP//L7HXHupJEUQQvRRxZpN1TfQufZeXvA/ezCzwHzUTJOsjoAjJuzXMPcyZklOeANN+KUWngt5xjJAyTe5LnIDV4btne4NfQER7LG1A0lu8rt2v4rlsVaPi8W3K6xga2p3g2Q9gd/4wrv+UjW7oZhiAS06DHxeibs4TOpk682qJBi3TDj9Il3xhsmnf0TL1M6aJZG9KCel/gemLhfrzzVHvnZ2e2jhJVomh9QzV4wZSEavrzXcq4kWatEMrPckQXYsfibYr2pmTEPenOYn6UZ6jC1y/GoaJv1R3AAAAAElFTkSuQmCC>\n\n[image3]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAdCAMAAAB/hKeOAAADAFBMVEUAAAAAAAAAADoAAGYAOmYAOpAAZrY6AAA6ADo6OgA6OmY6OpA6ZpA6ZrY6kNtmAABmOgBmOjpmZpBmZrZmkLZmkNtmtttmtv+QOgCQOjqQZjqQZmaQttuQ2/+2ZgC2Zjq2kDq2kGa229u22/+2///bkDrbtmbb27bb////tmb/25D/27b/29v//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACF1gSeAAAAAXRSTlMAQObYZgAAAMFJREFUeF7Fj90KgkAQhWfWLa1QgyA0yMISVHDf/20iuuyqUsI0bX/ETa+DDswO59sZmAPwHxniYVggl1NqzjyMge2RbDVLcCLaPNQIIpx+OQDCy3KqwwAKJSZZjxmkiPaYgccv6Y28DyDEom57xkx/Q6xTiLn0u+YFtLrI//aJsp950VrN13fa8MYe+VWEsGO+ooJlS5WPzRCJipXGwTARR4vMFReJbJ3YzX+XrvadEuMIqxELEI3BLpcJNBqAn+gDxPcg+c6T4HQAAAAASUVORK5CYII=>\n\n[image4]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAdCAMAAACOj/wDAAADAFBMVEUAAAAAAAAAADoAAGYAOmYAOpAAZpAAZrY6AAA6ADo6OgA6OpA6ZrY6kNtmAABmADpmOgBmOjpmZrZmkLZmtttmtv+QOgCQOjqQZmaQttuQ2/+2ZgC2Zjq2kDq2tma22/+2///bkDrbkGbbtmbbtpDb////tmb/25D/27b//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACK/gpHAAAAAXRSTlMAQObYZgAAAOdJREFUeF7lUNluwjAQnLETJxVFVIVEHC1HVYji//8WnguvqUglDkFb2tpxhNNPQIzk3Zmd3bVl4JogzdE8kNEZOtrlameIQbavEnQaTlKKIUZMkHd6VXHEoMpZa44sZjJj5LZVE/2p5ynbsfT6P2ZszuGBzU6zt6lcq6ilUHjz3moI1TB/Pi8WFqvwi21v6vLkvfX99ihbF41Yjjl1VCcm0IZ6Up8e76J68bKwfxYCT4kzv1Uh1NYQe5PBmeY9H4V8/T0iW483773N4DkObQfQLTt9WRryQtGd2woZTNwgcgaDmt48/gDv1iuXtBQ4BAAAAABJRU5ErkJggg==>\n\n[image5]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAA0CAMAAABSOYM3AAADAFBMVEUAAAAAAAAAADoAAGYAOjoAOmYAOpAAZrY6AAA6ADo6Ojo6OmY6OpA6ZmY6ZpA6ZrY6kNtmAABmOgBmOjpmZpBmZrZmkLZmkNtmtttmtv+QOgCQZjqQZmaQttuQ2/+2ZgC2Zjq2kDq2kGa2ttu2///bkDrbkGbbtmbb27bb29vb2//b////tmb/25D/27b/29v//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACP9SUkAAAAAXRSTlMAQObYZgAAAVxJREFUeF7NU99PwkAMbm9jzIchoDJxiQvRaYKycP//H8ET7/6KuJiAAgYhIPZ6N3bsWRK/ZOv6Xdfrtd8B/AHkBRqIS0MJgEHYhu6WAOjZ0TGyaXh3FtlvaLYAZYDNQr1tOPQcv7sbkML53rEqagUI8mN0tCMV28swBFhWmnvsdkkVDSo4LFhCglXbTU849gusjADTNbMjrCmv32BSCl/X4AbKnXzy2uMD55OcVnZ0E04j5xoA05cJ/wngLanKn/kbGSdbGBLofC54zy3OtI97SnDGu9mYOdXbVolTrUbVsAMByyNjlCv7Z7jxc62i1qo6RPwUROAMve5i9lpJjCwSrLO06+pbC1somdGQ1mOev68DcxgBxW2b1AnSaL8tJHfGuXbNIsn9apt2qpl9M2iIqgKy2pjYqVYgmKuVj1mM2QRizp4mVyGbXmZdg7RpulArNpOx4VrdIvAw+AXjRUOYLEpAgwAAAABJRU5ErkJggg==>\n\n[image6]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAMAAABymtfJAAADAFBMVEUAAAAAAAAAADoAAGYAOpAAZrY6AAA6ADo6OpA6ZrY6kNtmAABmOgBmOjpmZpBmZrZmkNtmtv+QOgCQZjqQZmaQ2/+2ZgC2Zjq2kDq2kGa2///bkDrbtmbb////tmb/25D/27b//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADRzn/2AAAAAXRSTlMAQObYZgAAAM5JREFUeF7Nkc0OgjAQhHehCFoTAzGamCjS938mL570oIkKSsqPuy1C8ezBL1l2O22GKQD8ByrBLXf0N668QtOkMJuER6UqO4eTY6cKqra086XTAHwqefEbUIi6V9lBA4IqrmEvMhSBcQPQ2fqByzaLkc0GtdUYwEHgJ4AlwZm7XE9Nkxi7KkNmFc4LmjJtkqlIvEwyL+Jl/uRndj4FdHZf6fbGyQrRAKS1V94HJ0saZZJfzQ49Kk+aSrpKx46uuPgW6VPzHUcORADjH/Jb3kC9KeLGC+fvAAAAAElFTkSuQmCC>\n\n[image7]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAdCAMAAABCFsboAAADAFBMVEUAAAAAAAAAADoAAGYAOjoAOmYAOpAAZrY6AAA6Ojo6OmY6ZmY6ZpA6kNtmAABmOgBmOjpmkLZmtttmtv+QOgCQZjqQttuQ2/+2ZgC2kGa2ttu2///bkDrbkGbb27bb29vb2//b////tmb/25D/27b/29v//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACX/iO2AAAAAXRSTlMAQObYZgAAAJlJREFUeF7NT+0KwjAMTFbWVsGvTbC6IsrEvf9T+UfYRFRWOmeT2kcQvB/JXXJJCMDPoTEhBxBg/LpY3KTfy+f72IHFYGlwFqLFDWSeRjxOQ1QqrbDMDNI82e/g4CSuq1dsn+e8vgg0Iz243Tga1aqv7nsJcKmUS3au8mlig8tZ02nSD7ckWXexXOuS0laLKqTGxF8mB27+Gz4XuB5F1dbZTwAAAABJRU5ErkJggg==>\n\n[image8]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAMAAABhTZc9AAADAFBMVEUAAAAAAAAAADoAAGYAOmYAOpAAZrY6AAA6ADo6OgA6OpA6ZpA6ZrY6kJA6kLY6kNtmAABmOgBmOjpmZpBmZrZmkNtmtttmtv+QOgCQZjqQZmaQ2/+2ZgC2Zjq2Zma2kDq2kGa22/+2///bkDrbtmbbtpDb2//b////tmb/25D/27b//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADUF3LnAAAAAXRSTlMAQObYZgAAAO9JREFUeF7VkEFrwkAQhd8m0YQoTbZYRbuWNgomZP//L7HXHupJEUQQvRRxZpN1TfQufZeXvA/ezCzwHzUTJOsjoAjJuzXMPcyZklOeANN+KUWngt5xjJAyTe5LnIDV4btne4NfQER7LG1A0lu8rt2v4rlsVaPi8W3K6xga2p3g2Q9gd/4wrv+UjW7oZhiAS06DHxeibs4TOpk682qJBi3TDj9Il3xhsmnf0TL1M6aJZG9KCel/gemLhfrzzVHvnZ2e2jhJVomh9QzV4wZSEavrzXcq4kWatEMrPckQXYsfibYr2pmTEPenOYn6UZ6jC1y/GoaJv1R3AAAAAElFTkSuQmCC>\n\n[image9]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAdCAMAAAB/hKeOAAADAFBMVEUAAAAAAAAAADoAAGYAOmYAOpAAZrY6AAA6ADo6OgA6OmY6OpA6ZpA6ZrY6kNtmAABmOgBmOjpmZpBmZrZmkLZmkNtmtttmtv+QOgCQOjqQZjqQZmaQttuQ2/+2ZgC2Zjq2kDq2kGa229u22/+2///bkDrbtmbb27bb////tmb/25D/27b/29v//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACF1gSeAAAAAXRSTlMAQObYZgAAAMFJREFUeF7Fj90KgkAQhWfWLa1QgyA0yMISVHDf/20iuuyqUsI0bX/ETa+DDswO59sZmAPwHxniYVggl1NqzjyMge2RbDVLcCLaPNQIIpx+OQDCy3KqwwAKJSZZjxmkiPaYgccv6Y28DyDEom57xkx/Q6xTiLn0u+YFtLrI//aJsp950VrN13fa8MYe+VWEsGO+ooJlS5WPzRCJipXGwTARR4vMFReJbJ3YzX+XrvadEuMIqxELEI3BLpcJNBqAn+gDxPcg+c6T4HQAAAAASUVORK5CYII=>\n\n[image10]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAMAAABymtfJAAADAFBMVEUAAAAAAAAAADoAAGYAOpAAZrY6AAA6ADo6OpA6ZrY6kNtmAABmOgBmOjpmZpBmZrZmkNtmtv+QOgCQZjqQZmaQ2/+2ZgC2Zjq2kDq2kGa2///bkDrbtmbb////tmb/25D/27b//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADRzn/2AAAAAXRSTlMAQObYZgAAAM5JREFUeF7Nkc0OgjAQhHehCFoTAzGamCjS938mL570oIkKSsqPuy1C8ezBL1l2O22GKQD8ByrBLXf0N668QtOkMJuER6UqO4eTY6cKqra086XTAHwqefEbUIi6V9lBA4IqrmEvMhSBcQPQ2fqByzaLkc0GtdUYwEHgJ4AlwZm7XE9Nkxi7KkNmFc4LmjJtkqlIvEwyL+Jl/uRndj4FdHZf6fbGyQrRAKS1V94HJ0saZZJfzQ49Kk+aSrpKx46uuPgW6VPzHUcORADjH/Jb3kC9KeLGC+fvAAAAAElFTkSuQmCC>\n\n[image11]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAdCAMAAACOj/wDAAADAFBMVEUAAAAAAAAAADoAAGYAOmYAOpAAZpAAZrY6AAA6ADo6OgA6OpA6ZrY6kNtmAABmADpmOgBmOjpmZrZmkLZmtttmtv+QOgCQOjqQZmaQttuQ2/+2ZgC2Zjq2kDq2tma22/+2///bkDrbkGbbtmbbtpDb////tmb/25D/27b//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACK/gpHAAAAAXRSTlMAQObYZgAAAOdJREFUeF7lUNluwjAQnLETJxVFVIVEHC1HVYji//8WnguvqUglDkFb2tpxhNNPQIzk3Zmd3bVl4JogzdE8kNEZOtrlameIQbavEnQaTlKKIUZMkHd6VXHEoMpZa44sZjJj5LZVE/2p5ynbsfT6P2ZszuGBzU6zt6lcq6ilUHjz3moI1TB/Pi8WFqvwi21v6vLkvfX99ihbF41Yjjl1VCcm0IZ6Up8e76J68bKwfxYCT4kzv1Uh1NYQe5PBmeY9H4V8/T0iW483773N4DkObQfQLTt9WRryQtGd2woZTNwgcgaDmt48/gDv1iuXtBQ4BAAAAABJRU5ErkJggg==>\n\n[image12]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAMAAABhTZc9AAADAFBMVEUAAAAAAAAAADoAAGYAOmYAOpAAZrY6AAA6ADo6OgA6OpA6ZpA6ZrY6kJA6kLY6kNtmAABmOgBmOjpmZpBmZrZmkNtmtttmtv+QOgCQZjqQZmaQ2/+2ZgC2Zjq2Zma2kDq2kGa22/+2///bkDrbtmbbtpDb2//b////tmb/25D/27b//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADUF3LnAAAAAXRSTlMAQObYZgAAAO9JREFUeF7VkEFrwkAQhd8m0YQoTbZYRbuWNgomZP//L7HXHupJEUQQvRRxZpN1TfQufZeXvA/ezCzwHzUTJOsjoAjJuzXMPcyZklOeANN+KUWngt5xjJAyTe5LnIDV4btne4NfQER7LG1A0lu8rt2v4rlsVaPi8W3K6xga2p3g2Q9gd/4wrv+UjW7oZhiAS06DHxeibs4TOpk682qJBi3TDj9Il3xhsmnf0TL1M6aJZG9KCel/gemLhfrzzVHvnZ2e2jhJVomh9QzV4wZSEavrzXcq4kWatEMrPckQXYsfibYr2pmTEPenOYn6UZ6jC1y/GoaJv1R3AAAAAElFTkSuQmCC>\n\n[image13]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAdCAMAAAB/hKeOAAADAFBMVEUAAAAAAAAAADoAAGYAOmYAOpAAZrY6AAA6ADo6OgA6OmY6OpA6ZpA6ZrY6kNtmAABmOgBmOjpmZpBmZrZmkLZmkNtmtttmtv+QOgCQOjqQZjqQZmaQttuQ2/+2ZgC2Zjq2kDq2kGa229u22/+2///bkDrbtmbb27bb////tmb/25D/27b/29v//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACF1gSeAAAAAXRSTlMAQObYZgAAAMFJREFUeF7Fj90KgkAQhWfWLa1QgyA0yMISVHDf/20iuuyqUsI0bX/ETa+DDswO59sZmAPwHxniYVggl1NqzjyMge2RbDVLcCLaPNQIIpx+OQDCy3KqwwAKJSZZjxmkiPaYgccv6Y28DyDEom57xkx/Q6xTiLn0u+YFtLrI//aJsp950VrN13fa8MYe+VWEsGO+ooJlS5WPzRCJipXGwTARR4vMFReJbJ3YzX+XrvadEuMIqxELEI3BLpcJNBqAn+gDxPcg+c6T4HQAAAAASUVORK5CYII=>\n\n[image14]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAdCAMAAACOj/wDAAADAFBMVEUAAAAAAAAAADoAAGYAOmYAOpAAZpAAZrY6AAA6ADo6OgA6OpA6ZrY6kNtmAABmADpmOgBmOjpmZrZmkLZmtttmtv+QOgCQOjqQZmaQttuQ2/+2ZgC2Zjq2kDq2tma22/+2///bkDrbkGbbtmbbtpDb////tmb/25D/27b//7b//9sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACK/gpHAAAAAXRSTlMAQObYZgAAAOdJREFUeF7lUNluwjAQnLETJxVFVIVEHC1HVYji//8WnguvqUglDkFb2tpxhNNPQIzk3Zmd3bVl4JogzdE8kNEZOtrlameIQbavEnQaTlKKIUZMkHd6VXHEoMpZa44sZjJj5LZVE/2p5ynbsfT6P2ZszuGBzU6zt6lcq6ilUHjz3moI1TB/Pi8WFqvwi21v6vLkvfX99ihbF41Yjjl1VCcm0IZ6Up8e76J68bKwfxYCT4kzv1Uh1NYQe5PBmeY9H4V8/T0iW483773N4DkObQfQLTt9WRryQtGd2woZTNwgcgaDmt48/gDv1iuXtBQ4BAAAAABJRU5ErkJggg==>","size_bytes":31603},"public/lessons/1.4/Episode 1.444.md":{"content":"# Episode 1.4: The Entangled Transformation\r\n\r\n#### **Recap**\r\n\r\n*“The sector sets the destination; the organization builds the vehicle for the journey; people must work together to win the race.”*\r\n\r\nIn 1.1, we saw how organizations transform themselves; in 1.2, how sectors reshape roles and set national ambitions; and in 1.3 how people are the ones to manifest real change.   \r\nIn an entangled transformation, these journeys are woven together.\r\n\r\n#### **A Transformation Complexity Index**\r\n\r\nIn sector-wide public transformation programs—where ministries, authorities, and agencies must evolve together—the challenge is not just the ambition of change, but its complexity. Until now, there has been no structured, quantifiable way to assess that complexity before execution begins.\r\n\r\nThis proposal introduces a Public Sector Complexity Index (CI)—a simple, scalable formula designed to do just that. It allows program leaders and transformation designers to measure the true burden of change across a multi-entity ecosystem.\r\n\r\n##### Complexity Index (CI): Final Formula\r\n\r\n\\[ CI = \\frac{\\sum (w_i \\cdot s_i \\cdot x_i)}{\\sum w_i} \\]\r\n\r\nWhere:\r\n\r\n| Symbol | Meaning | Scale |\r\n| :---- | :---- | :---- |\r\n| ( w_i ) | Strategic weight or importance of entity ( i ) amongst others (how much of the sector transformation relies on the entity) | % weight out of the whole |\r\n| ( s_i ) | Severity of transformation required for entity ( i ) (1–5 scale) | 1 – Manageable 5 – New entity |\r\n| ( E_i ) | Number of non-established external stakeholders entity ( i ) must coordinate with (never worked with before) | Count |\r\n| ( B ) | Baseline manageable number of external dependencies (sector-specific) | Avg of 5 |\r\n| ( x_i ) | ( x_i = \\frac{E_i}{B} ) | Ratio |\r\n\r\n##### What It Captures\r\n\r\nThis single weighted-average formula collapses three dimensions of transformation into one score:\r\n\r\n1. **Internal disruption** — how deep each entity’s change is.  \r\n2. **Strategic role** — how central each entity is to the sector’s mission.  \r\n3. **External coordination** — how many other players each entity must engage with.\r\n\r\nEach entity’s individual transformation burden is scaled based on its real-world coordination load. The output is a single number that reflects the system-wide complexity of execution.\r\n\r\n##### Example\r\n\r\n| Entity | Weight (( w_i )) | Severity (( s_i )) | External Links (( E_i )) | ( x_i = \\frac{E_i}{B} ) | Contribution (( w_i \\cdot s_i \\cdot x_i )) |\r\n| :---- | :---- | :---- | :---- | :---- | :---- |\r\n| Ministry A | 5 | 5 | 15 | 1.5 | 37.5 |\r\n| Regulator B | 3 | 4 | 10 | 1.0 | 12.0 |\r\n| Operator C | 2 | 2 | 4 | 0.4 | 1.6 |\r\n| Support Unit D | 1 | 1 | 2 | 0.2 | 0.2 |\r\n\r\n\\[ \\text{Total Weighted Contribution} = 37.5 + 12.0 + 1.6 + 0.2 = 51.3 \\] \\[ \\text{Total Weight} = 5 + 3 + 2 + 1 = 11 \\] \\[ \\text{CI} = \\frac{51.3}{11} = 4.66 \\]\r\n\r\nThis CI of 4.66 reflects the overall complexity of the transformation. But it also opens the door to something deeper.\r\n\r\n##### Beyond the Average: Diagnostic Insights\r\n\r\nAfter computing the CI, each entity’s normalized complexity score can be calculated:\r\n\r\n\\[ \\text{Normalized Complexity}_i = s_i \\cdot \\frac{E_i}{B} \\]\r\n\r\nComparing this against the system-wide average (CI) reveals outliers—entities whose burden is disproportionately high. This flags potential issues in the operating model design.\r\n\r\n##### What to Do with Outliers:\r\n\r\n- **Too high?** Consider breaking apart roles, delegating delivery, or spinning off entities (e.g., create an authority or SOE).  \r\n- **Too low?** Consider absorbing adjacent responsibilities to improve efficiency.\r\n\r\n##### Why It Matters\r\n\r\nThis Complexity Index is more than a metric. It’s a planning instrument, early-warning signal, and design aid that lets public-sector leaders:\r\n\r\n- Quantify and compare transformation efforts before they begin.  \r\n- Spot operating model overload before failure.  \r\n- Redesign ecosystem roles and delivery logic to normalize transformation load.\r\n\r\nIt brings clarity to an area too often driven by guesswork—and gives transformation offices the numbers they need to act.\r\n\r\n#### **Mapping to Archetype and Practices**\r\n\r\nYour complexity profile determines your transformation archetype and toolkit.\r\n\r\n| Complexity Profile | Transformation Archetype | Practice Approach |\r\n| :---- | :---- | :---- |\r\n| Low on all axes | Localized/Focused | Traditional project management |\r\n| Moderate (2 axes high) | Holistic/Entity-wide | Standard portfolio tools |\r\n| High on 3-4 axes | Value Chain/Integrated | Capability architecture, cross-team |\r\n| All axes high | Sector Maestro/Systemic | Full architecture, portfolio, change management |\r\n\r\nWhen you land in the “Sector Maestro”/high complexity zone, you must use the full suite of advanced practices—capability-based architecture, outcome-based planning, strategic portfolio management, and more.\r\n\r\n#### **Cascading & Capability Dissection**\r\n\r\nCascading is the process of breaking the sector strategy into actionable layers—L0 (strategy) to L3 (execution)—across every domain.\r\n\r\n| Domain | L0 | L1 | L2 | L3 |\r\n| :---- | :---- | :---- | :---- | :---- |\r\n| Strategy & KPIs | Strategic Objective | Leading Indicators | Operational KPIs | Process Metrics |\r\n| Portfolios | Transformation Portfolio | Programs | Initiatives | Master Deliverables |\r\n| Processes | High-Level Functions | Process Groups | Categories | Steps |\r\n| Org Structure | Entity | Main Unit | SubUnit | Teams/Individuals |\r\n| Change & Culture | Narrative | Target Behaviors | Enablement Tools | Habits & Rituals |\r\n| Planning & Cadence | Multi-Year Strategy | Annual Plans | Quarterly Cycles | Weekly Activities |\r\n\r\n#### \r\n\r\n#### **5. Sector Capability Mapping: The Heart of Entangled Transformation**\r\n\r\nIn entangled transformation, the sector is the master architect.\r\n\r\nNational Strategic Objectives (SOs) (e.g., “Grow Clean Energy Sector”) sit at the top.\r\n\r\nThese SOs cascade into Sector Capabilities—policy tools like regulations, platforms, incentives, and enforcement.\r\n\r\nEach capability is assigned to one or more entities (ministries, agencies, authorities)—not just departments.\r\n\r\nThis triggers org-level transformation in each entity, aligning teams, systems, and processes to deliver their assigned policy tool.\r\n\r\nExecution at each org then feeds back into overall sector outcomes.\r\n\r\n*Visual: Swim-lane diagram*\r\n\r\nNational SOs → Sector Capabilities (Policy Tools) → Entities in Ecosystem → Org Capabilities & Execution → Sector Outcomes\r\n\r\n#### **From Strategy to Impact**\r\n\r\n**Example flow**:\r\n\r\n**Sector Objective**: Boost national manufacturing share\r\n\r\n**Sector Capabilities (Policy Tools)**:\r\n\r\n- Regulation (new investment law)  \r\n- Service Platform (export licensing portal)  \r\n- Incentive (capital subsidy scheme)  \r\n- Enforcement (market inspection regime)\r\n\r\n**Entities**:\r\n\r\n- Ministry of Industry (leads regulation)  \r\n- Export Authority (operates platform)  \r\n- Investment Agency (delivers subsidy)  \r\n- Quality Authority (runs inspection)\r\n\r\n**Org Capabilities**:\r\n\r\n- Regulatory drafting teams  \r\n- Digital process units  \r\n- Analytics and outreach\r\n\r\n**Execution**:\r\n\r\nEach policy tool is rolled out, with cross-entity feedback, KPIs tracked at sector level.\r\n\r\nThis alignment ensures the vertical clarity of L0–L3 is achieved across the sector, not just inside one organization.\r\n\r\n#### **Key Takeaways**\r\n\r\n- **Sector-as-Master**: Entangled transformations are sector-driven, with the sector’s capability map assigning priorities to each entity.  \r\n- **Complexity Matrix**: Use scale, change radius, severity, and dependencies to diagnose your starting point.  \r\n- **Cascade & Capability**: Trace every SO down to policy tools and responsible entities, ensuring capabilities are mapped and built for delivery.  \r\n- **Alignment at All Levels**: Organizational transformations are triggered and shaped by sector needs, not just internal ambitions.  \r\n- **End-to-End Logic**: The journey runs from sector objective → sector capability (policy tool) → entity assignment → org transformation → execution and impact.\r\n","size_bytes":8182},"public/lessons/2.1/Episode 2.1.md":{"content":"# Episode 2.1: Strategic Performance (KPIs)\r\n\r\n#### **Introduction**\r\n\r\nIn Episode 1.4, we saw how public-sector transformation is “entangled”—sector outcomes depend on organizational capabilities, and each piece must align for change to happen. But how does a Vision 2030 macro target—like “increase non-oil GDP”—actually cascade down to something a department or analyst can influence?\r\n\r\n| Episode Objective | Translating macro ambitions into measurable, manageable achievements that aggregate |\r\n| :---- | :---- |\r\n| Context | Using Saudi Arabia’s real indicators and transformation contexts |\r\n| Example | See the cascade under the microscope as we examine the essential role of formulas in cascading |\r\n\r\n#### **Why Cascading Matters in Vision 2030**\r\n\r\nVision 2030 sets ambitious, sector-wide targets. But success requires breaking each goal into actionable, owned, and reviewed KPIs—from the national level all the way down to L3 frontline process metrics. The cascade isn’t just vertical—some leading and operational KPIs link horizontally across ministries or agencies, making collaboration essential.\r\n\r\n##### Indicator Types\r\n\r\nThe best way to explain the cascade is to take an example from the highest level all the way down. For our example, we choose the GDP as one of the most common and visible economic indicators.\r\n\r\nBut first, let’s understand how our definitions fit in this context. Think of the Saudi economy as a high-tech dashboard. Each gauge (indicator) helps leaders steer toward Vision 2030. There are three types we are interested in for the moment:\r\n\r\n- **Lagging Indicators**: These are like taillights, showing where we’ve been. They change *after* the economy shifts, confirming past trends. Example: Government spending more after a bad year to help out.  \r\n- **Leading Indicators**: These are like headlights, showing what’s coming. They change *before* the economy does, hinting at future growth or slowdowns. Example: Businesses investing in new factories because they expect more sales.  \r\n- **Coincident Indicators**: These are like your speedometer, showing what’s happening now. They move *with* the economy, reflecting its current state. Example: The number of people with jobs rising as the economy grows.\r\n\r\nIn Saudi Arabia, with its mix of oil and Vision 2030’s push for tourism and industry, these indicators help leaders like the Ministry of Finance or GASTAT (the stats agency) steer the economy.\r\n\r\n#### **GDP Formula Components**\r\n\r\nSaudi Arabia uses the expenditure approach to GDP:\r\n\r\n\\[ \\text{GDP} \\= \\text{Consumption (C)} \\+ \\text{Investment (I)} \\+ \\text{Government Spending (G)} \\+ (\\text{Exports (X)} – \\text{Imports (M)}) \\]\r\n\r\n- **C (Consumption)**: Money people spend on stuff like food, clothes, or trips. In Saudi Arabia, this includes locals buying groceries or tourists spending at Riyadh Season.  \r\n- **I (Investment)**: Money businesses or the government spend on future projects, like factories, hotels, or NEOM’s skyscrapers.  \r\n- **G (Government)**: Money the government spends on schools, hospitals, or roads, tracked through budgets on Saudi Arabia’s Etimad system.  \r\n- **X (Exports)**: Value of what Saudi Arabia sells abroad, like oil, chemicals, or tourism services for foreign visitors.  \r\n- **M (Imports)**: Value of what Saudi Arabia buys from other countries, like cars or tech.\r\n\r\n#### **How Do They Impact the Economy?**\r\n\r\nThis simple question not only helps identify them quickly (as you will see in a moment), but it helps you understand the state of the economy with one quick glance.\r\n\r\nTo figure out if an indicator is leading, lagging, or coincident, ask: **“Does it move before, with, or after the economy?”**\r\n\r\n- Government Spending (“G”) is a lagging indicator—moves after the GDP, responds after the economy shifts. Same applies for C, X, and M.  \r\n- Investment (“I”) is a classic leading indicator—moves before GDP and leads the economy.  \r\n- Employment is coincident—moves with GDP, and it is illustrated exactly because it is not in the formula. Coincident indicators (relative to another indicator) rarely appear in the same formula, as they run in parallel and are usually influenced by the same factors in the same manner.\r\n\r\n#### **Quarterly Shifts**\r\n\r\nLet’s look at how these moves (after, before, with) manifest visually.\r\n\r\nLook for the pattern. All the indicator’s charts look very similar to the GDP one but shifted in time per the definition:\r\n\r\n*[Image Placeholder: Insert image3.png here, showing Lagging Indicator: Government Spending Follows GDP. In Word, insert the image manually at this point.]*\r\n\r\n*[Image Placeholder: Insert image4.png here, showing Leading Indicator: Investment Moves Before GDP. In Word, insert the image manually at this point.]*\r\n\r\n*[Image Placeholder: Insert image5.png here, showing Coincident Indicator: Employment Moves With GDP. In Word, insert the image manually at this point.]*\r\n\r\n#### **Turning Macro Targets into Transformation KPIs**\r\n\r\nEach ministry contributes to GDP in different ways, some more than others. Some drive Investment (I), others drive Government Spending (G) like Health, or Consumption (C) like Tourism. In this example, we trace the Ministry of Investment’s full line of sight down to the working level, but the same cascade logic applies across all components and owners.\r\n\r\nTo turn a Vision 2030 macro target into actionable change, we break it down into a structured, formula-driven KPI cascade with clear ownership at every level.\r\n\r\nIn this example, we trace the Ministry of Investment’s contribution (“I” for Investment) all the way down to L3.\r\n\r\n##### KPI Cascade Example: Ministry of Investment’s Contribution to GDP\r\n\r\n| Level | KPI | Formula / Components | Notes |  |  |  |  | \r\n| :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- |\r\n| L0 | **GDP Growth** Owned by Min. Economy & Planning Strategic Lagging | C + I + G + (X-M) | Each component aggregates from multiple ministries and sources |  |  |  |  | \r\n| L1 | **Total Annual Investment (I)** Owned by Ministry of Investment Strategic Leading | LDI + FDI + Expansions | A mix of fresh quality capital with non-cash value-add, and healthy growth of existing capital |  |  |  |  | \r\n| L2 | **FDI - Projects in Operation** Owned by Investment Attraction Division Operational Lagging | **Investment Cycle** (Opp, Business Case, Reach outs, Incentives, DTI, License, Construction, Operational) | A filtering down relation makes the first one the weakest. This is also the widest part, and home of Horizontal cascades |  |  |  |  | \r\n| L3 | Opportunity Owned by Data Hub Operational Leading | **Decision** Owned by Investment | Operation Owned by Services | 2000 Opps | 20 Decisions | 4 Open | For this case we expand to showcase an example of an End to End process enforcing collaboration |\r\n\r\nHere, the cascade ends as far as the Transformation is responsible. This is because L3 processes are not performed by an individual; rarely any are like that.\r\n\r\nIndividuals can perform specific tasks described in step-by-step procedures, usually referred to as L4 and L5.\r\n\r\nThe link does not stop though, as it continues through a handshake with the HR individual performance reviews. This is usually based on Job Descriptions (JDs) and competencies to measure performance against them.\r\n\r\nThat’s why it is critical that the HR Performance system is designed with the L3 Processes in mind. If not, then there will be a disconnect.\r\n\r\n#### **Governance, Measurement, and Intervention**\r\n\r\n- **Ownership**: Each KPI (at every level) has a named business owner, data owner, and is reviewed in a regular cadence meeting.  \r\n- **Measurement**: We loosely use the term KPI, yet it contains the baseline, target, actual, trend, variance—all must be tracked.  \r\n- **Intervention**:  \r\n  - In the absence of a cascade, interventions are after the fact, and sadly by external observers. Yet even in such cases, tracing the problem becomes seamless.  \r\n  - In a cascade, the intervention holds foresight and predicts ahead of time any challenges, allowing time to prevent or mitigate the impact.\r\n\r\n##### The Big Unlock\r\n\r\nThis kind of cascade has many benefits, yet these might be the biggest two by far:\r\n\r\n- **Priorities**: A fragmented entity can be easily spotted when there is continuous “debate” on what should be the priority? Conflicting opinions and resistance to collaborate or adopt major programs.  \r\n- **Cross-Department Collaboration**: We always knew KPIs influence behaviors, and in a normal vertical cascade, it can even reach to influence individuals. Yet the Horizontal cascade brings genuine buy-in that is more powerful and effective than many change programs.\r\n\r\n#### **Key Takeaways**\r\n\r\n1. Vision 2030 macro goals become real only when they are broken into clear KPI cascades—each owned, measured, and linked to specific actions.  \r\n2. Strategic Leading Indicators (like Investment) are the critical entry point for ministries and organizations to shape their organizations around national results.  \r\n3. Every lagging KPI must be connected, via explicit formulas, to leading, then operational, and then process metrics—tying external variables and internal performance together.  \r\n4. Measurement, ownership, and intervention are disciplined, regular, and actionable at every step of the chain.  \r\n5. Collaboration matters: Horizontal cascading and external drivers must be managed—not just siloed KPIs.\r\n","size_bytes":9541},"public/lessons/2.2/Episode 2.2.md":{"content":"# Episode 2.2: Portfolios & Initiatives\r\n\r\n#### **Introduction: The Bridge Between Ambition and Action**\r\n\r\nIn our previous episode, we established how macro-strategic objectives, like those in Vision 2030, are translated into a cascade of measurable KPIs. However, setting targets is only half the battle. The critical question remains: how does an organization ensure that the daily work of its teams—the projects, tasks, and activities—is perfectly aligned to move those KPIs?\r\n\r\nThis is the function of a Transformation Portfolio. A portfolio is not merely a list of projects; it is the disciplined control system that translates strategy into funded work, tracks the outputs, and ensures they deliver measurable outcomes. It is the essential bridge between the ambition of strategy and the reality of action.\r\n\r\n#### **The Four-Level Delivery Hierarchy**\r\n\r\nTo manage complexity and ensure clear accountability, work must be organized into a strict, four-level hierarchy. This structure is foundational to the entire transformation architecture and is how the workstream is modeled in the enterprise's Digital Twin.\r\n\r\n| Level | Purpose | Typical Owner | KPI Focus |\r\n| :---- | :---- | :---- | :---- |\r\n| L0 – Portfolio | Sets strategic investment themes and allocates budgets (e.g., “Digital Government Modernisation”). | Executive Steering Committee / Ministry Board | Strategic KPIs |\r\n| L1 – Program | Groups related initiatives under one thematic objective (e.g., “Digital Licensing”). | Program Management Office | Leading KPIs |\r\n| L2 – Initiative | A time-bound effort that produces one or more deliverables (e.g., “Launch National e-Portal”). | Initiative Sponsor / Project Director | Operational KPIs |\r\n| L3 – Deliverable | A concrete output that operations will consume (e.g., Master Deliverable: “e-Portal live & secure”). | Project Team Lead | Process Metrics |\r\n\r\nThe Master Deliverable is a critical concept. Each initiative must have ONE output flagged as its non-negotiable product or service. This is the deliverable that, once embedded into daily operations, will directly impact an L3 process and its corresponding metric. All other outputs, such as training manuals, pilot tests, and communication plans, exist only to support the successful deployment and adoption of this Master Deliverable.\r\n\r\n#### **The Politics of the Portfolio**\r\n\r\nIn many organizations, portfolio management is a political exercise, where the loudest voice or the most powerful department secures funding. An architected approach replaces this subjectivity with data-driven discipline, but to do so, we must bust a persistent myth.\r\n\r\n| Myth | Reality |\r\n| :---- | :---- |\r\n| “Finishing the list of initiatives means the transformation is done.” | Initiatives are merely inputs. Transformation happens only when Master Deliverables are fully absorbed into daily processes and measurably shift the target KPIs. The goal is not to \"finish projects,\" but to \"change the numbers.\" |\r\n| “Any deliverable can be the focus.” | Only the Master Deliverable creates lasting value by directly linking to an L3 process and a measurable KPI. Everything else is transitional and exists only to support that outcome. |\r\n\r\n#### **Portfolio as a Risk Management Instrument**\r\n\r\nA transformation portfolio, managed through the discipline of Strategic Portfolio Management (SPM), is the organization's primary tool for managing investment risk. Every dirham spent on an initiative that is not explicitly linked to a strategic KPI is a wasted investment. The SPMO's role is therefore not just to track progress, but to provide value assurance—ensuring that the organization is funding the right things to achieve the right outcomes.\r\n\r\nKey SPM disciplines include:\r\n\r\n- **Value-Based Prioritization**: Initiatives are ranked not by opinion, but by their calculated impact on KPI gaps, balanced against their complexity and risk.  \r\n- **Integrated Road-mapping**: The portfolio visually demonstrates when Master Deliverables will be deployed relative to KPI target dates, exposing potential gaps or misalignments in timing.  \r\n- **Heat-Map Dashboards**: A single view overlays project health (cost, schedule) with strategic importance (KPI impact), allowing leadership to make fact-based steering decisions.  \r\n- **Structured Governance**: A strict cadence of reviews—from weekly delivery stand-ups to quarterly portfolio boards—ensures that risks are escalated and decisions are made at the right level, at the right time.\r\n\r\n#### **The Digital Twin**\r\n\r\nThis structured, four-level hierarchy is not just a theoretical model; it is the blueprint for a core component of your organization's Digital Twin. Each level (Portfolio, Program, Initiative, Deliverable) becomes a table in the transformation database, with clear relationships linking them to each other and, crucially, to the KPI and Process tables.\r\n\r\nThis enables the GenAI interface to answer critical leadership questions:\r\n\r\n- \"Show me all initiatives under the 'Smart Customs Modernization' program and the operational KPIs they are designed to impact.\"  \r\n- \"What is the risk-adjusted ROI for the 'Smart Trade Facilitation' portfolio?\"  \r\n- \"If we cut the budget for the 'AI-Based Risk Engine' initiative by 20%, simulate the likely impact on the 'Average clearance time' KPI six months from now.\"\r\n\r\n#### **Key Takeaways**\r\n\r\n- Portfolios are the control system that translates strategy into funded, time-boxed, and accountable work.  \r\n- The four-level hierarchy (portfolio → program → initiative → deliverable) is essential for maintaining clarity and accountability.  \r\n- The Master Deliverable is the single, non-negotiable output that an initiative must produce to successfully influence KPIs.  \r\n- Strategic Portfolio Management (SPM) disciplines align priorities and budgets around documented KPI gaps, replacing political decision-making with data-driven value assurance.  \r\n- This entire structure forms a critical layer of the organizational Digital Twin, enabling predictive analysis and superior, risk-aware leadership decisions.\r\n","size_bytes":6139},"public/lessons/2.3/Episode 2.3.md":{"content":"# Episode 2.3: Process Architecture\r\n\r\n#### **Introduction: From \"What\" to \"How\"**\r\n\r\nIn the previous episode, we established the portfolio as the control system that aligns strategic intent with funded initiatives. Portfolios answer the question, \"WHAT work should we be doing?\" Now, we move to the most fundamental layer of execution: Process Architecture. This layer answers the question, \"HOW does the work actually get done?\"\r\n\r\nProcess architecture is the bedrock of operational transformation. It is the structured, documented map of how value is created and delivered within an organization. Attempting to transform an organization—by implementing new systems, changing roles, or setting new KPIs—without first defining the underlying processes is like trying to build a skyscraper without a foundation. It leads to automating inefficiency, creating invisible operational gaps, and ensuring strategic goals remain disconnected from daily reality.\r\n\r\n#### **The Four Levels of Process Classification**\r\n\r\nTo be manageable, processes must be classified in a clear hierarchy, cascading from broad business domains down to specific, executable tasks. This L0 to L3 structure is a core principle of enterprise architecture.\r\n\r\n| Level | Name | Description | Example |\r\n| :---- | :---- | :---- | :---- |\r\n| L0 | Business Domain | The broadest strategic grouping of organizational functions. | Public Services, Regulation, National Finance |\r\n| L1 | Major Process Group | A collection of related functional capabilities. | Building Permits, Grant Management, Compliance |\r\n| L2 | Process Category | A sub-grouping of related processes that describe a specific outcome. | Permit Application Processing, Inspection Scheduling |\r\n| L3 | Executable Process | The real, trackable work unit with a clear start, end, owner, and performer. | ‘Review Site Plans’, ‘Issue Permit’, ‘Conduct Site Inspection’ |\r\n\r\n#### **Why L3 is the Only Level That Matters for Execution**\r\n\r\nWhile the upper levels are crucial for classification, transformation lives or dies at L3. An L3 Executable Process is the only level where accountability can be truly assigned and performance can be managed.\r\n\r\nThink of it this way: You cannot assign an \"owner\" to a vague concept like \"Building Permits\" (L1). However, you can unequivocally assign ownership of the ‘Review Site Plans’ (L3) process to the \"Lead Planning Officer.\"\r\n\r\nOnly an L3 process has:\r\n\r\n- A specific Owner (owner\\_unit\\_id in the database).  \r\n- A clear Performer (a defined role).  \r\n- Defined Inputs and Outputs.  \r\n- Links to specific IT Systems (tools\\_used).  \r\n- An attached Process Metric (linked\\_process\\_metric\\_ids) that measures its performance (e.g., 'Avg. days to review plans').\r\n\r\nSkipping this level of detail is a critical error. It creates a \"black box\" between L2 categories and the frontline work, making it impossible to diagnose bottlenecks, measure efficiency, or intelligently assign resources.\r\n\r\n#### **Mitigating Operational Risk Through Process Clarity**\r\n\r\nUndefined processes are a primary source of operational risk. When the \"how\" is left to individual interpretation, you invite inconsistency, non-compliance, and rework. From a human perspective, ambiguous processes are a major cause of employee frustration and inter-departmental conflict, as teams operate with different assumptions about how work should flow.\r\n\r\nBy mapping processes to the L3 level, you replace ambiguity with clarity. This provides:\r\n\r\n- A Single Source of Truth: Everyone follows the same approved steps.  \r\n- Clear Role Definition: Staff understand their specific responsibilities, reducing friction and empowering them to execute with confidence.  \r\n- Auditability and Compliance: The process is documented and can be audited, ensuring it complies with regulations.\r\n\r\n#### **Building the Digital Twin's Nervous System**\r\n\r\nThe process architecture is the central nervous system of your organization's Digital Twin. The L1-L3 process hierarchy, stored in the database, models the flow of work. When linked to the other data tables (org\\_structure, it\\_systems, process\\_metrics), it creates a dynamic, multi-dimensional view of operations.\r\n\r\nThis allows the GenAI interface to perform powerful diagnostics:\r\n\r\n- \"Trace the 'Issue Permit' process. What are the L3 steps, who are the owners, and which systems are used at each stage?\"  \r\n- \"The metric 'Time to Approve Application' is trending negative. Identify the bottleneck in the underlying L3 process map.\"  \r\n- \"Simulate the impact of automating the 'Verify Applicant Documents' L3 process. What is the projected improvement in the overall 'Permit Application Processing' KPI?\"\r\n\r\n#### **Key Takeaways**\r\n\r\n- Process architecture is the foundational layer of execution—it is not optional.  \r\n- The L3 Executable Process is the only real unit of work that can be owned, measured, and managed. All performance management and accountability must anchor at this level.  \r\n- Mapping processes to L3 is a critical risk management discipline that replaces operational ambiguity with clarity and control.  \r\n- This structured process map forms the living \"nervous system\" of the Digital Twin, enabling advanced diagnostics and simulation.\r\n","size_bytes":5263},"public/lessons/2.4/Episode 2.4.md":{"content":"# Episode 2.4: Organizational Design\r\n\r\n#### **Introduction: From \"How\" to \"Who\"**\r\n\r\nIn our journey so far, we have cascaded strategy into measurable KPIs, aligned those KPIs with a portfolio of initiatives, and anchored all work in a defined process architecture. We have answered \"why,\" \"what,\" and \"how.\" We now address the most critical question for execution: **\"Who?\"**\r\n\r\nOrganizational structure is far more than a chart of reporting lines; it is the backbone of accountability. In a transformation, its purpose is to ensure that every strategic outcome, every leading KPI, and every executable process has a clear and unambiguous owner. When structure is unclear, static, or disconnected from the real work, accountability evaporates, decision-making stalls, and the transformation loses momentum.\r\n\r\n#### **The Four-Level Cascade of Accountability**\r\n\r\nJust as with KPIs and processes, the organizational structure must be viewed as a cascaded hierarchy. Each level has a distinct role in owning a specific layer of performance, creating a clear line of sight from the executive suite to the front line.\r\n\r\n| Level | Unit / Role | Primary Accountability | Example |\r\n| :---- | :---- | :---- | :---- |\r\n| L1 | Entity Head / Leadership | Owns the portfolio and is accountable for achieving the organization's Strategic KPIs. | Minister, CEO, Director General |\r\n| L2 | Main Units | Department-level divisions accountable for a group of programs and the Leading KPIs that drive strategic outcomes. | Deputy Ministry for Operations, Permits Department |\r\n| L3 | Sub-Units | Operational teams or sections focused on specific programs and the Operational KPIs that measure performance. | Inspection & Approval Team, Application Processing Unit |\r\n| L4 | Individuals / Teams | The direct executors of L3 processes, measured by specific Process Metrics. | Permit Inspector, Application Analyst |\r\n\r\n#### **Dynamic Structure**\r\n\r\nIn a transformation context, a static org chart is a liability. As the organization builds new capabilities and re-engineers its processes, the structure must adapt in response. Roles will be created, merged, or evolved.\r\n\r\nTherefore, the organizational structure should be treated as a dynamic, living model—a core component of the transformation architecture itself. This requires a proactive approach:\r\n\r\n- **Map Roles to Processes**: Every L3 process must be explicitly mapped to a role (Owner, Performer, Approver).  \r\n- **Treat Vacancies as Risks**: A vacant role is not just an HR issue; it is a critical **capability gap**. It represents a break in the accountability chain and introduces predictable risk to every process and KPI that depends on that role. This risk must be flagged in the transformation governance forum.  \r\n- **Plan Structural Evolution**: The future-state organizational design is a key deliverable of the transformation and must be planned and managed like any other initiative.\r\n\r\nThis approach shifts the culture from a rigid bureaucracy to an agile entity, where the structure is designed to serve the strategy, not the other way around.\r\n\r\n#### **The Horizontal Dimension**\r\n\r\nWhile the vertical cascade creates top-to-bottom alignment, the **horizontal cascade** uses structure to break down silos. A leading KPI at the L2 Main Unit level is often the sum of multiple operational KPIs owned by different L3 Sub-Units.\r\n\r\nFor example, the \"Average Permit Approval Time\" (L2 KPI) for a department depends on the performance of the Application Processing team, the Inspection team, and the Legal Review team. The architectural model makes this shared dependency explicit. No single sub-unit can succeed in isolation; they are structurally bound to collaborate to achieve the collective goal.\r\n\r\n#### **The Digital Twin: Modeling Your Accountability Framework**\r\n\r\nThe organizational structure forms the \"accountability layer\" of the Digital Twin. In your transformation database, the org\\_structure table is linked to the roles, processes, and KPIs tables. This creates a powerful, navigable model of your human capital and its responsibilities.\r\n\r\nThis enables the GenAI interface to provide unprecedented clarity:\r\n\r\n- \"Which Sub-Unit is accountable for the 'Inspect 100 sites/week' operational KPI?\"  \r\n- \"The 'Permit Inspector' role is vacant. Show me all the L3 processes and metrics that are now at risk.\"  \r\n- \"What would be the impact on process ownership if we merge the 'Inspection Team' and the 'Approval Team' into a single unit?\"\r\n\r\n#### **Key Takeaways**\r\n\r\n- An organization's structure must be designed as a map of **accountability**, directly linking people to processes and KPIs.  \r\n- Accountability cascades through four levels, from the Entity Head owning strategic KPIs down to individuals owning process metrics.  \r\n- In a transformation, the structure must be **dynamic**, and a vacant role must be treated as a critical **risk** to performance.  \r\n- The structure must be designed to enforce **horizontal collaboration**, breaking down silos by making shared KPI dependencies transparent.  \r\n- This accountability framework is a critical layer of the **Digital Twin**, allowing leaders to manage human capital risk and performance with data-driven precision.\r\n","size_bytes":5250},"public/lessons/3.1/Episode 3.1.md":{"content":"# Episode 3.1: The Integrated Governance\r\n\r\n#### **Introduction: The Engine of Accountability**\r\n\r\nWe have now designed the full architectural blueprint for transformation: a cascade of KPIs, a portfolio of initiatives, a map of executable processes, and a structure of clear ownership. But a blueprint is static. To bring it to life, we need an engine—an operating system that powers decision-making, ensures accountability, and drives the transformation forward with purpose and rhythm. That system is **Governance**.\r\n\r\nEffective governance is not about bureaucracy or endless meetings. It is the disciplined, data-driven framework that defines how decisions are made, who makes them, and how performance is tracked and managed in real time. Without strong governance, even the best-designed strategy will drift amidst the pressures of daily operations. With it, transformation becomes predictable, proactive, and relentlessly focused on outcomes.\r\n\r\n#### **Beyond Bureaucracy**\r\n\r\nIn many organizations, \"governance\" is perceived as a barrier to speed. In a well-architected transformation, the opposite is true. Governance creates speed by replacing political debate and hallway conversations with transparent, data-driven forums. It fosters a culture of accountability where problems are raised early and solved collaboratively.\r\n\r\nThe core functions of transformation governance are:\r\n\r\n- **A Structured Decision-Making Cadence**: A rhythm of meetings, from weekly operational syncs to quarterly strategic reviews, each with a clear purpose, agenda, and set of attendees.  \r\n- **Clarified Role-Based Accountability**: A clear understanding of who is responsible for providing data, who presents it, and who has the authority to make specific decisions at each level.  \r\n- **Data-Driven Performance Thresholds**: Pre-defined triggers for corrective action. A KPI deviating by more than 10%, for instance, is automatically escalated—removing emotion and subjectivity from problem identification.\r\n\r\n#### **The Integrated Business Review**\r\n\r\nThe power of this framework converges in a central, indispensable meeting: the **Integrated Business Review (IBR)**, typically held monthly. This is not a series of separate status updates from different departments. It is a single, unified forum where Strategy, the Transformation Management Office (PMO), and Operations leaders review performance and forecasts **together**.\r\n\r\nThe agenda of the IBR explicitly connects the past, present, and future:\r\n\r\n- **Performance Review**: \"How did our KPIs perform against the forecast?\"  \r\n- **Deliverable Impact**: \"The PMO reports that the 'Risk Engine' initiative went live. Have we seen the expected improvement in the 'containers auto-cleared' process metric?\"  \r\n- **Forward-Looking Forecast**: \"What do the leading indicators and initiative roadmaps tell us about our ability to hit next quarter's targets?\"\r\n\r\nThis integrated view ensures that every deliverable is tied to a KPI, and every KPI variance is examined in the context of the initiatives designed to influence it.\r\n\r\n#### **Governance as the Primary Risk Management Forum**\r\n\r\nThe governance cadence is the primary mechanism for managing transformation risk. Problems in complex initiatives are inevitable; failure is not. Failure occurs when problems are not made visible to the right people at the right time.\r\n\r\n- **Weekly Stand-ups** manage delivery risks at the project level.  \r\n- **Monthly IBRs** manage operational and integration risks across teams.  \r\n- **Quarterly Business Reviews (QBRs)** are the forum for managing **strategic risk**. This is where leadership reviews the highest-level leading indicators, assesses if the overall transformation is on track to meet its strategic objectives, and makes major decisions on reprioritizing portfolios or reallocating capital.\r\n\r\n#### **Powering Governance with the Digital Twin**\r\n\r\nThe governance framework is where the organization's Digital Twin is put to work. The dashboards showing RAG statuses, KPI trends, and portfolio heat maps are all visualizations pulled directly from this living model.\r\n\r\nThis is where a GenAI interface becomes a revolutionary tool. In a QBR, instead of analyzing static reports, a leader could ask:\r\n\r\n- \"The 'FDI project approvals' KPI is lagging. Trace the issue to its root cause.\" The GenAI could instantly follow the data chain from the L1 KPI, through the L2 initiatives, down to a specific delayed L3 deliverable.  \r\n- \"We need to shift resources to accelerate the new platform launch. Simulate the risk this introduces to other programs in the portfolio.\"\r\n\r\n#### **Key Takeaways**\r\n\r\n- Transformation governance is not bureaucracy; it is the **operating system** that ensures accountability and reliability.  \r\n- It functions through a structured **cadence of integrated reviews** (Weekly, Monthly, QBR) that bring Strategy, PMO, and Operations together.  \r\n- Its primary function is **proactive risk management**, making problems visible early so that data-driven corrective actions can be taken.  \r\n- Effective governance is powered by the **Digital Twin**, using its data to inform decisions and leveraging GenAI to provide real-time, predictive insights.\r\n","size_bytes":5226},"public/lessons/3.2/Episode 3.2.md":{"content":"# Episode 3.2: The Delivery Engine\r\n\r\n#### **Introduction: The Engine Room**\r\n\r\nIn our previous episode, we defined Governance as the \"operating system\" that sets the course for the transformation. Now, we enter the engine room. Delivery is the set of disciplined practices that propels the transformation forward, ensuring that work is executed with precision and that the outputs generate real, strategic value.\r\n\r\nIf governance is about *making the right decisions*, delivery is about *making the decisions happen right*. It is the active, hands-on management of the programs and initiatives that turn architectural blueprints into tangible operational capabilities.\r\n\r\n#### **The Starting Point**\r\n\r\nThe work for the delivery engine—the sanctioned programs and initiatives—does not appear out of nowhere. It is the direct output of the **Strategic Portfolio Management (SPM)** process.\r\n\r\nAs we discussed in Episodes 2.2 and 3.1, SPM is the governance-level discipline of selecting and prioritizing investments. It answers the question, \"What are the *right things* to do to achieve our strategic objectives?\" Once the portfolio governance bodies have made those decisions, the focus shifts from \"doing the right things\" to \"doing things right.\" This is where the delivery engine takes over.\r\n\r\n#### **The Two Halves of Delivery**\r\n\r\nEffective delivery is a dual discipline that operates at two distinct levels. This separation is critical for maintaining both strategic alignment and tactical control.\r\n\r\n- **Value Assurance (Program Management)**: \"Realizing the Value\"  \r\n  - This occurs at the L1/L2 level of our hierarchy. Once a program is sanctioned by the portfolio, the Program Manager becomes accountable for ensuring the collection of initiatives within it successfully delivers the intended business outcome and moves the target Leading KPIs. Their focus is strategic: managing cross-initiative dependencies, ensuring the business is prepared to adopt the changes, and preventing \"value leakage\" between project completion and operational reality.  \r\n- **Delivery Assurance (Project Management)**: \"Doing Things Right\"  \r\n  - This is the classic L2/L3 execution discipline. The Project Manager is accountable for the \"iron triangle\": delivering their specific initiative and its Master Deliverable on scope, on time, and on budget. Their focus is tactical: managing work plans, resolving blockers, tracking progress, and ensuring the quality of the final output.\r\n\r\n#### **The Modern PMO**\r\n\r\nIn this architected model, the Transformation Management Office (TMO or PMO) is the central hub of expertise that provides the frameworks, standards, and direct support for both Value and Delivery Assurance. It is responsible for:\r\n\r\n- **Setting Standards**: Providing the templates and guidelines for project plans, risk registers, and status reporting.  \r\n- **Building Capability**: Coaching and mentoring Project and Program Managers across the organization.  \r\n- **Managing Dependencies**: Owning the master integrated roadmap that makes cross-program dependencies visible.  \r\n- **Active Risk Management**: Identifying and escalating program-level risks that individual project teams may not see.\r\n\r\n#### **Framing Delivery as Active Risk Management**\r\n\r\nThe entire delivery function is a risk management discipline.\r\n\r\n- **Delivery Assurance** manages *project-level risks*: timeline slips, budget overruns, and scope creep.  \r\n- **Value Assurance** manages *program-level risks*: benefit shortfalls, poor adoption by the business, and failures in interdependency coordination.\r\n\r\nBy separating these concerns, the transformation can address both the immediate risks to execution and the strategic risks to the business case.\r\n\r\n#### **The Digital Twin: A Real-Time Model of Delivery**\r\n\r\nThe delivery engine is tracked and modeled in real-time within the Digital Twin. Every status update, every completed milestone, and every flagged risk from the PMO's tools feeds directly into the model.\r\n\r\nThis creates a high-fidelity simulation of the transformation's execution, allowing the GenAI interface to serve as the ultimate delivery analyst:\r\n\r\n- \"Which programs are currently showing the highest risk of value leakage?\"  \r\n- \"Based on the current project delivery velocity, forecast the completion date for the 'Digital Licensing' program.\"\r\n\r\n#### **Key Takeaways**\r\n\r\n- The Delivery Engine executes the programs and initiatives selected and prioritized through **Strategic Portfolio Management**.  \r\n- Effective delivery is a **dual discipline** composed of **Value Assurance** (ensuring program value) and **Delivery Assurance** (ensuring project execution).  \r\n- The modern PMO is an **active engine** of the transformation, providing the standards and expertise to enable delivery.  \r\n- The Digital Twin provides a **real-time, predictive model** of the entire delivery ecosystem, enabling data-driven oversight and course correction.\r\n","size_bytes":4961},"public/lessons/3.3/Episode 3.3.md":{"content":"# Episode 3.3: Change Architecture\r\n\r\n#### **Introduction: The Point of Failure for Most Transformations**\r\n\r\nA transformation can have a perfect strategy, a flawless technical solution, and a project plan executed to perfection, yet still fail to deliver any value. This happens when the organization—the people—fails to adopt the new way of working. This \"last mile\" of transformation is where value is ultimately created or destroyed.\r\n\r\nTraditional change management, often treated as a \"soft\" workstream of communications and town halls, is insufficient for the scale of disruption in a true transformation. To succeed, we must elevate our approach from merely managing change to actively architecting it.\r\n\r\n#### **The Flaw in Traditional Change Management**\r\n\r\nThe common approach to change management often fails because it runs in parallel to the core transformation, disconnected from the actual work being done. Generic \"awareness campaigns\" or \"buy-in\" initiatives are rarely effective because they don't address the specific impacts on an employee's daily tasks, processes, and sense of competence. This creates a high risk of poor adoption, active resistance, and a swift reversion to old habits.\r\n\r\n#### **A New Discipline: Change Architecture**\r\n\r\nChange Architecture is the discipline of embedding human adoption and readiness activities directly into the fabric of the transformation. It is not a separate workstream; it is an integrated layer of the entire plan.\r\n\r\nThe core principle is simple: for every Master Deliverable in the portfolio, there is a corresponding and required set of change interventions. A new IT system (the deliverable) is not \"done\" when it is technically deployed; it is \"done\" when the target employees are successfully using it.\r\n\r\nThis approach requires:\r\n\r\n- **Targeted Interventions**: Moving beyond generic communications to specific, planned activities (change\\_id in the database) for each target\\_audience. These can include hands-on training, role-specific coaching, new documentation, or leadership-led workshops.  \r\n- **Readiness Measurement**: Shifting from measuring sentiment (e.g., \"Are you happy about the change?\") to measuring adoption and proficiency (e.g., \"What percentage of the target team is using the new system effectively?\").  \r\n- **Leadership as a Tool for Change**: Systematically using leaders to model new behaviors, communicate specific expectations, and reinforce the new ways of working within their own teams.\r\n\r\n#### **Mitigating Adoption Risk**\r\n\r\nChange Architecture is a powerful risk management discipline. The single greatest risk in any transformation is adoption risk—the risk that the new capabilities will be ignored, rejected, or underutilized by the organization.\r\n\r\nBy linking every technical deliverable to a set of human-centric change activities, you can proactively identify and mitigate this risk. The governance cadence (QBRs, etc.) must review not only the RAG status of the technical deliverables but also the readiness and adoption metrics of the user base.\r\n\r\n#### **Modeling Change in the Digital Twin**\r\n\r\nThis architected approach allows you to model the \"human layer\" of the transformation within the Digital Twin. The change\\_management table in your database schema tracks every intervention, its target audience, and its link to a specific deliverable.\r\n\r\nThis enables the GenAI interface to provide critical insights into organizational readiness:\r\n\r\n- \"The 'National e-Portal' is scheduled to launch next quarter. Show me the planned change and training activities for the 'Permit Processing' unit.\"  \r\n- \"We are seeing low adoption rates for the new CRM system. What were the planned vs. actual change interventions for this rollout, and what are the user proficiency scores?\"  \r\n- \"Simulate the impact of reducing the training budget for the 'Smart Customs' program. What is the projected increase in adoption risk and the likely delay in achieving the target KPI?\"\r\n\r\n#### **Key Takeaways**\r\n\r\n- Value is only created through adoption. A technical solution without user adoption is a wasted investment.  \r\n- Move beyond traditional \"change management\" to the more disciplined practice of Change Architecture, where change interventions are integrated directly with technical deliverables.  \r\n- Treat poor adoption as a critical strategic risk and manage it proactively within your transformation governance.  \r\n- By modeling change activities in the Digital Twin, leaders can gain unprecedented, real-time insight into the organization's readiness to transform.\r\n","size_bytes":4585},"public/lessons/3.4/Episode 3.4.md":{"content":"# Episode 3.4: The Enablers\r\n\r\n#### **Introduction: Sustaining the Momentum**\r\n\r\nThroughout this chapter, we have detailed the active management practices required to drive a transformation: Governance to make decisions, Delivery to execute the work, and Change Architecture to ensure human adoption. However, for a transformation to be truly sustainable, these practices must be supported by a foundational layer of persistent capabilities. These are the **Enablers**.\r\n\r\nEnablers are the tools, systems, and cultural norms that make the new way of working possible, efficient, and permanent. Neglecting them is a common mistake; it creates a transformation that is entirely dependent on the heroic efforts of a few individuals and is at high risk of reverting to the old ways once the initial push is over.\r\n\r\n#### **The Three Core Enablers of Transformation**\r\n\r\nA successful transformation relies on three core categories of enablers, which must be cultivated intentionally.\r\n\r\n- **1\\. Digital Support: The Tools for Complexity**  \r\n  - A complex transformation cannot be run on spreadsheets and slide decks. The sheer volume of interconnected data requires a suite of integrated digital tools. This is the technical foundation, which includes platforms for Strategic Portfolio Management (SPM), process modeling, and collaborative work. The ultimate expression of Digital Support is the **Digital Twin** itself—the integrated data model that provides a single source of truth for the entire transformation.  \r\n- **2\\. From Capability Building to Corporate Knowledge Management**  \r\n  - This represents a critical shift in mindset. The traditional approach focuses on \"Capability Building\"—training individuals and hoping they apply their new skills. This model carries a significant risk: when trained employees leave, their knowledge and the organization's investment leave with them.  \r\n  - The new paradigm is **Corporate Knowledge Management**. The focus shifts from the individual to the system. Knowledge is not just acquired by individuals; it is systematically captured and, most critically, **embedded back into the organization's operating model**.  \r\n  - For example, an insight from a training course is used to update the official procedure for a specific L3 process within the Digital Twin. The next time any employee executes that process, the improved version is presented to them automatically. The individual’s learning has permanently upgraded the corporate system, making the entire organization smarter and mitigating the risk of knowledge drain.  \r\n- **3\\. Culture as a Talent Magnet and Risk Reducer**  \r\n  - This is another fundamental shift, moving from reactive \"Talent Management\" to proactive **Culture Architecture**. The traditional view sees talent as a resource to be acquired—through recruitment, head-hunting, and referrals—often in a reactive rush to fill gaps.  \r\n  - A more powerful and sustainable approach is to architect a culture that naturally **attracts and retains** top talent. The principles of transparency, data-driven accountability, and clear ownership, which are core to this entire framework, create an environment where high-performers thrive. This culture becomes a strategic asset, a talent magnet that reduces employee exits.  \r\n  - Framed this way, culture is a powerful **risk management tool**. It directly mitigates one of the most common causes of transformation failure: delivery delays caused by a lack of skilled teams and the long learning curves that accompany high staff turnover.\r\n\r\n#### **Enablers as a Critical Risk Management Discipline**\r\n\r\nFailing to build these enablers introduces a critical **sustainability risk**.\r\n\r\n- Without **Digital Support**, the transformation will eventually collapse under its own weight and complexity.  \r\n- Without **Knowledge Management**, the organization will suffer from \"corporate amnesia.\"  \r\n- Without a **Culture of Attraction**, the organization will be exposed to constant talent and delivery risk.\r\n\r\n#### **Key Takeaways**\r\n\r\n- A transformation's long-term success depends on the foundational **Enablers** that support it.  \r\n- The three core enablers are **Digital Support** (the tools), **Corporate Knowledge Management** (embedding learning into the system), and **Culture** (as a tool for talent attraction and risk reduction).  \r\n- Investing in these enablers is a critical **risk management** activity that ensures the transformation is sustainable, scalable, and permanent.\r\n","size_bytes":4514},"public/lessons/4.1/Episode 4.1.md":{"content":"# Day 1-15: Diagnose Your Starting Point\r\n\r\nDiagnose Your Starting Point (Days 1-15): Use the Public Sector Complexity Index (CI) to analyze your portfolio and identify a single, critical objective for your 90-day sprint. This provides a data-driven basis for prioritization.  \r\nDiagnose Your Starting Point using the Public Sector Complexity Index (CI)\r\n\r\n#### **A Transformation Complexity Index**\r\n\r\nIn sector-wide public transformation programs—where ministries, authorities, and agencies must evolve together—the challenge is not just the ambition of change, but its complexity. Until now, there has been no structured, quantifiable way to assess that complexity before execution begins.\r\n\r\nThis proposal introduces a Public Sector Complexity Index (CI)—a simple, scalable formula designed to do just that. It allows program leaders and transformation designers to measure the true burden of change across a multi-entity ecosystem.\r\n\r\n##### Complexity Index (CI): Final Formula\r\n\r\nCI=∑WiSiEiB\r\n\r\nWhere:\r\n\r\n| Symbol | Meaning | Scale |\r\n| ----- | :---- | :---- |\r\n| Wi | Strategic weight or importance of entity ( i ) amongst others (how much of the sector transformation relies on the entity) | % weight out of the whole |\r\n| Si | Severity of transformation required for entity ( i ) (1–5 scale) | 1 – Manageable 5 – New entity |\r\n| Ei | Number of non-established external stakeholders entity ( i ) must coordinate with (never worked with before) | Count |\r\n| B | Baseline manageable number of external dependencies (sector-specific) | Avg of 5 |\r\n| ( x_i ) | ( x_i = \\frac{E_i}{B} ) | Ratio |\r\n\r\n##### What It Captures\r\n\r\nThis single weighted-average formula collapses three dimensions of transformation into one score:\r\n\r\n4. **Internal disruption** — how deep each entity’s change is.  \r\n5. **Strategic role** — how central each entity is to the sector’s mission.  \r\n6. **External coordination** — how many other players each entity must engage with.\r\n\r\nEach entity’s individual transformation burden is scaled based on its real-world coordination load. The output is a single number that reflects the system-wide complexity of execution.\r\n\r\n##### Example\r\n\r\n| Entity | Weight (( w_i )) | Severity (( s_i )) | External Links (( E_i )) | ( x_i = \\frac{E_i}{B} ) | Contribution (( w_i \\cdot s_i \\cdot x_i )) |\r\n| :---- | :---- | :---- | :---- | :---- | :---- |\r\n| Ministry A | 5 | 5 | 15 | 1.5 | 37.5 |\r\n| Regulator B | 3 | 4 | 10 | 1.0 | 12.0 |\r\n| Operator C | 2 | 2 | 4 | 0.4 | 1.6 |\r\n| Support Unit D | 1 | 1 | 2 | 0.2 | 0.2 |\r\n\r\n\\[ \\text{Total Weighted Contribution} = 37.5 + 12.0 + 1.6 + 0.2 = 51.3 \\] \\[ \\text{Total Weight} = 5 + 3 + 2 + 1 = 11 \\] \\[ \\text{CI} = \\frac{51.3}{11} = 4.66 \\]\r\n\r\nThis CI of 4.66 reflects the overall complexity of the transformation. But it also opens the door to something deeper.\r\n\r\n##### Beyond the Average: Diagnostic Insights\r\n\r\nAfter computing the CI, each entity’s normalized complexity score can be calculated:\r\n\r\n Normalized Complexityi= si\\fracEiB\r\n\r\nComparing this against the system-wide average (CI) reveals outliers—entities whose burden is disproportionately high. This flags potential issues in the operating model design.\r\n\r\n##### What to Do with Outliers:\r\n\r\n- **Too high?** Consider breaking apart roles, delegating delivery, or spinning off entities (e.g., create an authority or SOE).  \r\n- **Too low?** Consider absorbing adjacent responsibilities to improve efficiency.\r\n\r\n##### Why It Matters\r\n\r\nThis Complexity Index is more than a metric. It’s a planning instrument, early-warning signal, and design aid that lets public-sector leaders:\r\n\r\n- Quantify and compare transformation efforts before they begin.  \r\n- Spot operating model overload before failure.  \r\n- Redesign ecosystem roles and delivery logic to normalize transformation load.\r\n\r\nIt brings clarity to an area too often driven by guesswork—and gives transformation offices the numbers they need to act.\r\n\r\n#### **Mapping to Archetype and Practices**\r\n\r\nYour complexity profile determines your transformation archetype and toolkit.\r\n\r\n| Complexity Profile | Transformation Archetype | Practice Approach |\r\n| :---- | :---- | :---- |\r\n| Low on all axes | Localized/Focused | Traditional project management |\r\n| Moderate (2 axes high) | Holistic/Entity-wide | Standard portfolio tools |\r\n| High on 3-4 axes | Value Chain/Integrated | Capability architecture, cross-team |\r\n| All axes high | Sector Maestro/Systemic | Full architecture, portfolio, change management |\r\n\r\nWhen you land in the “Sector Maestro”/high complexity zone, you must use the full suite of advanced practices—capability-based architecture, outcome-based planning, strategic portfolio management, and more.\r\n","size_bytes":4740},"public/lessons/4.2/Episode 4.2.md":{"content":"# Day 16-60: Architect Your First \"Golden Thread\"\r\n\r\nArchitect Your First \"Golden Thread\" (Days 16-60): Using the provided Entity-Relationship Diagram (ERD) as a blueprint, build the complete L0-L3 cascade for your chosen objective. Define the KPIs, map the core L3 processes, and assign owners.  \r\nArchitect Your First \"Golden Thread\" Using the open source DTO Entity-Relationship Diagram (ERD)\r\n","size_bytes":397},"public/lessons/4.3/Episode 4.3.md":{"content":"# Day 61-90: Launch Your First Integrated Governance Forum\r\n\r\nLaunch Your First Integrated Governance Forum (Days 61-90): Stand up a monthly integrated review focused exclusively on your chosen thread. Use the provided GenAI-powered demo site as an example of how to present integrated data and facilitate a data-driven conversation. This builds the muscle memory for the new way of working and demonstrates immediate value to leadership.  \r\n","size_bytes":442},"src/pages/auth/AuthCallback.tsx":{"content":"import React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../../services/supabaseClient';\n\nconst AuthCallback: React.FC = () => {\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const handleAuthCallback = async () => {\n      try {\n        const { data, error } = await supabase.auth.getSession();\n\n        if (error) {\n          console.error('Auth callback error:', error);\n          navigate('/login', {\n            state: {\n              error: 'Authentication failed. Please try again.'\n            }\n          });\n          return;\n        }\n\n        if (data.session) {\n          // Successfully authenticated\n          navigate('/', { replace: true });\n        } else {\n          // No session, redirect to login\n          navigate('/login', {\n            state: {\n              error: 'Authentication failed. Please try again.'\n            }\n          });\n        }\n      } catch (error) {\n        console.error('Unexpected error during auth callback:', error);\n        navigate('/login', {\n          state: {\n            error: 'An unexpected error occurred. Please try again.'\n          }\n        });\n      }\n    };\n\n    handleAuthCallback();\n  }, [navigate]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\n      <div className=\"max-w-md w-full space-y-8 p-10 bg-white shadow-lg rounded-lg\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-electric-blue-600 mx-auto\"></div>\n          <h2 className=\"mt-6 text-center text-2xl font-bold text-gray-900\">\n            Completing sign in...\n          </h2>\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\n            Please wait while we finish setting up your account.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AuthCallback;","size_bytes":1917},"src/pages/auth/LoginPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { useNavigate, Link, useLocation } from 'react-router-dom';\nimport { Mail, Lock, LogIn, UserPlus, Eye, EyeOff, Apple } from 'lucide-react';\n\nconst LoginPage: React.FC = () => {\n  useEffect(() => {\n    document.title = 'AI Twin Tech - Login';\n  }, []);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { login, loginWithGoogle, loginWithApple } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const from = location.state?.from?.pathname || '/';\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    if (!email || !password) {\n      setError('Please enter both email and password.');\n      return;\n    }\n    \n    setLoading(true);\n    const { error: authError } = await login(email, password);\n    setLoading(false);\n    \n    if (authError) {\n      setError(authError.message);\n    } else {\n      navigate(from, { replace: true });\n    }\n  };\n\n  const handleGoogleLogin = async () => {\n    const { error } = await loginWithGoogle();\n    if (error) {\n      setError(error.message);\n    }\n  };\n\n  const handleAppleLogin = async () => {\n    const { error } = await loginWithApple();\n    if (error) {\n      setError(error.message);\n    }\n  };\n\n  return (\n    <div className=\"min-h-[70vh] flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8 p-10 bg-white shadow-lg rounded-lg\">\n        <div>\n          <p className=\"text-center text-sm text-gray-500\">\n            This is all free, we just want to know you and keep you informed when new versions are deployed.\n          </p>\n          <h2 className=\"mt-6 text-center text-3xl font-bold text-gray-900\">\n            Sign in to your account\n          </h2>\n        </div>\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n          {error && <p className=\"text-red-500 text-center text-sm\">{error}</p>}\n          <div className=\"space-y-4\">\n            <div className=\"relative\">\n              <label htmlFor=\"email-address\" className=\"sr-only\">Email address</label>\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center\">\n                <Mail className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <input\n                id=\"email-address\"\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                required\n                className=\"appearance-none relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-electric-blue-500 focus:border-electric-blue-500 focus:z-10 sm:text-sm\"\n                placeholder=\"Email address\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                disabled={loading}\n              />\n            </div>\n            <div className=\"relative\">\n              <label htmlFor=\"password\" className=\"sr-only\">Password</label>\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center\">\n                <Lock className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                autoComplete=\"current-password\"\n                required\n                className=\"appearance-none relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-electric-blue-500 focus:border-electric-blue-500 focus:z-10 sm:text-sm\"\n                placeholder=\"Password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                disabled={loading}\n              />\n            </div>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"group relative w-full flex justify-center items-center gap-2 py-2 px-4 border border-transparent text-sm font-medium rounded text-white bg-electric-blue-600 hover:bg-electric-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-electric-blue-500 disabled:bg-electric-blue-400 disabled:cursor-not-allowed\"\n            >\n              <LogIn className=\"w-4 h-4\" />\n              {loading ? 'Signing in...' : 'Sign in'}\n            </button>\n          </div>\n        </form>\n\n        <div className=\"relative\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <div className=\"w-full border-t border-gray-300\" />\n          </div>\n          <div className=\"relative flex justify-center text-sm\">\n            <span className=\"px-2 bg-white text-gray-500\">Or continue with</span>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-3\">\n          <button\n            onClick={handleGoogleLogin}\n            disabled={loading}\n            className=\"w-full inline-flex justify-center items-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-electric-blue-500 disabled:opacity-50\"\n          >\n            <span className=\"w-5 h-5 flex items-center justify-center text-sm font-bold\">G</span>\n            Google\n          </button>\n\n          <button\n            onClick={handleAppleLogin}\n            disabled={loading}\n            className=\"w-full inline-flex justify-center items-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-electric-blue-500 disabled:opacity-50\"\n          >\n            <Apple className=\"w-5 h-5\" />\n            Apple\n          </button>\n        </div>\n\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\n          Don't have an account?{' '}\n          <Link to=\"/register\" state={{ from: location.state?.from }} className=\"inline-flex items-center gap-1 font-medium text-electric-blue-600 hover:text-electric-blue-500\">\n            <UserPlus className=\"w-4 h-4\" />\n            Register here\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;","size_bytes":6543},"src/pages/auth/RegisterPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { useNavigate, Link, useLocation } from 'react-router-dom';\nimport { Mail, Lock, UserPlus, LogIn, Apple } from 'lucide-react';\n\nconst RegisterPage: React.FC = () => {\n  useEffect(() => {\n    document.title = 'AI Twin Tech - Register';\n  }, []);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { register, loginWithGoogle, loginWithApple } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const from = location.state?.from?.pathname || '/';\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    if (password !== confirmPassword) {\n      setError('Passwords do not match.');\n      return;\n    }\n    if (!email || !password) {\n        setError('Please fill out all fields.');\n        return;\n    }\n\n    setLoading(true);\n    const { error: authError } = await register(email, password);\n    setLoading(false);\n\n    if (authError) {\n      setError(authError.message);\n      setSuccess('');\n    } else {\n      // Show success message for email verification\n      setError(''); // Clear any previous errors\n      setSuccess('Registration successful! Please check your email and click the verification link to activate your account.');\n      // Don't navigate immediately - user needs to verify email first\n    }\n  };\n\n  const handleGoogleLogin = async () => {\n    const { error } = await loginWithGoogle();\n    if (error) {\n      setError(error.message);\n    }\n  };\n\n  const handleAppleLogin = async () => {\n    const { error } = await loginWithApple();\n    if (error) {\n      setError(error.message);\n    }\n  };\n\n  return (\n    <div className=\"min-h-[70vh] flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8 p-10 bg-white shadow-lg rounded-lg\">\n        <div>\n          <h2 className=\"mt-6 text-center text-3xl font-bold text-gray-900\">\n            Create a new account\n          </h2>\n        </div>\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n          {error && <p className=\"text-red-500 text-center text-sm\">{error}</p>}\n          {success && (\n            <div className=\"bg-green-50 border border-green-200 rounded-md p-4\">\n              <p className=\"text-green-800 text-center text-sm\">{success}</p>\n            </div>\n          )}\n          <div className=\"space-y-4\">\n            <div className=\"relative\">\n              <label htmlFor=\"email-address\" className=\"sr-only\">Email address</label>\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center\">\n                <Mail className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <input\n                id=\"email-address\"\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                required\n                className=\"appearance-none rounded relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-electric-blue-500 focus:border-electric-blue-500 sm:text-sm\"\n                placeholder=\"Email address\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                disabled={loading || !!success}\n              />\n            </div>\n            <div className=\"relative\">\n              <label htmlFor=\"password\" className=\"sr-only\">Password</label>\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center\">\n                <Lock className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                autoComplete=\"new-password\"\n                required\n                className=\"appearance-none rounded relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-electric-blue-500 focus:border-electric-blue-500 sm:text-sm\"\n                placeholder=\"Password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                disabled={loading || !!success}\n              />\n            </div>\n            <div className=\"relative\">\n              <label htmlFor=\"confirm-password\" className=\"sr-only\">Confirm Password</label>\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center\">\n                <Lock className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <input\n                id=\"confirm-password\"\n                name=\"confirmPassword\"\n                type=\"password\"\n                autoComplete=\"new-password\"\n                required\n                className=\"appearance-none rounded relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-electric-blue-500 focus:border-electric-blue-500 sm:text-sm\"\n                placeholder=\"Confirm Password\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                disabled={loading || !!success}\n              />\n            </div>\n          </div>\n\n          {/* Consent Checkbox */}\n          <div className=\"flex items-center\">\n            <input\n              id=\"consent\"\n              name=\"consent\"\n              type=\"checkbox\"\n              required\n              className=\"h-4 w-4 text-electric-blue-600 focus:ring-electric-blue-500 border-gray-300 rounded\"\n              disabled={loading || !!success}\n            />\n            <label htmlFor=\"consent\" className=\"ml-2 block text-sm text-gray-900\">\n              I agree to receive updates and communications about new features and content\n            </label>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading || !!success}\n              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-700 disabled:bg-gray-600 disabled:cursor-not-allowed\"\n            >\n              {loading ? 'Registering...' : 'Register'}\n            </button>\n          </div>\n        </form>\n\n        <div className=\"relative\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <div className=\"w-full border-t border-gray-300\" />\n          </div>\n          <div className=\"relative flex justify-center text-sm\">\n            <span className=\"px-2 bg-white text-gray-500\">Or continue with</span>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-3\">\n          <button\n            onClick={handleGoogleLogin}\n            disabled={loading || !!success}\n            className=\"w-full inline-flex justify-center items-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-electric-blue-500 disabled:opacity-50\"\n          >\n            <span className=\"w-5 h-5 flex items-center justify-center text-sm font-bold\">G</span>\n            Google\n          </button>\n\n          <button\n            onClick={handleAppleLogin}\n            disabled={loading || !!success}\n            className=\"w-full inline-flex justify-center items-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-electric-blue-500 disabled:opacity-50\"\n          >\n            <Apple className=\"w-5 h-5\" />\n            Apple\n          </button>\n        </div>\n\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\n          Already have an account?{' '}\n          <Link to=\"/login\" state={{ from: location.state?.from }} className=\"font-medium text-electric-blue-600 hover:text-electric-blue-500\">\n            Sign in\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterPage;","size_bytes":8469},"src/pages/josoor/JosoorVisionPage.tsx":{"content":"import React, { useEffect } from 'react';\n\nconst JosoorVisionPage: React.FC = () => {\n  useEffect(() => {\n    document.title = 'AI Twin Tech - Josoor Vision';\n  }, []);\n\n\n  return (\n    <div className=\"bg-gray-900\">\n        <div className=\"relative rounded-lg overflow-hidden shadow-2xl min-h-[80vh] flex items-center justify-center\">\n            <div\n                className=\"absolute inset-0 bg-cover bg-center bg-fixed\"\n                style={{ backgroundImage: `url(/images/think.png)` }}\n            ></div>\n            <div className=\"absolute inset-0 bg-black/50\"></div>\n            <div className=\"relative p-8 md:p-12 text-white container mx-auto\">\n                <h1 className=\"text-4xl md:text-5xl font-bold mb-8 text-center text-electric-blue-400\">Founder's Letter: Origins</h1>\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto\">\n                    <div className=\"text-white text-base leading-8 text-left space-y-4 bg-black/30 rounded-lg p-4 md:p-6\">\n                      <div className=\"space-y-4\">\n                        <p>\n                          Just over two years ago was my first introduction to GenAI. What started as a basic ask to ChatGPT to design a training program to teach me \"AI\", continued non-stop over the entire weekend to end with contemplating how unlocking the human potential is not in the pursuit of answers but rather the articulation of the right questions. And from that came the concept of the Living Transformation Network, a semi-sentient network of AIs carrying one mission to improve humanity and life by taking over the complexity of society and daring us to think.\n                        </p>\n                        <p>\n                          <strong>\"What do we do with all the spare time we will have?\"</strong>\n                        </p>\n                        <p>\n                          That experience changed me forever. I even published the wild interaction in a LinkedIn article, with the aim of helping other skeptics or on the fence seniors to make the jump and embrace AI.\n                        </p>\n                        <p>\n                          Since then, I have been pursuing that specific concept. Which at its core is \"how to make transformation management push back and control the complexity beast?\" I continued to design the model itself. Yet after six months, even with a sound model that took all the complexity and jammed it into a relational database, <strong>the AI tech was still not there yet</strong>, and a solution then meant investing the old way (licenses, infra., coders etc.).\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"text-white text-base leading-8 text-left space-y-4 bg-black/30 rounded-lg p-4 md:p-6\">\n                      <p>\n                        So I kept it on a slow burner, refining and tweaking based on real life client setups I encounter.\n                      </p>\n                      <p>\n                        Until a few months back. GenAI started to make significant leaps in capabilities, and the AI development tools and communities advanced with more \"no coding\" solutions. Suddenly, the fire power needed to navigate the complex maze of relations was not only available, but remarkably affordable. Not only that, but cloud hosting had also a breakthrough with Azure certified by the government after years of a no-cloud hosting policy.\n                      </p>\n                      <p>\n                        <strong>I had no choice, no excuse and no regrets in chasing this dream.</strong>\n                      </p>\n                      <p>\n                        All my career I was a pioneer, but for others' benefit. This was my chance to flip the script and pioneer with no constraints. In fact, part of the fuel behind this was all the bottled up \"red-tape\" frustration. I am pursuing this all the way Inshallah.\n                      </p>\n                      <p>\n                        I hope once the concept and its national benefis clicks, you will join me in this journey, whether as an Architect or a Builder, so we give it the best chance of success.\n                      </p>\n                      <p>\n                        <strong>CEO/Founder - Mosab Sayyed</strong>\n                      </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n  );\n};\n\nexport default JosoorVisionPage;\n","size_bytes":4515},"public/3danimation/src/components/BuilderIntegration.tsx":{"content":"import { Builder } from '@builder.io/react';\nimport RubiksCubeExperience from './RubiksCubeExperience';\nimport { FramedRubiksCube } from './FramedRubiksCube';\nimport { BuilderRubiksCubeContent } from './BuilderRubiksCubeContent';\n\n// Register the framed version for content sections\nBuilder.registerComponent(FramedRubiksCube, {\n  name: 'RubiksCubeFramed',\n  friendlyName: '3D Rubik\\'s Cube (Framed)',\n  description: 'Interactive 3D Rubik\\'s cube in a contained frame - perfect for content sections',\n  image: 'https://cdn.builder.io/api/v1/image/assets%2Fplaceholder-image',\n  inputs: [\n    {\n      name: 'height',\n      type: 'string',\n      defaultValue: '600px',\n      helperText: 'Height of the animation frame (e.g., 400px, 60vh)'\n    },\n    {\n      name: 'width', \n      type: 'string',\n      defaultValue: '100%',\n      helperText: 'Width of the animation frame (e.g., 800px, 100%)'\n    },\n    {\n      name: 'enableDebug',\n      type: 'boolean',\n      defaultValue: false,\n      helperText: 'Show debug information and phase tracker'\n    },\n    {\n      name: 'autoPlay',\n      type: 'boolean',\n      defaultValue: true,\n      helperText: 'Auto-scroll demo within frame'\n    },\n    {\n      name: 'containerStyle',\n      type: 'string',\n      defaultValue: 'rounded',\n      enum: ['rounded', 'sharp', 'bordered'],\n      helperText: 'Visual style of the frame container'\n    },\n    {\n      name: 'showScrollHint',\n      type: 'boolean',\n      defaultValue: true,\n      helperText: 'Show scroll hint at bottom of frame'\n    }\n  ],\n  canHaveChildren: false,\n  noWrap: true,\n});\n\n// Register full-screen version for hero sections\nBuilder.registerComponent(RubiksCubeExperience, {\n  name: 'RubiksCubeFullscreen',\n  friendlyName: '3D Rubik\\'s Cube (Fullscreen)',\n  description: 'Full-screen 3D Rubik\\'s cube - perfect for hero sections',\n  image: 'https://cdn.builder.io/api/v1/image/assets%2Fplaceholder-image',\n  inputs: [\n    {\n      name: 'height',\n      type: 'string',\n      defaultValue: '100vh',\n      helperText: 'Height of the 3D canvas container'\n    },\n    {\n      name: 'enableDebug',\n      type: 'boolean', \n      defaultValue: false,\n      helperText: 'Show debug information and phase tracker'\n    }\n  ],\n  canHaveChildren: false,\n  noWrap: true,\n});\n\n// Register the sophisticated content frame component for three-row layout\nBuilder.registerComponent(BuilderRubiksCubeContent, {\n  name: 'RubiksCubeContent',\n  friendlyName: '3D Rubik\\'s Cube (Content Frame)',\n  description: 'Full sophisticated 9-phase animation - perfect for the main content area of three-row websites',\n  image: 'https://cdn.builder.io/api/v1/image/assets%2Fplaceholder-image',\n  inputs: [\n    {\n      name: 'height',\n      type: 'string',\n      defaultValue: '100vh',\n      helperText: 'Height of the content frame (e.g., 80vh, 600px). Use 100vh to fill entire content area.'\n    },\n    {\n      name: 'width', \n      type: 'string',\n      defaultValue: '100%',\n      helperText: 'Width of the content frame. 100% recommended for full content width.'\n    },\n    {\n      name: 'showPhaseInfo',\n      type: 'boolean',\n      defaultValue: true,\n      helperText: 'Show phase information overlay in bottom-left corner'\n    },\n    {\n      name: 'enableMouseRotation',\n      type: 'boolean',\n      defaultValue: true,\n      helperText: 'Enable mouse rotation in phases 1 and 9'\n    },\n    {\n      name: 'startingPhase',\n      type: 'number',\n      defaultValue: 1,\n      enum: [1, 2, 3, 5, 6, 7, 8, 9],\n      helperText: 'Starting animation phase (1=Group Rotate, 9=Brain Formation)'\n    }\n  ],\n  canHaveChildren: false,\n  noWrap: true,\n});\n\n// Wrapper for the fullscreen version\nexport const BuilderRubiksCubeFullscreen = ({ \n  height = '100vh', \n  enableDebug = false\n}: {\n  height?: string;\n  enableDebug?: boolean;\n}) => {\n  return (\n    <div style={{ height }} className=\"relative bg-black\">\n      <RubiksCubeExperience />\n      {!enableDebug && (\n        <style jsx>{`\n          .fixed.top-4.right-4 {\n            display: none;\n          }\n        `}</style>\n      )}\n    </div>\n  );\n};","size_bytes":4075},"public/3danimation/src/components/BuilderPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { builder, Builder } from '@builder.io/react';\nimport { RubiksCubeExperience } from './RubiksCubeExperience';\n\n// Configure Builder.io\nbuilder.init('YOUR_BUILDER_PUBLIC_KEY'); // Replace with your actual key\n\ninterface BuilderContent {\n  title?: string;\n  description?: string;\n  heroText?: string;\n  callToAction?: string;\n  features?: Array<{\n    title: string;\n    description: string;\n    icon?: string;\n  }>;\n  showAnimation?: boolean;\n  animationPosition?: 'top' | 'middle' | 'bottom';\n}\n\nexport const BuilderPage = ({ urlPath }: { urlPath: string }) => {\n  const [content, setContent] = useState<BuilderContent | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Fetch content from Builder.io\n    builder\n      .get('page', {\n        url: urlPath,\n        options: {\n          includeRefs: true,\n        },\n      })\n      .promise()\n      .then((content) => {\n        setContent(content?.data);\n        setLoading(false);\n      })\n      .catch((error) => {\n        console.error('Builder.io fetch error:', error);\n        setLoading(false);\n      });\n  }, [urlPath]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <div className=\"text-white\">Loading...</div>\n      </div>\n    );\n  }\n\n  if (!content) {\n    // Fallback to just the 3D experience if no Builder content\n    return (\n      <div className=\"size-full bg-black\">\n        <RubiksCubeExperience />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black\">\n      {/* Hero Section with Builder.io content */}\n      {content.heroText && (\n        <section className=\"relative z-10 min-h-screen flex items-center justify-center\">\n          <div className=\"text-center text-white max-w-4xl mx-auto px-4\">\n            <h1 className=\"text-6xl font-bold mb-6 bg-gradient-to-r from-cyan-400 to-blue-600 bg-clip-text text-transparent\">\n              {content.title || \"3D Neural Transformation\"}\n            </h1>\n            <p className=\"text-xl text-gray-300 mb-8\">\n              {content.description || \"Watch a Rubik's cube transform into a living brain through 9 stunning animation phases\"}\n            </p>\n            <div className=\"text-lg text-cyan-400\">\n              {content.heroText}\n            </div>\n            {content.callToAction && (\n              <button className=\"mt-8 px-8 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg font-medium hover:from-cyan-600 hover:to-blue-700 transition-all\">\n                {content.callToAction}\n              </button>\n            )}\n          </div>\n        </section>\n      )}\n\n      {/* 3D Animation Section */}\n      {content.showAnimation !== false && (\n        <section className=\"relative\">\n          <RubiksCubeExperience />\n          {/* Overlay content if needed */}\n          <div className=\"absolute inset-0 pointer-events-none\">\n            <div className=\"h-full flex items-end justify-center pb-20\">\n              <div className=\"text-center text-white/80 max-w-md\">\n                <p className=\"text-sm\">Scroll to experience the transformation</p>\n              </div>\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Features Section */}\n      {content.features && content.features.length > 0 && (\n        <section className=\"relative z-10 py-20 px-4\">\n          <div className=\"max-w-6xl mx-auto\">\n            <div className=\"grid md:grid-cols-3 gap-8\">\n              {content.features.map((feature, index) => (\n                <div key={index} className=\"text-center text-white\">\n                  <div className=\"text-4xl mb-4\">{feature.icon || \"🧠\"}</div>\n                  <h3 className=\"text-xl font-semibold mb-3 text-cyan-400\">\n                    {feature.title}\n                  </h3>\n                  <p className=\"text-gray-300\">{feature.description}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n        </section>\n      )}\n    </div>\n  );\n};","size_bytes":4058},"public/3danimation/src/components/BuilderRubiksCubeContent.tsx":{"content":"import React, { useRef, useEffect, useState } from 'react';\nimport RubiksCubeExperience from './RubiksCubeExperience';\n\ninterface BuilderRubiksCubeContentProps {\n  height?: string;\n  width?: string;\n  showPhaseInfo?: boolean;\n  enableMouseRotation?: boolean;\n  startingPhase?: number;\n}\n\n/**\n * Builder.io Content Frame Component\n * \n * This component wraps the entire sophisticated RubiksCubeExperience\n * exactly as-is for use in Builder.io's middle content frame.\n * \n * Features:\n * - Full 1040vh sophisticated animation preserved\n * - All 9 phases with precise scroll percentages\n * - Neuroanatomically accurate brain formation\n * - True morphing and ultra-slow spiral\n * - Fits perfectly in Builder.io's three-row structure\n */\nexport const BuilderRubiksCubeContent: React.FC<BuilderRubiksCubeContentProps> = ({\n  height = '100vh',\n  width = '100%',\n  showPhaseInfo = true,\n  enableMouseRotation = true,\n  startingPhase = 1\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  useEffect(() => {\n    // Mark as loaded and optionally scroll to starting phase\n    setIsLoaded(true);\n    \n    if (startingPhase > 1 && containerRef.current) {\n      const container = containerRef.current;\n      const phases = {\n        1: 0,      // 0% - Group Rotate\n        2: 0.0201, // 2.01% - First Dismantle  \n        3: 0.1206, // 12.06% - Settle with Perspective\n        4: 0.1448, // 14.48% - (Phase 4 cancelled)\n        5: 0.1448, // 14.48% - Rubik's Cube Transform\n        6: 0.3138, // 31.38% - Second Dismantle\n        7: 0.4103, // 41.03% - Independent Rotation\n        8: 0.5069, // 50.69% - Brain Popcorn Transform\n        9: 0.7     // 70% - Organic Brain Formation\n      };\n      \n      const phasePercentage = phases[startingPhase as keyof typeof phases] || 0;\n      const maxScroll = container.scrollHeight - container.clientHeight;\n      const targetScroll = maxScroll * phasePercentage;\n      \n      // Smooth scroll to starting phase\n      setTimeout(() => {\n        container.scrollTo({\n          top: targetScroll,\n          behavior: 'smooth'\n        });\n      }, 1000);\n    }\n  }, [startingPhase]);\n\n  // Apply mouse rotation disable if needed\n  useEffect(() => {\n    if (!enableMouseRotation) {\n      const style = document.createElement('style');\n      style.textContent = `\n        .builder-content * {\n          pointer-events: none !important;\n        }\n        .builder-content .pointer-events-auto {\n          pointer-events: auto !important;\n        }\n      `;\n      document.head.appendChild(style);\n      \n      return () => {\n        document.head.removeChild(style);\n      };\n    }\n  }, [enableMouseRotation]);\n\n  if (!isLoaded) {\n    return (\n      <div \n        className=\"flex items-center justify-center bg-black text-cyan-400\"\n        style={{ height, width }}\n      >\n        <div className=\"text-center\">\n          <div className=\"animate-spin w-12 h-12 border-4 border-cyan-400 border-t-transparent rounded-full mx-auto mb-6\"></div>\n          <p className=\"text-xl mb-2\">Loading Sophisticated 3D Experience</p>\n          <p className=\"text-sm opacity-60\">9 phases • 729 cubes • Neuroanatomically accurate brain</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      className=\"builder-content relative bg-black\"\n      style={{ height, width }}\n    >\n      {/* Full Sophisticated Animation - Exactly As-Is */}\n      <div \n        ref={containerRef}\n        className=\"relative w-full h-full overflow-auto\"\n        style={{\n          // Custom scrollbar for Builder.io compatibility\n          scrollbarWidth: 'thin',\n          scrollbarColor: 'rgba(0, 255, 255, 0.6) rgba(26, 26, 26, 0.3)',\n        }}\n      >\n        {/* \n          This is the EXACT same content structure as App.tsx\n          The entire 1040vh sophisticated animation preserved perfectly\n        */}\n        <div style={{ height: '1040vh' }}>\n          {/* Fixed 3D Canvas that stays in content frame viewport */}\n          <div className=\"fixed inset-0 z-0\" style={{ \n            position: 'absolute', // Changed from fixed for Builder.io compatibility\n            top: 0, \n            left: 0, \n            right: 0, \n            bottom: 0 \n          }}>\n            <RubiksCubeExperience />\n          </div>\n          \n          {/* Scrollable content to trigger complex 9-phase animation - 1040vh total */}\n          <div className=\"relative z-10 pointer-events-none\">\n            {/* Phase 1: Group Rotate (0-2.01%) */}\n            <div className=\"h-[21vh] flex items-center justify-center\">\n              <div className=\"text-center text-white pointer-events-auto\">\n                <h1 className=\"text-4xl font-bold mb-4 text-cyan-400\">Ultra-Sophisticated Rubik's Cube</h1>\n                <p className=\"text-xl text-cyan-300 mb-8\">React 19 + Three.js 0.172.0 + 4-Octave Noise</p>\n                <div className=\"text-lg opacity-80 mb-4\">\n                  Phase 1: Mouse-Controlled Group Rotation (0-2.01%)\n                </div>\n                <div className=\"text-sm opacity-60\">\n                  Move mouse to rotate the 1.5x sized unified cube • 27 pieces as one object\n                </div>\n              </div>\n            </div>\n\n            {/* Phase 2: First Dismantle (2.01-12.06%) */}\n            <div className=\"h-[105vh] flex items-center justify-center\">\n              <div className=\"text-center text-white pointer-events-auto\">\n                <h2 className=\"text-3xl font-bold mb-4 text-orange-400\">Phase 2: First Dismantle (2.01-12.06%)</h2>\n                <p className=\"text-lg opacity-80 mb-2\">27 large pieces explode into dramatic cloud</p>\n                <p className=\"text-sm opacity-60 mb-2\">Screen-adaptive spread with 5% padding • Fills 90% of visible area</p>\n                <div className=\"text-xs opacity-40\">\n                  Butter-smooth easing • Dynamic spread calculation\n                </div>\n              </div>\n            </div>\n\n            {/* Phase 3: Settle with Perspective (12.06-14.48%) */}\n            <div className=\"h-[25vh] flex items-center justify-center\">\n              <div className=\"text-center text-white pointer-events-auto\">\n                <h2 className=\"text-3xl font-bold mb-4 text-yellow-400\">Phase 3: Settle with Perspective (12.06-14.48%)</h2>\n                <p className=\"text-lg opacity-80 mb-2\">Large pieces hold dramatic positions</p>\n                <p className=\"text-sm opacity-60\">Perspective scaling: Bottom large (1.0) → Top small (0.25)</p>\n              </div>\n            </div>\n\n            {/* Phase 4: CANCELLED - Time redistributed */}\n            <div className=\"h-0\"></div>\n\n            {/* Phase 5: Rubik's Cube Transform + Showcase (14.48-31.38%) */}\n            <div className=\"h-[169vh] flex items-center justify-center\">\n              <div className=\"text-center text-white pointer-events-auto\">\n                <h2 className=\"text-3xl font-bold mb-4 text-green-400\">Phase 5: Rubik's Cube Transform + Showcase (14.48-31.38%)</h2>\n                <p className=\"text-lg opacity-80 mb-2\">Each of 27 pieces becomes its own Rubik's cube</p>\n                <p className=\"text-sm opacity-60 mb-2\">27 individual 3×3×3 formations • ENHANCED: Perfect white edge visibility</p>\n                <div className=\"text-xs opacity-40 mb-2\">\n                  Transform: 14.48-29.38% • Showcase: 29.38-31.38%\n                </div>\n                <div className=\"text-xs text-emerald-300\">\n                  ✨ 2% showcase period with breathing animation & crystal-clear white edges\n                </div>\n              </div>\n            </div>\n\n            {/* Phase 6: Second Dismantle (31.38-41.03%) */}\n            <div className=\"h-[97vh] flex items-center justify-center\">\n              <div className=\"text-center text-white pointer-events-auto\">\n                <h2 className=\"text-3xl font-bold mb-4 text-blue-400\">Phase 6: Second Dismantle (31.38-41.03%)</h2>\n                <p className=\"text-lg opacity-80 mb-2\">27 Rubik's cubes → 729 pieces</p>\n                <p className=\"text-sm opacity-60 mb-2\">Each 3×3×3 splits into 27 pieces • Fixed constraints</p>\n                <div className=\"text-xs opacity-40\">\n                  Instanced rendering for 729 pieces • White contrasting edges\n                </div>\n              </div>\n            </div>\n\n            {/* Phase 7: Independent Rotation (41.03-50.69%) */}\n            <div className=\"h-[97vh] flex items-center justify-center\">\n              <div className=\"text-center text-white pointer-events-auto\">\n                <h2 className=\"text-3xl font-bold mb-4 text-indigo-400\">Phase 7: Independent Rotation (41.03-50.69%)</h2>\n                <p className=\"text-lg opacity-80 mb-2\">729 pieces with living movement</p>\n                <p className=\"text-sm opacity-60 mb-2\">Continuous hovering • Individual rotation axes • All visible</p>\n                <div className=\"text-xs opacity-40\">\n                  Gentle hovering motion • Unique rotation speeds per piece\n                </div>\n              </div>\n            </div>\n\n            {/* Phase 8: Neuromorphic Brain Transform (50.69-70%) */}\n            <div className=\"h-[193vh] flex items-center justify-center\">\n              <div className=\"text-center text-white pointer-events-auto\">\n                <h2 className=\"text-3xl font-bold mb-4 text-purple-400\">Phase 8: Neuromorphic Brain Transform (50.69-70%)</h2>\n                <p className=\"text-lg opacity-80 mb-2\">ULTRA-ENHANCED: Cubes morph into neuromorphic brain tissue</p>\n                <p className=\"text-sm opacity-60 mb-2\">Wave-based transformation • 100 cubes simultaneously • 16×16 sphere resolution</p>\n                <div className=\"text-xs opacity-40 mb-2\">\n                  True morphing with enhanced brain material • Subsurface scattering effect\n                </div>\n                <div className=\"text-xs text-pink-300 mb-2\">\n                  4-octave noise cortical folding • Anatomically accurate regions\n                </div>\n                <div className=\"text-xs text-purple-300\">\n                  ✨ React 19 + Three.js 0.172.0 neuromorphic enhancements\n                </div>\n              </div>\n            </div>\n\n            {/* Phase 9: Ultra-Realistic Brain Formation (70-100%) - EXTENDED 30% RANGE */}\n            <div className=\"h-[312vh] flex items-center justify-center\">\n              <div className=\"text-center text-white pointer-events-auto\">\n                <h2 className=\"text-3xl font-bold mb-4 text-pink-400\">Phase 9: Ultra-Realistic Brain Formation (70-100%)</h2>\n                <p className=\"text-lg opacity-80 mb-2\">Ultra-slow spiral → Mouse-rotatable ULTRA-REALISTIC brain</p>\n                <p className=\"text-sm opacity-60 mb-2\">EXTENDED 30% spiral range • Neuroanatomically ULTRA-accurate</p>\n                <div className=\"text-xs opacity-40 mb-2\">\n                  Enhanced 4-octave noise folding • Region-specific cortical complexity\n                </div>\n                <div className=\"text-xs text-pink-300 mb-2\">\n                  Frontal lobe prominence • Enhanced cerebellum foliation • Brain stem narrowing\n                </div>\n                <div className=\"text-xs text-cyan-300 mb-2\">\n                  ULTRA-SLOW VISIBLE SPIRAL: Full 2π rotation over 30% scroll range\n                </div>\n                <div className=\"text-xs text-emerald-300\">\n                  ✨ Neuromorphic cortical detail • Anatomically accurate MRI-based proportions\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Builder.io Specific Scroll Hint */}\n        {showPhaseInfo && (\n          <div className=\"absolute bottom-4 left-4 z-50 text-white bg-black/80 backdrop-blur-sm px-4 py-3 rounded-lg border border-purple-500/30\">\n            <div className=\"text-sm font-medium text-purple-400\">\n              🎯 Builder.io Content Frame\n            </div>\n            <div className=\"text-xs text-white/70 mt-1\">\n              Full 9-phase animation • Scroll within this frame\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Builder.io Specific Styles for Content Frame */}\n      <style jsx>{`\n        .builder-content {\n          position: relative !important;\n          overflow: hidden;\n        }\n        \n        .builder-content * {\n          box-sizing: border-box;\n        }\n        \n        .builder-content ::-webkit-scrollbar {\n          width: 8px;\n        }\n        \n        .builder-content ::-webkit-scrollbar-track {\n          background: rgba(26, 26, 26, 0.3);\n        }\n        \n        .builder-content ::-webkit-scrollbar-thumb {\n          background: linear-gradient(to bottom, #00ffff, #ff4488);\n          border-radius: 4px;\n        }\n        \n        .builder-content ::-webkit-scrollbar-thumb:hover {\n          background: linear-gradient(to bottom, #00dddd, #ff3366);\n        }\n        \n        /* Ensure 3D canvas stays within content frame */\n        .builder-content canvas {\n          position: absolute !important;\n        }\n      `}</style>\n    </div>\n  );\n};","size_bytes":13150},"public/3danimation/src/components/EnhancedAnimationController.tsx":{"content":"import React, { useOptimistic, useTransition, useMemo } from 'react';\nimport { useFrame } from '@react-three/fiber';\nimport * as THREE from 'three';\n\n/**\n * React 19 Enhanced Animation Controller\n * Leverages React Compiler optimization and concurrent features\n */\n\ninterface AnimationState {\n  phase: number;\n  progress: number;\n  morphingActive: boolean;\n  brainActivity: number;\n}\n\nexport const useEnhancedAnimation = (scrollProgress: number) => {\n  const [isPending, startTransition] = useTransition();\n  \n  // React 19: useOptimistic for instant visual feedback\n  const [optimisticState, setOptimisticState] = useOptimistic<AnimationState>(\n    {\n      phase: getCurrentPhase(scrollProgress),\n      progress: scrollProgress,\n      morphingActive: false,\n      brainActivity: 0,\n    },\n    (state, newState: Partial<AnimationState>) => ({\n      ...state,\n      ...newState,\n    })\n  );\n\n  // React Compiler automatically optimizes this calculation\n  const enhancedPhaseData = useMemo(() => {\n    return calculateEnhancedPhaseData(scrollProgress);\n  }, [scrollProgress]);\n\n  // Three.js 0.172.0: Enhanced easing with concurrent scheduling\n  const smoothTransition = (from: number, to: number, t: number) => {\n    // Enhanced easing function optimized by React Compiler\n    const easeInOutQuint = (x: number): number => {\n      return x < 0.5 ? 16 * x * x * x * x * x : 1 - Math.pow(-2 * x + 2, 5) / 2;\n    };\n    \n    return from + (to - from) * easeInOutQuint(t);\n  };\n\n  // Update optimistic state for instant feedback\n  const updateAnimationState = (newState: Partial<AnimationState>) => {\n    startTransition(() => {\n      setOptimisticState(newState);\n    });\n  };\n\n  return {\n    optimisticState,\n    enhancedPhaseData,\n    smoothTransition,\n    updateAnimationState,\n    isPending,\n  };\n};\n\nfunction getCurrentPhase(progress: number): number {\n  if (progress < 0.0201) return 1;\n  if (progress < 0.1206) return 2;\n  if (progress < 0.1448) return 3;\n  if (progress < 0.3138) return 5;\n  if (progress < 0.4103) return 6;\n  if (progress < 0.5069) return 7;\n  if (progress < 0.7) return 8;\n  return 9;\n}\n\nfunction calculateEnhancedPhaseData(scrollProgress: number) {\n  // React Compiler automatically optimizes this complex calculation\n  return {\n    currentPhase: getCurrentPhase(scrollProgress),\n    transitionSmoothing: calculateTransitionSmoothing(scrollProgress),\n    morphingIntensity: calculateMorphingIntensity(scrollProgress),\n    brainActivityLevel: calculateBrainActivity(scrollProgress),\n  };\n}\n\nfunction calculateTransitionSmoothing(progress: number): number {\n  // Enhanced smoothing algorithm for React 19\n  const phaseTransitions = [0.0201, 0.1206, 0.1448, 0.3138, 0.4103, 0.5069, 0.7];\n  \n  for (let i = 0; i < phaseTransitions.length; i++) {\n    const current = phaseTransitions[i];\n    const next = phaseTransitions[i + 1] || 1.0;\n    \n    if (progress >= current && progress < next) {\n      const localProgress = (progress - current) / (next - current);\n      // Smooth transition curve\n      return 1 - Math.abs(localProgress - 0.5) * 2;\n    }\n  }\n  \n  return 1;\n}\n\nfunction calculateMorphingIntensity(progress: number): number {\n  // Brain transformation phases have higher morphing intensity\n  if (progress >= 0.5069 && progress < 0.7) {\n    return 1.0; // Maximum morphing during brain popcorn\n  }\n  if (progress >= 0.7) {\n    return 0.8; // Sustained morphing during brain formation\n  }\n  return 0.2; // Minimal morphing in other phases\n}\n\nfunction calculateBrainActivity(progress: number): number {\n  // Simulate neural activity increasing as brain forms\n  if (progress < 0.5069) return 0;\n  if (progress >= 0.7) {\n    // Full brain activity with realistic neural firing patterns\n    const time = Date.now() * 0.001;\n    return 0.7 + 0.3 * Math.sin(time * 2) * Math.cos(time * 3);\n  }\n  \n  // Gradual activity increase during transformation\n  const transformProgress = (progress - 0.5069) / (0.7 - 0.5069);\n  return transformProgress * 0.5;\n}\n\nexport default useEnhancedAnimation;","size_bytes":4012},"public/3danimation/src/components/FramedRubiksCube.tsx":{"content":"import React, { useRef, useEffect } from 'react';\nimport RubiksCubeExperience from './RubiksCubeExperience';\n\ninterface FramedRubiksCubeProps {\n  height?: string;\n  width?: string;\n  enableDebug?: boolean;\n  autoPlay?: boolean;\n  containerStyle?: 'rounded' | 'sharp' | 'bordered';\n  showScrollHint?: boolean;\n}\n\nexport const FramedRubiksCube: React.FC<FramedRubiksCubeProps> = ({\n  height = '600px',\n  width = '100%',\n  enableDebug = false,\n  autoPlay = true,\n  containerStyle = 'rounded',\n  showScrollHint = true\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Frame styling based on containerStyle prop\n  const getFrameClasses = () => {\n    const baseClasses = \"relative overflow-hidden bg-black\";\n    \n    switch (containerStyle) {\n      case 'rounded':\n        return `${baseClasses} rounded-xl shadow-2xl border border-gray-800`;\n      case 'sharp':\n        return `${baseClasses} shadow-2xl border border-gray-800`;\n      case 'bordered':\n        return `${baseClasses} rounded-lg border-4 border-cyan-500/30 shadow-2xl shadow-cyan-500/20`;\n      default:\n        return `${baseClasses} rounded-xl shadow-2xl border border-gray-800`;\n    }\n  };\n\n  useEffect(() => {\n    if (!autoPlay || !containerRef.current) return;\n\n    // Auto-scroll within the frame to demonstrate the animation\n    const container = containerRef.current;\n    let scrollDirection = 1;\n    let currentScroll = 0;\n    \n    const autoScrollDemo = () => {\n      if (!container) return;\n      \n      const maxScroll = container.scrollHeight - container.clientHeight;\n      const scrollSpeed = 2;\n      \n      currentScroll += scrollSpeed * scrollDirection;\n      \n      if (currentScroll >= maxScroll) {\n        scrollDirection = -1;\n      } else if (currentScroll <= 0) {\n        scrollDirection = 1;\n        // Pause at the top before starting again\n        setTimeout(() => {}, 2000);\n      }\n      \n      container.scrollTop = Math.max(0, Math.min(currentScroll, maxScroll));\n    };\n\n    // Start auto-demo after a delay\n    const demoTimeout = setTimeout(() => {\n      const demoInterval = setInterval(autoScrollDemo, 50);\n      \n      // Stop demo when user interacts\n      const stopDemo = () => {\n        clearInterval(demoInterval);\n        container.removeEventListener('wheel', stopDemo);\n        container.removeEventListener('touchstart', stopDemo);\n        container.removeEventListener('mousedown', stopDemo);\n      };\n      \n      container.addEventListener('wheel', stopDemo, { passive: true });\n      container.addEventListener('touchstart', stopDemo, { passive: true });\n      container.addEventListener('mousedown', stopDemo);\n      \n      // Auto-stop demo after 30 seconds\n      setTimeout(stopDemo, 30000);\n      \n    }, 3000); // Start demo after 3 seconds\n\n    return () => {\n      clearTimeout(demoTimeout);\n    };\n  }, [autoPlay]);\n\n  return (\n    <div className=\"w-full\">\n      {/* Frame Container */}\n      <div \n        className={getFrameClasses()}\n        style={{ height, width }}\n      >\n        {/* 3D Animation Container */}\n        <div \n          ref={containerRef}\n          className=\"relative w-full h-full overflow-auto scrollbar-thin scrollbar-thumb-cyan-500/50 scrollbar-track-gray-800/20\"\n          style={{\n            // Custom scrollbar for better aesthetics\n            scrollbarWidth: 'thin',\n            scrollbarColor: 'rgba(6, 182, 212, 0.5) rgba(31, 41, 55, 0.2)',\n          }}\n        >\n          <RubiksCubeExperience />\n          \n          {/* Hide debug info if disabled */}\n          {!enableDebug && (\n            <style jsx>{`\n              .fixed.top-4.right-4 {\n                display: none !important;\n              }\n            `}</style>\n          )}\n          \n          {/* Scroll Hint Overlay */}\n          {showScrollHint && (\n            <div className=\"absolute inset-x-0 bottom-0 z-30 bg-gradient-to-t from-black/80 via-black/40 to-transparent py-6\">\n              <div className=\"text-center text-white/80\">\n                <div className=\"animate-bounce mb-2\">\n                  <svg className=\"w-6 h-6 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 14l-7 7m0 0l-7-7m7 7V3\" />\n                  </svg>\n                </div>\n                <p className=\"text-sm\">Scroll within this frame to experience the transformation</p>\n              </div>\n            </div>\n          )}\n        </div>\n        \n        {/* Frame Border Glow Effect */}\n        <div className=\"absolute inset-0 rounded-xl pointer-events-none\">\n          <div className=\"absolute inset-0 rounded-xl bg-gradient-to-r from-cyan-500/20 via-transparent to-cyan-500/20 opacity-50\"></div>\n        </div>\n      </div>\n      \n      {/* Frame Controls/Info */}\n      <div className=\"mt-4 text-center text-gray-600\">\n        <p className=\"text-sm\">\n          🎮 Mouse rotation • 📜 Scroll to transform • 🧠 9 animation phases\n        </p>\n        <div className=\"flex justify-center mt-2 space-x-4 text-xs\">\n          <span className=\"px-2 py-1 bg-gray-100 rounded\">Height: {height}</span>\n          <span className=\"px-2 py-1 bg-gray-100 rounded\">Debug: {enableDebug ? 'On' : 'Off'}</span>\n          <span className=\"px-2 py-1 bg-gray-100 rounded\">AutoPlay: {autoPlay ? 'On' : 'Off'}</span>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":5392},"public/3danimation/src/components/PerformanceMonitor.tsx":{"content":"import React, { useEffect, useState, useRef } from 'react';\n\n/**\n * React 19 + Three.js 0.172.0 Performance Monitor\n * Tracks 60fps performance and optimization metrics\n */\n\ninterface PerformanceMetrics {\n  fps: number;\n  frameTime: number;\n  memoryUsage: number;\n  renderCalls: number;\n  geometryCount: number;\n  textureCount: number;\n  isOptimized: boolean;\n}\n\nexport const PerformanceMonitor: React.FC<{ enabled?: boolean }> = ({ \n  enabled = false \n}) => {\n  const [metrics, setMetrics] = useState<PerformanceMetrics>({\n    fps: 60,\n    frameTime: 16.67,\n    memoryUsage: 0,\n    renderCalls: 0,\n    geometryCount: 0,\n    textureCount: 0,\n    isOptimized: true,\n  });\n\n  const frameCountRef = useRef(0);\n  const lastTimeRef = useRef(performance.now());\n  const frameTimesRef = useRef<number[]>([]);\n\n  useEffect(() => {\n    if (!enabled) return;\n\n    let animationFrame: number;\n\n    const measurePerformance = () => {\n      const now = performance.now();\n      const deltaTime = now - lastTimeRef.current;\n      \n      frameCountRef.current++;\n      frameTimesRef.current.push(deltaTime);\n      \n      // Keep only last 60 frame times\n      if (frameTimesRef.current.length > 60) {\n        frameTimesRef.current.shift();\n      }\n\n      // Calculate metrics every 60 frames\n      if (frameCountRef.current % 60 === 0) {\n        const avgFrameTime = frameTimesRef.current.reduce((a, b) => a + b, 0) / frameTimesRef.current.length;\n        const fps = Math.round(1000 / avgFrameTime);\n        \n        // Get memory usage if available\n        const memoryInfo = (performance as any).memory;\n        const memoryUsage = memoryInfo ? Math.round(memoryInfo.usedJSHeapSize / 1048576) : 0;\n\n        setMetrics(prev => ({\n          ...prev,\n          fps,\n          frameTime: Math.round(avgFrameTime * 100) / 100,\n          memoryUsage,\n          isOptimized: fps >= 55, // Consider optimized if above 55fps\n        }));\n      }\n\n      lastTimeRef.current = now;\n      animationFrame = requestAnimationFrame(measurePerformance);\n    };\n\n    animationFrame = requestAnimationFrame(measurePerformance);\n\n    return () => {\n      if (animationFrame) {\n        cancelAnimationFrame(animationFrame);\n      }\n    };\n  }, [enabled]);\n\n  if (!enabled) return null;\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50 bg-black/80 text-white p-3 rounded-lg font-mono text-sm\">\n      <div className=\"space-y-1\">\n        <div className={`flex justify-between ${metrics.fps >= 55 ? 'text-green-400' : 'text-red-400'}`}>\n          <span>FPS:</span>\n          <span>{metrics.fps}</span>\n        </div>\n        <div className=\"flex justify-between text-cyan-400\">\n          <span>Frame:</span>\n          <span>{metrics.frameTime}ms</span>\n        </div>\n        <div className=\"flex justify-between text-purple-400\">\n          <span>Memory:</span>\n          <span>{metrics.memoryUsage}MB</span>\n        </div>\n        <div className={`flex justify-between ${metrics.isOptimized ? 'text-green-400' : 'text-yellow-400'}`}>\n          <span>Status:</span>\n          <span>{metrics.isOptimized ? 'Optimized' : 'Optimizing...'}</span>\n        </div>\n        <div className=\"text-xs text-gray-400 mt-2\">\n          React 19 + Three.js 0.172.0\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PerformanceMonitor;","size_bytes":3302},"public/3danimation/src/components/RubiksCubeExperience.tsx":{"content":"import React, {\n  useRef,\n  useEffect,\n  useState,\n  useMemo,\n  Suspense,\n} from \"react\";\nimport { Canvas, useFrame, useThree } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\nimport { createNoise3D } from \"simplex-noise\";\nimport ThousandsBrainInstanced from \"./ThousandsBrainInstanced\";\nimport UnifiedRubiksCubes from \"./UnifiedRubiksCubes\";\n\n/*\n🎯 ENHANCED 10-PHASE RUBIK'S CUBE TO BRAIN ANIMATION:\n\n✅ Phase 1 (0-2.01%): Group Rotate\n   - Mouse-controlled rotation of entire cube as one object\n\n✅ Phase 2 (2.01-12.06%): First Dismantle  \n   - 27 pieces explode outward into dramatic cloud filling screen\n\n✅ Phase 3 (12.06-14.48%): Settle with Perspective\n   - Pieces hold positions with perspective scaling (larger at bottom)\n\n❌ Phase 4: CANCELLED - Time redistributed to Phases 5-10\n\n✅ Phase 5 (14.48-26.32%): Rubik's Cube Transform\n   - Each of 27 pieces transforms into its own Rubik's cube\n\n🆕 Phase 6 (26.32-35.09%): Rubik's Cube Showcase - NEW DEDICATED PHASE\n   - Full display of 27 perfect Rubik's cubes with crystal-clear white edges\n   - Individual rotations, breathing animations, living movement\n\n✅ Phase 7 (35.09-43.86%): Second Dismantle (FIXED CONSTRAINTS)\n   - 27 Rubik's cubes split into 729 pieces (proper 5% padding)\n\n✅ Phase 8 (43.86-52.63%): Independent Rotation\n   - 729 pieces settle and rotate independently, all visible\n\n✅ Phase 9 (52.63-70.18%): Neuromorphic Brain Transform (WAVES + SIMULTANEOUS)\n   - Cubes transform in large waves: 100 cubes transform simultaneously\n   - FIXED: Pink brain material with WHITE edges for contrast\n   - ENHANCEMENT: Advanced neuromorphic geometry with cortical folding\n\n✅ Phase 10 (70.18-100%): Ultra-Realistic Brain Formation (EXTENDED SPIRAL)\n   - ENHANCED: Thousands of equal-sized brain pieces (not limited to 729)\n   - ENHANCEMENT: True neuroanatomical structure with noise-based cortical detail\n   - Brain pieces merge into ULTRA-REALISTIC organic brain with ultra-slow visible spiral\n*/\n\n// Get phase name for display (NEW 10-PHASE STRUCTURE)\nfunction getPhaseName(progress: number): string {\n  if (progress < 0.0201) return \"Group Rotate\";\n  if (progress < 0.1206) return \"First Dismantle\";\n  if (progress < 0.1448) return \"Settle with Perspective\";\n  if (progress < 0.2632) return \"Rubik's Cube Transform\";\n  if (progress < 0.3509) return \"🆕 Rubik's Cube Showcase\";\n  if (progress < 0.4386) return \"Second Dismantle\";\n  if (progress < 0.5263) return \"Independent Rotation\";\n  if (progress < 0.7018) return \"Neuromorphic Brain Transform\";\n  return \"Ultra-Realistic Brain Formation\";\n}\n\n// Cube data interface\ninterface CubeData {\n  id: string;\n  index: number;\n  position: [number, number, number];\n  color: string;\n  baseSpread: [number, number, number];\n  rotationData?: {\n    rotationSpeed: number;\n    rotationAxis: THREE.Vector3;\n    accumulatedRotation: THREE.Euler;\n  };\n}\n\n// Individual mini-cube data for Phase 5+ (729 total mini-cubes)\ninterface MiniCubeData {\n  id: string;\n  parentIndex: number; // Which of the 27 original cubes this came from\n  localIndex: number; // Which of the 27 pieces within that parent cube\n  localPosition: [number, number, number]; // Position within the parent Rubik's cube formation\n  baseSpread: [number, number, number]; // For Phase 6 dismantling (SAME as first dismantle)\n  rotationData: {\n    rotationSpeed: number;\n    rotationAxis: THREE.Vector3;\n    accumulatedRotation: THREE.Euler;\n  };\n  brainTransform: {\n    popDelay: number; // For popcorn effect timing\n    spiralRadius: number; // Starting spiral radius\n    spiralSpeed: number; // Spiral acceleration factor\n    brainPosition: [number, number, number]; // Target position in final brain formation\n    hemisphere: \"left\" | \"right\"; // Brain hemisphere assignment\n    brainRegion:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\"; // Brain region\n  };\n  size: number;\n}\n\n// ULTRA-REALISTIC Brain formation system - Creates thousands of equal-sized brain pieces\nconst createBrainFormation = (\n  totalPieces: number,\n): Array<{\n  position: [number, number, number];\n  hemisphere: \"left\" | \"right\";\n  region:\n    | \"frontal\"\n    | \"parietal\"\n    | \"temporal\"\n    | \"occipital\"\n    | \"cerebellum\";\n}> => {\n  const noise3D = createNoise3D();\n  const brainFormation: Array<{\n    position: [number, number, number];\n    hemisphere: \"left\" | \"right\";\n    region:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\";\n  }> = [];\n\n  // ENHANCED: Neuroanatomically accurate brain proportions based on human brain MRI data\n  const brainWidth = 20.0; // Slightly wider for realism\n  const brainHeight = 16.5; // More accurate height ratio  \n  const brainDepth = 24.0; // Enhanced front-to-back depth for frontal lobe prominence\n\n  for (let i = 0; i < totalPieces; i++) {\n    // Create layered brain distribution\n    const layerProgress = i / totalPieces;\n\n    // Use spherical coordinates with brain-like deformation\n    const phi = Math.acos(2 * Math.random() - 1); // 0 to π (vertical angle)\n    const theta = 2 * Math.PI * Math.random(); // 0 to 2π (horizontal angle)\n\n    // Base brain-shaped ellipsoid\n    let x = Math.sin(phi) * Math.cos(theta) * brainWidth * 0.5;\n    let y = Math.cos(phi) * brainHeight * 0.5;\n    let z = Math.sin(phi) * Math.sin(theta) * brainDepth * 0.5;\n\n    // Add realistic brain shape deformations\n    const frontWeight = Math.max(0, z / (brainDepth * 0.5)); // Frontal lobe prominence\n    const backWeight = Math.max(0, -z / (brainDepth * 0.5)); // Occipital lobe\n\n    // Frontal lobe expansion (front of brain is larger)\n    if (z > 0) {\n      x *= 1 + frontWeight * 0.3;\n      y *= 1 + frontWeight * 0.2;\n    }\n\n    // Brain stem narrowing (bottom center)\n    if (\n      y < -brainHeight * 0.3 &&\n      Math.abs(x) < brainWidth * 0.2 &&\n      Math.abs(z) < brainDepth * 0.2\n    ) {\n      x *= 0.4; // Narrow brain stem\n      z *= 0.4;\n    }\n\n    // ENHANCED: Neuroanatomically accurate cerebellum with characteristic foliation\n    if (y < -brainHeight * 0.1 && z < -brainDepth * 0.2) {\n      y -= 2.8; // More prominent cerebellum positioning\n      x *= 0.75; // Narrower for anatomical accuracy\n      \n      // Add characteristic cerebellar foliation pattern\n      const cerebellarNoise = noise3D(x * 0.2, y * 0.2, z * 0.2) * 1.5;\n      y += Math.sin(x * 0.3) * cerebellarNoise * 0.5; // Horizontal foliation\n    }\n\n    // ULTRA-ENHANCED: 4-octave noise for neuromorphic cortical folding (React 19 + Three.js 0.172.0)\n    const noiseScale = 0.06; // Finer scale for ultra-realistic brain surface detail\n    \n    // 4-octave fractal noise for complex cortical patterns\n    const surfaceNoise =\n      noise3D(x * noiseScale, y * noiseScale, z * noiseScale) * 5.0 +      // Primary cortical folds\n      noise3D(x * noiseScale * 2, y * noiseScale * 2, z * noiseScale * 2) * 2.5 +  // Secondary gyri\n      noise3D(x * noiseScale * 4, y * noiseScale * 4, z * noiseScale * 4) * 1.25 + // Tertiary sulci\n      noise3D(x * noiseScale * 8, y * noiseScale * 8, z * noiseScale * 8) * 0.625; // Micro-texture\n\n    // Additional layer for region-specific cortical complexity\n    const regionComplexity = Math.sin(z * 0.1) * Math.cos(x * 0.08) * 1.5;\n    const combinedNoise = surfaceNoise + regionComplexity;\n\n    // Apply neuromorphic surface displacement with anatomically accurate folding\n    const surfaceRadius = Math.sqrt(x * x + y * y + z * z);\n    if (surfaceRadius > 0) {\n      const normalX = x / surfaceRadius;\n      const normalY = y / surfaceRadius;\n      const normalZ = z / surfaceRadius;\n\n      // Enhanced cortical folding with region-specific intensity\n      let foldingStrength = 3.0; // Base neuromorphic folding strength\n      \n      // Frontal cortex has deeper sulci\n      if (z > brainDepth * 0.2) {\n        foldingStrength *= 1.4;\n      }\n      \n      // Temporal lobes have complex folding patterns\n      if (Math.abs(x) > brainWidth * 0.3 && y > -brainHeight * 0.2) {\n        foldingStrength *= 1.3;\n      }\n\n      // Apply the enhanced surface displacement\n      x += normalX * combinedNoise * foldingStrength;\n      y += normalY * combinedNoise * foldingStrength;\n      z += normalZ * combinedNoise * foldingStrength;\n    }\n\n    // Determine hemisphere\n    const hemisphere: \"left\" | \"right\" =\n      x < 0 ? \"left\" : \"right\";\n\n    // Determine brain region based on position\n    let region:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\";\n\n    if (y < -brainHeight * 0.1 && z < -brainDepth * 0.2) {\n      region = \"cerebellum\";\n    } else if (z > brainDepth * 0.2) {\n      region = \"frontal\";\n    } else if (z < -brainDepth * 0.2) {\n      region = \"occipital\";\n    } else if (\n      Math.abs(x) > brainWidth * 0.3 &&\n      y > -brainHeight * 0.2\n    ) {\n      region = \"temporal\";\n    } else {\n      region = \"parietal\";\n    }\n\n    brainFormation.push({\n      position: [x, y, z],\n      hemisphere,\n      region,\n    });\n  }\n\n  return brainFormation;\n};\n\n// Smooth easing functions for butter-smooth animations\nconst easeInOutCubic = (t: number): number => {\n  return t < 0.5\n    ? 4 * t * t * t\n    : 1 - Math.pow(-2 * t + 2, 3) / 2;\n};\n\nconst easeOutElastic = (t: number): number => {\n  if (t === 0) return 0;\n  if (t === 1) return 1;\n  return (\n    Math.pow(2, -10 * t) * Math.sin((t - 0.1) * 5 * Math.PI) + 1\n  );\n};\n\nconst easeInOutQuart = (t: number): number => {\n  return t < 0.5\n    ? 8 * t * t * t * t\n    : 1 - Math.pow(-2 * t + 2, 4) / 2;\n};\n\nconst easeOutBack = (t: number): number => {\n  const c1 = 1.70158;\n  const c3 = c1 + 1;\n  return 1 + c3 * Math.pow(t - 1, 3) + c1 * Math.pow(t - 1, 2);\n};\n\n// Smooth interpolation utility\nconst smoothLerp = (\n  a: number,\n  b: number,\n  t: number,\n): number => {\n  return a + (b - a) * easeInOutQuart(t);\n};\n\nconst smoothVec3Lerp = (\n  a: [number, number, number],\n  b: [number, number, number],\n  t: number,\n): [number, number, number] => {\n  return [\n    smoothLerp(a[0], b[0], t),\n    smoothLerp(a[1], b[1], t),\n    smoothLerp(a[2], b[2], t),\n  ];\n};\n\n// Individual cube piece component - PHASES 1-4 WITH BUTTER-SMOOTH TRANSITIONS\nconst CubePiece = React.memo(function CubePiece({\n  cubeData,\n  scrollProgress,\n}: {\n  cubeData: CubeData;\n  scrollProgress: number;\n}) {\n  const groupRef = useRef<any>(null);\n\n  // Create edge geometry for black wireframe edges (1.5x SIZE)\n  const edgeGeometry = useMemo(() => {\n    return new THREE.EdgesGeometry(new THREE.BoxGeometry(5.25, 5.25, 5.25));\n  }, []);\n\n  useFrame(() => {\n    if (!groupRef.current) return;\n\n    let position: [number, number, number] = [\n      ...cubeData.position,\n    ];\n    let scale = 1;\n    let shakeOffset = [0, 0, 0];\n\n    // Calculate screen-adaptive spread values (FURTHER REDUCED SCALING)\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n    const aspectRatio = viewportWidth / viewportHeight;\n\n    const fov = 75;\n    const fovRad = (fov * Math.PI) / 180;\n    const screenWidth3D = 2 * Math.tan(fovRad / 2) * 50; // FURTHER REDUCED SCALING for camera at 50\n    const screenHeight3D = screenWidth3D / aspectRatio;\n\n    // 5% padding around border - constrain to 90% of screen with 5% padding on each side\n    const maxSpreadX = screenWidth3D * 0.45; // 45% to each side (90% total with 5% padding)\n    const maxSpreadY = screenHeight3D * 0.45; // 45% to each side (90% total with 5% padding)\n    const maxSpreadZ = 30; // FURTHER REDUCED SCALING: 60 -> 30\n\n    // Phase 1: Group Rotate (0.00-2.01%)\n    if (scrollProgress < 0.0201) {\n      position = [...cubeData.position];\n      scale = 1;\n\n      if (groupRef.current && cubeData.rotationData) {\n        groupRef.current.rotation.set(0, 0, 0);\n      }\n    }\n    // Phase 2: First Dismantle (2.01-12.06%) - Dramatic cloud filling screen\n    else if (\n      scrollProgress >= 0.0201 &&\n      scrollProgress < 0.1206\n    ) {\n      const rawProgress = (scrollProgress - 0.0201) / 0.1005;\n      const dismantleProgress = easeInOutCubic(rawProgress);\n\n      position = [\n        cubeData.position[0] +\n          cubeData.baseSpread[0] *\n            dismantleProgress *\n            maxSpreadX,\n        cubeData.position[1] +\n          cubeData.baseSpread[1] *\n            dismantleProgress *\n            maxSpreadY,\n        cubeData.position[2] +\n          cubeData.baseSpread[2] *\n            dismantleProgress *\n            maxSpreadZ,\n      ];\n\n      const normalizedY =\n        (position[1] - -maxSpreadY) / (2 * maxSpreadY);\n      scale = Math.max(\n        0.25,\n        Math.min(1.0, 1.0 - normalizedY * 0.75),\n      );\n    }\n    // Phase 3: Settle with Perspective (12.06-14.48%)\n    else if (\n      scrollProgress >= 0.1206 &&\n      scrollProgress < 0.1448\n    ) {\n      position = [\n        cubeData.position[0] +\n          cubeData.baseSpread[0] * maxSpreadX,\n        cubeData.position[1] +\n          cubeData.baseSpread[1] * maxSpreadY,\n        cubeData.position[2] +\n          cubeData.baseSpread[2] * maxSpreadZ,\n      ];\n\n      const normalizedY =\n        (position[1] - -maxSpreadY) / (2 * maxSpreadY);\n      scale = Math.max(\n        0.25,\n        Math.min(1.0, 1.0 - normalizedY * 0.75),\n      );\n    }\n    // Phase 5: Rubik's Cube Transform (14.48-26.32%)\n    else if (\n      scrollProgress >= 0.1448 &&\n      scrollProgress < 0.2632\n    ) {\n      const rawProgress = (scrollProgress - 0.1448) / 0.1184;\n\n      position = [\n        cubeData.position[0] +\n          cubeData.baseSpread[0] * maxSpreadX,\n        cubeData.position[1] +\n          cubeData.baseSpread[1] * maxSpreadY,\n        cubeData.position[2] +\n          cubeData.baseSpread[2] * maxSpreadZ,\n      ];\n\n      const normalizedY =\n        (position[1] - -maxSpreadY) / (2 * maxSpreadY);\n      const baseScale = Math.max(\n        0.25,\n        Math.min(1.0, 1.0 - normalizedY * 0.75),\n      );\n\n      // Fade out as Rubik's cubes appear\n      const fadeProgress = easeInOutCubic(rawProgress);\n      scale = baseScale * (1 - fadeProgress);\n    }\n    // Phase 6: Rubik's Cube Showcase (26.32-35.09%) - COMPLETELY HIDDEN\n    else if (\n      scrollProgress >= 0.2632 &&\n      scrollProgress < 0.3509\n    ) {\n      // Original cubes are completely hidden during showcase\n      scale = 0;\n    }\n    // Phase 7+: Hide original cubes (Rubik's cubes and mini-cubes take over)\n    else {\n      scale = 0;\n    }\n\n    // Apply position with shake, scale, and immediate response\n    groupRef.current.position.set(\n      position[0] + shakeOffset[0],\n      position[1] + shakeOffset[1],\n      position[2] + shakeOffset[2],\n    );\n    groupRef.current.scale.setScalar(scale);\n  });\n\n  return (\n    <group ref={groupRef}>\n      <mesh>\n        <boxGeometry args={[5.25, 5.25, 5.25]} />\n        <meshStandardMaterial\n          color=\"#00ffff\"\n          emissive=\"#0088aa\"\n          emissiveIntensity={0.3}\n          metalness={0.1}\n          roughness={0.2}\n        />\n      </mesh>\n      <lineSegments geometry={edgeGeometry}>\n        <lineBasicMaterial color=\"#ffffff\" linewidth={6} />\n      </lineSegments>\n    </group>\n  );\n});\n\n// Instanced mini-cubes component for efficient rendering of 729 pieces\nconst MiniInstanced = React.memo(function MiniInstanced({\n  miniCubes,\n  parentCubes,\n  scrollProgress,\n}: {\n  miniCubes: MiniCubeData[];\n  parentCubes: CubeData[];\n  scrollProgress: number;\n}) {\n  const count = miniCubes.length;\n  const meshRef = useRef<THREE.InstancedMesh | null>(null);\n  const wireRef = useRef<THREE.InstancedMesh | null>(null);\n  const sphereMeshRef = useRef<THREE.InstancedMesh | null>(null);\n  const sphereWireRef = useRef<THREE.InstancedMesh | null>(null);\n  const dummy = useMemo(() => new THREE.Object3D(), []);\n\n  // Shared geometries and materials (50/75 SCALE + 1.5x SIZE)\n  const cubeGeo = useMemo(\n    () => new THREE.BoxGeometry(2.1, 2.1, 2.1),\n    [],\n  );\n  const cubeEdgeGeo = useMemo(\n    () => new THREE.EdgesGeometry(cubeGeo),\n    [],\n  ); // WHITE EDGES for cubes (during brain phases)\n  // ENHANCED: Higher resolution sphere geometry for ultra-realistic brain morphing\n  const sphereGeo = useMemo(\n    () => new THREE.SphereGeometry(2.1 * 0.7, 16, 16), // Back to original size *0.7 as requested\n    [],\n  );\n  const sphereEdgeGeo = useMemo(\n    () => new THREE.EdgesGeometry(sphereGeo),\n    [],\n  ); // WHITE EDGES for spheres (brain contrast)\n  const cubeMat = useMemo(\n    () =>\n      new THREE.MeshStandardMaterial({\n        color: \"#00ffff\",\n        emissive: \"#0088aa\",\n        emissiveIntensity: 0.4,\n        metalness: 0.1,\n        roughness: 0.2,\n        transparent: true,\n        opacity: 1,\n      }),\n    [],\n  );\n  const wireMat = useMemo(\n    () =>\n      new THREE.LineBasicMaterial({\n        color: \"#ffffff\", // FIXED: WHITE edges for brain cubes for contrast against pink\n        transparent: false, // Make edges fully opaque\n        linewidth: 6, // WebGL linewidth limitation\n        opacity: 1,\n      }),\n    [],\n  );\n\n  // Enhanced edge material for maximum visibility - WHITE EDGES for better contrast\n  const edgeMat = useMemo(\n    () =>\n      new THREE.LineBasicMaterial({\n        color: \"#ffffff\", // WHITE edges for maximum contrast against blue cubes\n        transparent: false,\n        opacity: 1,\n        linewidth: 6, // Same thickness as original cubes\n      }),\n    [],\n  );\n  // ENHANCED: Ultra-realistic brain material with vertex colors for regional variation\n  const brainMat = useMemo(\n    () =>\n      new THREE.MeshStandardMaterial({\n        color: \"#ffffff\", // White base - let vertex colors control the final color\n        emissive: \"#ff2266\",\n        emissiveIntensity: 0.6,\n        metalness: 0.15, // Reduced for more biological appearance\n        roughness: 0.7, // Increased for realistic brain tissue texture\n        transparent: true,\n        opacity: 0.95, // Slightly transparent for organic feel\n        vertexColors: true, // Enable per-instance vertex colors for brain regions\n      }),\n    [],\n  );\n\n  // Precompute and pack per-instance data into typed arrays\n  const packed = useMemo(() => {\n    const basePos = new Float32Array(count * 3);\n    const localPos = new Float32Array(count * 3);\n    const baseSpread = new Float32Array(count * 3);\n    const brainTarget = new Float32Array(count * 3);\n    const popDelay = new Float32Array(count);\n    const rotAxis = new Float32Array(count * 3);\n    const rotSpeed = new Float32Array(count);\n    const sizes = new Float32Array(count);\n    const brainRegionColors = new Float32Array(count * 3); // RGB colors\n    const isInFirstWave = new Float32Array(count); // Boolean as float\n\n    // Calculate screen-adaptive spread values once\n    const viewportWidth =\n      typeof window !== \"undefined\" ? window.innerWidth : 1920;\n    const viewportHeight =\n      typeof window !== \"undefined\" ? window.innerHeight : 1080;\n    const aspectRatio = viewportWidth / viewportHeight;\n    const fov = 75;\n    const fovRad = (fov * Math.PI) / 180;\n    const screenWidth3D = 2 * Math.tan(fovRad / 2) * 50; // FURTHER REDUCED SCALING for camera at 50\n    const screenHeight3D = screenWidth3D / aspectRatio;\n    const maxSpreadX = screenWidth3D * 0.45;\n    const maxSpreadY = screenHeight3D * 0.45;\n    const maxSpreadZ = 30; // FURTHER REDUCED SCALING: 60 -> 30\n\n    for (let i = 0; i < count; i++) {\n      const m = miniCubes[i];\n      const parent = parentCubes[m.parentIndex];\n\n      // Precompute parent position (Phase 4 final position)\n      const parentPos = [\n        parent.position[0] + parent.baseSpread[0] * maxSpreadX,\n        parent.position[1] + parent.baseSpread[1] * maxSpreadY,\n        parent.position[2] + parent.baseSpread[2] * maxSpreadZ,\n      ];\n\n      basePos.set(parentPos, i * 3);\n      localPos.set(m.localPosition, i * 3);\n      baseSpread.set(m.baseSpread, i * 3);\n      brainTarget.set(m.brainTransform.brainPosition, i * 3);\n      popDelay[i] = m.brainTransform.popDelay ?? 0;\n      rotAxis.set(\n        [\n          m.rotationData.rotationAxis.x,\n          m.rotationData.rotationAxis.y,\n          m.rotationData.rotationAxis.z,\n        ],\n        i * 3,\n      );\n      rotSpeed[i] = m.rotationData.rotationSpeed;\n      sizes[i] = m.size;\n\n      // Precompute brain region colors - TESTING: Completely different colors (no pink)\n      const getBrainRegionColorRGB = (\n        region: string,\n      ): [number, number, number] => {\n        switch (region) {\n          case \"frontal\":\n            return [1.0, 0.0, 0.0]; // RED - frontal cortex\n          case \"parietal\":\n            return [0.0, 1.0, 0.0]; // GREEN - parietal lobe\n          case \"temporal\":\n            return [0.0, 0.0, 1.0]; // BLUE - temporal lobe\n          case \"occipital\":\n            return [1.0, 1.0, 0.0]; // YELLOW - occipital lobe\n          case \"cerebellum\":\n            return [1.0, 0.5, 0.0]; // ORANGE - cerebellum\n          default:\n            return [0.5, 0.0, 1.0]; // PURPLE - default\n        }\n      };\n\n      const colorRGB = getBrainRegionColorRGB(\n        m.brainTransform.brainRegion,\n      );\n      brainRegionColors.set(colorRGB, i * 3);\n\n      // Check if in first wave (first 100 cubes for larger simultaneous groups)\n      const cubeIndex = m.parentIndex * 27 + m.localIndex;\n      isInFirstWave[i] = cubeIndex < 100 ? 1 : 0;\n    }\n\n    return {\n      basePos,\n      localPos,\n      baseSpread,\n      brainTarget,\n      popDelay,\n      rotAxis,\n      rotSpeed,\n      sizes,\n      brainRegionColors,\n      isInFirstWave,\n      maxSpreadX,\n      maxSpreadY,\n      maxSpreadZ,\n    };\n  }, [miniCubes, parentCubes]);\n\n  useFrame(() => {\n    if (\n      !meshRef.current ||\n      !wireRef.current ||\n      !sphereMeshRef.current ||\n      !sphereWireRef.current\n    )\n      return;\n\n    const mesh = meshRef.current;\n    const wire = wireRef.current;\n    const sphereMesh = sphereMeshRef.current;\n    const sphereWire = sphereWireRef.current;\n\n    // Update all 729 instances in a single loop\n    for (let i = 0; i < count; i++) {\n      // Read packed data for this instance\n      const px = packed.basePos[i * 3 + 0];\n      const py = packed.basePos[i * 3 + 1];\n      const pz = packed.basePos[i * 3 + 2];\n      const lx = packed.localPos[i * 3 + 0];\n      const ly = packed.localPos[i * 3 + 1];\n      const lz = packed.localPos[i * 3 + 2];\n      const bx = packed.baseSpread[i * 3 + 0];\n      const by = packed.baseSpread[i * 3 + 1];\n      const bz = packed.baseSpread[i * 3 + 2];\n      const btx = packed.brainTarget[i * 3 + 0];\n      const bty = packed.brainTarget[i * 3 + 1];\n      const btz = packed.brainTarget[i * 3 + 2];\n      const cubeIndex = Math.floor(i / 27) * 27 + (i % 27);\n      const isFirstWave = packed.isInFirstWave[i] === 1;\n\n      // Calculate transformation progress with SIMULTANEOUS WAVES\n      let transformProgress = 0;\n      let isInBrainFormation = false;\n\n      if (scrollProgress >= 0.5263 && scrollProgress < 0.7018) {\n        const rawProgress = (scrollProgress - 0.5263) / 0.1755;\n\n        // More simultaneous transformation with wave groups\n        const waveSize = 100; // Transform 100 cubes at once\n        const waveIndex = Math.floor(cubeIndex / waveSize);\n        const totalWaves = Math.ceil(729 / waveSize);\n\n        // Each wave starts with a small delay but transforms quickly\n        const waveStartDelay = (waveIndex / totalWaves) * 0.4; // Only 40% of phase for staggering\n        const waveProgress = Math.max(\n          0,\n          (rawProgress - waveStartDelay) / (1 - waveStartDelay),\n        );\n\n        // Fast transformation once wave starts\n        transformProgress = Math.min(\n          1,\n          easeInOutCubic(waveProgress) * 1.5,\n        );\n        transformProgress = Math.max(0, transformProgress);\n      } else if (scrollProgress >= 0.7018) {\n        transformProgress = 1;\n        isInBrainFormation = true;\n      }\n\n      // Calculate parent's perspective scale\n      const normalizedY =\n        (py - -packed.maxSpreadY) / (2 * packed.maxSpreadY);\n      const perspectiveScale = Math.max(\n        0.25,\n        Math.min(1.0, 1.0 - normalizedY * 0.75),\n      );\n\n      let position: [number, number, number] = [0, 0, 0];\n      let scale = 0;\n      let rotation = new THREE.Euler(0, 0, 0);\n\n      // Phase logic - UPDATED: MiniInstanced starts from Phase 7 (individual pieces)\n      // Phases 5-6 are handled by UnifiedRubiksCubes component\n      if (\n        scrollProgress >= 0.3509 &&\n        scrollProgress < 0.4386\n      ) {\n        // Phase 7: Second dismantle (from unified Rubik's cubes to individual pieces)\n        const rawProgress = (scrollProgress - 0.3509) / 0.0877;\n        const dismantleProgress = easeInOutCubic(rawProgress);\n\n        // Start from the unified Rubik's cube position (same as Phase 3 spread position)\n        const unifiedCubePosition = [\n          px, // Use parent position directly\n          py,\n          pz,\n        ];\n        const reducedSpreadMultiplier = 0.3;\n\n        position = [\n          unifiedCubePosition[0] +\n            bx *\n              dismantleProgress *\n              packed.maxSpreadX *\n              reducedSpreadMultiplier,\n          unifiedCubePosition[1] +\n            by *\n              dismantleProgress *\n              packed.maxSpreadY *\n              reducedSpreadMultiplier,\n          unifiedCubePosition[2] +\n            bz *\n              dismantleProgress *\n              packed.maxSpreadZ *\n              reducedSpreadMultiplier,\n        ];\n\n        const newNormalizedY =\n          (position[1] - -packed.maxSpreadY) /\n          (2 * packed.maxSpreadY);\n        scale = Math.max(\n          0.25,\n          Math.min(1.0, 1.0 - newNormalizedY * 0.75),\n        );\n      } else if (\n        scrollProgress >= 0.4386 &&\n        scrollProgress < 0.5263\n      ) {\n        // Phase 8: Independent Rotation with LIVING MOVEMENT\n        const rawProgress = (scrollProgress - 0.4386) / 0.0877;\n        const rotationProgress = easeInOutCubic(rawProgress);\n\n        const basePosition = [\n          px + lx * perspectiveScale,\n          py + ly * perspectiveScale,\n          pz + lz * perspectiveScale,\n        ];\n        const reducedSpreadMultiplier = 0.3;\n\n        // Base position with hovering motion\n        const time = Date.now() * 0.001;\n        const hoverAmplitude = 1.5; // Gentle hovering (50/75 scale + 1.5x)\n        const hoverX =\n          Math.sin(time + i * 0.1) * hoverAmplitude;\n        const hoverY =\n          Math.cos(time * 0.7 + i * 0.15) * hoverAmplitude;\n        const hoverZ =\n          Math.sin(time * 0.5 + i * 0.12) * hoverAmplitude;\n\n        position = [\n          basePosition[0] +\n            bx * packed.maxSpreadX * reducedSpreadMultiplier +\n            hoverX,\n          basePosition[1] +\n            by * packed.maxSpreadY * reducedSpreadMultiplier +\n            hoverY,\n          basePosition[2] +\n            bz * packed.maxSpreadZ * reducedSpreadMultiplier +\n            hoverZ,\n        ];\n\n        const newNormalizedY =\n          (position[1] - -packed.maxSpreadY) /\n          (2 * packed.maxSpreadY);\n        scale = Math.max(\n          0.25,\n          Math.min(1.0, 1.0 - newNormalizedY * 0.75),\n        );\n\n        // Continuous gentle rotation\n        const continuousRotation = time * 0.5;\n        rotation.x =\n          packed.rotAxis[i * 3 + 0] * continuousRotation;\n        rotation.y =\n          packed.rotAxis[i * 3 + 1] * continuousRotation;\n        rotation.z =\n          packed.rotAxis[i * 3 + 2] * continuousRotation;\n      } else if (\n        scrollProgress >= 0.5263 &&\n        scrollProgress < 0.7018\n      ) {\n        // Phase 9: Brain Popcorn Transform with CONTINUOUS LIVING MOVEMENT\n        const basePosition = [\n          px + lx * perspectiveScale,\n          py + ly * perspectiveScale,\n          pz + lz * perspectiveScale,\n        ];\n        const reducedSpreadMultiplier = 0.3;\n\n        // Continuous hovering even during transformation\n        const time = Date.now() * 0.001;\n        const hoverAmplitude = 2.25; // Gentle hovering during transformation (50/75 scale + 1.5x)\n        const hoverX =\n          Math.sin(time + i * 0.1) * hoverAmplitude;\n        const hoverY =\n          Math.cos(time * 0.7 + i * 0.15) * hoverAmplitude;\n        const hoverZ =\n          Math.sin(time * 0.5 + i * 0.12) * hoverAmplitude;\n\n        position = [\n          basePosition[0] +\n            bx * packed.maxSpreadX * reducedSpreadMultiplier +\n            hoverX,\n          basePosition[1] +\n            by * packed.maxSpreadY * reducedSpreadMultiplier +\n            hoverY,\n          basePosition[2] +\n            bz * packed.maxSpreadZ * reducedSpreadMultiplier +\n            hoverZ,\n        ];\n\n        const newNormalizedY =\n          (position[1] - -packed.maxSpreadY) /\n          (2 * packed.maxSpreadY);\n        const finalScale = Math.max(\n          0.25,\n          Math.min(1.0, 1.0 - newNormalizedY * 0.75),\n        );\n\n        scale = finalScale;\n\n        // Continuous gentle rotation during transformation\n        const continuousRotation = time * 0.3;\n        rotation.x =\n          packed.rotAxis[i * 3 + 0] * continuousRotation;\n        rotation.y =\n          packed.rotAxis[i * 3 + 1] * continuousRotation;\n        rotation.z =\n          packed.rotAxis[i * 3 + 2] * continuousRotation;\n      } else if (scrollProgress >= 0.7) {\n        // Phase 9: Organic Brain Formation with ULTRA-SLOW SPIRAL MOTION (30% RANGE)\n        const rawProgress = (scrollProgress - 0.7) / 0.3; // Full 30% range (70% to 100%)\n\n        const basePosition = [\n          px + lx * perspectiveScale,\n          py + ly * perspectiveScale,\n          pz + lz * perspectiveScale,\n        ];\n        const reducedSpreadMultiplier = 0.3;\n        const startPosition = [\n          basePosition[0] +\n            bx * packed.maxSpreadX * reducedSpreadMultiplier,\n          basePosition[1] +\n            by * packed.maxSpreadY * reducedSpreadMultiplier,\n          basePosition[2] +\n            bz * packed.maxSpreadZ * reducedSpreadMultiplier,\n        ];\n\n        // ULTRA-SLOW SPIRAL: Direct use of rawProgress for consistent motion over full 30%\n        const spiralRadius = Math.sqrt(\n          startPosition[0] ** 2 + startPosition[2] ** 2,\n        );\n        const originalAngle = Math.atan2(\n          startPosition[2],\n          startPosition[0],\n        );\n\n        // VISIBLE ULTRA-SLOW SPIRAL: Use rawProgress directly over 30% range\n        const spiralRotation = rawProgress * Math.PI * 2; // Full 2π rotation over 30%\n        const currentRadius = spiralRadius * (1 - rawProgress); // Linear radius reduction\n        const currentAngle = originalAngle - spiralRotation; // Counter-clockwise rotation\n\n        // Calculate spiral position\n        const spiralX = currentRadius * Math.cos(currentAngle);\n        const spiralZ = currentRadius * Math.sin(currentAngle);\n        const spiralY = startPosition[1] * (1 - rawProgress); // Linear Y movement to center\n\n        const spiralPosition: [number, number, number] = [\n          spiralX,\n          spiralY,\n          spiralZ,\n        ];\n\n        // Blend to final brain position using easing only at the very end\n        const blendProgress =\n          rawProgress < 0.7 ? 0 : (rawProgress - 0.7) / 0.3; // Only blend in final 30%\n        const smoothBlend = easeInOutCubic(blendProgress);\n        position = smoothVec3Lerp(\n          spiralPosition,\n          [btx, bty, btz],\n          smoothBlend,\n        );\n\n        const newNormalizedY =\n          (position[1] - -packed.maxSpreadY) /\n          (2 * packed.maxSpreadY);\n        const finalScale = Math.max(\n          0.25,\n          Math.min(1.0, 1.0 - newNormalizedY * 0.75),\n        );\n\n        // Get brain region from miniCubes data\n        const miniCube = miniCubes[i];\n        let regionScale = 1.0;\n        switch (miniCube.brainTransform.brainRegion) {\n          case \"frontal\":\n            regionScale = 1.2;\n            break;\n          case \"cerebellum\":\n            regionScale = 0.9;\n            break;\n          case \"temporal\":\n            regionScale = 1.0;\n            break;\n          case \"parietal\":\n            regionScale = 1.1;\n            break;\n          case \"occipital\":\n            regionScale = 0.95;\n            break;\n        }\n\n        scale = finalScale * regionScale;\n\n        // Brain pulsing with spiral motion\n        const brainPulse =\n          Math.sin(Date.now() * 0.004 + (i % 27) * 0.1) * 0.15 +\n          1;\n        scale *= brainPulse;\n\n        // Rotation influenced by spiral motion\n        rotation.x = Math.sin(currentAngle * 0.5) * 0.1;\n        rotation.y = currentAngle * 0.1;\n        rotation.z = Math.cos(currentAngle * 0.5) * 0.05;\n      }\n\n      // Calculate smooth morphing blend factors for seamless cube-to-brain transformation\n      let cubeScale = scale;\n      let sphereScale = 0;\n      let cubeOpacity = 1;\n      let sphereOpacity = 0;\n      let morphColor = [0, 1, 1]; // Start with cyan RGB\n\n      // TRUE MORPHING transformation during brain popcorn phase - BOTH VISIBLE SIMULTANEOUSLY\n      if (transformProgress > 0) {\n        // True morphing - both geometries always visible with smooth transitions\n        const morphPhase = easeInOutCubic(transformProgress);\n\n        // OVERLAPPING SCALES - both visible during transformation\n        cubeScale = scale * Math.max(0.2, 1 - morphPhase * 0.8); // Cube stays visible longer\n        sphereScale = scale * morphPhase * 1.1; // Sphere grows gradually\n\n        // OVERLAPPING OPACITIES - true blending effect\n        cubeOpacity = Math.max(0.3, 1 - morphPhase * 0.7); // Cube fades but stays visible\n        sphereOpacity = Math.min(1, morphPhase * 1.2); // Sphere appears gradually\n\n        // Color transition from cyan to brain region color\n        const targetR = packed.brainRegionColors[i * 3 + 0];\n        const targetG = packed.brainRegionColors[i * 3 + 1];\n        const targetB = packed.brainRegionColors[i * 3 + 2];\n\n        morphColor = [\n          0 + (targetR - 0) * morphPhase, // From cyan R=0\n          1 + (targetG - 1) * morphPhase, // From cyan G=1\n          1 + (targetB - 1) * morphPhase, // From cyan B=1\n        ];\n\n        // Synchronized pulsing for both geometries\n        const pulseEffect =\n          Math.sin(Date.now() * 0.01 + i * 0.1) * 0.1 + 1;\n        cubeScale *= pulseEffect;\n        sphereScale *= pulseEffect;\n\n        // Organic movement during transformation\n        const organicMotion = morphPhase * 0.75; // 50/75 scale + 1.5x\n        const organicX =\n          Math.sin(Date.now() * 0.008 + i * 0.2) *\n          organicMotion;\n        const organicY =\n          Math.cos(Date.now() * 0.012 + i * 0.25) *\n          organicMotion;\n        const organicZ =\n          Math.sin(Date.now() * 0.006 + i * 0.18) *\n          organicMotion;\n\n        position[0] += organicX;\n        position[1] += organicY;\n        position[2] += organicZ;\n      }\n\n      // Update cube instances with morphing properties\n      dummy.position.set(position[0], position[1], position[2]);\n      dummy.rotation.copy(rotation);\n      dummy.scale.setScalar(cubeScale);\n      dummy.updateMatrix();\n\n      // Always render cubes (they'll be invisible when opacity is 0)\n      mesh.setMatrixAt(i, dummy.matrix);\n      wire.setMatrixAt(i, dummy.matrix);\n\n      // Update sphere instances for brain transformation\n      dummy.scale.setScalar(sphereScale);\n      dummy.updateMatrix();\n      sphereMesh.setMatrixAt(i, dummy.matrix);\n      sphereWire.setMatrixAt(i, dummy.matrix);\n    }\n\n    // Update material properties for TRUE MORPHING effect - both always visible\n    if (\n      meshRef.current &&\n      wireRef.current &&\n      sphereMeshRef.current &&\n      sphereWireRef.current\n    ) {\n      // Calculate average transformation progress\n      const averageTransformProgress =\n        miniCubes.reduce((sum, _, i) => {\n          const cubeIndex = Math.floor(i / 27) * 27 + (i % 27);\n          let instanceProgress = 0;\n\n          if (\n            scrollProgress >= 0.5069 &&\n            scrollProgress < 0.7\n          ) {\n            const rawProgress =\n              (scrollProgress - 0.5069) / 0.1931;\n            const waveSize = 100;\n            const waveIndex = Math.floor(cubeIndex / waveSize);\n            const totalWaves = Math.ceil(729 / waveSize);\n            const waveStartDelay =\n              (waveIndex / totalWaves) * 0.4;\n            const waveProgress = Math.max(\n              0,\n              (rawProgress - waveStartDelay) /\n                (1 - waveStartDelay),\n            );\n\n            instanceProgress = Math.min(\n              1,\n              easeInOutCubic(waveProgress) * 1.5,\n            );\n            instanceProgress = Math.max(0, instanceProgress);\n          } else if (scrollProgress >= 0.7) {\n            instanceProgress = 1;\n          }\n          return sum + instanceProgress;\n        }, 0) / count;\n\n      // TRUE MORPHING - both geometries always visible with overlapping opacities\n      const cubeOpacity = Math.max(\n        0.4,\n        1 - averageTransformProgress * 0.6,\n      ); // Cubes stay more visible\n      const sphereOpacity = Math.min(\n        1,\n        averageTransformProgress * 1.2,\n      ); // Spheres appear gradually\n\n      mesh.material.opacity = cubeOpacity;\n      wire.material.opacity = cubeOpacity * 0.9; // Stronger edges during morph\n      sphereMesh.material.opacity = sphereOpacity;\n      sphereWire.material.opacity = sphereOpacity * 0.8;\n    }\n\n    // Mark matrices as needing updates\n    // Initialize brain instance colors if not done yet (for regional color variation) \nif (!sphereMesh.instanceColor && scrollProgress >= 0.5263) {\n  const colors = new Float32Array(count * 3);\n  for (let j = 0; j < count; j++) {\n    const regionColorR = packed.brainRegionColors[j * 3 + 0];\n    const regionColorG = packed.brainRegionColors[j * 3 + 1]; \n    const regionColorB = packed.brainRegionColors[j * 3 + 2];\n    colors[j * 3] = regionColorR;\n    colors[j * 3 + 1] = regionColorG;\n    colors[j * 3 + 2] = regionColorB;\n  }\n  sphereMesh.instanceColor = new THREE.InstancedBufferAttribute(colors, 3);\n}\n\nmesh.instanceMatrix.needsUpdate = true;\n    wire.instanceMatrix.needsUpdate = true;\n    sphereMesh.instanceMatrix.needsUpdate = true;\n    sphereWire.instanceMatrix.needsUpdate = true;\n  });\n\n  return (\n    <>\n      {/* Cube instances with BLACK CONTRASTING EDGES */}\n      <instancedMesh\n        ref={meshRef}\n        args={[cubeGeo, cubeMat, count]}\n        renderOrder={0}\n      />\n      <instancedMesh\n        ref={wireRef}\n        args={[cubeEdgeGeo, edgeMat, count]}\n        renderOrder={2}\n      />\n\n      {/* Sphere instances for brain transformation with BLACK EDGES */}\n      <instancedMesh\n        ref={sphereMeshRef}\n        args={[sphereGeo, brainMat, count]}\n        renderOrder={0}\n      />\n      <instancedMesh\n        ref={sphereWireRef}\n        args={[sphereEdgeGeo, edgeMat, count]}\n        renderOrder={2}\n      />\n    </>\n  );\n});\n\n// Main Rubik's cube component\nconst RubiksCube = React.memo(function RubiksCube({\n  mousePosition,\n  scrollProgress,\n}: {\n  mousePosition: { x: number; y: number };\n  scrollProgress: number;\n}) {\n  const groupRef = useRef<any>(null);\n  const brainGroupRef = useRef<any>(null); // Separate ref for brain rotation\n\n  // Generate 3x3x3 = 27 cubes with rotation data for Phase 4\n  const cubes = useMemo((): CubeData[] => {\n    const cubeArray: CubeData[] = [];\n    let index = 0;\n\n    for (let x = -1; x <= 1; x++) {\n      for (let y = -1; y <= 1; y++) {\n        for (let z = -1; z <= 1; z++) {\n          cubeArray.push({\n            id: `cube_${x}_${y}_${z}`,\n            index: index++,\n            position: [x * 6.3, y * 6.3, z * 6.3], // 6.3 unit spacing (50/75 scale + 1.5x)\n            color: \"#00ffff\", // All cubes are neon blue\n            baseSpread: [\n              (Math.random() - 0.5) * 2, // -1 to +1 normalized range (USER'S SPEC)\n              (Math.random() - 0.5) * 2,\n              (Math.random() - 0.5) * 2,\n            ],\n            // Phase 4 rotation data - generate unique rotation for each cube\n            rotationData: {\n              rotationSpeed: Math.random() * 0.015 + 0.005, // 0.005 to 0.02 rad/frame\n              rotationAxis: new THREE.Vector3(\n                Math.random() - 0.5,\n                Math.random() - 0.5,\n                Math.random() - 0.5,\n              ).normalize(),\n              accumulatedRotation: new THREE.Euler(0, 0, 0),\n            },\n          });\n        }\n      }\n    }\n    return cubeArray;\n  }, []);\n\n  // Generate 729 individual mini-cubes for Phases 5-9 (27 Rubik's cubes × 27 pieces each)\n  const miniCubes = useMemo((): MiniCubeData[] => {\n    const miniCubeArray: MiniCubeData[] = [];\n\n    // Generate brain formation positions for all 729 pieces\n    const brainFormation = createBrainFormation(729);\n\n    // For each of the original 27 cubes, create 27 mini-cubes (forming a Rubik's cube)\n    cubes.forEach((parentCube, parentIndex) => {\n      let localIndex = 0;\n\n      // Create 27 mini-cubes for this parent cube (3×3×3 Rubik's cube formation)\n      for (let x = -1; x <= 1; x++) {\n        for (let y = -1; y <= 1; y++) {\n          for (let z = -1; z <= 1; z++) {\n            const globalIndex = parentIndex * 27 + localIndex;\n            const brainPos = brainFormation[globalIndex];\n\n            miniCubeArray.push({\n              id: `mini_${parentIndex}_${x}_${y}_${z}`,\n              parentIndex: parentIndex,\n              localIndex: localIndex++,\n              localPosition: [x * 2.1, y * 2.1, z * 2.1], // Position within Rubik's cube formation (50/75 scale + 1.5x)\n              baseSpread: [\n                (Math.random() - 0.5) * 2, // For Phase 6 dismantling (SAME rules as first)\n                (Math.random() - 0.5) * 2,\n                (Math.random() - 0.5) * 2,\n              ],\n              rotationData: {\n                rotationSpeed: Math.random() * 0.02 + 0.01,\n                rotationAxis: new THREE.Vector3(\n                  Math.random() - 0.5,\n                  Math.random() - 0.5,\n                  Math.random() - 0.5,\n                ).normalize(),\n                accumulatedRotation: new THREE.Euler(0, 0, 0),\n              },\n              brainTransform: {\n                popDelay: Math.random() * 0.5, // Stagger popcorn effect (0-0.5 normalized)\n                spiralRadius: 22.5 + Math.random() * 30, // Starting spiral distance (50/75 scale + 1.5x)\n                spiralSpeed: 0.5 + Math.random() * 1.5, // Spiral acceleration factor\n                brainPosition: brainPos.position, // Target position in brain formation\n                hemisphere: brainPos.hemisphere, // Left or right brain hemisphere\n                brainRegion: brainPos.region, // Brain region for realistic variation\n              },\n              size: 2.1, // 1/3 of original 5.25-unit cubes (50/75 scale + 1.5x)\n            });\n          }\n        }\n      }\n    });\n\n    return miniCubeArray;\n  }, [cubes]);\n\n  useFrame(() => {\n    if (!groupRef.current) return;\n\n    // Phase 1: Group Rotate (0.00-2.01%) - Mouse controlled rotation\n    if (scrollProgress < 0.0201) {\n      const rotationStrength = 1;\n      const targetRotationX =\n        (mousePosition.y - 0.5) * Math.PI * rotationStrength;\n      const targetRotationY =\n        (mousePosition.x - 0.5) *\n        Math.PI *\n        2 *\n        rotationStrength;\n\n      groupRef.current.rotation.x = targetRotationX;\n      groupRef.current.rotation.y = targetRotationY;\n\n      // Ensure consistent scale for all cubes in Phase 1\n      groupRef.current.scale.set(1, 1, 1);\n    }\n    // Phase 9: Final Brain Mouse Rotation (70-100%)\n    else if (scrollProgress >= 0.7 && brainGroupRef.current) {\n      // Lock main group rotation during dismantle phases\n      groupRef.current.rotation.x = 0;\n      groupRef.current.rotation.y = 0;\n      groupRef.current.scale.set(1, 1, 1);\n\n      // Apply mouse rotation to final brain\n      const rotationStrength = 0.8; // Slightly gentler than Phase 1\n      const targetRotationX =\n        (mousePosition.y - 0.5) * Math.PI * rotationStrength;\n      const targetRotationY =\n        (mousePosition.x - 0.5) *\n        Math.PI *\n        2 *\n        rotationStrength;\n\n      brainGroupRef.current.rotation.x = targetRotationX;\n      brainGroupRef.current.rotation.y = targetRotationY;\n    } else {\n      // Lock group rotation during dismantle phases\n      groupRef.current.rotation.x = 0;\n      groupRef.current.rotation.y = 0;\n      groupRef.current.scale.set(1, 1, 1);\n\n      // Reset brain rotation when not in final phase\n      if (brainGroupRef.current) {\n        brainGroupRef.current.rotation.x = 0;\n        brainGroupRef.current.rotation.y = 0;\n      }\n    }\n  });\n\n  return (\n    <group ref={groupRef}>\n      {/* Regular cubes for Phases 1-5 (fade out during Rubik's transformation) */}\n      {scrollProgress < 0.3138 &&\n        cubes.map((cube) => (\n          <CubePiece\n            key={cube.id}\n            cubeData={cube}\n            scrollProgress={scrollProgress}\n          />\n        ))}\n\n      {/* 729 Mini-cubes for Phases 5-9 (OPTIMIZED INSTANCED RENDERING) */}\n      {scrollProgress >= 0.1448 && (\n        <group ref={brainGroupRef}>\n          {/* Phase 5-6: Unified Rubik's Cubes - 27 unified mini-Rubik's cubes */}\n          <UnifiedRubiksCubes\n            parentCubes={cubes}\n            scrollProgress={scrollProgress}\n          />\n          \n          <MiniInstanced\n            miniCubes={miniCubes}\n            parentCubes={cubes}\n            scrollProgress={scrollProgress}\n          />\n        </group>\n      )}\n    </group>\n  );\n});\n\n// Scene component\nfunction Scene({\n  mousePosition,\n  scrollProgress,\n  setMousePosition,\n  setScrollProgress,\n}: {\n  mousePosition: { x: number; y: number };\n  scrollProgress: number;\n  setMousePosition: (pos: { x: number; y: number }) => void;\n  setScrollProgress: (progress: number) => void;\n}) {\n  const { camera } = useThree();\n\n  useFrame(() => {\n    // Smooth camera movement for brain formation phase\n    if (scrollProgress >= 0.7) {\n      const brainProgress = (scrollProgress - 0.7) / 0.3;\n      const smoothProgress = easeInOutCubic(brainProgress);\n\n      // Move camera closer for brain examination (FURTHER REDUCED SCALING)\n      const targetZ = 75; // REDUCED FROM 150 to 75 per user request\n      const currentZ = 50 + (targetZ - 50) * smoothProgress;\n      camera.position.setZ(currentZ);\n\n      // Slight orbital movement around brain\n      const orbitRadius = 3.75 * smoothProgress; // Adjusted for 50-75 camera range + 1.5x\n      const orbitAngle = Date.now() * 0.0005;\n      camera.position.x = Math.sin(orbitAngle) * orbitRadius;\n      camera.position.y =\n        Math.cos(orbitAngle) * orbitRadius * 0.5;\n\n      camera.lookAt(0, 0, 0);\n    } else {\n      // Return to standard position (FURTHER REDUCED SCALING)\n      camera.position.set(0, 0, 50); // REDUCED FROM 100 to 50 per user request\n      camera.lookAt(0, 0, 0);\n    }\n  });\n\n  useEffect(() => {\n    // Position camera further back to see all cubes within bounds with 5% padding\n\n    const handleMouseMove = (event: MouseEvent) => {\n      setMousePosition({\n        x: event.clientX / window.innerWidth,\n        y: event.clientY / window.innerHeight,\n      });\n    };\n\n    const handleScroll = () => {\n      // Use requestAnimationFrame for smoother scroll updates\n      requestAnimationFrame(() => {\n        const scrollY = window.scrollY;\n        const maxScroll =\n          document.documentElement.scrollHeight -\n          window.innerHeight;\n\n        // Direct mapping with smooth calculation\n        const progress = Math.min(\n          Math.max(scrollY / Math.max(maxScroll, 1), 0),\n          1,\n        );\n\n        setScrollProgress(progress);\n      });\n    };\n\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    window.addEventListener(\"scroll\", handleScroll, {\n      passive: true,\n    });\n\n    return () => {\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [camera, setMousePosition, setScrollProgress]);\n\n  return (\n    <>\n      {/* Enhanced atmospheric lighting for dark scene */}\n      <ambientLight\n        intensity={scrollProgress >= 0.87 ? 0.6 : 0.4}\n      />\n      <directionalLight\n        position={[10, 10, 10]}\n        intensity={1}\n        color=\"#ffffff\"\n      />\n      <pointLight position={[25, 25, 25]} intensity={2} />\n      <pointLight\n        position={[-25, -25, -25]}\n        intensity={1}\n        color=\"#4444ff\"\n      />\n      <pointLight\n        position={[0, 25, -25]}\n        intensity={1.5}\n        color=\"#ff4444\"\n      />\n      <pointLight\n        position={[0, -25, 25]}\n        intensity={1}\n        color=\"#44ff44\"\n      />\n\n      {/* Additional brain-specific lighting for Phase 9 */}\n      {scrollProgress >= 0.7 && (\n        <>\n          <pointLight\n            position={[-18.75, 7.5, 0]}\n            intensity={2}\n            color=\"#ff6699\"\n            distance={45}\n          />\n          <pointLight\n            position={[18.75, 7.5, 0]}\n            intensity={2}\n            color=\"#ff6699\"\n            distance={45}\n          />\n          <pointLight\n            position={[0, -11.25, -15]}\n            intensity={1.5}\n            color=\"#ff4477\"\n            distance={37.5}\n          />\n        </>\n      )}\n\n      <RubiksCube\n        mousePosition={mousePosition}\n        scrollProgress={scrollProgress}\n      />\n    </>\n  );\n}\n\nexport default function RubiksCubeExperience() {\n  const [mousePosition, setMousePosition] = useState({\n    x: 0.5,\n    y: 0.5,\n  });\n  const [scrollProgress, setScrollProgress] = useState(0);\n\n  const phaseName = getPhaseName(scrollProgress);\n  const currentPhase =\n    scrollProgress < 0.0201\n      ? 1\n      : scrollProgress < 0.1206\n        ? 2\n        : scrollProgress < 0.1448\n          ? 3\n          : scrollProgress < 0.3138\n            ? 5\n            : scrollProgress < 0.4103\n              ? 6\n              : scrollProgress < 0.5069\n                ? 7\n                : scrollProgress < 0.7\n                  ? 8\n                  : 9;\n\n  return (\n    <>\n      <div className=\"fixed inset-0 bg-gradient-to-b from-black via-gray-900 to-black\">\n        <Canvas\n          camera={{ fov: 75, near: 0.1, far: 1000 }}\n          gl={{ antialias: true, alpha: true }}\n          dpr={[1, 2]}\n          onCreated={({ gl }) => {\n            gl.setClearColor(\"#000000\", 1);\n          }}\n        >\n          <Suspense fallback={null}>\n            <Scene\n              mousePosition={mousePosition}\n              scrollProgress={scrollProgress}\n              setMousePosition={setMousePosition}\n              setScrollProgress={setScrollProgress}\n            />\n          </Suspense>\n        </Canvas>\n      </div>\n\n      {/* Scrollable content - Increased height by 30% to compensate for extended spiral */}\n      <div className=\"relative z-10 h-[1040vh]\">\n        {/* Phase Indicator - Enhanced */}\n        <div className=\"fixed top-4 right-4 z-20 text-white/80 bg-black/60 px-4 py-3 rounded-lg backdrop-blur\">\n          <div className=\"text-sm mb-2\">\n            <div className=\"text-cyan-400 font-medium\">\n              🚀 PHASE {currentPhase} -{\" \"}\n              {phaseName.toUpperCase()}\n            </div>\n            <div className=\"text-white/70\">\n              {scrollProgress < 0.025\n                ? \"Mouse Rotation: 1.5x SIZED CUBE AS ONE OBJECT\"\n                : scrollProgress < 0.1206\n                  ? \"First Dismantle: 27 LARGE PIECES EXPLODE OUTWARD\"\n                  : scrollProgress < 0.1448\n                    ? \"Settle with Perspective: LARGE PIECES HOLD POSITIONS\"\n                    : scrollProgress < 0.3138\n                      ? \"Rubik's Transform: 27 PIECES → 27 LARGE RUBIK'S CUBES\"\n                      : scrollProgress < 0.4103\n                        ? \"Second Dismantle: 729 LARGE PIECES (WHITE EDGES)\"\n                        : scrollProgress < 0.5069\n                          ? \"Living Motion: 729 PIECES HOVERING & ROTATING\"\n                          : scrollProgress < 0.7\n                            ? \"TRUE MORPHING: CUBES BLEND INTO BRAIN BUBBLES\"\n                            : \"Mouse-Rotatable Brain: ULTRA-SLOW SPIRAL (30%) → INTERACTIVE BRAIN\"}\n            </div>\n          </div>\n          <div className=\"text-xs text-white/60 mt-3\">\n            <div className=\"text-green-400 font-medium\">\n              ⚡ OPTIMIZED: INSTANCED RENDERING (729 → 4 Draw\n              Calls)\n            </div>\n            <div className=\"text-green-400 font-medium\">\n              ⚡ PERFORMANCE: Single useFrame Loop + Typed\n              Arrays\n            </div>\n            <div className=\"text-green-400 font-medium\">\n              ⚡ FIXED: 1.5x Object Size + WHITE Edges + Full\n              13% Spiral + Mouse Brain\n            </div>\n            <div className=\"text-white/80 mt-2\">\n              {scrollProgress < 0.0201\n                ? `Mouse: x=${Math.round(mousePosition.x * 100)}, y=${Math.round(mousePosition.y * 100)}`\n                : scrollProgress < 0.1206\n                  ? `Dismantle: ${Math.round(((scrollProgress - 0.0201) / 0.1005) * 100)}% | Dramatic cloud (5% padding)`\n                  : scrollProgress < 0.1448\n                    ? `Settle: ${Math.round(((scrollProgress - 0.1206) / 0.0242) * 100)}% | Perspective scaling`\n                    : scrollProgress < 0.3138\n                      ? `Transform: ${Math.round(((scrollProgress - 0.1448) / 0.169) * 100)}% | 27 pieces → 27 Rubik's cubes`\n                      : scrollProgress < 0.4103\n                        ? `Dismantle: ${Math.round(((scrollProgress - 0.3138) / 0.0965) * 100)}% | 729 pieces (FIXED CONSTRAINTS)`\n                        : scrollProgress < 0.5069\n                          ? `Living Motion: ${Math.round(((scrollProgress - 0.4103) / 0.0966) * 100)}% | 729 pieces hovering & rotating continuously`\n                          : scrollProgress < 0.7\n                            ? `True Morphing: ${Math.round(((scrollProgress - 0.5069) / 0.1931) * 100)}% | Cubes blend into brain bubbles (overlapping)`\n                            : `Ultra-Slow Spiral: ${Math.round(((scrollProgress - 0.7) / 0.3) * 100)}% | EXTENDED 30% spiral → Mouse-rotatable brain (1.5x scaled)`}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}","size_bytes":54297},"public/3danimation/src/components/RubiksCubeExperienceFixed.tsx":{"content":"import React, {\n  useRef,\n  useEffect,\n  useState,\n  useMemo,\n  Suspense,\n} from \"react\";\nimport { Canvas, useFrame, useThree } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\nimport { createNoise3D } from \"simplex-noise\";\nimport ThousandsBrainInstanced from \"./ThousandsBrainInstanced\";\nimport UnifiedRubiksCubes from \"./UnifiedRubiksCubes\";\n\n/*\n🎯 ENHANCED 10-PHASE RUBIK'S CUBE TO BRAIN ANIMATION:\n\n✅ Phase 1 (0-2.01%): Group Rotate\n   - Mouse-controlled rotation of entire cube as one object\n\n✅ Phase 2 (2.01-12.06%): First Dismantle  \n   - 27 pieces explode outward into dramatic cloud filling screen\n\n✅ Phase 3 (12.06-14.48%): Settle with Perspective\n   - Pieces hold positions with perspective scaling (larger at bottom)\n\n❌ Phase 4: CANCELLED - Time redistributed to Phases 5-10\n\n✅ Phase 5 (14.48-26.32%): Rubik's Cube Transform\n   - Each of 27 pieces transforms into its own Rubik's cube\n\n🆕 Phase 6 (26.32-35.09%): Rubik's Cube Showcase - NEW DEDICATED PHASE\n   - Full display of 27 perfect Rubik's cubes with crystal-clear white edges\n   - Individual rotations, breathing animations, living movement\n\n✅ Phase 7 (35.09-43.86%): Second Dismantle (FIXED CONSTRAINTS)\n   - 27 Rubik's cubes split into 729 pieces (proper 5% padding)\n\n✅ Phase 8 (43.86-52.63%): Independent Rotation\n   - 729 pieces settle and rotate independently, all visible\n\n✅ Phase 9 (52.63-70.18%): Neuromorphic Brain Transform - BRIGHT COLORS FOR TESTING\n   - Cubes transform in large waves: 100 cubes transform simultaneously\n   - RED, GREEN, BLUE, YELLOW, ORANGE brain regions for testing\n   - Size back to *0.7 as requested\n\n✅ Phase 10 (70.18-100%): Spiral Brain Formation - RESTRUCTURED\n   - Phase 10a (70.18-90%): 729 pieces from Phase 9 do spiral merge\n   - Phase 10b (90-100%): 3000 NEW smaller pieces appear for final detail\n*/\n\n// Get phase name for display (NEW 10-PHASE STRUCTURE)\nfunction getPhaseName(progress: number): string {\n  if (progress < 0.0201) return \"Group Rotate\";\n  if (progress < 0.1206) return \"First Dismantle\";\n  if (progress < 0.1448) return \"Settle with Perspective\";\n  if (progress < 0.2632) return \"Rubik's Cube Transform\";\n  if (progress < 0.3509) return \"🆕 Rubik's Cube Showcase\";\n  if (progress < 0.4386) return \"Second Dismantle\";\n  if (progress < 0.5263) return \"Independent Rotation\";\n  if (progress < 0.7018) return \"Neuromorphic Brain Transform\";\n  if (progress < 0.90) return \"Brain Spiral Formation (729 pieces)\";\n  return \"Ultra-Realistic Brain (3000 pieces)\";\n}\n\n// Cube data interface\ninterface CubeData {\n  id: string;\n  index: number;\n  position: [number, number, number];\n  color: string;\n  baseSpread: [number, number, number];\n  rotationData?: {\n    rotationSpeed: number;\n    rotationAxis: THREE.Vector3;\n    accumulatedRotation: THREE.Euler;\n  };\n}\n\n// Individual mini-cube data for Phase 5+ (729 total mini-cubes)\ninterface MiniCubeData {\n  id: string;\n  parentIndex: number; // Which of the 27 original cubes this came from\n  localIndex: number; // Which of the 27 pieces within that parent cube\n  localPosition: [number, number, number]; // Position within the parent Rubik's cube formation\n  baseSpread: [number, number, number]; // For Phase 6 dismantling (SAME as first dismantle)\n  rotationData: {\n    rotationSpeed: number;\n    rotationAxis: THREE.Vector3;\n    accumulatedRotation: THREE.Euler;\n  };\n  brainTransform: {\n    popDelay: number; // For popcorn effect timing\n    spiralRadius: number; // Starting spiral radius\n    spiralSpeed: number; // Spiral acceleration factor\n    brainPosition: [number, number, number]; // Target position in final brain formation\n    hemisphere: \"left\" | \"right\"; // Brain hemisphere assignment\n    brainRegion:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\"; // Brain region\n  };\n  size: number;\n}\n\n// ULTRA-REALISTIC Brain formation system - Creates thousands of equal-sized brain pieces\nconst createBrainFormation = (\n  totalPieces: number,\n): Array<{\n  position: [number, number, number];\n  hemisphere: \"left\" | \"right\";\n  region:\n    | \"frontal\"\n    | \"parietal\"\n    | \"temporal\"\n    | \"occipital\"\n    | \"cerebellum\";\n}> => {\n  const noise3D = createNoise3D();\n  const brainFormation: Array<{\n    position: [number, number, number];\n    hemisphere: \"left\" | \"right\";\n    region:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\";\n  }> = [];\n\n  // ENHANCED: Neuroanatomically accurate brain proportions based on human brain MRI data\n  const brainWidth = 20.0; // Slightly wider for realism\n  const brainHeight = 16.5; // More accurate height ratio  \n  const brainDepth = 24.0; // Enhanced front-to-back depth for frontal lobe prominence\n\n  for (let i = 0; i < totalPieces; i++) {\n    // Create layered brain distribution\n    const layerProgress = i / totalPieces;\n\n    // Use spherical coordinates with brain-like deformation\n    const phi = Math.acos(2 * Math.random() - 1); // 0 to π (vertical angle)\n    const theta = 2 * Math.PI * Math.random(); // 0 to 2π (horizontal angle)\n\n    // Base brain-shaped ellipsoid\n    let x = Math.sin(phi) * Math.cos(theta) * brainWidth * 0.5;\n    let y = Math.cos(phi) * brainHeight * 0.5;\n    let z = Math.sin(phi) * Math.sin(theta) * brainDepth * 0.5;\n\n    // Add realistic brain shape deformations\n    const frontWeight = Math.max(0, z / (brainDepth * 0.5)); // Frontal lobe prominence\n    const backWeight = Math.max(0, -z / (brainDepth * 0.5)); // Occipital lobe\n\n    // Frontal lobe expansion (front of brain is larger)\n    if (z > 0) {\n      x *= 1 + frontWeight * 0.3;\n      y *= 1 + frontWeight * 0.2;\n    }\n\n    // Brain stem narrowing (bottom center)\n    if (\n      y < -brainHeight * 0.3 &&\n      Math.abs(x) < brainWidth * 0.2 &&\n      Math.abs(z) < brainDepth * 0.2\n    ) {\n      x *= 0.4; // Narrow brain stem\n      z *= 0.4;\n    }\n\n    // ENHANCED: Neuroanatomically accurate cerebellum with characteristic foliation\n    if (y < -brainHeight * 0.1 && z < -brainDepth * 0.2) {\n      y -= 2.8; // More prominent cerebellum positioning\n      x *= 0.75; // Narrower for anatomical accuracy\n      \n      // Add characteristic cerebellar foliation pattern\n      const cerebellarNoise = noise3D(x * 0.2, y * 0.2, z * 0.2) * 1.5;\n      y += Math.sin(x * 0.3) * cerebellarNoise * 0.5; // Horizontal foliation\n    }\n\n    // ULTRA-ENHANCED: 4-octave noise for neuromorphic cortical folding (React 19 + Three.js 0.172.0)\n    const noiseScale = 0.06; // Finer scale for ultra-realistic brain surface detail\n    \n    // 4-octave fractal noise for complex cortical patterns\n    const surfaceNoise =\n      noise3D(x * noiseScale, y * noiseScale, z * noiseScale) * 5.0 +      // Primary cortical folds\n      noise3D(x * noiseScale * 2, y * noiseScale * 2, z * noiseScale * 2) * 2.5 +  // Secondary gyri\n      noise3D(x * noiseScale * 4, y * noiseScale * 4, z * noiseScale * 4) * 1.25 + // Tertiary sulci\n      noise3D(x * noiseScale * 8, y * noiseScale * 8, z * noiseScale * 8) * 0.625; // Micro-texture\n\n    // Additional layer for region-specific cortical complexity\n    const regionComplexity = Math.sin(z * 0.1) * Math.cos(x * 0.08) * 1.5;\n    const combinedNoise = surfaceNoise + regionComplexity;\n\n    // Apply neuromorphic surface displacement with anatomically accurate folding\n    const surfaceRadius = Math.sqrt(x * x + y * y + z * z);\n    if (surfaceRadius > 0) {\n      const normalX = x / surfaceRadius;\n      const normalY = y / surfaceRadius;\n      const normalZ = z / surfaceRadius;\n\n      // Enhanced cortical folding with region-specific intensity\n      let foldingStrength = 3.0; // Base neuromorphic folding strength\n      \n      // Frontal cortex has deeper sulci\n      if (z > brainDepth * 0.2) {\n        foldingStrength *= 1.4;\n      }\n      \n      // Temporal lobes have complex folding patterns\n      if (Math.abs(x) > brainWidth * 0.3 && y > -brainHeight * 0.2) {\n        foldingStrength *= 1.3;\n      }\n\n      // Apply the enhanced surface displacement\n      x += normalX * combinedNoise * foldingStrength;\n      y += normalY * combinedNoise * foldingStrength;\n      z += normalZ * combinedNoise * foldingStrength;\n    }\n\n    // Determine hemisphere\n    const hemisphere: \"left\" | \"right\" =\n      x < 0 ? \"left\" : \"right\";\n\n    // Determine brain region based on position\n    let region:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\";\n\n    if (y < -brainHeight * 0.1 && z < -brainDepth * 0.2) {\n      region = \"cerebellum\";\n    } else if (z > brainDepth * 0.2) {\n      region = \"frontal\";\n    } else if (z < -brainDepth * 0.2) {\n      region = \"occipital\";\n    } else if (\n      Math.abs(x) > brainWidth * 0.3 &&\n      y > -brainHeight * 0.2\n    ) {\n      region = \"temporal\";\n    } else {\n      region = \"parietal\";\n    }\n\n    brainFormation.push({\n      position: [x, y, z],\n      hemisphere,\n      region,\n    });\n  }\n\n  return brainFormation;\n};\n\n// Smooth easing functions for butter-smooth animations\nconst easeInOutCubic = (t: number): number => {\n  return t < 0.5\n    ? 4 * t * t * t\n    : 1 - Math.pow(-2 * t + 2, 3) / 2;\n};\n\nconst easeOutElastic = (t: number): number => {\n  if (t === 0) return 0;\n  if (t === 1) return 1;\n  return (\n    Math.pow(2, -10 * t) * Math.sin((t - 0.1) * 5 * Math.PI) + 1\n  );\n};\n\nconst easeInOutQuart = (t: number): number => {\n  return t < 0.5\n    ? 8 * t * t * t * t\n    : 1 - Math.pow(-2 * t + 2, 4) / 2;\n};\n\nconst easeOutBack = (t: number): number => {\n  const c1 = 1.70158;\n  const c3 = c1 + 1;\n  return 1 + c3 * Math.pow(t - 1, 3) + c1 * Math.pow(t - 1, 2);\n};\n\n// Smooth interpolation utility\nconst smoothLerp = (\n  a: number,\n  b: number,\n  t: number,\n): number => {\n  return a + (b - a) * easeInOutQuart(t);\n};\n\nconst smoothVec3Lerp = (\n  a: [number, number, number],\n  b: [number, number, number],\n  t: number,\n): [number, number, number] => {\n  return [\n    smoothLerp(a[0], b[0], t),\n    smoothLerp(a[1], b[1], t),\n    smoothLerp(a[2], b[2], t),\n  ];\n};\n\n// Individual cube piece component - PHASES 1-4 WITH BUTTER-SMOOTH TRANSITIONS\nconst CubePiece = React.memo(function CubePiece({\n  cubeData,\n  scrollProgress,\n}: {\n  cubeData: CubeData;\n  scrollProgress: number;\n}) {\n  const groupRef = useRef<any>(null);\n\n  // Create edge geometry for black wireframe edges (1.5x SIZE)\n  const edgeGeometry = useMemo(() => {\n    return new THREE.EdgesGeometry(new THREE.BoxGeometry(5.25, 5.25, 5.25));\n  }, []);\n\n  useFrame(() => {\n    if (!groupRef.current) return;\n\n    let position: [number, number, number] = [\n      ...cubeData.position,\n    ];\n    let scale = 1;\n    let shakeOffset = [0, 0, 0];\n\n    // Calculate screen-adaptive spread values (FURTHER REDUCED SCALING)\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n    const aspectRatio = viewportWidth / viewportHeight;\n\n    const fov = 75;\n    const fovRad = (fov * Math.PI) / 180;\n    const screenWidth3D = 2 * Math.tan(fovRad / 2) * 50; // FURTHER REDUCED SCALING for camera at 50\n    const screenHeight3D = screenWidth3D / aspectRatio;\n\n    // 5% padding around border - constrain to 90% of screen with 5% padding on each side\n    const maxSpreadX = screenWidth3D * 0.45; // 45% to each side (90% total with 5% padding)\n    const maxSpreadY = screenHeight3D * 0.45; // 45% to each side (90% total with 5% padding)\n    const maxSpreadZ = 30; // FURTHER REDUCED SCALING: 60 -> 30\n\n    // Phase 1: Group Rotate (0.00-2.01%)\n    if (scrollProgress < 0.0201) {\n      position = [...cubeData.position];\n      scale = 1;\n\n      if (groupRef.current && cubeData.rotationData) {\n        groupRef.current.rotation.set(0, 0, 0);\n      }\n    }\n    // Phase 2: First Dismantle (2.01-12.06%) - Dramatic cloud filling screen\n    else if (\n      scrollProgress >= 0.0201 &&\n      scrollProgress < 0.1206\n    ) {\n      const rawProgress = (scrollProgress - 0.0201) / 0.1005;\n      const dismantleProgress = easeInOutCubic(rawProgress);\n\n      position = [\n        cubeData.position[0] +\n          cubeData.baseSpread[0] *\n            dismantleProgress *\n            maxSpreadX,\n        cubeData.position[1] +\n          cubeData.baseSpread[1] *\n            dismantleProgress *\n            maxSpreadY,\n        cubeData.position[2] +\n          cubeData.baseSpread[2] *\n            dismantleProgress *\n            maxSpreadZ,\n      ];\n\n      const normalizedY =\n        (position[1] - -maxSpreadY) / (2 * maxSpreadY);\n      scale = Math.max(\n        0.25,\n        Math.min(1.0, 1.0 - normalizedY * 0.75),\n      );\n    }\n    // Phase 3: Settle with Perspective (12.06-14.48%)\n    else if (\n      scrollProgress >= 0.1206 &&\n      scrollProgress < 0.1448\n    ) {\n      position = [\n        cubeData.position[0] +\n          cubeData.baseSpread[0] * maxSpreadX,\n        cubeData.position[1] +\n          cubeData.baseSpread[1] * maxSpreadY,\n        cubeData.position[2] +\n          cubeData.baseSpread[2] * maxSpreadZ,\n      ];\n\n      const normalizedY =\n        (position[1] - -maxSpreadY) / (2 * maxSpreadY);\n      scale = Math.max(\n        0.25,\n        Math.min(1.0, 1.0 - normalizedY * 0.75),\n      );\n    }\n    // Phase 5: Rubik's Cube Transform (14.48-26.32%)\n    else if (\n      scrollProgress >= 0.1448 &&\n      scrollProgress < 0.2632\n    ) {\n      const rawProgress = (scrollProgress - 0.1448) / 0.1184;\n\n      position = [\n        cubeData.position[0] +\n          cubeData.baseSpread[0] * maxSpreadX,\n        cubeData.position[1] +\n          cubeData.baseSpread[1] * maxSpreadY,\n        cubeData.position[2] +\n          cubeData.baseSpread[2] * maxSpreadZ,\n      ];\n\n      const normalizedY =\n        (position[1] - -maxSpreadY) / (2 * maxSpreadY);\n      const baseScale = Math.max(\n        0.25,\n        Math.min(1.0, 1.0 - normalizedY * 0.75),\n      );\n\n      // Fade out as Rubik's cubes appear\n      const fadeProgress = easeInOutCubic(rawProgress);\n      scale = baseScale * (1 - fadeProgress);\n    }\n    // Phase 6: Rubik's Cube Showcase (26.32-35.09%) - COMPLETELY HIDDEN\n    else if (\n      scrollProgress >= 0.2632 &&\n      scrollProgress < 0.3509\n    ) {\n      // Original cubes are completely hidden during showcase\n      scale = 0;\n    }\n    // Phase 7+: Hide original cubes (Rubik's cubes and mini-cubes take over)\n    else {\n      scale = 0;\n    }\n\n    // Apply position with shake, scale, and immediate response\n    groupRef.current.position.set(\n      position[0] + shakeOffset[0],\n      position[1] + shakeOffset[1],\n      position[2] + shakeOffset[2],\n    );\n    groupRef.current.scale.setScalar(scale);\n  });\n\n  return (\n    <group ref={groupRef}>\n      <mesh>\n        <boxGeometry args={[5.25, 5.25, 5.25]} />\n        <meshStandardMaterial\n          color=\"#00ffff\"\n          emissive=\"#0088aa\"\n          emissiveIntensity={0.3}\n          metalness={0.1}\n          roughness={0.2}\n        />\n      </mesh>\n      <lineSegments geometry={edgeGeometry}>\n        <lineBasicMaterial color=\"#ffffff\" linewidth={6} />\n      </lineSegments>\n    </group>\n  );\n});\n\n// Instanced mini-cubes component for efficient rendering of 729 pieces\nconst MiniInstanced = React.memo(function MiniInstanced({\n  miniCubes,\n  parentCubes,\n  scrollProgress,\n}: {\n  miniCubes: MiniCubeData[];\n  parentCubes: CubeData[];\n  scrollProgress: number;\n}) {\n  const count = miniCubes.length;\n  const meshRef = useRef<THREE.InstancedMesh | null>(null);\n  const wireRef = useRef<THREE.InstancedMesh | null>(null);\n  const sphereMeshRef = useRef<THREE.InstancedMesh | null>(null);\n  const sphereWireRef = useRef<THREE.InstancedMesh | null>(null);\n  const dummy = useMemo(() => new THREE.Object3D(), []);\n\n  // Shared geometries and materials (50/75 SCALE + 1.5x SIZE)\n  const cubeGeo = useMemo(\n    () => new THREE.BoxGeometry(2.1, 2.1, 2.1),\n    [],\n  );\n  const cubeEdgeGeo = useMemo(\n    () => new THREE.EdgesGeometry(cubeGeo),\n    [],\n  ); // WHITE EDGES for cubes (during brain phases)\n  // ENHANCED: Higher resolution sphere geometry for ultra-realistic brain morphing\n  const sphereGeo = useMemo(\n    () => new THREE.SphereGeometry(2.1 * 0.7, 16, 16), // Back to original size *0.7 as requested\n    [],\n  );\n  const sphereEdgeGeo = useMemo(\n    () => new THREE.EdgesGeometry(sphereGeo),\n    [],\n  ); // WHITE EDGES for spheres (brain contrast)\n  const cubeMat = useMemo(\n    () =>\n      new THREE.MeshStandardMaterial({\n        color: \"#00ffff\",\n        emissive: \"#0088aa\",\n        emissiveIntensity: 0.4,\n        metalness: 0.1,\n        roughness: 0.2,\n        transparent: true,\n        opacity: 1,\n      }),\n    [],\n  );\n  const wireMat = useMemo(\n    () =>\n      new THREE.LineBasicMaterial({\n        color: \"#ffffff\", // FIXED: WHITE edges for brain cubes for contrast against pink\n        transparent: false, // Make edges fully opaque\n        linewidth: 6, // WebGL linewidth limitation\n        opacity: 1,\n      }),\n    [],\n  );\n\n  // Enhanced edge material for maximum visibility - WHITE EDGES for better contrast\n  const edgeMat = useMemo(\n    () =>\n      new THREE.LineBasicMaterial({\n        color: \"#ffffff\", // WHITE edges for maximum contrast against blue cubes\n        transparent: false,\n        opacity: 1,\n        linewidth: 6, // Same thickness as original cubes\n      }),\n    [],\n  );\n  // ENHANCED: Ultra-realistic brain material with vertex colors for regional variation\n  const brainMat = useMemo(\n    () =>\n      new THREE.MeshStandardMaterial({\n        color: \"#ffffff\", // White base - let vertex colors control the final color\n        emissive: \"#ff2266\",\n        emissiveIntensity: 0.6,\n        metalness: 0.15, // Reduced for more biological appearance\n        roughness: 0.7, // Increased for realistic brain tissue texture\n        transparent: true,\n        opacity: 0.95, // Slightly transparent for organic feel\n        vertexColors: true, // Enable per-instance vertex colors for brain regions\n      }),\n    [],\n  );\n\n  // Precompute and pack per-instance data into typed arrays\n  const packed = useMemo(() => {\n    const basePos = new Float32Array(count * 3);\n    const localPos = new Float32Array(count * 3);\n    const baseSpread = new Float32Array(count * 3);\n    const brainTarget = new Float32Array(count * 3);\n    const popDelay = new Float32Array(count);\n    const rotAxis = new Float32Array(count * 3);\n    const rotSpeed = new Float32Array(count);\n    const sizes = new Float32Array(count);\n    const brainRegionColors = new Float32Array(count * 3); // RGB colors\n    const isInFirstWave = new Float32Array(count); // Boolean as float\n\n    // Calculate screen-adaptive spread values once\n    const viewportWidth =\n      typeof window !== \"undefined\" ? window.innerWidth : 1920;\n    const viewportHeight =\n      typeof window !== \"undefined\" ? window.innerHeight : 1080;\n    const aspectRatio = viewportWidth / viewportHeight;\n    const fov = 75;\n    const fovRad = (fov * Math.PI) / 180;\n    const screenWidth3D = 2 * Math.tan(fovRad / 2) * 50; // FURTHER REDUCED SCALING for camera at 50\n    const screenHeight3D = screenWidth3D / aspectRatio;\n    const maxSpreadX = screenWidth3D * 0.45;\n    const maxSpreadY = screenHeight3D * 0.45;\n    const maxSpreadZ = 30; // FURTHER REDUCED SCALING: 60 -> 30\n\n    for (let i = 0; i < count; i++) {\n      const m = miniCubes[i];\n      const parent = parentCubes[m.parentIndex];\n\n      // Precompute parent position (Phase 4 final position)\n      const parentPos = [\n        parent.position[0] + parent.baseSpread[0] * maxSpreadX,\n        parent.position[1] + parent.baseSpread[1] * maxSpreadY,\n        parent.position[2] + parent.baseSpread[2] * maxSpreadZ,\n      ];\n\n      basePos.set(parentPos, i * 3);\n      localPos.set(m.localPosition, i * 3);\n      baseSpread.set(m.baseSpread, i * 3);\n      brainTarget.set(m.brainTransform.brainPosition, i * 3);\n      popDelay[i] = m.brainTransform.popDelay ?? 0;\n      rotAxis.set(\n        [\n          m.rotationData.rotationAxis.x,\n          m.rotationData.rotationAxis.y,\n          m.rotationData.rotationAxis.z,\n        ],\n        i * 3,\n      );\n      rotSpeed[i] = m.rotationData.rotationSpeed;\n      sizes[i] = m.size;\n\n      // Precompute brain region colors - TESTING: Completely different colors (no pink)\n      const getBrainRegionColorRGB = (\n        region: string,\n      ): [number, number, number] => {\n        switch (region) {\n          case \"frontal\":\n            return [1.0, 0.0, 0.0]; // RED - frontal cortex\n          case \"parietal\":\n            return [0.0, 1.0, 0.0]; // GREEN - parietal lobe\n          case \"temporal\":\n            return [0.0, 0.0, 1.0]; // BLUE - temporal lobe\n          case \"occipital\":\n            return [1.0, 1.0, 0.0]; // YELLOW - occipital lobe\n          case \"cerebellum\":\n            return [1.0, 0.5, 0.0]; // ORANGE - cerebellum\n          default:\n            return [0.5, 0.0, 1.0]; // PURPLE - default\n        }\n      };\n\n      const colorRGB = getBrainRegionColorRGB(\n        m.brainTransform.brainRegion,\n      );\n      brainRegionColors.set(colorRGB, i * 3);\n\n      // Check if in first wave (first 100 cubes for larger simultaneous groups)\n      const cubeIndex = m.parentIndex * 27 + m.localIndex;\n      isInFirstWave[i] = cubeIndex < 100 ? 1 : 0;\n    }\n\n    return {\n      basePos,\n      localPos,\n      baseSpread,\n      brainTarget,\n      popDelay,\n      rotAxis,\n      rotSpeed,\n      sizes,\n      brainRegionColors,\n      isInFirstWave,\n      maxSpreadX,\n      maxSpreadY,\n      maxSpreadZ,\n    };\n  }, [miniCubes, parentCubes]);\n\n  useFrame(() => {\n    if (\n      !meshRef.current ||\n      !wireRef.current ||\n      !sphereMeshRef.current ||\n      !sphereWireRef.current\n    )\n      return;\n\n    const mesh = meshRef.current;\n    const wire = wireRef.current;\n    const sphereMesh = sphereMeshRef.current;\n    const sphereWire = sphereWireRef.current;\n\n    // Initialize brain instance colors if not done yet (for regional color variation) \n    if (!sphereMesh.instanceColor && scrollProgress >= 0.5263) {\n      const colors = new Float32Array(count * 3);\n      for (let j = 0; j < count; j++) {\n        const regionColorR = packed.brainRegionColors[j * 3 + 0];\n        const regionColorG = packed.brainRegionColors[j * 3 + 1]; \n        const regionColorB = packed.brainRegionColors[j * 3 + 2];\n        colors[j * 3] = regionColorR;\n        colors[j * 3 + 1] = regionColorG;\n        colors[j * 3 + 2] = regionColorB;\n      }\n      sphereMesh.instanceColor = new THREE.InstancedBufferAttribute(colors, 3);\n    }\n\n    // Update all 729 instances in a single loop\n    for (let i = 0; i < count; i++) {\n      // Read packed data for this instance\n      const px = packed.basePos[i * 3 + 0];\n      const py = packed.basePos[i * 3 + 1];\n      const pz = packed.basePos[i * 3 + 2];\n      const lx = packed.localPos[i * 3 + 0];\n      const ly = packed.localPos[i * 3 + 1];\n      const lz = packed.localPos[i * 3 + 2];\n      const bx = packed.baseSpread[i * 3 + 0];\n      const by = packed.baseSpread[i * 3 + 1];\n      const bz = packed.baseSpread[i * 3 + 2];\n      const btx = packed.brainTarget[i * 3 + 0];\n      const bty = packed.brainTarget[i * 3 + 1];\n      const btz = packed.brainTarget[i * 3 + 2];\n      const cubeIndex = Math.floor(i / 27) * 27 + (i % 27);\n      const isFirstWave = packed.isInFirstWave[i] === 1;\n\n      // Calculate transformation progress with SIMULTANEOUS WAVES\n      let transformProgress = 0;\n      let isInBrainFormation = false;\n\n      if (scrollProgress >= 0.5263 && scrollProgress < 0.7018) {\n        const rawProgress = (scrollProgress - 0.5263) / 0.1755;\n\n        // More simultaneous transformation with wave groups\n        const waveSize = 100; // Transform 100 cubes at once\n        const waveIndex = Math.floor(cubeIndex / waveSize);\n        const totalWaves = Math.ceil(729 / waveSize);\n\n        // Each wave starts with a small delay but transforms quickly\n        const waveStartDelay = (waveIndex / totalWaves) * 0.4; // Only 40% of phase for staggering\n        const waveProgress = Math.max(\n          0,\n          (rawProgress - waveStartDelay) / (1 - waveStartDelay),\n        );\n\n        // Fast transformation once wave starts\n        transformProgress = Math.min(\n          1,\n          easeInOutCubic(waveProgress) * 1.5,\n        );\n        transformProgress = Math.max(0, transformProgress);\n      } else if (scrollProgress >= 0.7018) {\n        transformProgress = 1;\n        isInBrainFormation = true;\n      }\n\n      // Calculate parent's perspective scale\n      const normalizedY =\n        (py - -packed.maxSpreadY) / (2 * packed.maxSpreadY);\n      const perspectiveScale = Math.max(\n        0.25,\n        Math.min(1.0, 1.0 - normalizedY * 0.75),\n      );\n\n      let position: [number, number, number] = [0, 0, 0];\n      let scale = 0;\n      let rotation = new THREE.Euler(0, 0, 0);\n\n      // UPDATED PHASE 10 LOGIC: 729 pieces continue through spiral (70.18-90%), then hide (90-100%)\n      if (scrollProgress >= 0.7018 && scrollProgress < 0.90) {\n        // Phase 10a: 729 pieces spiral to center (70.18-90%)\n        const spiralProgress = (scrollProgress - 0.7018) / 0.1982;\n        const easedSpiral = easeInOutCubic(spiralProgress);\n        \n        // Calculate spiral parameters\n        const spiralRadius = 30 * (1 - easedSpiral);\n        const spiralAngle = easedSpiral * Math.PI * 4; // 2 full rotations\n        const spiralHeight = Math.sin(spiralProgress * Math.PI) * 10;\n        \n        // Start from current brain position and spiral to center\n        const startX = btx;\n        const startY = bty;\n        const startZ = btz;\n        \n        const spiralX = Math.cos(spiralAngle + i * 0.1) * spiralRadius;\n        const spiralY = Math.sin(spiralAngle + i * 0.05) * spiralRadius + spiralHeight;\n        const spiralZ = Math.sin(spiralAngle + i * 0.08) * spiralRadius;\n        \n        // Move from brain position to spiral to center\n        position = [\n          startX + (spiralX - startX) * (1 - easedSpiral),\n          startY + (spiralY - startY) * (1 - easedSpiral),\n          startZ + (spiralZ - startZ) * (1 - easedSpiral)\n        ];\n        \n        // Keep brain form and colors\n        scale = perspectiveScale * 0.7; // Same as Phase 9 brain size\n        \n        // Set visibility for brain form\n        dummy.position.set(position[0], position[1], position[2]);\n        dummy.scale.setScalar(scale);\n        dummy.rotation.set(0, 0, 0);\n        dummy.updateMatrix();\n        sphereMesh.setMatrixAt(i, dummy.matrix);\n        sphereWire.setMatrixAt(i, dummy.matrix);\n        \n        // Hide cube form\n        mesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        wire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        \n        continue;\n      }\n      // Phase 10b: 729 pieces fade out as 3000 take over (90-100%)\n      else if (scrollProgress >= 0.90) {\n        // Hide 729 pieces completely - 3000 pieces handle the final brain\n        mesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        wire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        sphereMesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        sphereWire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        continue;\n      }\n\n      // Phase logic - UPDATED: MiniInstanced starts from Phase 7 (individual pieces)\n      // Phases 5-6 are handled by UnifiedRubiksCubes component\n      if (\n        scrollProgress >= 0.3509 &&\n        scrollProgress < 0.4386\n      ) {\n        // Phase 7: Second dismantle (from unified Rubik's cubes to individual pieces)\n        const rawProgress = (scrollProgress - 0.3509) / 0.0877;\n        const dismantleProgress = easeInOutCubic(rawProgress);\n\n        // Start from the unified Rubik's cube position (same as Phase 3 spread position)\n        const unifiedCubePosition = [\n          px, // Use parent position directly\n          py,\n          pz,\n        ];\n        const reducedSpreadMultiplier = 0.3;\n\n        position = [\n          unifiedCubePosition[0] +\n            bx *\n              dismantleProgress *\n              packed.maxSpreadX *\n              reducedSpreadMultiplier,\n          unifiedCubePosition[1] +\n            by *\n              dismantleProgress *\n              packed.maxSpreadY *\n              reducedSpreadMultiplier,\n          unifiedCubePosition[2] +\n            bz *\n              dismantleProgress *\n              packed.maxSpreadZ *\n              reducedSpreadMultiplier,\n        ];\n\n        const newNormalizedY =\n          (position[1] - -packed.maxSpreadY) /\n          (2 * packed.maxSpreadY);\n        scale = Math.max(\n          0.25,\n          Math.min(1.0, 1.0 - newNormalizedY * 0.75),\n        );\n      } else if (\n        scrollProgress >= 0.4386 &&\n        scrollProgress < 0.5263\n      ) {\n        // Phase 8: Independent Rotation with LIVING MOVEMENT\n        const rawProgress = (scrollProgress - 0.4386) / 0.0877;\n        const rotationProgress = easeInOutCubic(rawProgress);\n\n        const basePosition = [\n          px + lx * perspectiveScale,\n          py + ly * perspectiveScale,\n          pz + lz * perspectiveScale,\n        ];\n        const reducedSpreadMultiplier = 0.3;\n\n        // Base position with hovering motion\n        const time = Date.now() * 0.001;\n        const hoverAmplitude = 1.5; // Gentle hovering (50/75 scale + 1.5x)\n        const hoverX =\n          Math.sin(time + i * 0.1) * hoverAmplitude;\n        const hoverY =\n          Math.cos(time * 0.7 + i * 0.15) * hoverAmplitude;\n        const hoverZ =\n          Math.sin(time * 0.5 + i * 0.12) * hoverAmplitude;\n\n        position = [\n          basePosition[0] +\n            bx * packed.maxSpreadX * reducedSpreadMultiplier +\n            hoverX,\n          basePosition[1] +\n            by * packed.maxSpreadY * reducedSpreadMultiplier +\n            hoverY,\n          basePosition[2] +\n            bz * packed.maxSpreadZ * reducedSpreadMultiplier +\n            hoverZ,\n        ];\n\n        const newNormalizedY =\n          (position[1] - -packed.maxSpreadY) /\n          (2 * packed.maxSpreadY);\n        scale = Math.max(\n          0.25,\n          Math.min(1.0, 1.0 - newNormalizedY * 0.75),\n        );\n\n        // Enhanced rotation with multiple axes for variety\n        const time2 = Date.now() * 0.001;\n        rotation = new THREE.Euler(\n          time2 * packed.rotAxis[i * 3 + 0] * packed.rotSpeed[i],\n          time2 * packed.rotAxis[i * 3 + 1] * packed.rotSpeed[i],\n          time2 * packed.rotAxis[i * 3 + 2] * packed.rotSpeed[i],\n        );\n      }\n\n      // Apply transformation based on transform progress (Phase 9)\n      if (transformProgress > 0) {\n        // Morphing from cube to brain shape\n        \n        const basePosition = [\n          px + lx * perspectiveScale,\n          py + ly * perspectiveScale,\n          pz + lz * perspectiveScale,\n        ];\n        const reducedSpreadMultiplier = 0.3;\n\n        // Base position with slight hovering\n        const time = Date.now() * 0.001;\n        const hoverAmplitude = 0.8; // Reduced hovering during transformation\n        const hoverX =\n          Math.sin(time + i * 0.1) * hoverAmplitude * (1 - transformProgress);\n        const hoverY =\n          Math.cos(time * 0.7 + i * 0.15) * hoverAmplitude * (1 - transformProgress);\n        const hoverZ =\n          Math.sin(time * 0.5 + i * 0.12) * hoverAmplitude * (1 - transformProgress);\n\n        const cubePosition = [\n          basePosition[0] +\n            bx * packed.maxSpreadX * reducedSpreadMultiplier +\n            hoverX,\n          basePosition[1] +\n            by * packed.maxSpreadY * reducedSpreadMultiplier +\n            hoverY,\n          basePosition[2] +\n            bz * packed.maxSpreadZ * reducedSpreadMultiplier +\n            hoverZ,\n        ];\n\n        // Brain position\n        const brainPosition = [btx, bty, btz];\n\n        // Smooth interpolation between cube and brain positions\n        position = [\n          cubePosition[0] + (brainPosition[0] - cubePosition[0]) * transformProgress,\n          cubePosition[1] + (brainPosition[1] - cubePosition[1]) * transformProgress,\n          cubePosition[2] + (brainPosition[2] - cubePosition[2]) * transformProgress,\n        ];\n\n        const cubeScale = Math.max(\n          0.25,\n          Math.min(1.0, 1.0 - normalizedY * 0.75),\n        );\n        const brainScale = perspectiveScale * 0.7; // Brain pieces are smaller\n\n        // Smooth scale transition\n        scale = cubeScale + (brainScale - cubeScale) * transformProgress;\n\n        // Show both cube (fading out) and brain (fading in) during transformation\n        if (transformProgress < 1) {\n          // Show cube form (fading out)\n          dummy.position.set(position[0], position[1], position[2]);\n          dummy.scale.setScalar(scale * (1 - transformProgress));\n          dummy.rotation.copy(rotation);\n          dummy.updateMatrix();\n          mesh.setMatrixAt(i, dummy.matrix);\n          wire.setMatrixAt(i, dummy.matrix);\n\n          // Show brain form (fading in)\n          dummy.scale.setScalar(scale * transformProgress);\n          dummy.updateMatrix();\n          sphereMesh.setMatrixAt(i, dummy.matrix);\n          sphereWire.setMatrixAt(i, dummy.matrix);\n        } else {\n          // Fully transformed - show only brain form\n          dummy.position.set(position[0], position[1], position[2]);\n          dummy.scale.setScalar(scale);\n          dummy.rotation.set(0, 0, 0);\n          dummy.updateMatrix();\n          sphereMesh.setMatrixAt(i, dummy.matrix);\n          sphereWire.setMatrixAt(i, dummy.matrix);\n\n          // Hide cube form\n          mesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n          wire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        }\n      } else {\n        // Show cube form only\n        dummy.position.set(position[0], position[1], position[2]);\n        dummy.scale.setScalar(scale);\n        dummy.rotation.copy(rotation);\n        dummy.updateMatrix();\n        mesh.setMatrixAt(i, dummy.matrix);\n        wire.setMatrixAt(i, dummy.matrix);\n\n        // Hide brain form\n        sphereMesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        sphereWire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n      }\n    }\n\n    mesh.instanceMatrix.needsUpdate = true;\n    wire.instanceMatrix.needsUpdate = true;\n    sphereMesh.instanceMatrix.needsUpdate = true;\n    sphereWire.instanceMatrix.needsUpdate = true;\n  });\n\n  return (\n    <group>\n      {/* Cube instances */}\n      <instancedMesh\n        ref={meshRef}\n        args={[cubeGeo, cubeMat, count]}\n        visible={true}\n      />\n      {/* Cube wireframe instances */}\n      <instancedMesh\n        ref={wireRef}\n        args={[cubeEdgeGeo, edgeMat, count]}\n        visible={true}\n      />\n      {/* Brain sphere instances */}\n      <instancedMesh\n        ref={sphereMeshRef}\n        args={[sphereGeo, brainMat, count]}\n        visible={true}\n      />\n      {/* Brain wireframe instances */}\n      <instancedMesh\n        ref={sphereWireRef}\n        args={[sphereEdgeGeo, wireMat, count]}\n        visible={true}\n      />\n    </group>\n  );\n});\n\n// Mouse-controlled rotation system\nconst MouseRotationController = React.memo(function MouseRotationController({\n  groupRef,\n  scrollProgress,\n}: {\n  groupRef: React.RefObject<THREE.Group>;\n  scrollProgress: number;\n}) {\n  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });\n  \n  useFrame(() => {\n    if (!groupRef.current) return;\n\n    // Only apply mouse rotation during Phase 1 (0-2.01%)\n    if (scrollProgress < 0.0201) {\n      const rotationX = (mousePos.y * Math.PI) / 6; // ±30 degrees max\n      const rotationY = (mousePos.x * Math.PI) / 6; // ±30 degrees max\n      \n      groupRef.current.rotation.x = rotationX;\n      groupRef.current.rotation.y = rotationY;\n    } else {\n      // Reset rotation after Phase 1\n      groupRef.current.rotation.x = 0;\n      groupRef.current.rotation.y = 0;\n    }\n  });\n\n  useEffect(() => {\n    const handleMouseMove = (event: MouseEvent) => {\n      // Only track mouse during Phase 1\n      if (scrollProgress >= 0.0201) return;\n      \n      const normalizedX = (event.clientX / window.innerWidth) * 2 - 1; // -1 to 1\n      const normalizedY = -(event.clientY / window.innerHeight) * 2 + 1; // -1 to 1 (inverted)\n      \n      setMousePos({ x: normalizedX, y: normalizedY });\n    };\n\n    window.addEventListener('mousemove', handleMouseMove);\n    return () => window.removeEventListener('mousemove', handleMouseMove);\n  }, [scrollProgress]);\n\n  return null;\n});\n\n// Main 3D scene component\nconst Scene = React.memo(function Scene() {\n  const mainGroupRef = useRef<THREE.Group>(null);\n  const [scrollProgress, setScrollProgress] = useState(0);\n\n  // Generate initial cube data (27 pieces)\n  const { cubes, miniCubes } = useMemo(() => {\n    const cubes: CubeData[] = [];\n    const miniCubes: MiniCubeData[] = [];\n    const brainFormation = createBrainFormation(729);\n    \n    let brainIndex = 0;\n    \n    for (let i = 0; i < 27; i++) {\n      const x = (i % 3) - 1;\n      const y = Math.floor((i / 3) % 3) - 1;\n      const z = Math.floor(i / 9) - 1;\n      \n      const position: [number, number, number] = [x * 6, y * 6, z * 6];\n      \n      // Generate spread pattern for this cube\n      const baseSpread: [number, number, number] = [\n        (Math.random() - 0.5) * 2,\n        (Math.random() - 0.5) * 2,\n        (Math.random() - 0.5) * 2,\n      ];\n      \n      const cube: CubeData = {\n        id: `cube-${i}`,\n        index: i,\n        position,\n        color: \"#00ffff\",\n        baseSpread,\n        rotationData: {\n          rotationSpeed: 0.3 + Math.random() * 0.4,\n          rotationAxis: new THREE.Vector3(\n            Math.random() - 0.5,\n            Math.random() - 0.5,\n            Math.random() - 0.5,\n          ).normalize(),\n          accumulatedRotation: new THREE.Euler(0, 0, 0),\n        },\n      };\n      \n      cubes.push(cube);\n      \n      // Generate 27 mini-cubes for each parent cube (total: 729)\n      for (let j = 0; j < 27; j++) {\n        const mx = (j % 3) - 1;\n        const my = Math.floor((j / 3) % 3) - 1;\n        const mz = Math.floor(j / 9) - 1;\n        \n        const localPosition: [number, number, number] = [mx * 2.5, my * 2.5, mz * 2.5];\n        \n        const miniCube: MiniCubeData = {\n          id: `mini-${i}-${j}`,\n          parentIndex: i,\n          localIndex: j,\n          localPosition,\n          baseSpread: [\n            (Math.random() - 0.5) * 2,\n            (Math.random() - 0.5) * 2,\n            (Math.random() - 0.5) * 2,\n          ],\n          rotationData: {\n            rotationSpeed: 0.2 + Math.random() * 0.3,\n            rotationAxis: new THREE.Vector3(\n              Math.random() - 0.5,\n              Math.random() - 0.5,\n              Math.random() - 0.5,\n            ).normalize(),\n            accumulatedRotation: new THREE.Euler(0, 0, 0),\n          },\n          brainTransform: {\n            popDelay: Math.random() * 2,\n            spiralRadius: 20 + Math.random() * 30,\n            spiralSpeed: 0.5 + Math.random() * 1.0,\n            brainPosition: brainFormation[brainIndex].position,\n            hemisphere: brainFormation[brainIndex].hemisphere,\n            brainRegion: brainFormation[brainIndex].region,\n          },\n          size: 1.0,\n        };\n        \n        miniCubes.push(miniCube);\n        brainIndex++;\n      }\n    }\n    \n    return { cubes, miniCubes };\n  }, []);\n\n  // Track scroll progress\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollTop = window.pageYOffset;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n      const progress = Math.min(scrollTop / docHeight, 1);\n      setScrollProgress(progress);\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    handleScroll(); // Initial call\n    \n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  return (\n    <>\n      {/* Lighting */}\n      <ambientLight intensity={0.6} />\n      <directionalLight position={[10, 10, 5]} intensity={1} />\n      <directionalLight position={[-10, -10, -5]} intensity={0.5} />\n      \n      {/* Main group containing all objects */}\n      <group ref={mainGroupRef}>\n        {/* Original 27 cubes (Phases 1-5) */}\n        {cubes.map((cube) => (\n          <CubePiece\n            key={cube.id}\n            cubeData={cube}\n            scrollProgress={scrollProgress}\n          />\n        ))}\n        \n        {/* Unified Rubik's cubes (Phases 5-6) */}\n        <UnifiedRubiksCubes\n          parentCubes={cubes}\n          scrollProgress={scrollProgress}\n        />\n        \n        {/* 729 individual pieces (Phases 7-10a) */}\n        <MiniInstanced\n          miniCubes={miniCubes}\n          parentCubes={cubes}\n          scrollProgress={scrollProgress}\n        />\n        \n        {/* 3000 final brain pieces (Phase 10b: 90-100%) */}\n        <ThousandsBrainInstanced scrollProgress={scrollProgress} />\n      </group>\n      \n      {/* Mouse rotation controller */}\n      <MouseRotationController\n        groupRef={mainGroupRef}\n        scrollProgress={scrollProgress}\n      />\n      \n      {/* Debug info */}\n      <mesh position={[-45, 25, 0]}>\n        <planeGeometry args={[20, 8]} />\n        <meshBasicMaterial color=\"#000000\" transparent opacity={0.7} />\n      </mesh>\n    </>\n  );\n});\n\n// Main component export\nexport default function RubiksCubeExperience() {\n  return (\n    <Canvas\n      camera={{ position: [0, 0, 50], fov: 75 }}\n      style={{ background: '#0a0a0a' }}\n    >\n      <Suspense fallback={null}>\n        <Scene />\n      </Suspense>\n    </Canvas>\n  );\n}","size_bytes":41507},"public/3danimation/src/components/RubiksCubeExperienceProper.tsx":{"content":"import React, {\n  useRef,\n  useEffect,\n  useState,\n  useMemo,\n  Suspense,\n} from \"react\";\nimport { Canvas, useFrame, useThree } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\nimport { createNoise3D } from \"simplex-noise\";\nimport ThousandsBrainInstanced from \"./ThousandsBrainInstanced\";\nimport UnifiedRubiksCubes from \"./UnifiedRubiksCubes\";\n\n/*\n🎯 CORRECTED 10-PHASE RUBIK'S CUBE TO BRAIN ANIMATION:\nFollowing the EXACT requirements from documentation with proper phase continuity.\n\n✅ Phase 1 (0-2.01%): Group Rotate\n✅ Phase 2 (2.01-12.06%): First Dismantle  \n✅ Phase 3 (12.06-14.48%): Settle with Perspective\n✅ Phase 5 (14.48-26.32%): Rubik's Cube Transform\n✅ Phase 6 (26.32-35.09%): Rubik's Cube Showcase\n✅ Phase 7 (35.09-43.86%): Second Dismantle\n✅ Phase 8 (43.86-52.63%): Independent Rotation\n✅ Phase 9 (52.63-70.18%): POPCORN Brain Transform - CONTINUITY FIXED\n✅ Phase 10 (70.18-100%): Spiral Brain Formation - CONTINUITY FIXED\n*/\n\n// Get phase name for display\nfunction getPhaseName(progress: number): string {\n  if (progress < 0.0201) return \"Group Rotate\";\n  if (progress < 0.1206) return \"First Dismantle\";\n  if (progress < 0.1448) return \"Settle with Perspective\";\n  if (progress < 0.2632) return \"Rubik's Cube Transform\";\n  if (progress < 0.3509) return \"Rubik's Cube Showcase\";\n  if (progress < 0.4386) return \"Second Dismantle\";\n  if (progress < 0.5263) return \"Independent Rotation\";\n  if (progress < 0.7018) return \"Neuromorphic Brain Transform\";\n  if (progress < 0.90) return \"Brain Spiral Formation (729 pieces)\";\n  return \"Ultra-Realistic Brain (3000 pieces)\";\n}\n\n// Cube data interface\ninterface CubeData {\n  id: string;\n  index: number;\n  position: [number, number, number];\n  color: string;\n  baseSpread: [number, number, number];\n  rotationData?: {\n    rotationSpeed: number;\n    rotationAxis: THREE.Vector3;\n    accumulatedRotation: THREE.Euler;\n  };\n}\n\n// Individual mini-cube data for Phase 7+ (729 total mini-cubes)\ninterface MiniCubeData {\n  id: string;\n  parentIndex: number;\n  localIndex: number;\n  localPosition: [number, number, number];\n  baseSpread: [number, number, number];\n  rotationData: {\n    rotationSpeed: number;\n    rotationAxis: THREE.Vector3;\n    accumulatedRotation: THREE.Euler;\n  };\n  brainTransform: {\n    popDelay: number;\n    spiralRadius: number;\n    spiralSpeed: number;\n    brainPosition: [number, number, number];\n    hemisphere: \"left\" | \"right\";\n    brainRegion:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\";\n  };\n  size: number;\n}\n\n// Brain formation system\nconst createBrainFormation = (\n  totalPieces: number,\n): Array<{\n  position: [number, number, number];\n  hemisphere: \"left\" | \"right\";\n  region:\n    | \"frontal\"\n    | \"parietal\"\n    | \"temporal\"\n    | \"occipital\"\n    | \"cerebellum\";\n}> => {\n  const noise3D = createNoise3D();\n  const brainFormation: Array<{\n    position: [number, number, number];\n    hemisphere: \"left\" | \"right\";\n    region:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\";\n  }> = [];\n\n  const brainWidth = 20.0;\n  const brainHeight = 16.5;\n  const brainDepth = 24.0;\n\n  for (let i = 0; i < totalPieces; i++) {\n    const phi = Math.acos(2 * Math.random() - 1);\n    const theta = 2 * Math.PI * Math.random();\n\n    let x = Math.sin(phi) * Math.cos(theta) * brainWidth * 0.5;\n    let y = Math.cos(phi) * brainHeight * 0.5;\n    let z = Math.sin(phi) * Math.sin(theta) * brainDepth * 0.5;\n\n    // Brain shape deformations\n    const frontWeight = Math.max(0, z / (brainDepth * 0.5));\n    if (z > 0) {\n      x *= 1 + frontWeight * 0.3;\n      y *= 1 + frontWeight * 0.2;\n    }\n\n    // Brain stem narrowing\n    if (\n      y < -brainHeight * 0.3 &&\n      Math.abs(x) < brainWidth * 0.2 &&\n      Math.abs(z) < brainDepth * 0.2\n    ) {\n      x *= 0.4;\n      z *= 0.4;\n    }\n\n    // Cerebellum\n    if (y < -brainHeight * 0.1 && z < -brainDepth * 0.2) {\n      y -= 2.8;\n      x *= 0.75;\n      const cerebellarNoise = noise3D(x * 0.2, y * 0.2, z * 0.2) * 1.5;\n      y += Math.sin(x * 0.3) * cerebellarNoise * 0.5;\n    }\n\n    // 4-octave noise for cortical folding\n    const noiseScale = 0.06;\n    const surfaceNoise =\n      noise3D(x * noiseScale, y * noiseScale, z * noiseScale) * 5.0 +\n      noise3D(x * noiseScale * 2, y * noiseScale * 2, z * noiseScale * 2) * 2.5 +\n      noise3D(x * noiseScale * 4, y * noiseScale * 4, z * noiseScale * 4) * 1.25 +\n      noise3D(x * noiseScale * 8, y * noiseScale * 8, z * noiseScale * 8) * 0.625;\n\n    const regionComplexity = Math.sin(z * 0.1) * Math.cos(x * 0.08) * 1.5;\n    const combinedNoise = surfaceNoise + regionComplexity;\n\n    // Apply surface displacement\n    const surfaceRadius = Math.sqrt(x * x + y * y + z * z);\n    if (surfaceRadius > 0) {\n      const normalX = x / surfaceRadius;\n      const normalY = y / surfaceRadius;\n      const normalZ = z / surfaceRadius;\n\n      let foldingStrength = 3.0;\n      if (z > brainDepth * 0.2) foldingStrength *= 1.4;\n      if (Math.abs(x) > brainWidth * 0.3 && y > -brainHeight * 0.2) foldingStrength *= 1.3;\n\n      x += normalX * combinedNoise * foldingStrength;\n      y += normalY * combinedNoise * foldingStrength;\n      z += normalZ * combinedNoise * foldingStrength;\n    }\n\n    const hemisphere: \"left\" | \"right\" = x < 0 ? \"left\" : \"right\";\n\n    let region:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\";\n\n    if (y < -brainHeight * 0.1 && z < -brainDepth * 0.2) {\n      region = \"cerebellum\";\n    } else if (z > brainDepth * 0.2) {\n      region = \"frontal\";\n    } else if (z < -brainDepth * 0.2) {\n      region = \"occipital\";\n    } else if (Math.abs(x) > brainWidth * 0.3 && y > -brainHeight * 0.2) {\n      region = \"temporal\";\n    } else {\n      region = \"parietal\";\n    }\n\n    brainFormation.push({\n      position: [x, y, z],\n      hemisphere,\n      region,\n    });\n  }\n\n  return brainFormation;\n};\n\n// Smooth easing functions\nconst easeInOutCubic = (t: number): number => {\n  return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;\n};\n\nconst easeInOutQuart = (t: number): number => {\n  return t < 0.5 ? 8 * t * t * t * t : 1 - Math.pow(-2 * t + 2, 4) / 2;\n};\n\n// Individual cube piece component - PHASES 1-4\nconst CubePiece = React.memo(function CubePiece({\n  cubeData,\n  scrollProgress,\n}: {\n  cubeData: CubeData;\n  scrollProgress: number;\n}) {\n  const groupRef = useRef<any>(null);\n\n  const edgeGeometry = useMemo(() => {\n    return new THREE.EdgesGeometry(new THREE.BoxGeometry(5.25, 5.25, 5.25));\n  }, []);\n\n  useFrame(() => {\n    if (!groupRef.current) return;\n\n    let position: [number, number, number] = [...cubeData.position];\n    let scale = 1;\n\n    // Calculate screen-adaptive spread values\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n    const aspectRatio = viewportWidth / viewportHeight;\n\n    const fov = 75;\n    const fovRad = (fov * Math.PI) / 180;\n    const screenWidth3D = 2 * Math.tan(fovRad / 2) * 50;\n    const screenHeight3D = screenWidth3D / aspectRatio;\n\n    const maxSpreadX = screenWidth3D * 0.45;\n    const maxSpreadY = screenHeight3D * 0.45;\n    const maxSpreadZ = 30;\n\n    // Phase 1: Group Rotate (0.00-2.01%)\n    if (scrollProgress < 0.0201) {\n      position = [...cubeData.position];\n      scale = 1;\n\n      if (groupRef.current && cubeData.rotationData) {\n        groupRef.current.rotation.set(0, 0, 0);\n      }\n    }\n    // Phase 2: First Dismantle (2.01-12.06%)\n    else if (scrollProgress >= 0.0201 && scrollProgress < 0.1206) {\n      const rawProgress = (scrollProgress - 0.0201) / 0.1005;\n      const dismantleProgress = easeInOutCubic(rawProgress);\n\n      position = [\n        cubeData.position[0] + cubeData.baseSpread[0] * dismantleProgress * maxSpreadX,\n        cubeData.position[1] + cubeData.baseSpread[1] * dismantleProgress * maxSpreadY,\n        cubeData.position[2] + cubeData.baseSpread[2] * dismantleProgress * maxSpreadZ,\n      ];\n\n      const normalizedY = (position[1] - -maxSpreadY) / (2 * maxSpreadY);\n      scale = Math.max(0.25, Math.min(1.0, 1.0 - normalizedY * 0.75));\n    }\n    // Phase 3: Settle with Perspective (12.06-14.48%)\n    else if (scrollProgress >= 0.1206 && scrollProgress < 0.1448) {\n      position = [\n        cubeData.position[0] + cubeData.baseSpread[0] * maxSpreadX,\n        cubeData.position[1] + cubeData.baseSpread[1] * maxSpreadY,\n        cubeData.position[2] + cubeData.baseSpread[2] * maxSpreadZ,\n      ];\n\n      const normalizedY = (position[1] - -maxSpreadY) / (2 * maxSpreadY);\n      scale = Math.max(0.25, Math.min(1.0, 1.0 - normalizedY * 0.75));\n    }\n    // Phase 5: Rubik's Cube Transform (14.48-26.32%)\n    else if (scrollProgress >= 0.1448 && scrollProgress < 0.2632) {\n      const rawProgress = (scrollProgress - 0.1448) / 0.1184;\n\n      position = [\n        cubeData.position[0] + cubeData.baseSpread[0] * maxSpreadX,\n        cubeData.position[1] + cubeData.baseSpread[1] * maxSpreadY,\n        cubeData.position[2] + cubeData.baseSpread[2] * maxSpreadZ,\n      ];\n\n      const normalizedY = (position[1] - -maxSpreadY) / (2 * maxSpreadY);\n      const baseScale = Math.max(0.25, Math.min(1.0, 1.0 - normalizedY * 0.75));\n\n      const fadeProgress = easeInOutCubic(rawProgress);\n      scale = baseScale * (1 - fadeProgress);\n    }\n    // Phase 6+: Hide original cubes\n    else {\n      scale = 0;\n    }\n\n    groupRef.current.position.set(position[0], position[1], position[2]);\n    groupRef.current.scale.setScalar(scale);\n  });\n\n  return (\n    <group ref={groupRef}>\n      <mesh>\n        <boxGeometry args={[5.25, 5.25, 5.25]} />\n        <meshStandardMaterial\n          color=\"#00ffff\"\n          emissive=\"#0088aa\"\n          emissiveIntensity={0.3}\n          metalness={0.1}\n          roughness={0.2}\n        />\n      </mesh>\n      <lineSegments geometry={edgeGeometry}>\n        <lineBasicMaterial color=\"#ffffff\" linewidth={6} />\n      </lineSegments>\n    </group>\n  );\n});\n\n// CORRECTED Instanced mini-cubes component - PROPER PHASE CONTINUITY\nconst MiniInstanced = React.memo(function MiniInstanced({\n  miniCubes,\n  parentCubes,\n  scrollProgress,\n}: {\n  miniCubes: MiniCubeData[];\n  parentCubes: CubeData[];\n  scrollProgress: number;\n}) {\n  const count = miniCubes.length;\n  const meshRef = useRef<THREE.InstancedMesh | null>(null);\n  const wireRef = useRef<THREE.InstancedMesh | null>(null);\n  const sphereMeshRef = useRef<THREE.InstancedMesh | null>(null);\n  const sphereWireRef = useRef<THREE.InstancedMesh | null>(null);\n  const dummy = useMemo(() => new THREE.Object3D(), []);\n\n  // Store Phase 8 end positions for continuity\n  const phase8Positions = useRef<Float32Array>(new Float32Array(count * 3));\n  const phase8Initialized = useRef(false);\n\n  const cubeGeo = useMemo(() => new THREE.BoxGeometry(2.1, 2.1, 2.1), []);\n  const cubeEdgeGeo = useMemo(() => new THREE.EdgesGeometry(cubeGeo), []);\n  \n  // Brain geometry - SAME SIZE as cubes during morph (no size change)\n  const sphereGeo = useMemo(() => new THREE.SphereGeometry(2.1 * 0.7, 16, 16), []);\n  const sphereEdgeGeo = useMemo(() => new THREE.EdgesGeometry(sphereGeo), []);\n  \n  const cubeMat = useMemo(\n    () =>\n      new THREE.MeshStandardMaterial({\n        color: \"#00ffff\",\n        emissive: \"#0088aa\",\n        emissiveIntensity: 0.4,\n        metalness: 0.1,\n        roughness: 0.2,\n        transparent: true,\n        opacity: 1,\n      }),\n    [],\n  );\n\n  const wireMat = useMemo(\n    () =>\n      new THREE.LineBasicMaterial({\n        color: \"#ffffff\",\n        transparent: false,\n        linewidth: 6,\n        opacity: 1,\n      }),\n    [],\n  );\n\n  // CORRECTED: Brain material for INSTANCE COLORS (not vertex colors)\n  const brainMat = useMemo(\n    () =>\n      new THREE.MeshStandardMaterial({\n        color: \"#ffffff\", // Base white - will be multiplied by instance colors\n        emissive: \"#222222\", // Minimal emissive for visibility\n        emissiveIntensity: 0.2, // Low but visible\n        metalness: 0.1,\n        roughness: 0.8,\n        transparent: true,\n        opacity: 0.95,\n        // NO vertexColors for InstancedMesh - use instanceColor instead\n      }),\n    [],\n  );\n\n  // CRITICAL: WHITE edges for brain visibility\n  const brainWireMat = useMemo(\n    () =>\n      new THREE.LineBasicMaterial({\n        color: \"#ffffff\", // WHITE edges for brain contrast\n        transparent: false,\n        opacity: 1,\n        linewidth: 6,\n      }),\n    [],\n  );\n\n  // Precompute data\n  const packed = useMemo(() => {\n    const basePos = new Float32Array(count * 3);\n    const localPos = new Float32Array(count * 3);\n    const baseSpread = new Float32Array(count * 3);\n    const brainTarget = new Float32Array(count * 3);\n    const rotAxis = new Float32Array(count * 3);\n    const rotSpeed = new Float32Array(count);\n    const brainRegionColors = new Float32Array(count * 3);\n\n    const viewportWidth = typeof window !== \"undefined\" ? window.innerWidth : 1920;\n    const viewportHeight = typeof window !== \"undefined\" ? window.innerHeight : 1080;\n    const aspectRatio = viewportWidth / viewportHeight;\n    const fov = 75;\n    const fovRad = (fov * Math.PI) / 180;\n    const screenWidth3D = 2 * Math.tan(fovRad / 2) * 50;\n    const screenHeight3D = screenWidth3D / aspectRatio;\n    const maxSpreadX = screenWidth3D * 0.45;\n    const maxSpreadY = screenHeight3D * 0.45;\n    const maxSpreadZ = 30;\n\n    for (let i = 0; i < count; i++) {\n      const m = miniCubes[i];\n      const parent = parentCubes[m.parentIndex];\n\n      const parentPos = [\n        parent.position[0] + parent.baseSpread[0] * maxSpreadX,\n        parent.position[1] + parent.baseSpread[1] * maxSpreadY,\n        parent.position[2] + parent.baseSpread[2] * maxSpreadZ,\n      ];\n\n      basePos.set(parentPos, i * 3);\n      localPos.set(m.localPosition, i * 3);\n      baseSpread.set(m.baseSpread, i * 3);\n      brainTarget.set(m.brainTransform.brainPosition, i * 3);\n      rotAxis.set(\n        [\n          m.rotationData.rotationAxis.x,\n          m.rotationData.rotationAxis.y,\n          m.rotationData.rotationAxis.z,\n        ],\n        i * 3,\n      );\n      rotSpeed[i] = m.rotationData.rotationSpeed;\n\n      // BRAIN FEATURE-BASED COLORING: Highlight anatomical features\n      const getBrainFeatureColorRGB = (region: string, position: [number, number, number]): [number, number, number] => {\n        const [x, y, z] = position;\n        \n        // Calculate noise-based cortical complexity at this position\n        const noise3D = createNoise3D();\n        const noiseScale = 0.06;\n        const surfaceNoise = \n          noise3D(x * noiseScale, y * noiseScale, z * noiseScale) * 5.0 +\n          noise3D(x * noiseScale * 2, y * noiseScale * 2, z * noiseScale * 2) * 2.5;\n        \n        const surfaceRadius = Math.sqrt(x * x + y * y + z * z);\n        const brainWidth = 20.0;\n        const brainHeight = 16.5;\n        const brainDepth = 24.0;\n        \n        // 1. BRAIN STEM (narrow central area) - BRIGHT BLUE\n        if (y < -brainHeight * 0.3 && Math.abs(x) < brainWidth * 0.2 && Math.abs(z) < brainDepth * 0.2) {\n          return [0.0, 0.8, 1.0]; // Bright cyan - brain stem\n        }\n        \n        // 2. CEREBELLUM with foliation - ORANGE-RED gradient based on foliation\n        if (y < -brainHeight * 0.1 && z < -brainDepth * 0.2) {\n          const cerebellarNoise = noise3D(x * 0.2, y * 0.2, z * 0.2) * 1.5;\n          const foliationIntensity = Math.abs(Math.sin(x * 0.3) * cerebellarNoise);\n          return [1.0, 0.3 + foliationIntensity * 0.4, 0.0]; // Orange to red based on foliation\n        }\n        \n        // 3. DEEP CORTICAL FOLDS (high surface noise) - BRIGHT MAGENTA\n        if (Math.abs(surfaceNoise) > 3.5) {\n          return [1.0, 0.0, 0.8]; // Bright magenta - deep sulci/gyri\n        }\n        \n        // 4. FRONTAL PROMINENCE - GREEN gradient based on prominence\n        if (z > brainDepth * 0.2) {\n          const frontWeight = z / (brainDepth * 0.5);\n          return [0.0, 0.6 + frontWeight * 0.4, 0.2]; // Green gradient - frontal prominence\n        }\n        \n        // 5. SURFACE COMPLEXITY - YELLOW-WHITE based on folding intensity\n        const foldingIntensity = Math.abs(surfaceNoise) / 5.0;\n        if (foldingIntensity > 0.4) {\n          return [1.0, 1.0, 0.3 + foldingIntensity * 0.4]; // Yellow to white - surface complexity\n        }\n        \n        // 6. TEMPORAL REGION COMPLEXITY - PURPLE-BLUE\n        if (Math.abs(x) > brainWidth * 0.3 && y > -brainHeight * 0.2) {\n          const temporalComplexity = Math.abs(Math.sin(z * 0.1) * Math.cos(x * 0.08));\n          return [0.4 + temporalComplexity * 0.4, 0.0, 0.8]; // Purple-blue - temporal complexity\n        }\n        \n        // 7. DEFAULT CORTEX - Soft pink-gray based on region\n        switch (region) {\n          case \"frontal\": return [0.9, 0.6, 0.7]; // Soft pink\n          case \"parietal\": return [0.8, 0.7, 0.9]; // Soft lavender  \n          case \"temporal\": return [0.7, 0.8, 0.9]; // Soft blue\n          case \"occipital\": return [0.9, 0.8, 0.6]; // Soft gold\n          default: return [0.8, 0.8, 0.8]; // Soft gray\n        }\n      };\n\n      const colorRGB = getBrainFeatureColorRGB(m.brainTransform.brainRegion, m.brainTransform.brainPosition);\n      brainRegionColors.set(colorRGB, i * 3);\n    }\n\n    return {\n      basePos,\n      localPos,\n      baseSpread,\n      brainTarget,\n      rotAxis,\n      rotSpeed,\n      brainRegionColors,\n      maxSpreadX,\n      maxSpreadY,\n      maxSpreadZ,\n    };\n  }, [miniCubes, parentCubes]);\n\n  useFrame(() => {\n    if (\n      !meshRef.current ||\n      !wireRef.current ||\n      !sphereMeshRef.current ||\n      !sphereWireRef.current\n    )\n      return;\n\n    const mesh = meshRef.current;\n    const wire = wireRef.current;\n    const sphereMesh = sphereMeshRef.current;\n    const sphereWire = sphereWireRef.current;\n\n    // Initialize brain instance colors for regional variation\n    if (!sphereMesh.instanceColor && scrollProgress >= 0.5263) {\n      const colors = new Float32Array(count * 3);\n      for (let j = 0; j < count; j++) {\n        colors[j * 3] = packed.brainRegionColors[j * 3 + 0];\n        colors[j * 3 + 1] = packed.brainRegionColors[j * 3 + 1];\n        colors[j * 3 + 2] = packed.brainRegionColors[j * 3 + 2];\n      }\n      sphereMesh.instanceColor = new THREE.InstancedBufferAttribute(colors, 3);\n      sphereMesh.instanceColor.needsUpdate = true; // CRITICAL: Mark for update\n    }\n\n    for (let i = 0; i < count; i++) {\n      const px = packed.basePos[i * 3 + 0];\n      const py = packed.basePos[i * 3 + 1];\n      const pz = packed.basePos[i * 3 + 2];\n      const lx = packed.localPos[i * 3 + 0];\n      const ly = packed.localPos[i * 3 + 1];\n      const lz = packed.localPos[i * 3 + 2];\n      const bx = packed.baseSpread[i * 3 + 0];\n      const by = packed.baseSpread[i * 3 + 1];\n      const bz = packed.baseSpread[i * 3 + 2];\n      const btx = packed.brainTarget[i * 3 + 0];\n      const bty = packed.brainTarget[i * 3 + 1];\n      const btz = packed.brainTarget[i * 3 + 2];\n      const cubeIndex = Math.floor(i / 27) * 27 + (i % 27);\n\n      const normalizedY = (py - -packed.maxSpreadY) / (2 * packed.maxSpreadY);\n      const perspectiveScale = Math.max(0.25, Math.min(1.0, 1.0 - normalizedY * 0.75));\n\n      let position: [number, number, number] = [0, 0, 0];\n      let scale = 0;\n      let rotation = new THREE.Euler(0, 0, 0);\n\n      // Phase 7: Second dismantle (35.09-43.86%)\n      if (scrollProgress >= 0.3509 && scrollProgress < 0.4386) {\n        const rawProgress = (scrollProgress - 0.3509) / 0.0877;\n        const dismantleProgress = easeInOutCubic(rawProgress);\n\n        const unifiedCubePosition = [px, py, pz];\n        const reducedSpreadMultiplier = 0.3;\n\n        position = [\n          unifiedCubePosition[0] + bx * dismantleProgress * packed.maxSpreadX * reducedSpreadMultiplier,\n          unifiedCubePosition[1] + by * dismantleProgress * packed.maxSpreadY * reducedSpreadMultiplier,\n          unifiedCubePosition[2] + bz * dismantleProgress * packed.maxSpreadZ * reducedSpreadMultiplier,\n        ];\n\n        const newNormalizedY = (position[1] - -packed.maxSpreadY) / (2 * packed.maxSpreadY);\n        scale = Math.max(0.25, Math.min(1.0, 1.0 - newNormalizedY * 0.75));\n\n        // Show cube form only\n        dummy.position.set(position[0], position[1], position[2]);\n        dummy.scale.setScalar(scale);\n        dummy.rotation.copy(rotation);\n        dummy.updateMatrix();\n        mesh.setMatrixAt(i, dummy.matrix);\n        wire.setMatrixAt(i, dummy.matrix);\n\n        // Hide brain form\n        sphereMesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        sphereWire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n      }\n      // Phase 8: Independent Rotation (43.86-52.63%)\n      else if (scrollProgress >= 0.4386 && scrollProgress < 0.5263) {\n        const rawProgress = (scrollProgress - 0.4386) / 0.0877;\n\n        const basePosition = [\n          px + lx * perspectiveScale,\n          py + ly * perspectiveScale,\n          pz + lz * perspectiveScale,\n        ];\n        const reducedSpreadMultiplier = 0.3;\n\n        // LIVING MOVEMENT - hovering motion\n        const time = Date.now() * 0.001;\n        const hoverAmplitude = 1.5;\n        const hoverX = Math.sin(time + i * 0.1) * hoverAmplitude;\n        const hoverY = Math.cos(time * 0.7 + i * 0.15) * hoverAmplitude;\n        const hoverZ = Math.sin(time * 0.5 + i * 0.12) * hoverAmplitude;\n\n        position = [\n          basePosition[0] + bx * packed.maxSpreadX * reducedSpreadMultiplier + hoverX,\n          basePosition[1] + by * packed.maxSpreadY * reducedSpreadMultiplier + hoverY,\n          basePosition[2] + bz * packed.maxSpreadZ * reducedSpreadMultiplier + hoverZ,\n        ];\n\n        const newNormalizedY = (position[1] - -packed.maxSpreadY) / (2 * packed.maxSpreadY);\n        scale = Math.max(0.25, Math.min(1.0, 1.0 - newNormalizedY * 0.75));\n\n        // Enhanced rotation\n        const time2 = Date.now() * 0.001;\n        rotation = new THREE.Euler(\n          time2 * packed.rotAxis[i * 3 + 0] * packed.rotSpeed[i],\n          time2 * packed.rotAxis[i * 3 + 1] * packed.rotSpeed[i],\n          time2 * packed.rotAxis[i * 3 + 2] * packed.rotSpeed[i],\n        );\n\n        // CRITICAL: Store Phase 8 end positions for Phase 9 continuity\n        if (!phase8Initialized.current) {\n          phase8Positions.current[i * 3] = position[0];\n          phase8Positions.current[i * 3 + 1] = position[1];\n          phase8Positions.current[i * 3 + 2] = position[2];\n        }\n\n        // Show cube form only\n        dummy.position.set(position[0], position[1], position[2]);\n        dummy.scale.setScalar(scale);\n        dummy.rotation.copy(rotation);\n        dummy.updateMatrix();\n        mesh.setMatrixAt(i, dummy.matrix);\n        wire.setMatrixAt(i, dummy.matrix);\n\n        // Hide brain form\n        sphereMesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        sphereWire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n      }\n      // Phase 9: POPCORN Brain Transform (52.63-70.18%) - PURE TRANSPARENCY FADE\n      else if (scrollProgress >= 0.5263 && scrollProgress < 0.7018) {\n        const rawProgress = (scrollProgress - 0.5263) / 0.1755;\n\n        // CRITICAL: Use EXACT Phase 8 end positions (NO MOVEMENT!)\n        const phase8X = phase8Positions.current[i * 3];\n        const phase8Y = phase8Positions.current[i * 3 + 1];\n        const phase8Z = phase8Positions.current[i * 3 + 2];\n        \n        // Keep exact Phase 8 position - NO MOVEMENT!\n        position = [phase8X, phase8Y, phase8Z];\n        \n        // Keep exact Phase 8 scale - NO SIZE CHANGES!\n        const newNormalizedY = (position[1] - -packed.maxSpreadY) / (2 * packed.maxSpreadY);\n        scale = Math.max(0.25, Math.min(1.0, 1.0 - newNormalizedY * 0.75)); // Same scale as Phase 8\n\n        // POPCORN-style transformation with wave groups\n        const waveSize = 100; // Transform 100 cubes at once\n        const waveIndex = Math.floor(cubeIndex / waveSize);\n        const totalWaves = Math.ceil(729 / waveSize);\n\n        const waveStartDelay = (waveIndex / totalWaves) * 0.4;\n        const waveProgress = Math.max(0, (rawProgress - waveStartDelay) / (1 - waveStartDelay));\n        let transformProgress = Math.min(1, easeInOutCubic(waveProgress) * 1.5);\n        transformProgress = Math.max(0, transformProgress);\n\n        // PURE TRANSPARENCY FADE - NO POSITION OR SIZE CHANGES!\n        if (transformProgress > 0) {\n          // Determine if this piece has finished transforming (for sharp popcorn effect)\n          const isFullyTransformed = transformProgress >= 1.0;\n          \n          if (isFullyTransformed) {\n            // Show ONLY brain form (cube is fully faded out)\n            dummy.position.set(position[0], position[1], position[2]);\n            dummy.scale.setScalar(scale * 0.7); // Brain size factor\n            dummy.rotation.set(0, 0, 0);\n            dummy.updateMatrix();\n            sphereMesh.setMatrixAt(i, dummy.matrix);\n            sphereWire.setMatrixAt(i, dummy.matrix);\n\n            // Hide cube form completely\n            mesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n            wire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n          } else {\n            // During transition: Show cube form only (brain appears instantly when ready)\n            dummy.position.set(position[0], position[1], position[2]);\n            dummy.scale.setScalar(scale);\n            dummy.rotation.set(0, 0, 0);\n            dummy.updateMatrix();\n            mesh.setMatrixAt(i, dummy.matrix);\n            wire.setMatrixAt(i, dummy.matrix);\n\n            // Hide brain form during transition\n            sphereMesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n            sphereWire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n          }\n        } else {\n          // Show cube form only (before transformation starts)\n          dummy.position.set(position[0], position[1], position[2]);\n          dummy.scale.setScalar(scale);\n          dummy.rotation.set(0, 0, 0);\n          dummy.updateMatrix();\n          mesh.setMatrixAt(i, dummy.matrix);\n          wire.setMatrixAt(i, dummy.matrix);\n\n          // Hide brain form completely\n          sphereMesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n          sphereWire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        }\n      }\n      // Phase 10a: 729 pieces spiral (70.18-90%) - CONTINUITY FIXED\n      else if (scrollProgress >= 0.7018 && scrollProgress < 0.90) {\n        const spiralProgress = (scrollProgress - 0.7018) / 0.1982;\n        const easedSpiral = easeInOutCubic(spiralProgress);\n\n        // CRITICAL: Start from Phase 9 end positions (no snapping!)\n        const startX = btx; // Where Phase 9 ended\n        const startY = bty;\n        const startZ = btz;\n\n        // Spiral parameters\n        const spiralRadius = 30 * (1 - easedSpiral);\n        const spiralAngle = easedSpiral * Math.PI * 4; // 2 full rotations\n        const spiralHeight = Math.sin(spiralProgress * Math.PI) * 10;\n\n        const spiralX = Math.cos(spiralAngle + i * 0.1) * spiralRadius;\n        const spiralY = Math.sin(spiralAngle + i * 0.05) * spiralRadius + spiralHeight;\n        const spiralZ = Math.sin(spiralAngle + i * 0.08) * spiralRadius;\n\n        // Smooth interpolation from Phase 9 position to spiral to center\n        position = [\n          startX + (spiralX - startX) * easedSpiral,\n          startY + (spiralY - startY) * easedSpiral,\n          startZ + (spiralZ - startZ) * easedSpiral,\n        ];\n\n        // Keep brain form and colors\n        scale = perspectiveScale * 0.7;\n\n        // Show brain form only\n        dummy.position.set(position[0], position[1], position[2]);\n        dummy.scale.setScalar(scale);\n        dummy.rotation.set(0, 0, 0);\n        dummy.updateMatrix();\n        sphereMesh.setMatrixAt(i, dummy.matrix);\n        sphereWire.setMatrixAt(i, dummy.matrix);\n\n        // Hide cube form\n        mesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        wire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n      }\n      // Phase 10b: 729 pieces fade out (90-100%)\n      else if (scrollProgress >= 0.90) {\n        // Hide 729 pieces completely - 3000 pieces handle the final brain\n        mesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        wire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        sphereMesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        sphereWire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n      } else {\n        // Hide during other phases\n        mesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        wire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        sphereMesh.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n        sphereWire.setMatrixAt(i, new THREE.Matrix4().makeScale(0, 0, 0));\n      }\n    }\n\n    // Mark Phase 8 as initialized after first pass\n    if (scrollProgress >= 0.4386 && scrollProgress < 0.5263) {\n      phase8Initialized.current = true;\n    }\n\n    mesh.instanceMatrix.needsUpdate = true;\n    wire.instanceMatrix.needsUpdate = true;\n    sphereMesh.instanceMatrix.needsUpdate = true;\n    sphereWire.instanceMatrix.needsUpdate = true;\n  });\n\n  return (\n    <group>\n      <instancedMesh ref={meshRef} args={[cubeGeo, cubeMat, count]} visible={true} />\n      <instancedMesh ref={wireRef} args={[cubeEdgeGeo, wireMat, count]} visible={true} />\n      <instancedMesh ref={sphereMeshRef} args={[sphereGeo, brainMat, count]} visible={true} />\n      <instancedMesh ref={sphereWireRef} args={[sphereEdgeGeo, brainWireMat, count]} visible={true} />\n    </group>\n  );\n});\n\n// Mouse-controlled rotation system\nconst MouseRotationController = React.memo(function MouseRotationController({\n  groupRef,\n  brainGroupRef,\n  scrollProgress,\n}: {\n  groupRef: React.RefObject<THREE.Group>;\n  brainGroupRef: React.RefObject<THREE.Group>;\n  scrollProgress: number;\n}) {\n  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });\n\n  useFrame(() => {\n    // Phase 1: Mouse rotation for original cube\n    if (groupRef.current && scrollProgress < 0.0201) {\n      const rotationX = (mousePos.y * Math.PI) / 6; // ±30 degrees max\n      const rotationY = (mousePos.x * Math.PI) / 6; // ±30 degrees max\n\n      groupRef.current.rotation.x = rotationX;\n      groupRef.current.rotation.y = rotationY;\n    } else if (groupRef.current) {\n      groupRef.current.rotation.x = 0;\n      groupRef.current.rotation.y = 0;\n    }\n\n    // CRITICAL: Phase 10b - Mouse rotation for final brain (90-100%)\n    if (brainGroupRef.current && scrollProgress >= 0.90) {\n      const rotationX = (mousePos.y * Math.PI) / 6;\n      const rotationY = (mousePos.x * Math.PI) / 6;\n\n      brainGroupRef.current.rotation.x = rotationX;\n      brainGroupRef.current.rotation.y = rotationY;\n    } else if (brainGroupRef.current) {\n      brainGroupRef.current.rotation.x = 0;\n      brainGroupRef.current.rotation.y = 0;\n    }\n  });\n\n  useEffect(() => {\n    const handleMouseMove = (event: MouseEvent) => {\n      // Track mouse during Phase 1 and Phase 10b\n      if (scrollProgress < 0.0201 || scrollProgress >= 0.90) {\n        const normalizedX = (event.clientX / window.innerWidth) * 2 - 1; // -1 to 1\n        const normalizedY = -(event.clientY / window.innerHeight) * 2 + 1; // -1 to 1 (inverted)\n\n        setMousePos({ x: normalizedX, y: normalizedY });\n      }\n    };\n\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    return () => window.removeEventListener(\"mousemove\", handleMouseMove);\n  }, [scrollProgress]);\n\n  return null;\n});\n\n// Main 3D scene component\nconst Scene = React.memo(function Scene() {\n  const mainGroupRef = useRef<THREE.Group>(null);\n  const brainGroupRef = useRef<THREE.Group>(null);\n  const [scrollProgress, setScrollProgress] = useState(0);\n\n  // Generate initial cube data (27 pieces)\n  const { cubes, miniCubes } = useMemo(() => {\n    const cubes: CubeData[] = [];\n    const miniCubes: MiniCubeData[] = [];\n    const brainFormation = createBrainFormation(729);\n\n    let brainIndex = 0;\n\n    for (let i = 0; i < 27; i++) {\n      const x = (i % 3) - 1;\n      const y = Math.floor((i / 3) % 3) - 1;\n      const z = Math.floor(i / 9) - 1;\n\n      const position: [number, number, number] = [x * 6, y * 6, z * 6];\n\n      const baseSpread: [number, number, number] = [\n        (Math.random() - 0.5) * 2,\n        (Math.random() - 0.5) * 2,\n        (Math.random() - 0.5) * 2,\n      ];\n\n      const cube: CubeData = {\n        id: `cube-${i}`,\n        index: i,\n        position,\n        color: \"#00ffff\",\n        baseSpread,\n        rotationData: {\n          rotationSpeed: 0.3 + Math.random() * 0.4,\n          rotationAxis: new THREE.Vector3(\n            Math.random() - 0.5,\n            Math.random() - 0.5,\n            Math.random() - 0.5,\n          ).normalize(),\n          accumulatedRotation: new THREE.Euler(0, 0, 0),\n        },\n      };\n\n      cubes.push(cube);\n\n      // Generate 27 mini-cubes for each parent cube (total: 729)\n      for (let j = 0; j < 27; j++) {\n        const mx = (j % 3) - 1;\n        const my = Math.floor((j / 3) % 3) - 1;\n        const mz = Math.floor(j / 9) - 1;\n\n        const localPosition: [number, number, number] = [mx * 2.5, my * 2.5, mz * 2.5];\n\n        const miniCube: MiniCubeData = {\n          id: `mini-${i}-${j}`,\n          parentIndex: i,\n          localIndex: j,\n          localPosition,\n          baseSpread: [\n            (Math.random() - 0.5) * 2,\n            (Math.random() - 0.5) * 2,\n            (Math.random() - 0.5) * 2,\n          ],\n          rotationData: {\n            rotationSpeed: 0.2 + Math.random() * 0.3,\n            rotationAxis: new THREE.Vector3(\n              Math.random() - 0.5,\n              Math.random() - 0.5,\n              Math.random() - 0.5,\n            ).normalize(),\n            accumulatedRotation: new THREE.Euler(0, 0, 0),\n          },\n          brainTransform: {\n            popDelay: Math.random() * 2,\n            spiralRadius: 20 + Math.random() * 30,\n            spiralSpeed: 0.5 + Math.random() * 1.0,\n            brainPosition: brainFormation[brainIndex].position,\n            hemisphere: brainFormation[brainIndex].hemisphere,\n            brainRegion: brainFormation[brainIndex].region,\n          },\n          size: 1.0,\n        };\n\n        miniCubes.push(miniCube);\n        brainIndex++;\n      }\n    }\n\n    return { cubes, miniCubes };\n  }, []);\n\n  // Track scroll progress\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollTop = window.pageYOffset;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n      const progress = Math.min(scrollTop / docHeight, 1);\n      setScrollProgress(progress);\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n    handleScroll();\n\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n\n  return (\n    <>\n      {/* Lighting */}\n      <ambientLight intensity={0.6} />\n      <directionalLight position={[10, 10, 5]} intensity={1} />\n      <directionalLight position={[-10, -10, -5]} intensity={0.5} />\n\n      {/* Main group for original cubes (Phases 1-5) */}\n      <group ref={mainGroupRef}>\n        {cubes.map((cube) => (\n          <CubePiece key={cube.id} cubeData={cube} scrollProgress={scrollProgress} />\n        ))}\n      </group>\n\n      {/* Unified Rubik's cubes (Phases 5-6) */}\n      <UnifiedRubiksCubes parentCubes={cubes} scrollProgress={scrollProgress} />\n\n      {/* 729 individual pieces (Phases 7-10a) */}\n      <MiniInstanced miniCubes={miniCubes} parentCubes={cubes} scrollProgress={scrollProgress} />\n\n      {/* 3000 final brain pieces (Phase 10b: 90-100%) */}\n      <group ref={brainGroupRef}>\n        <ThousandsBrainInstanced scrollProgress={scrollProgress} />\n      </group>\n\n      {/* Mouse rotation controller */}\n      <MouseRotationController\n        groupRef={mainGroupRef}\n        brainGroupRef={brainGroupRef}\n        scrollProgress={scrollProgress}\n      />\n\n      {/* Debug info */}\n      <mesh position={[-45, 25, 0]}>\n        <planeGeometry args={[20, 8]} />\n        <meshBasicMaterial color=\"#000000\" transparent opacity={0.7} />\n      </mesh>\n    </>\n  );\n});\n\n// Main component export\nexport default function RubiksCubeExperience() {\n  return (\n    <Canvas camera={{ position: [0, 0, 50], fov: 75 }} style={{ background: \"#0a0a0a\" }}>\n      <Suspense fallback={null}>\n        <Scene />\n      </Suspense>\n    </Canvas>\n  );\n}","size_bytes":36466},"public/3danimation/src/components/ThousandsBrainInstanced.tsx":{"content":"import React, { useRef, useMemo } from \"react\"\nimport { useFrame } from \"@react-three/fiber\"\nimport * as THREE from \"three\"\nimport { createNoise3D } from \"simplex-noise\"\n\n// ULTRA-REALISTIC Brain formation system - Creates thousands of equal-sized brain pieces\nconst createBrainFormation = (\n  totalPieces: number,\n): Array<{\n  position: [number, number, number];\n  hemisphere: \"left\" | \"right\";\n  region:\n    | \"frontal\"\n    | \"parietal\"\n    | \"temporal\"\n    | \"occipital\"\n    | \"cerebellum\";\n}> => {\n  const noise3D = createNoise3D();\n  const brainFormation: Array<{\n    position: [number, number, number];\n    hemisphere: \"left\" | \"right\";\n    region:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\";\n  }> = [];\n\n  // ENHANCED: Neuroanatomically accurate brain proportions based on human brain MRI data\n  const brainWidth = 20.0; // Slightly wider for realism\n  const brainHeight = 16.5; // More accurate height ratio  \n  const brainDepth = 24.0; // Enhanced front-to-back depth for frontal lobe prominence\n\n  for (let i = 0; i < totalPieces; i++) {\n    // Create layered brain distribution\n    const layerProgress = i / totalPieces;\n\n    // Use spherical coordinates with brain-like deformation\n    const phi = Math.acos(2 * Math.random() - 1); // 0 to π (vertical angle)\n    const theta = 2 * Math.PI * Math.random(); // 0 to 2π (horizontal angle)\n\n    // Base brain-shaped ellipsoid\n    let x = Math.sin(phi) * Math.cos(theta) * brainWidth * 0.5;\n    let y = Math.cos(phi) * brainHeight * 0.5;\n    let z = Math.sin(phi) * Math.sin(theta) * brainDepth * 0.5;\n\n    // Add realistic brain shape deformations\n    const frontWeight = Math.max(0, z / (brainDepth * 0.5)); // Frontal lobe prominence\n    const backWeight = Math.max(0, -z / (brainDepth * 0.5)); // Occipital lobe\n\n    // Frontal lobe expansion (front of brain is larger)\n    if (z > 0) {\n      x *= 1 + frontWeight * 0.3;\n      y *= 1 + frontWeight * 0.2;\n    }\n\n    // Brain stem narrowing (bottom center)\n    if (\n      y < -brainHeight * 0.3 &&\n      Math.abs(x) < brainWidth * 0.2 &&\n      Math.abs(z) < brainDepth * 0.2\n    ) {\n      x *= 0.4; // Narrow brain stem\n      z *= 0.4;\n    }\n\n    // ENHANCED: Neuroanatomically accurate cerebellum with characteristic foliation\n    if (y < -brainHeight * 0.1 && z < -brainDepth * 0.2) {\n      y -= 2.8; // More prominent cerebellum positioning\n      x *= 0.75; // Narrower for anatomical accuracy\n      \n      // Add characteristic cerebellar foliation pattern\n      const cerebellarNoise = noise3D(x * 0.2, y * 0.2, z * 0.2) * 1.5;\n      y += Math.sin(x * 0.3) * cerebellarNoise * 0.5; // Horizontal foliation\n    }\n\n    // ULTRA-ENHANCED: 4-octave noise for neuromorphic cortical folding (React 19 + Three.js 0.172.0)\n    const noiseScale = 0.06; // Finer scale for ultra-realistic brain surface detail\n    \n    // 4-octave fractal noise for complex cortical patterns\n    const surfaceNoise =\n      noise3D(x * noiseScale, y * noiseScale, z * noiseScale) * 5.0 +      // Primary cortical folds\n      noise3D(x * noiseScale * 2, y * noiseScale * 2, z * noiseScale * 2) * 2.5 +  // Secondary gyri\n      noise3D(x * noiseScale * 4, y * noiseScale * 4, z * noiseScale * 4) * 1.25 + // Tertiary sulci\n      noise3D(x * noiseScale * 8, y * noiseScale * 8, z * noiseScale * 8) * 0.625; // Micro-texture\n\n    // Additional layer for region-specific cortical complexity\n    const regionComplexity = Math.sin(z * 0.1) * Math.cos(x * 0.08) * 1.5;\n    const combinedNoise = surfaceNoise + regionComplexity;\n\n    // Apply neuromorphic surface displacement with anatomically accurate folding\n    const surfaceRadius = Math.sqrt(x * x + y * y + z * z);\n    if (surfaceRadius > 0) {\n      const normalX = x / surfaceRadius;\n      const normalY = y / surfaceRadius;\n      const normalZ = z / surfaceRadius;\n\n      // Enhanced cortical folding with region-specific intensity\n      let foldingStrength = 3.0; // Base neuromorphic folding strength\n      \n      // Frontal cortex has deeper sulci\n      if (z > brainDepth * 0.2) {\n        foldingStrength *= 1.4;\n      }\n      \n      // Temporal lobes have complex folding patterns\n      if (Math.abs(x) > brainWidth * 0.3 && y > -brainHeight * 0.2) {\n        foldingStrength *= 1.3;\n      }\n\n      // Apply the enhanced surface displacement\n      x += normalX * combinedNoise * foldingStrength;\n      y += normalY * combinedNoise * foldingStrength;\n      z += normalZ * combinedNoise * foldingStrength;\n    }\n\n    // Determine hemisphere\n    const hemisphere: \"left\" | \"right\" =\n      x < 0 ? \"left\" : \"right\";\n\n    // Determine brain region based on position\n    let region:\n      | \"frontal\"\n      | \"parietal\"\n      | \"temporal\"\n      | \"occipital\"\n      | \"cerebellum\";\n\n    if (y < -brainHeight * 0.1 && z < -brainDepth * 0.2) {\n      region = \"cerebellum\";\n    } else if (z > brainDepth * 0.2) {\n      region = \"frontal\";\n    } else if (z < -brainDepth * 0.2) {\n      region = \"occipital\";\n    } else if (\n      Math.abs(x) > brainWidth * 0.3 &&\n      y > -brainHeight * 0.2\n    ) {\n      region = \"temporal\";\n    } else {\n      region = \"parietal\";\n    }\n\n    brainFormation.push({\n      position: [x, y, z],\n      hemisphere,\n      region,\n    });\n  }\n\n  return brainFormation;\n};\n\n// Smooth easing functions\nconst easeInOutCubic = (t: number): number => {\n  return t < 0.5\n    ? 4 * t * t * t\n    : 1 - Math.pow(-2 * t + 2, 3) / 2;\n};\n\n// Thousands of brain pieces component for ultra-realistic final brain\nconst ThousandsBrainInstanced = React.memo(function ThousandsBrainInstanced({\n  scrollProgress,\n}: {\n  scrollProgress: number;\n}) {\n  const BRAIN_PIECES_COUNT = 3000; // 3000 pieces for ultra-realistic detail\n  const meshRef = useRef<THREE.InstancedMesh | null>(null);\n  const wireRef = useRef<THREE.InstancedMesh | null>(null);\n  const dummy = useMemo(() => new THREE.Object3D(), []);\n  \n  // BRAIN FEATURE-BASED COLORING: Highlight anatomical features\n  const getBrainFeatureColor = (region: string, position: [number, number, number]): THREE.Color => {\n    const [x, y, z] = position;\n    \n    // Calculate noise-based cortical complexity at this position\n    const noise3D = createNoise3D();\n    const noiseScale = 0.06;\n    const surfaceNoise = \n      noise3D(x * noiseScale, y * noiseScale, z * noiseScale) * 5.0 +\n      noise3D(x * noiseScale * 2, y * noiseScale * 2, z * noiseScale * 2) * 2.5;\n    \n    const brainWidth = 20.0;\n    const brainHeight = 16.5;\n    const brainDepth = 24.0;\n    \n    // 1. BRAIN STEM (narrow central area) - BRIGHT BLUE\n    if (y < -brainHeight * 0.3 && Math.abs(x) < brainWidth * 0.2 && Math.abs(z) < brainDepth * 0.2) {\n      return new THREE.Color(0.0, 0.8, 1.0); // Bright cyan - brain stem\n    }\n    \n    // 2. CEREBELLUM with foliation - ORANGE-RED gradient based on foliation\n    if (y < -brainHeight * 0.1 && z < -brainDepth * 0.2) {\n      const cerebellarNoise = noise3D(x * 0.2, y * 0.2, z * 0.2) * 1.5;\n      const foliationIntensity = Math.abs(Math.sin(x * 0.3) * cerebellarNoise);\n      return new THREE.Color(1.0, 0.3 + foliationIntensity * 0.4, 0.0); // Orange to red based on foliation\n    }\n    \n    // 3. DEEP CORTICAL FOLDS (high surface noise) - BRIGHT MAGENTA\n    if (Math.abs(surfaceNoise) > 3.5) {\n      return new THREE.Color(1.0, 0.0, 0.8); // Bright magenta - deep sulci/gyri\n    }\n    \n    // 4. FRONTAL PROMINENCE - GREEN gradient based on prominence\n    if (z > brainDepth * 0.2) {\n      const frontWeight = z / (brainDepth * 0.5);\n      return new THREE.Color(0.0, 0.6 + frontWeight * 0.4, 0.2); // Green gradient - frontal prominence\n    }\n    \n    // 5. SURFACE COMPLEXITY - YELLOW-WHITE based on folding intensity\n    const foldingIntensity = Math.abs(surfaceNoise) / 5.0;\n    if (foldingIntensity > 0.4) {\n      return new THREE.Color(1.0, 1.0, 0.3 + foldingIntensity * 0.4); // Yellow to white - surface complexity\n    }\n    \n    // 6. TEMPORAL REGION COMPLEXITY - PURPLE-BLUE\n    if (Math.abs(x) > brainWidth * 0.3 && y > -brainHeight * 0.2) {\n      const temporalComplexity = Math.abs(Math.sin(z * 0.1) * Math.cos(x * 0.08));\n      return new THREE.Color(0.4 + temporalComplexity * 0.4, 0.0, 0.8); // Purple-blue - temporal complexity\n    }\n    \n    // 7. DEFAULT CORTEX - Soft pink-gray based on region\n    switch (region) {\n      case \"frontal\": return new THREE.Color(0.9, 0.6, 0.7); // Soft pink\n      case \"parietal\": return new THREE.Color(0.8, 0.7, 0.9); // Soft lavender  \n      case \"temporal\": return new THREE.Color(0.7, 0.8, 0.9); // Soft blue\n      case \"occipital\": return new THREE.Color(0.9, 0.8, 0.6); // Soft gold\n      default: return new THREE.Color(0.8, 0.8, 0.8); // Soft gray\n    }\n  };\n\n  // Create thousands of brain positions\n  const brainFormation = useMemo(() => {\n    return createBrainFormation(BRAIN_PIECES_COUNT);\n  }, []);\n\n  // CORRECTED: 50% smaller than smallest 729 piece\n  const sphereGeo = useMemo(\n    () => {\n      // Smallest 729 piece: perspective scale 0.25 * cube size 2.1 * brain factor 0.7 = 0.3675\n      // 3000 pieces: 50% smaller = 0.3675 * 0.5 = 0.18375\n      return new THREE.SphereGeometry(0.18375, 12, 12);\n    },\n    [],\n  );\n  const sphereEdgeGeo = useMemo(\n    () => new THREE.EdgesGeometry(sphereGeo),\n    [],\n  );\n  \n  // ENHANCED: Ultra-realistic brain material for INSTANCE COLORS (not vertex colors)\n  const brainMat = useMemo(\n    () =>\n      new THREE.MeshStandardMaterial({\n        color: \"#ffffff\", // Base white - will be multiplied by instance colors\n        emissive: \"#222222\", // Minimal emissive for visibility\n        emissiveIntensity: 0.2, // Low but visible\n        metalness: 0.1,\n        roughness: 0.8,\n        transparent: true,\n        opacity: 0.95,\n        // NO vertexColors for InstancedMesh - use instanceColor instead\n      }),\n    [],\n  );\n  \n  // WHITE edges for contrast against pink brain material\n  const brainWireMat = useMemo(\n    () =>\n      new THREE.LineBasicMaterial({\n        color: \"#ffffff\", // WHITE edges for maximum contrast\n        transparent: false,\n        opacity: 1,\n        linewidth: 6,\n      }),\n    [],\n  );\n\n  useFrame(() => {\n    if (!meshRef.current || !wireRef.current) return;\n\n    const mesh = meshRef.current;\n    const wire = wireRef.current;\n\n    // Only show at the very END of Phase 10: Ultra-Realistic Brain Formation (90-100%)\n    if (scrollProgress >= 0.90) {\n      const brainFormationProgress = (scrollProgress - 0.90) / 0.10;\n      \n      // Initialize instance colors if not done yet\n      if (!mesh.instanceColor) {\n        const colors = new Float32Array(BRAIN_PIECES_COUNT * 3);\n        for (let i = 0; i < BRAIN_PIECES_COUNT; i++) {\n          const brainPiece = brainFormation[i];\n          const featureColor = getBrainFeatureColor(brainPiece.region, brainPiece.position);\n          colors[i * 3] = featureColor.r;\n          colors[i * 3 + 1] = featureColor.g;\n          colors[i * 3 + 2] = featureColor.b;\n        }\n        mesh.instanceColor = new THREE.InstancedBufferAttribute(colors, 3);\n        mesh.instanceColor.needsUpdate = true; // CRITICAL: Mark for update\n      }\n      \n      // Update all thousands of brain pieces\n      for (let i = 0; i < BRAIN_PIECES_COUNT; i++) {\n        const brainPiece = brainFormation[i];\n        \n        // Ultra-slow spiral formation\n        const spiralProgress = Math.min(brainFormationProgress * 1.5, 1);\n        const spiralRadius = 40 * (1 - spiralProgress);\n        const spiralAngle = spiralProgress * Math.PI * 4; // 2 full rotations\n        \n        // Start from spiral position and move to final brain position\n        const startX = Math.cos(spiralAngle + i * 0.1) * spiralRadius;\n        const startY = Math.sin(spiralAngle + i * 0.05) * spiralRadius;\n        const startZ = Math.sin(spiralAngle + i * 0.08) * spiralRadius;\n        \n        // Use the DETAILED neuromorphic positions (with 4-octave noise folding!)\n        const finalX = brainPiece.position[0];\n        const finalY = brainPiece.position[1];\n        const finalZ = brainPiece.position[2];\n        \n        // Smooth interpolation from spiral to final position\n        const smoothProgress = easeInOutCubic(spiralProgress);\n        const currentX = startX + (finalX - startX) * smoothProgress;\n        const currentY = startY + (finalY - startY) * smoothProgress;\n        const currentZ = startZ + (finalZ - startZ) * smoothProgress;\n        \n        // Set position and scale - small equal-sized pieces for final brain detail\n        dummy.position.set(currentX, currentY, currentZ);\n        dummy.scale.setScalar(1.0); // All pieces equal size, 50% smaller than 729 pieces\n        \n        // Gentle rotation for organic feel\n        const time = Date.now() * 0.001;\n        dummy.rotation.set(\n          time * 0.1 + i * 0.01,\n          time * 0.08 + i * 0.008,\n          time * 0.12 + i * 0.012\n        );\n        \n        dummy.updateMatrix();\n        mesh.setMatrixAt(i, dummy.matrix);\n        wire.setMatrixAt(i, dummy.matrix);\n      }\n      \n      mesh.instanceMatrix.needsUpdate = true;\n      wire.instanceMatrix.needsUpdate = true;\n      mesh.visible = true;\n      wire.visible = true;\n    } else {\n      // Hide during other phases\n      mesh.visible = false;\n      wire.visible = false;\n    }\n  });\n\n  return (\n    <group>\n      {/* Brain mesh instances */}\n      <instancedMesh\n        ref={meshRef}\n        args={[sphereGeo, brainMat, BRAIN_PIECES_COUNT]}\n        visible={false}\n      />\n      {/* Brain wireframe instances for contrast */}\n      <instancedMesh\n        ref={wireRef}\n        args={[sphereEdgeGeo, brainWireMat, BRAIN_PIECES_COUNT]}\n        visible={false}\n      />\n    </group>\n  );\n});\n\nexport default ThousandsBrainInstanced;","size_bytes":13706},"public/3danimation/src/components/UnifiedRubiksCubes.tsx":{"content":"import React, { useRef, useMemo } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\n\n// Smooth easing functions\nconst easeInOutCubic = (t: number): number => {\n  return t < 0.5\n    ? 4 * t * t * t\n    : 1 - Math.pow(-2 * t + 2, 3) / 2;\n};\n\n// Individual unified mini-Rubik's cube component (behaves like the original big cube)\nconst UnifiedMiniRubiksCube = React.memo(function UnifiedMiniRubiksCube({\n  cubeIndex,\n  parentPosition,\n  perspectiveScale,\n  scrollProgress,\n}: {\n  cubeIndex: number;\n  parentPosition: [number, number, number];\n  perspectiveScale: number;\n  scrollProgress: number;\n}) {\n  const groupRef = useRef<THREE.Group>(null);\n\n  // Generate 27 sub-pieces for this unified Rubik's cube\n  const subPieces = useMemo(() => {\n    const pieces = [];\n    for (let x = 0; x < 3; x++) {\n      for (let y = 0; y < 3; y++) {\n        for (let z = 0; z < 3; z++) {\n          pieces.push({\n            position: [\n              (x - 1) * 1.75, // Adjusted spacing to match original cube size\n              (y - 1) * 1.75,\n              (z - 1) * 1.75,\n            ] as [number, number, number],\n            key: `${x}-${y}-${z}`,\n          });\n        }\n      }\n    }\n    return pieces;\n  }, []);\n\n  // Create edge geometry for the sub-pieces\n  const edgeGeometry = useMemo(() => {\n    return new THREE.EdgesGeometry(new THREE.BoxGeometry(1.75, 1.75, 1.75));\n  }, []);\n\n  useFrame(() => {\n    if (!groupRef.current) return;\n\n    let position = [...parentPosition] as [number, number, number];\n    let scale = 0;\n    let rotation = new THREE.Euler(0, 0, 0);\n\n    // Phase 5: Rubik's cube formation (14.48-26.32%) - Appear\n    if (scrollProgress >= 0.1448 && scrollProgress < 0.2632) {\n      const rawProgress = (scrollProgress - 0.1448) / 0.1184;\n      const appearProgress = easeInOutCubic(rawProgress);\n      scale = perspectiveScale * appearProgress;\n    }\n    // Phase 6: Rubik's Cube Showcase (26.32-35.09%) - Unified rotation\n    else if (scrollProgress >= 0.2632 && scrollProgress < 0.3509) {\n      const rawProgress = (scrollProgress - 0.2632) / 0.0877;\n      scale = perspectiveScale;\n      \n      // Add subtle breathing animation\n      const breathingCycle = Math.sin(rawProgress * Math.PI * 12) * 0.08 + 1;\n      scale *= breathingCycle;\n      \n      // Unified rotation for the entire mini-cube (like original big cube)\n      const time = Date.now() * 0.001;\n      const rotationSpeed = 0.3 + cubeIndex * 0.05; // Slight variation per cube\n      rotation.x = Math.sin(time * rotationSpeed) * 0.3;\n      rotation.y = Math.cos(time * rotationSpeed * 0.8) * 0.4;\n      rotation.z = Math.sin(time * rotationSpeed * 1.2) * 0.2;\n    }\n    // Phase 7: Hide as individual pieces take over\n    else if (scrollProgress >= 0.3509) {\n      scale = 0;\n    }\n\n    // Apply transformations\n    groupRef.current.position.set(position[0], position[1], position[2]);\n    groupRef.current.scale.setScalar(scale);\n    groupRef.current.rotation.copy(rotation);\n  });\n\n  return (\n    <group ref={groupRef}>\n      {subPieces.map((piece) => (\n        <group key={piece.key} position={piece.position}>\n          <mesh>\n            <boxGeometry args={[1.75, 1.75, 1.75]} />\n            <meshStandardMaterial\n              color=\"#00ffff\"\n              emissive=\"#0088aa\"\n              emissiveIntensity={0.4}\n              metalness={0.1}\n              roughness={0.2}\n            />\n          </mesh>\n          <lineSegments geometry={edgeGeometry}>\n            <lineBasicMaterial color=\"#ffffff\" linewidth={6} />\n          </lineSegments>\n        </group>\n      ))}\n    </group>\n  );\n});\n\n// Container for all 27 unified Rubik's cubes\nconst UnifiedRubiksCubes = React.memo(function UnifiedRubiksCubes({\n  parentCubes,\n  scrollProgress,\n}: {\n  parentCubes: Array<{\n    id: string;\n    index: number;\n    position: [number, number, number];\n    baseSpread: [number, number, number];\n  }>;\n  scrollProgress: number;\n}) {\n  // Calculate screen-adaptive spread values\n  const screenData = useMemo(() => {\n    const viewportWidth = typeof window !== \"undefined\" ? window.innerWidth : 1920;\n    const viewportHeight = typeof window !== \"undefined\" ? window.innerHeight : 1080;\n    const aspectRatio = viewportWidth / viewportHeight;\n    const fov = 75;\n    const fovRad = (fov * Math.PI) / 180;\n    const screenWidth3D = 2 * Math.tan(fovRad / 2) * 50;\n    const screenHeight3D = screenWidth3D / aspectRatio;\n    const maxSpreadX = screenWidth3D * 0.45;\n    const maxSpreadY = screenHeight3D * 0.45;\n    const maxSpreadZ = 30;\n\n    return { maxSpreadX, maxSpreadY, maxSpreadZ };\n  }, []);\n\n  return (\n    <group>\n      {parentCubes.map((parent) => {\n        // Calculate parent position in spread formation\n        const parentPosition: [number, number, number] = [\n          parent.position[0] + parent.baseSpread[0] * screenData.maxSpreadX,\n          parent.position[1] + parent.baseSpread[1] * screenData.maxSpreadY,\n          parent.position[2] + parent.baseSpread[2] * screenData.maxSpreadZ,\n        ];\n\n        // Calculate perspective scale\n        const normalizedY = (parentPosition[1] - -screenData.maxSpreadY) / (2 * screenData.maxSpreadY);\n        const perspectiveScale = Math.max(0.25, Math.min(1.0, 1.0 - normalizedY * 0.75));\n\n        return (\n          <UnifiedMiniRubiksCube\n            key={parent.id}\n            cubeIndex={parent.index}\n            parentPosition={parentPosition}\n            perspectiveScale={perspectiveScale}\n            scrollProgress={scrollProgress}\n          />\n        );\n      })}\n    </group>\n  );\n});\n\nexport default UnifiedRubiksCubes;","size_bytes":5613},"public/3danimation/src/guidelines/Guidelines.md":{"content":"","size_bytes":0},"public/3danimation/src/styles/globals.css":{"content":"@custom-variant dark (&:is(.dark *));\n\n:root {\n  --font-size: 14px;\n  --background: #ffffff;\n  --foreground: oklch(0.145 0 0);\n  --card: #ffffff;\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: #030213;\n  --primary-foreground: oklch(1 0 0);\n  --secondary: oklch(0.95 0.0058 264.53);\n  --secondary-foreground: #030213;\n  --muted: #ececf0;\n  --muted-foreground: #717182;\n  --accent: #e9ebef;\n  --accent-foreground: #030213;\n  --destructive: #d4183d;\n  --destructive-foreground: #ffffff;\n  --border: rgba(0, 0, 0, 0.1);\n  --input: transparent;\n  --input-background: #f3f3f5;\n  --switch-background: #cbced4;\n  --font-weight-medium: 500;\n  --font-weight-normal: 400;\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.646 0.222 41.116);\n  --chart-2: oklch(0.6 0.118 184.704);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --radius: 0.625rem;\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: #030213;\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n  \n  /* Enhanced 3D Animation Variables */\n  --cube-neon-blue: #00ffff;\n  --cube-neon-blue-emissive: #0088aa;\n  --brain-primary: #ff4488;\n  --brain-emissive: #ff2266;\n  --edge-white: #ffffff;\n  --edge-black: #000000;\n  \n  /* Performance optimization variables */\n  --animation-duration-fast: 0.2s;\n  --animation-duration-medium: 0.5s;\n  --animation-duration-slow: 1s;\n  --easing-smooth: cubic-bezier(0.4, 0, 0.2, 1);\n  --easing-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.145 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.145 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.985 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.269 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.396 0.141 25.723);\n  --destructive-foreground: oklch(0.637 0.237 25.331);\n  --border: oklch(0.269 0 0);\n  --input: oklch(0.269 0 0);\n  --ring: oklch(0.439 0 0);\n  --font-weight-medium: 500;\n  --font-weight-normal: 400;\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(0.269 0 0);\n  --sidebar-ring: oklch(0.439 0 0);\n  \n  /* Enhanced 3D Animation Variables - Dark Mode */\n  --cube-neon-blue: #00ffff;\n  --cube-neon-blue-emissive: #0088aa;\n  --brain-primary: #ff4488;\n  --brain-emissive: #ff2266;\n  --edge-white: #ffffff;\n  --edge-black: #000000;\n}\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-input-background: var(--input-background);\n  --color-switch-background: var(--switch-background);\n  --color-ring: var(--ring);\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n  \n  /* Enhanced 3D Animation Colors */\n  --color-cube-neon-blue: var(--cube-neon-blue);\n  --color-cube-neon-blue-emissive: var(--cube-neon-blue-emissive);\n  --color-brain-primary: var(--brain-primary);\n  --color-brain-emissive: var(--brain-emissive);\n  --color-edge-white: var(--edge-white);\n  --color-edge-black: var(--edge-black);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n\n/**\n * Base typography. This is not applied to elements which have an ancestor with a Tailwind text class.\n */\n@layer base {\n  :where(:not(:has([class*=\" text-\"]), :not(:has([class^=\"text-\"])))) {\n    h1 {\n      font-size: var(--text-2xl);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    h2 {\n      font-size: var(--text-xl);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    h3 {\n      font-size: var(--text-lg);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    h4 {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    p {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-normal);\n      line-height: 1.5;\n    }\n\n    label {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    button {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    input {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-normal);\n      line-height: 1.5;\n    }\n  }\n}\n\nhtml {\n  font-size: var(--font-size);\n  scroll-behavior: smooth;\n}\n\n/* Enhanced 3D Experience Styles */\n.scroll-container {\n  height: 100vh;\n  overflow-y: auto;\n  scroll-snap-type: y mandatory;\n}\n\n.scroll-section {\n  height: 100vh;\n  scroll-snap-align: start;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* Smooth scrolling for better animation */\n* {\n  scrollbar-width: thin;\n  scrollbar-color: #00ffff #1a1a1a;\n}\n\n*::-webkit-scrollbar {\n  width: 8px;\n}\n\n*::-webkit-scrollbar-track {\n  background: #1a1a1a;\n}\n\n*::-webkit-scrollbar-thumb {\n  background: linear-gradient(to bottom, #00ffff, #ff4488);\n  border-radius: 4px;\n}\n\n*::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(to bottom, #00dddd, #ff3366);\n}\n\n/* Phase transition animations */\n.phase-indicator {\n  transition: all var(--animation-duration-medium) var(--easing-smooth);\n}\n\n.cube-container {\n  will-change: transform;\n  transform-style: preserve-3d;\n}\n","size_bytes":7586},"public/3danimation/src/components/figma/ImageWithFallback.tsx":{"content":"import React, { useState } from 'react'\n\nconst ERROR_IMG_SRC =\n  'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg=='\n\nexport function ImageWithFallback(props: React.ImgHTMLAttributes<HTMLImageElement>) {\n  const [didError, setDidError] = useState(false)\n\n  const handleError = () => {\n    setDidError(true)\n  }\n\n  const { src, alt, style, className, ...rest } = props\n\n  return didError ? (\n    <div\n      className={`inline-block bg-gray-100 text-center align-middle ${className ?? ''}`}\n      style={style}\n    >\n      <div className=\"flex items-center justify-center w-full h-full\">\n        <img src={ERROR_IMG_SRC} alt=\"Error loading image\" {...rest} data-original-url={src} />\n      </div>\n    </div>\n  ) : (\n    <img src={src} alt={alt} className={className} style={style} {...rest} onError={handleError} />\n  )\n}\n","size_bytes":1153},"public/3danimation/src/components/ui/accordion.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion@1.2.3\";\nimport { ChevronDownIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Accordion({\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Root>) {\n  return <AccordionPrimitive.Root data-slot=\"accordion\" {...props} />;\n}\n\nfunction AccordionItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Item>) {\n  return (\n    <AccordionPrimitive.Item\n      data-slot=\"accordion-item\"\n      className={cn(\"border-b last:border-b-0\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction AccordionTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {\n  return (\n    <AccordionPrimitive.Header className=\"flex\">\n      <AccordionPrimitive.Trigger\n        data-slot=\"accordion-trigger\"\n        className={cn(\n          \"focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <ChevronDownIcon className=\"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200\" />\n      </AccordionPrimitive.Trigger>\n    </AccordionPrimitive.Header>\n  );\n}\n\nfunction AccordionContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Content>) {\n  return (\n    <AccordionPrimitive.Content\n      data-slot=\"accordion-content\"\n      className=\"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm\"\n      {...props}\n    >\n      <div className={cn(\"pt-0 pb-4\", className)}>{children}</div>\n    </AccordionPrimitive.Content>\n  );\n}\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent };\n","size_bytes":2074},"public/3danimation/src/components/ui/alert-dialog.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog@1.1.6\";\n\nimport { cn } from \"./utils\";\nimport { buttonVariants } from \"./button\";\n\nfunction AlertDialog({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {\n  return <AlertDialogPrimitive.Root data-slot=\"alert-dialog\" {...props} />;\n}\n\nfunction AlertDialogTrigger({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {\n  return (\n    <AlertDialogPrimitive.Trigger data-slot=\"alert-dialog-trigger\" {...props} />\n  );\n}\n\nfunction AlertDialogPortal({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {\n  return (\n    <AlertDialogPrimitive.Portal data-slot=\"alert-dialog-portal\" {...props} />\n  );\n}\n\nfunction AlertDialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {\n  return (\n    <AlertDialogPrimitive.Overlay\n      data-slot=\"alert-dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction AlertDialogContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {\n  return (\n    <AlertDialogPortal>\n      <AlertDialogOverlay />\n      <AlertDialogPrimitive.Content\n        data-slot=\"alert-dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className,\n        )}\n        {...props}\n      />\n    </AlertDialogPortal>\n  );\n}\n\nfunction AlertDialogHeader({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"alert-dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction AlertDialogFooter({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"alert-dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction AlertDialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {\n  return (\n    <AlertDialogPrimitive.Title\n      data-slot=\"alert-dialog-title\"\n      className={cn(\"text-lg font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction AlertDialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {\n  return (\n    <AlertDialogPrimitive.Description\n      data-slot=\"alert-dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction AlertDialogAction({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {\n  return (\n    <AlertDialogPrimitive.Action\n      className={cn(buttonVariants(), className)}\n      {...props}\n    />\n  );\n}\n\nfunction AlertDialogCancel({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {\n  return (\n    <AlertDialogPrimitive.Cancel\n      className={cn(buttonVariants({ variant: \"outline\" }), className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n};\n","size_bytes":3872},"public/3danimation/src/components/ui/alert.tsx":{"content":"import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-card text-card-foreground\",\n        destructive:\n          \"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nfunction Alert({\n  className,\n  variant,\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof alertVariants>) {\n  return (\n    <div\n      data-slot=\"alert\"\n      role=\"alert\"\n      className={cn(alertVariants({ variant }), className)}\n      {...props}\n    />\n  );\n}\n\nfunction AlertTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"alert-title\"\n      className={cn(\n        \"col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction AlertDescription({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"alert-description\"\n      className={cn(\n        \"text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Alert, AlertTitle, AlertDescription };\n","size_bytes":1627},"public/3danimation/src/components/ui/aspect-ratio.tsx":{"content":"\"use client\";\n\nimport * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio@1.1.2\";\n\nfunction AspectRatio({\n  ...props\n}: React.ComponentProps<typeof AspectRatioPrimitive.Root>) {\n  return <AspectRatioPrimitive.Root data-slot=\"aspect-ratio\" {...props} />;\n}\n\nexport { AspectRatio };\n","size_bytes":290},"public/3danimation/src/components/ui/avatar.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar@1.1.3\";\n\nimport { cn } from \"./utils\";\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        \"relative flex size-10 shrink-0 overflow-hidden rounded-full\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn(\"aspect-square size-full\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        \"bg-muted flex size-full items-center justify-center rounded-full\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Avatar, AvatarImage, AvatarFallback };\n","size_bytes":1110},"public/3danimation/src/components/ui/badge.tsx":{"content":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\";\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  );\n}\n\nexport { Badge, badgeVariants };\n","size_bytes":1648},"public/3danimation/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { ChevronRight, MoreHorizontal } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Breadcrumb({ ...props }: React.ComponentProps<\"nav\">) {\n  return <nav aria-label=\"breadcrumb\" data-slot=\"breadcrumb\" {...props} />;\n}\n\nfunction BreadcrumbList({ className, ...props }: React.ComponentProps<\"ol\">) {\n  return (\n    <ol\n      data-slot=\"breadcrumb-list\"\n      className={cn(\n        \"text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction BreadcrumbItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"breadcrumb-item\"\n      className={cn(\"inline-flex items-center gap-1.5\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction BreadcrumbLink({\n  asChild,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean;\n}) {\n  const Comp = asChild ? Slot : \"a\";\n\n  return (\n    <Comp\n      data-slot=\"breadcrumb-link\"\n      className={cn(\"hover:text-foreground transition-colors\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction BreadcrumbPage({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"breadcrumb-page\"\n      role=\"link\"\n      aria-disabled=\"true\"\n      aria-current=\"page\"\n      className={cn(\"text-foreground font-normal\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction BreadcrumbSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"breadcrumb-separator\"\n      role=\"presentation\"\n      aria-hidden=\"true\"\n      className={cn(\"[&>svg]:size-3.5\", className)}\n      {...props}\n    >\n      {children ?? <ChevronRight />}\n    </li>\n  );\n}\n\nfunction BreadcrumbEllipsis({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"breadcrumb-ellipsis\"\n      role=\"presentation\"\n      aria-hidden=\"true\"\n      className={cn(\"flex size-9 items-center justify-center\", className)}\n      {...props}\n    >\n      <MoreHorizontal className=\"size-4\" />\n      <span className=\"sr-only\">More</span>\n    </span>\n  );\n}\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n};\n","size_bytes":2382},"public/3danimation/src/components/ui/button.tsx":{"content":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9 rounded-md\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n  }) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  );\n}\n\nexport { Button, buttonVariants };\n","size_bytes":2118},"public/3danimation/src/components/ui/calendar.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react@0.487.0\";\nimport { DayPicker } from \"react-day-picker@8.10.1\";\n\nimport { cn } from \"./utils\";\nimport { buttonVariants } from \"./button\";\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: React.ComponentProps<typeof DayPicker>) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row gap-2\",\n        month: \"flex flex-col gap-4\",\n        caption: \"flex justify-center pt-1 relative items-center w-full\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"flex items-center gap-1\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"size-7 bg-transparent p-0 opacity-50 hover:opacity-100\",\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-x-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: cn(\n          \"relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md\",\n          props.mode === \"range\"\n            ? \"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md\"\n            : \"[&:has([aria-selected])]:rounded-md\",\n        ),\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"size-8 p-0 font-normal aria-selected:opacity-100\",\n        ),\n        day_range_start:\n          \"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground\",\n        day_range_end:\n          \"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"size-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"size-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  );\n}\n\nexport { Calendar };\n","size_bytes":2928},"public/3danimation/src/components/ui/card.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"./utils\";\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <h4\n      data-slot=\"card-title\"\n      className={cn(\"leading-none\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <p\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6 [&:last-child]:pb-6\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 pb-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n};\n","size_bytes":1988},"public/3danimation/src/components/ui/carousel.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react@8.6.0\";\nimport { ArrowLeft, ArrowRight } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\nimport { Button } from \"./button\";\n\ntype CarouselApi = UseEmblaCarouselType[1];\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>;\ntype CarouselOptions = UseCarouselParameters[0];\ntype CarouselPlugin = UseCarouselParameters[1];\n\ntype CarouselProps = {\n  opts?: CarouselOptions;\n  plugins?: CarouselPlugin;\n  orientation?: \"horizontal\" | \"vertical\";\n  setApi?: (api: CarouselApi) => void;\n};\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0];\n  api: ReturnType<typeof useEmblaCarousel>[1];\n  scrollPrev: () => void;\n  scrollNext: () => void;\n  canScrollPrev: boolean;\n  canScrollNext: boolean;\n} & CarouselProps;\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null);\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext);\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\");\n  }\n\n  return context;\n}\n\nfunction Carousel({\n  orientation = \"horizontal\",\n  opts,\n  setApi,\n  plugins,\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & CarouselProps) {\n  const [carouselRef, api] = useEmblaCarousel(\n    {\n      ...opts,\n      axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n    },\n    plugins,\n  );\n  const [canScrollPrev, setCanScrollPrev] = React.useState(false);\n  const [canScrollNext, setCanScrollNext] = React.useState(false);\n\n  const onSelect = React.useCallback((api: CarouselApi) => {\n    if (!api) return;\n    setCanScrollPrev(api.canScrollPrev());\n    setCanScrollNext(api.canScrollNext());\n  }, []);\n\n  const scrollPrev = React.useCallback(() => {\n    api?.scrollPrev();\n  }, [api]);\n\n  const scrollNext = React.useCallback(() => {\n    api?.scrollNext();\n  }, [api]);\n\n  const handleKeyDown = React.useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      if (event.key === \"ArrowLeft\") {\n        event.preventDefault();\n        scrollPrev();\n      } else if (event.key === \"ArrowRight\") {\n        event.preventDefault();\n        scrollNext();\n      }\n    },\n    [scrollPrev, scrollNext],\n  );\n\n  React.useEffect(() => {\n    if (!api || !setApi) return;\n    setApi(api);\n  }, [api, setApi]);\n\n  React.useEffect(() => {\n    if (!api) return;\n    onSelect(api);\n    api.on(\"reInit\", onSelect);\n    api.on(\"select\", onSelect);\n\n    return () => {\n      api?.off(\"select\", onSelect);\n    };\n  }, [api, onSelect]);\n\n  return (\n    <CarouselContext.Provider\n      value={{\n        carouselRef,\n        api: api,\n        opts,\n        orientation:\n          orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n        scrollPrev,\n        scrollNext,\n        canScrollPrev,\n        canScrollNext,\n      }}\n    >\n      <div\n        onKeyDownCapture={handleKeyDown}\n        className={cn(\"relative\", className)}\n        role=\"region\"\n        aria-roledescription=\"carousel\"\n        data-slot=\"carousel\"\n        {...props}\n      >\n        {children}\n      </div>\n    </CarouselContext.Provider>\n  );\n}\n\nfunction CarouselContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  const { carouselRef, orientation } = useCarousel();\n\n  return (\n    <div\n      ref={carouselRef}\n      className=\"overflow-hidden\"\n      data-slot=\"carousel-content\"\n    >\n      <div\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className,\n        )}\n        {...props}\n      />\n    </div>\n  );\n}\n\nfunction CarouselItem({ className, ...props }: React.ComponentProps<\"div\">) {\n  const { orientation } = useCarousel();\n\n  return (\n    <div\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      data-slot=\"carousel-item\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CarouselPrevious({\n  className,\n  variant = \"outline\",\n  size = \"icon\",\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel();\n\n  return (\n    <Button\n      data-slot=\"carousel-previous\"\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute size-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"top-1/2 -left-12 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className,\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  );\n}\n\nfunction CarouselNext({\n  className,\n  variant = \"outline\",\n  size = \"icon\",\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { orientation, scrollNext, canScrollNext } = useCarousel();\n\n  return (\n    <Button\n      data-slot=\"carousel-next\"\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute size-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"top-1/2 -right-12 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className,\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  );\n}\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n};\n","size_bytes":5620},"public/3danimation/src/components/ui/chart.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as RechartsPrimitive from \"recharts@2.15.2\";\n\nimport { cn } from \"./utils\";\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const;\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode;\n    icon?: React.ComponentType;\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  );\n};\n\ntype ChartContextProps = {\n  config: ChartConfig;\n};\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null);\n\nfunction useChart() {\n  const context = React.useContext(ChartContext);\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\");\n  }\n\n  return context;\n}\n\nfunction ChartContainer({\n  id,\n  className,\n  children,\n  config,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  config: ChartConfig;\n  children: React.ComponentProps<\n    typeof RechartsPrimitive.ResponsiveContainer\n  >[\"children\"];\n}) {\n  const uniqueId = React.useId();\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`;\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-slot=\"chart\"\n        data-chart={chartId}\n        className={cn(\n          \"[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden\",\n          className,\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  );\n}\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color,\n  );\n\n  if (!colorConfig.length) {\n    return null;\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color;\n    return color ? `  --color-${key}: ${color};` : null;\n  })\n  .join(\"\\n\")}\n}\n`,\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  );\n};\n\nconst ChartTooltip = RechartsPrimitive.Tooltip;\n\nfunction ChartTooltipContent({\n  active,\n  payload,\n  className,\n  indicator = \"dot\",\n  hideLabel = false,\n  hideIndicator = false,\n  label,\n  labelFormatter,\n  labelClassName,\n  formatter,\n  color,\n  nameKey,\n  labelKey,\n}: React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n  React.ComponentProps<\"div\"> & {\n    hideLabel?: boolean;\n    hideIndicator?: boolean;\n    indicator?: \"line\" | \"dot\" | \"dashed\";\n    nameKey?: string;\n    labelKey?: string;\n  }) {\n  const { config } = useChart();\n\n  const tooltipLabel = React.useMemo(() => {\n    if (hideLabel || !payload?.length) {\n      return null;\n    }\n\n    const [item] = payload;\n    const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`;\n    const itemConfig = getPayloadConfigFromPayload(config, item, key);\n    const value =\n      !labelKey && typeof label === \"string\"\n        ? config[label as keyof typeof config]?.label || label\n        : itemConfig?.label;\n\n    if (labelFormatter) {\n      return (\n        <div className={cn(\"font-medium\", labelClassName)}>\n          {labelFormatter(value, payload)}\n        </div>\n      );\n    }\n\n    if (!value) {\n      return null;\n    }\n\n    return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>;\n  }, [\n    label,\n    labelFormatter,\n    payload,\n    hideLabel,\n    labelClassName,\n    config,\n    labelKey,\n  ]);\n\n  if (!active || !payload?.length) {\n    return null;\n  }\n\n  const nestLabel = payload.length === 1 && indicator !== \"dot\";\n\n  return (\n    <div\n      className={cn(\n        \"border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl\",\n        className,\n      )}\n    >\n      {!nestLabel ? tooltipLabel : null}\n      <div className=\"grid gap-1.5\">\n        {payload.map((item, index) => {\n          const key = `${nameKey || item.name || item.dataKey || \"value\"}`;\n          const itemConfig = getPayloadConfigFromPayload(config, item, key);\n          const indicatorColor = color || item.payload.fill || item.color;\n\n          return (\n            <div\n              key={item.dataKey}\n              className={cn(\n                \"[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5\",\n                indicator === \"dot\" && \"items-center\",\n              )}\n            >\n              {formatter && item?.value !== undefined && item.name ? (\n                formatter(item.value, item.name, item, index, item.payload)\n              ) : (\n                <>\n                  {itemConfig?.icon ? (\n                    <itemConfig.icon />\n                  ) : (\n                    !hideIndicator && (\n                      <div\n                        className={cn(\n                          \"shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)\",\n                          {\n                            \"h-2.5 w-2.5\": indicator === \"dot\",\n                            \"w-1\": indicator === \"line\",\n                            \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                              indicator === \"dashed\",\n                            \"my-0.5\": nestLabel && indicator === \"dashed\",\n                          },\n                        )}\n                        style={\n                          {\n                            \"--color-bg\": indicatorColor,\n                            \"--color-border\": indicatorColor,\n                          } as React.CSSProperties\n                        }\n                      />\n                    )\n                  )}\n                  <div\n                    className={cn(\n                      \"flex flex-1 justify-between leading-none\",\n                      nestLabel ? \"items-end\" : \"items-center\",\n                    )}\n                  >\n                    <div className=\"grid gap-1.5\">\n                      {nestLabel ? tooltipLabel : null}\n                      <span className=\"text-muted-foreground\">\n                        {itemConfig?.label || item.name}\n                      </span>\n                    </div>\n                    {item.value && (\n                      <span className=\"text-foreground font-mono font-medium tabular-nums\">\n                        {item.value.toLocaleString()}\n                      </span>\n                    )}\n                  </div>\n                </>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nconst ChartLegend = RechartsPrimitive.Legend;\n\nfunction ChartLegendContent({\n  className,\n  hideIcon = false,\n  payload,\n  verticalAlign = \"bottom\",\n  nameKey,\n}: React.ComponentProps<\"div\"> &\n  Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n    hideIcon?: boolean;\n    nameKey?: string;\n  }) {\n  const { config } = useChart();\n\n  if (!payload?.length) {\n    return null;\n  }\n\n  return (\n    <div\n      className={cn(\n        \"flex items-center justify-center gap-4\",\n        verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n        className,\n      )}\n    >\n      {payload.map((item) => {\n        const key = `${nameKey || item.dataKey || \"value\"}`;\n        const itemConfig = getPayloadConfigFromPayload(config, item, key);\n\n        return (\n          <div\n            key={item.value}\n            className={cn(\n              \"[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3\",\n            )}\n          >\n            {itemConfig?.icon && !hideIcon ? (\n              <itemConfig.icon />\n            ) : (\n              <div\n                className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                style={{\n                  backgroundColor: item.color,\n                }}\n              />\n            )}\n            {itemConfig?.label}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string,\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined;\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined;\n\n  let configLabelKey: string = key;\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string;\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string;\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config];\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n};\n","size_bytes":9859},"public/3danimation/src/components/ui/checkbox.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox@1.1.4\";\nimport { CheckIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        \"peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"flex items-center justify-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  );\n}\n\nexport { Checkbox };\n","size_bytes":1258},"public/3danimation/src/components/ui/collapsible.tsx":{"content":"\"use client\";\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible@1.1.3\";\n\nfunction Collapsible({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {\n  return <CollapsiblePrimitive.Root data-slot=\"collapsible\" {...props} />;\n}\n\nfunction CollapsibleTrigger({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleTrigger\n      data-slot=\"collapsible-trigger\"\n      {...props}\n    />\n  );\n}\n\nfunction CollapsibleContent({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleContent\n      data-slot=\"collapsible-content\"\n      {...props}\n    />\n  );\n}\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent };\n","size_bytes":812},"public/3danimation/src/components/ui/command.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport { Command as CommandPrimitive } from \"cmdk@1.1.1\";\nimport { SearchIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"./dialog\";\n\nfunction Command({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive>) {\n  return (\n    <CommandPrimitive\n      data-slot=\"command\"\n      className={cn(\n        \"bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CommandDialog({\n  title = \"Command Palette\",\n  description = \"Search for a command to run...\",\n  children,\n  ...props\n}: React.ComponentProps<typeof Dialog> & {\n  title?: string;\n  description?: string;\n}) {\n  return (\n    <Dialog {...props}>\n      <DialogHeader className=\"sr-only\">\n        <DialogTitle>{title}</DialogTitle>\n        <DialogDescription>{description}</DialogDescription>\n      </DialogHeader>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nfunction CommandInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Input>) {\n  return (\n    <div\n      data-slot=\"command-input-wrapper\"\n      className=\"flex h-9 items-center gap-2 border-b px-3\"\n    >\n      <SearchIcon className=\"size-4 shrink-0 opacity-50\" />\n      <CommandPrimitive.Input\n        data-slot=\"command-input\"\n        className={cn(\n          \"placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50\",\n          className,\n        )}\n        {...props}\n      />\n    </div>\n  );\n}\n\nfunction CommandList({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.List>) {\n  return (\n    <CommandPrimitive.List\n      data-slot=\"command-list\"\n      className={cn(\n        \"max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CommandEmpty({\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Empty>) {\n  return (\n    <CommandPrimitive.Empty\n      data-slot=\"command-empty\"\n      className=\"py-6 text-center text-sm\"\n      {...props}\n    />\n  );\n}\n\nfunction CommandGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Group>) {\n  return (\n    <CommandPrimitive.Group\n      data-slot=\"command-group\"\n      className={cn(\n        \"text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CommandSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Separator>) {\n  return (\n    <CommandPrimitive.Separator\n      data-slot=\"command-separator\"\n      className={cn(\"bg-border -mx-1 h-px\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CommandItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Item>) {\n  return (\n    <CommandPrimitive.Item\n      data-slot=\"command-item\"\n      className={cn(\n        \"data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CommandShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"command-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n};\n","size_bytes":4676},"public/3danimation/src/components/ui/context-menu.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu@2.2.6\";\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction ContextMenu({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Root>) {\n  return <ContextMenuPrimitive.Root data-slot=\"context-menu\" {...props} />;\n}\n\nfunction ContextMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Trigger>) {\n  return (\n    <ContextMenuPrimitive.Trigger data-slot=\"context-menu-trigger\" {...props} />\n  );\n}\n\nfunction ContextMenuGroup({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Group>) {\n  return (\n    <ContextMenuPrimitive.Group data-slot=\"context-menu-group\" {...props} />\n  );\n}\n\nfunction ContextMenuPortal({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Portal>) {\n  return (\n    <ContextMenuPrimitive.Portal data-slot=\"context-menu-portal\" {...props} />\n  );\n}\n\nfunction ContextMenuSub({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Sub>) {\n  return <ContextMenuPrimitive.Sub data-slot=\"context-menu-sub\" {...props} />;\n}\n\nfunction ContextMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.RadioGroup>) {\n  return (\n    <ContextMenuPrimitive.RadioGroup\n      data-slot=\"context-menu-radio-group\"\n      {...props}\n    />\n  );\n}\n\nfunction ContextMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.SubTrigger> & {\n  inset?: boolean;\n}) {\n  return (\n    <ContextMenuPrimitive.SubTrigger\n      data-slot=\"context-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto\" />\n    </ContextMenuPrimitive.SubTrigger>\n  );\n}\n\nfunction ContextMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.SubContent>) {\n  return (\n    <ContextMenuPrimitive.SubContent\n      data-slot=\"context-menu-sub-content\"\n      className={cn(\n        \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction ContextMenuContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Content>) {\n  return (\n    <ContextMenuPrimitive.Portal>\n      <ContextMenuPrimitive.Content\n        data-slot=\"context-menu-content\"\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md\",\n          className,\n        )}\n        {...props}\n      />\n    </ContextMenuPrimitive.Portal>\n  );\n}\n\nfunction ContextMenuItem({\n  className,\n  inset,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Item> & {\n  inset?: boolean;\n  variant?: \"default\" | \"destructive\";\n}) {\n  return (\n    <ContextMenuPrimitive.Item\n      data-slot=\"context-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction ContextMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.CheckboxItem>) {\n  return (\n    <ContextMenuPrimitive.CheckboxItem\n      data-slot=\"context-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <ContextMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </ContextMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </ContextMenuPrimitive.CheckboxItem>\n  );\n}\n\nfunction ContextMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.RadioItem>) {\n  return (\n    <ContextMenuPrimitive.RadioItem\n      data-slot=\"context-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <ContextMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </ContextMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </ContextMenuPrimitive.RadioItem>\n  );\n}\n\nfunction ContextMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Label> & {\n  inset?: boolean;\n}) {\n  return (\n    <ContextMenuPrimitive.Label\n      data-slot=\"context-menu-label\"\n      data-inset={inset}\n      className={cn(\n        \"text-foreground px-2 py-1.5 text-sm font-medium data-[inset]:pl-8\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction ContextMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof ContextMenuPrimitive.Separator>) {\n  return (\n    <ContextMenuPrimitive.Separator\n      data-slot=\"context-menu-separator\"\n      className={cn(\"bg-border -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction ContextMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"context-menu-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n};\n","size_bytes":8265},"public/3danimation/src/components/ui/dialog.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog@1.1.6\";\nimport { XIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />;\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />;\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />;\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />;\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DialogContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content>) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <DialogPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\">\n          <XIcon />\n          <span className=\"sr-only\">Close</span>\n        </DialogPrimitive.Close>\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  );\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n};\n","size_bytes":3842},"public/3danimation/src/components/ui/drawer.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport { Drawer as DrawerPrimitive } from \"vaul@1.1.2\";\n\nimport { cn } from \"./utils\";\n\nfunction Drawer({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) {\n  return <DrawerPrimitive.Root data-slot=\"drawer\" {...props} />;\n}\n\nfunction DrawerTrigger({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Trigger>) {\n  return <DrawerPrimitive.Trigger data-slot=\"drawer-trigger\" {...props} />;\n}\n\nfunction DrawerPortal({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Portal>) {\n  return <DrawerPrimitive.Portal data-slot=\"drawer-portal\" {...props} />;\n}\n\nfunction DrawerClose({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Close>) {\n  return <DrawerPrimitive.Close data-slot=\"drawer-close\" {...props} />;\n}\n\nfunction DrawerOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Overlay>) {\n  return (\n    <DrawerPrimitive.Overlay\n      data-slot=\"drawer-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DrawerContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Content>) {\n  return (\n    <DrawerPortal data-slot=\"drawer-portal\">\n      <DrawerOverlay />\n      <DrawerPrimitive.Content\n        data-slot=\"drawer-content\"\n        className={cn(\n          \"group/drawer-content bg-background fixed z-50 flex h-auto flex-col\",\n          \"data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b\",\n          \"data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t\",\n          \"data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm\",\n          \"data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm\",\n          className,\n        )}\n        {...props}\n      >\n        <div className=\"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block\" />\n        {children}\n      </DrawerPrimitive.Content>\n    </DrawerPortal>\n  );\n}\n\nfunction DrawerHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"drawer-header\"\n      className={cn(\"flex flex-col gap-1.5 p-4\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DrawerFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"drawer-footer\"\n      className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DrawerTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Title>) {\n  return (\n    <DrawerPrimitive.Title\n      data-slot=\"drawer-title\"\n      className={cn(\"text-foreground font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DrawerDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Description>) {\n  return (\n    <DrawerPrimitive.Description\n      data-slot=\"drawer-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n};\n","size_bytes":4091},"public/3danimation/src/components/ui/dropdown-menu.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu@2.1.6\";\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />;\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  );\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md\",\n          className,\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  );\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  );\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean;\n  variant?: \"default\" | \"destructive\";\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  );\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  );\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean;\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        \"px-2 py-1.5 text-sm font-medium data-[inset]:pl-8\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn(\"bg-border -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />;\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean;\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  );\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n};\n","size_bytes":8327},"public/3danimation/src/components/ui/form.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label@2.1.2\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  useFormState,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form@7.55.0\";\n\nimport { cn } from \"./utils\";\nimport { Label } from \"./label\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue,\n);\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n};\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext);\n  const itemContext = React.useContext(FormItemContext);\n  const { getFieldState } = useFormContext();\n  const formState = useFormState({ name: fieldContext.name });\n  const fieldState = getFieldState(fieldContext.name, formState);\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\");\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  };\n};\n\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue,\n);\n\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\n  const id = React.useId();\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn(\"grid gap-2\", className)}\n        {...props}\n      />\n    </FormItemContext.Provider>\n  );\n}\n\nfunction FormLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  const { error, formItemId } = useFormField();\n\n  return (\n    <Label\n      data-slot=\"form-label\"\n      data-error={!!error}\n      className={cn(\"data-[error=true]:text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  );\n}\n\nfunction FormControl({ ...props }: React.ComponentProps<typeof Slot>) {\n  const { error, formItemId, formDescriptionId, formMessageId } =\n    useFormField();\n\n  return (\n    <Slot\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  );\n}\n\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { formDescriptionId } = useFormField();\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { error, formMessageId } = useFormField();\n  const body = error ? String(error?.message ?? \"\") : props.children;\n\n  if (!body) {\n    return null;\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn(\"text-destructive text-sm\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  );\n}\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n};\n","size_bytes":3804},"public/3danimation/src/components/ui/hover-card.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card@1.1.6\";\n\nimport { cn } from \"./utils\";\n\nfunction HoverCard({\n  ...props\n}: React.ComponentProps<typeof HoverCardPrimitive.Root>) {\n  return <HoverCardPrimitive.Root data-slot=\"hover-card\" {...props} />;\n}\n\nfunction HoverCardTrigger({\n  ...props\n}: React.ComponentProps<typeof HoverCardPrimitive.Trigger>) {\n  return (\n    <HoverCardPrimitive.Trigger data-slot=\"hover-card-trigger\" {...props} />\n  );\n}\n\nfunction HoverCardContent({\n  className,\n  align = \"center\",\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof HoverCardPrimitive.Content>) {\n  return (\n    <HoverCardPrimitive.Portal data-slot=\"hover-card-portal\">\n      <HoverCardPrimitive.Content\n        data-slot=\"hover-card-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden\",\n          className,\n        )}\n        {...props}\n      />\n    </HoverCardPrimitive.Portal>\n  );\n}\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent };\n","size_bytes":1543},"public/3danimation/src/components/ui/input-otp.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport { OTPInput, OTPInputContext } from \"input-otp@1.4.2\";\nimport { MinusIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction InputOTP({\n  className,\n  containerClassName,\n  ...props\n}: React.ComponentProps<typeof OTPInput> & {\n  containerClassName?: string;\n}) {\n  return (\n    <OTPInput\n      data-slot=\"input-otp\"\n      containerClassName={cn(\n        \"flex items-center gap-2 has-disabled:opacity-50\",\n        containerClassName,\n      )}\n      className={cn(\"disabled:cursor-not-allowed\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction InputOTPGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"input-otp-group\"\n      className={cn(\"flex items-center gap-1\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction InputOTPSlot({\n  index,\n  className,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  index: number;\n}) {\n  const inputOTPContext = React.useContext(OTPInputContext);\n  const { char, hasFakeCaret, isActive } = inputOTPContext?.slots[index] ?? {};\n\n  return (\n    <div\n      data-slot=\"input-otp-slot\"\n      data-active={isActive}\n      className={cn(\n        \"data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm bg-input-background transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]\",\n        className,\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"animate-caret-blink bg-foreground h-4 w-px duration-1000\" />\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction InputOTPSeparator({ ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div data-slot=\"input-otp-separator\" role=\"separator\" {...props}>\n      <MinusIcon />\n    </div>\n  );\n}\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator };\n","size_bytes":2296},"public/3danimation/src/components/ui/input.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"./utils\";\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Input };\n","size_bytes":963},"public/3danimation/src/components/ui/label.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label@2.1.2\";\n\nimport { cn } from \"./utils\";\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Label };\n","size_bytes":620},"public/3danimation/src/components/ui/menubar.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar@1.1.6\";\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Menubar({\n  className,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Root>) {\n  return (\n    <MenubarPrimitive.Root\n      data-slot=\"menubar\"\n      className={cn(\n        \"bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu data-slot=\"menubar-menu\" {...props} />;\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group data-slot=\"menubar-group\" {...props} />;\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal data-slot=\"menubar-portal\" {...props} />;\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return (\n    <MenubarPrimitive.RadioGroup data-slot=\"menubar-radio-group\" {...props} />\n  );\n}\n\nfunction MenubarTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Trigger>) {\n  return (\n    <MenubarPrimitive.Trigger\n      data-slot=\"menubar-trigger\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction MenubarContent({\n  className,\n  align = \"start\",\n  alignOffset = -4,\n  sideOffset = 8,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Content>) {\n  return (\n    <MenubarPortal>\n      <MenubarPrimitive.Content\n        data-slot=\"menubar-content\"\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md\",\n          className,\n        )}\n        {...props}\n      />\n    </MenubarPortal>\n  );\n}\n\nfunction MenubarItem({\n  className,\n  inset,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Item> & {\n  inset?: boolean;\n  variant?: \"default\" | \"destructive\";\n}) {\n  return (\n    <MenubarPrimitive.Item\n      data-slot=\"menubar-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction MenubarCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.CheckboxItem>) {\n  return (\n    <MenubarPrimitive.CheckboxItem\n      data-slot=\"menubar-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <MenubarPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </MenubarPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </MenubarPrimitive.CheckboxItem>\n  );\n}\n\nfunction MenubarRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioItem>) {\n  return (\n    <MenubarPrimitive.RadioItem\n      data-slot=\"menubar-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <MenubarPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </MenubarPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </MenubarPrimitive.RadioItem>\n  );\n}\n\nfunction MenubarLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Label> & {\n  inset?: boolean;\n}) {\n  return (\n    <MenubarPrimitive.Label\n      data-slot=\"menubar-label\"\n      data-inset={inset}\n      className={cn(\n        \"px-2 py-1.5 text-sm font-medium data-[inset]:pl-8\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction MenubarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Separator>) {\n  return (\n    <MenubarPrimitive.Separator\n      data-slot=\"menubar-separator\"\n      className={cn(\"bg-border -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction MenubarShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"menubar-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />;\n}\n\nfunction MenubarSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.SubTrigger> & {\n  inset?: boolean;\n}) {\n  return (\n    <MenubarPrimitive.SubTrigger\n      data-slot=\"menubar-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-none select-none data-[inset]:pl-8\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto h-4 w-4\" />\n    </MenubarPrimitive.SubTrigger>\n  );\n}\n\nfunction MenubarSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.SubContent>) {\n  return (\n    <MenubarPrimitive.SubContent\n      data-slot=\"menubar-sub-content\"\n      className={cn(\n        \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Menubar,\n  MenubarPortal,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarGroup,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarItem,\n  MenubarShortcut,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarSub,\n  MenubarSubTrigger,\n  MenubarSubContent,\n};\n","size_bytes":8440},"public/3danimation/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\";\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu@1.2.5\";\nimport { cva } from \"class-variance-authority@0.7.1\";\nimport { ChevronDownIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction NavigationMenu({\n  className,\n  children,\n  viewport = true,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Root> & {\n  viewport?: boolean;\n}) {\n  return (\n    <NavigationMenuPrimitive.Root\n      data-slot=\"navigation-menu\"\n      data-viewport={viewport}\n      className={cn(\n        \"group/navigation-menu relative flex max-w-max flex-1 items-center justify-center\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      {viewport && <NavigationMenuViewport />}\n    </NavigationMenuPrimitive.Root>\n  );\n}\n\nfunction NavigationMenuList({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.List>) {\n  return (\n    <NavigationMenuPrimitive.List\n      data-slot=\"navigation-menu-list\"\n      className={cn(\n        \"group flex flex-1 list-none items-center justify-center gap-1\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction NavigationMenuItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Item>) {\n  return (\n    <NavigationMenuPrimitive.Item\n      data-slot=\"navigation-menu-item\"\n      className={cn(\"relative\", className)}\n      {...props}\n    />\n  );\n}\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1\",\n);\n\nfunction NavigationMenuTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Trigger>) {\n  return (\n    <NavigationMenuPrimitive.Trigger\n      data-slot=\"navigation-menu-trigger\"\n      className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n      {...props}\n    >\n      {children}{\" \"}\n      <ChevronDownIcon\n        className=\"relative top-[1px] ml-1 size-3 transition duration-300 group-data-[state=open]:rotate-180\"\n        aria-hidden=\"true\"\n      />\n    </NavigationMenuPrimitive.Trigger>\n  );\n}\n\nfunction NavigationMenuContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Content>) {\n  return (\n    <NavigationMenuPrimitive.Content\n      data-slot=\"navigation-menu-content\"\n      className={cn(\n        \"data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 top-0 left-0 w-full p-2 pr-2.5 md:absolute md:w-auto\",\n        \"group-data-[viewport=false]/navigation-menu:bg-popover group-data-[viewport=false]/navigation-menu:text-popover-foreground group-data-[viewport=false]/navigation-menu:data-[state=open]:animate-in group-data-[viewport=false]/navigation-menu:data-[state=closed]:animate-out group-data-[viewport=false]/navigation-menu:data-[state=closed]:zoom-out-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:zoom-in-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:fade-in-0 group-data-[viewport=false]/navigation-menu:data-[state=closed]:fade-out-0 group-data-[viewport=false]/navigation-menu:top-full group-data-[viewport=false]/navigation-menu:mt-1.5 group-data-[viewport=false]/navigation-menu:overflow-hidden group-data-[viewport=false]/navigation-menu:rounded-md group-data-[viewport=false]/navigation-menu:border group-data-[viewport=false]/navigation-menu:shadow group-data-[viewport=false]/navigation-menu:duration-200 **:data-[slot=navigation-menu-link]:focus:ring-0 **:data-[slot=navigation-menu-link]:focus:outline-none\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction NavigationMenuViewport({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Viewport>) {\n  return (\n    <div\n      className={cn(\n        \"absolute top-full left-0 isolate z-50 flex justify-center\",\n      )}\n    >\n      <NavigationMenuPrimitive.Viewport\n        data-slot=\"navigation-menu-viewport\"\n        className={cn(\n          \"origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]\",\n          className,\n        )}\n        {...props}\n      />\n    </div>\n  );\n}\n\nfunction NavigationMenuLink({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Link>) {\n  return (\n    <NavigationMenuPrimitive.Link\n      data-slot=\"navigation-menu-link\"\n      className={cn(\n        \"data-[active=true]:focus:bg-accent data-[active=true]:hover:bg-accent data-[active=true]:bg-accent/50 data-[active=true]:text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus-visible:ring-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex flex-col gap-1 rounded-sm p-2 text-sm transition-all outline-none focus-visible:ring-[3px] focus-visible:outline-1 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction NavigationMenuIndicator({\n  className,\n  ...props\n}: React.ComponentProps<typeof NavigationMenuPrimitive.Indicator>) {\n  return (\n    <NavigationMenuPrimitive.Indicator\n      data-slot=\"navigation-menu-indicator\"\n      className={cn(\n        \"data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden\",\n        className,\n      )}\n      {...props}\n    >\n      <div className=\"bg-border relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm shadow-md\" />\n    </NavigationMenuPrimitive.Indicator>\n  );\n}\n\nexport {\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n  navigationMenuTriggerStyle,\n};\n","size_bytes":6704},"public/3danimation/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\";\nimport {\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  MoreHorizontalIcon,\n} from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\nimport { Button, buttonVariants } from \"./button\";\n\nfunction Pagination({ className, ...props }: React.ComponentProps<\"nav\">) {\n  return (\n    <nav\n      role=\"navigation\"\n      aria-label=\"pagination\"\n      data-slot=\"pagination\"\n      className={cn(\"mx-auto flex w-full justify-center\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction PaginationContent({\n  className,\n  ...props\n}: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"pagination-content\"\n      className={cn(\"flex flex-row items-center gap-1\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction PaginationItem({ ...props }: React.ComponentProps<\"li\">) {\n  return <li data-slot=\"pagination-item\" {...props} />;\n}\n\ntype PaginationLinkProps = {\n  isActive?: boolean;\n} & Pick<React.ComponentProps<typeof Button>, \"size\"> &\n  React.ComponentProps<\"a\">;\n\nfunction PaginationLink({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) {\n  return (\n    <a\n      aria-current={isActive ? \"page\" : undefined}\n      data-slot=\"pagination-link\"\n      data-active={isActive}\n      className={cn(\n        buttonVariants({\n          variant: isActive ? \"outline\" : \"ghost\",\n          size,\n        }),\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction PaginationPrevious({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) {\n  return (\n    <PaginationLink\n      aria-label=\"Go to previous page\"\n      size=\"default\"\n      className={cn(\"gap-1 px-2.5 sm:pl-2.5\", className)}\n      {...props}\n    >\n      <ChevronLeftIcon />\n      <span className=\"hidden sm:block\">Previous</span>\n    </PaginationLink>\n  );\n}\n\nfunction PaginationNext({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) {\n  return (\n    <PaginationLink\n      aria-label=\"Go to next page\"\n      size=\"default\"\n      className={cn(\"gap-1 px-2.5 sm:pr-2.5\", className)}\n      {...props}\n    >\n      <span className=\"hidden sm:block\">Next</span>\n      <ChevronRightIcon />\n    </PaginationLink>\n  );\n}\n\nfunction PaginationEllipsis({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      aria-hidden\n      data-slot=\"pagination-ellipsis\"\n      className={cn(\"flex size-9 items-center justify-center\", className)}\n      {...props}\n    >\n      <MoreHorizontalIcon className=\"size-4\" />\n      <span className=\"sr-only\">More pages</span>\n    </span>\n  );\n}\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n};\n","size_bytes":2717},"public/3danimation/src/components/ui/popover.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover@1.1.6\";\n\nimport { cn } from \"./utils\";\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />;\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />;\n}\n\nfunction PopoverContent({\n  className,\n  align = \"center\",\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden\",\n          className,\n        )}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  );\n}\n\nfunction PopoverAnchor({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />;\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor };\n","size_bytes":1647},"public/3danimation/src/components/ui/progress.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as ProgressPrimitive from \"@radix-ui/react-progress@1.1.2\";\n\nimport { cn } from \"./utils\";\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        \"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",\n        className,\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  );\n}\n\nexport { Progress };\n","size_bytes":749},"public/3danimation/src/components/ui/radio-group.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group@1.2.3\";\nimport { CircleIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction RadioGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof RadioGroupPrimitive.Root>) {\n  return (\n    <RadioGroupPrimitive.Root\n      data-slot=\"radio-group\"\n      className={cn(\"grid gap-3\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction RadioGroupItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof RadioGroupPrimitive.Item>) {\n  return (\n    <RadioGroupPrimitive.Item\n      data-slot=\"radio-group-item\"\n      className={cn(\n        \"border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator\n        data-slot=\"radio-group-indicator\"\n        className=\"relative flex items-center justify-center\"\n      >\n        <CircleIcon className=\"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  );\n}\n\nexport { RadioGroup, RadioGroupItem };\n","size_bytes":1485},"public/3danimation/src/components/ui/resizable.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport { GripVerticalIcon } from \"lucide-react@0.487.0\";\nimport * as ResizablePrimitive from \"react-resizable-panels@2.1.7\";\n\nimport { cn } from \"./utils\";\n\nfunction ResizablePanelGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) {\n  return (\n    <ResizablePrimitive.PanelGroup\n      data-slot=\"resizable-panel-group\"\n      className={cn(\n        \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction ResizablePanel({\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.Panel>) {\n  return <ResizablePrimitive.Panel data-slot=\"resizable-panel\" {...props} />;\n}\n\nfunction ResizableHandle({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean;\n}) {\n  return (\n    <ResizablePrimitive.PanelResizeHandle\n      data-slot=\"resizable-handle\"\n      className={cn(\n        \"bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n        className,\n      )}\n      {...props}\n    >\n      {withHandle && (\n        <div className=\"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border\">\n          <GripVerticalIcon className=\"size-2.5\" />\n        </div>\n      )}\n    </ResizablePrimitive.PanelResizeHandle>\n  );\n}\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle };\n","size_bytes":2050},"public/3danimation/src/components/ui/scroll-area.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area@1.2.3\";\n\nimport { cn } from \"./utils\";\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn(\"relative\", className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  );\n}\n\nfunction ScrollBar({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        \"flex touch-none p-px transition-colors select-none\",\n        orientation === \"vertical\" &&\n          \"h-full w-2.5 border-l border-l-transparent\",\n        orientation === \"horizontal\" &&\n          \"h-2.5 flex-col border-t border-t-transparent\",\n        className,\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  );\n}\n\nexport { ScrollArea, ScrollBar };\n","size_bytes":1655},"public/3danimation/src/components/ui/select.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select@2.1.6\";\nimport {\n  CheckIcon,\n  ChevronDownIcon,\n  ChevronUpIcon,\n} from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />;\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />;\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />;\n}\n\nfunction SelectTrigger({\n  className,\n  size = \"default\",\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: \"sm\" | \"default\";\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  );\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = \"popper\",\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\n          position === \"popper\" &&\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            \"p-1\",\n            position === \"popper\" &&\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\",\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  );\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  );\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  );\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  );\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n};\n","size_bytes":6289},"public/3danimation/src/components/ui/separator.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator@1.1.2\";\n\nimport { cn } from \"./utils\";\n\nfunction Separator({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator-root\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Separator };\n","size_bytes":713},"public/3danimation/src/components/ui/sheet.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as SheetPrimitive from \"@radix-ui/react-dialog@1.1.6\";\nimport { XIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {\n  return <SheetPrimitive.Root data-slot=\"sheet\" {...props} />;\n}\n\nfunction SheetTrigger({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {\n  return <SheetPrimitive.Trigger data-slot=\"sheet-trigger\" {...props} />;\n}\n\nfunction SheetClose({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Close>) {\n  return <SheetPrimitive.Close data-slot=\"sheet-close\" {...props} />;\n}\n\nfunction SheetPortal({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Portal>) {\n  return <SheetPrimitive.Portal data-slot=\"sheet-portal\" {...props} />;\n}\n\nfunction SheetOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {\n  return (\n    <SheetPrimitive.Overlay\n      data-slot=\"sheet-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SheetContent({\n  className,\n  children,\n  side = \"right\",\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Content> & {\n  side?: \"top\" | \"right\" | \"bottom\" | \"left\";\n}) {\n  return (\n    <SheetPortal>\n      <SheetOverlay />\n      <SheetPrimitive.Content\n        data-slot=\"sheet-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n          side === \"right\" &&\n            \"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm\",\n          side === \"left\" &&\n            \"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm\",\n          side === \"top\" &&\n            \"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b\",\n          side === \"bottom\" &&\n            \"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <SheetPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none\">\n          <XIcon className=\"size-4\" />\n          <span className=\"sr-only\">Close</span>\n        </SheetPrimitive.Close>\n      </SheetPrimitive.Content>\n    </SheetPortal>\n  );\n}\n\nfunction SheetHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sheet-header\"\n      className={cn(\"flex flex-col gap-1.5 p-4\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SheetFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sheet-footer\"\n      className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SheetTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Title>) {\n  return (\n    <SheetPrimitive.Title\n      data-slot=\"sheet-title\"\n      className={cn(\"text-foreground font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SheetDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Description>) {\n  return (\n    <SheetPrimitive.Description\n      data-slot=\"sheet-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Sheet,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n};\n","size_bytes":4119},"public/3danimation/src/components/ui/sidebar.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { VariantProps, cva } from \"class-variance-authority@0.7.1\";\nimport { PanelLeftIcon } from \"lucide-react@0.487.0\";\n\nimport { useIsMobile } from \"./use-mobile\";\nimport { cn } from \"./utils\";\nimport { Button } from \"./button\";\nimport { Input } from \"./input\";\nimport { Separator } from \"./separator\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"./sheet\";\nimport { Skeleton } from \"./skeleton\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"./tooltip\";\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\";\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\nconst SIDEBAR_WIDTH = \"16rem\";\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\";\nconst SIDEBAR_WIDTH_ICON = \"3rem\";\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\";\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\";\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  openMobile: boolean;\n  setOpenMobile: (open: boolean) => void;\n  isMobile: boolean;\n  toggleSidebar: () => void;\n};\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null);\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext);\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\n  }\n\n  return context;\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean;\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n}) {\n  const isMobile = useIsMobile();\n  const [openMobile, setOpenMobile] = React.useState(false);\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen);\n  const open = openProp ?? _open;\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value;\n      if (setOpenProp) {\n        setOpenProp(openState);\n      } else {\n        _setOpen(openState);\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;\n    },\n    [setOpenProp, open],\n  );\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);\n  }, [isMobile, setOpen, setOpenMobile]);\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault();\n        toggleSidebar();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [toggleSidebar]);\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\";\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],\n  );\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className,\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  );\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\";\n  variant?: \"sidebar\" | \"floating\" | \"inset\";\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\";\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    );\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon)\",\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className,\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar();\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"size-7\", className)}\n      onClick={(event) => {\n        onClick?.(event);\n        toggleSidebar();\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  );\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar();\n\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\";\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  );\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean;\n  isActive?: boolean;\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>;\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\";\n  const { isMobile, state } = useSidebar();\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  );\n\n  if (!tooltip) {\n    return button;\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    };\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  );\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean;\n  showOnHover?: boolean;\n}) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean;\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`;\n  }, []);\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-(--skeleton-width) flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  );\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean;\n  size?: \"sm\" | \"md\";\n  isActive?: boolean;\n}) {\n  const Comp = asChild ? Slot : \"a\";\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n};\n","size_bytes":21683},"public/3danimation/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"./utils\";\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\n      {...props}\n    />\n  );\n}\n\nexport { Skeleton };\n","size_bytes":275},"public/3danimation/src/components/ui/slider.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as SliderPrimitive from \"@radix-ui/react-slider@1.2.3\";\n\nimport { cn } from \"./utils\";\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n          ? defaultValue\n          : [min, max],\n    [value, defaultValue, min, max],\n  );\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        \"relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col\",\n        className,\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={cn(\n          \"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\",\n        )}\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={cn(\n            \"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full\",\n          )}\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  );\n}\n\nexport { Slider };\n","size_bytes":2012},"public/3danimation/src/components/ui/sonner.tsx":{"content":"\"use client\";\n\nimport { useTheme } from \"next-themes@0.4.6\";\nimport { Toaster as Sonner, ToasterProps } from \"sonner@2.0.3\";\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme();\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      style={\n        {\n          \"--normal-bg\": \"var(--popover)\",\n          \"--normal-text\": \"var(--popover-foreground)\",\n          \"--normal-border\": \"var(--border)\",\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  );\n};\n\nexport { Toaster };\n","size_bytes":583},"public/3danimation/src/components/ui/switch.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as SwitchPrimitive from \"@radix-ui/react-switch@1.1.3\";\n\nimport { cn } from \"./utils\";\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        \"peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={cn(\n          \"bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0\",\n        )}\n      />\n    </SwitchPrimitive.Root>\n  );\n}\n\nexport { Switch };\n","size_bytes":1188},"public/3danimation/src/components/ui/table.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\n\nimport { cn } from \"./utils\";\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  );\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        \"text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        \"p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n};\n","size_bytes":2460},"public/3danimation/src/components/ui/tabs.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as TabsPrimitive from \"@radix-ui/react-tabs@1.1.3\";\n\nimport { cn } from \"./utils\";\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn(\"flex flex-col gap-2\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn(\"flex-1 outline-none\", className)}\n      {...props}\n    />\n  );\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\n","size_bytes":1951},"public/3danimation/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"./utils\";\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Textarea };\n","size_bytes":767},"public/3danimation/src/components/ui/toggle-group.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group@1.1.2\";\nimport { type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\nimport { toggleVariants } from \"./toggle\";\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n});\n\nfunction ToggleGroup({\n  className,\n  variant,\n  size,\n  children,\n  ...props\n}: React.ComponentProps<typeof ToggleGroupPrimitive.Root> &\n  VariantProps<typeof toggleVariants>) {\n  return (\n    <ToggleGroupPrimitive.Root\n      data-slot=\"toggle-group\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(\n        \"group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs\",\n        className,\n      )}\n      {...props}\n    >\n      <ToggleGroupContext.Provider value={{ variant, size }}>\n        {children}\n      </ToggleGroupContext.Provider>\n    </ToggleGroupPrimitive.Root>\n  );\n}\n\nfunction ToggleGroupItem({\n  className,\n  children,\n  variant,\n  size,\n  ...props\n}: React.ComponentProps<typeof ToggleGroupPrimitive.Item> &\n  VariantProps<typeof toggleVariants>) {\n  const context = React.useContext(ToggleGroupContext);\n\n  return (\n    <ToggleGroupPrimitive.Item\n      data-slot=\"toggle-group-item\"\n      data-variant={context.variant || variant}\n      data-size={context.size || size}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        \"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  );\n}\n\nexport { ToggleGroup, ToggleGroupItem };\n","size_bytes":1932},"public/3danimation/src/components/ui/toggle.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as TogglePrimitive from \"@radix-ui/react-toggle@1.1.2\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nfunction Toggle({\n  className,\n  variant,\n  size,\n  ...props\n}: React.ComponentProps<typeof TogglePrimitive.Root> &\n  VariantProps<typeof toggleVariants>) {\n  return (\n    <TogglePrimitive.Root\n      data-slot=\"toggle\"\n      className={cn(toggleVariants({ variant, size, className }))}\n      {...props}\n    />\n  );\n}\n\nexport { Toggle, toggleVariants };\n","size_bytes":1577},"public/3danimation/src/components/ui/tooltip.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip@1.1.8\";\n\nimport { cn } from \"./utils\";\n\nfunction TooltipProvider({\n  delayDuration = 0,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {\n  return (\n    <TooltipPrimitive.Provider\n      data-slot=\"tooltip-provider\"\n      delayDuration={delayDuration}\n      {...props}\n    />\n  );\n}\n\nfunction Tooltip({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Root>) {\n  return (\n    <TooltipProvider>\n      <TooltipPrimitive.Root data-slot=\"tooltip\" {...props} />\n    </TooltipProvider>\n  );\n}\n\nfunction TooltipTrigger({\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {\n  return <TooltipPrimitive.Trigger data-slot=\"tooltip-trigger\" {...props} />;\n}\n\nfunction TooltipContent({\n  className,\n  sideOffset = 0,\n  children,\n  ...props\n}: React.ComponentProps<typeof TooltipPrimitive.Content>) {\n  return (\n    <TooltipPrimitive.Portal>\n      <TooltipPrimitive.Content\n        data-slot=\"tooltip-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <TooltipPrimitive.Arrow className=\"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\" />\n      </TooltipPrimitive.Content>\n    </TooltipPrimitive.Portal>\n  );\n}\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };\n","size_bytes":1903},"public/3danimation/src/components/ui/use-mobile.ts":{"content":"import * as React from \"react\";\n\nconst MOBILE_BREAKPOINT = 768;\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(\n    undefined,\n  );\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    };\n    mql.addEventListener(\"change\", onChange);\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    return () => mql.removeEventListener(\"change\", onChange);\n  }, []);\n\n  return !!isMobile;\n}\n","size_bytes":585},"public/3danimation/src/components/ui/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n","size_bytes":169},"attached_assets/1/App.tsx":{"content":"import React, { useState } from 'react';\nimport { Header } from './components/Header';\nimport { KnowledgeMapSpaceship } from './components/KnowledgeMapSpaceship';\nimport { CosmicLandingPage } from './components/CosmicLandingPage';\nimport { ContentViewer } from './components/ContentViewer';\nimport { AuthModal } from './components/AuthModal';\n\nimport { mockDomains } from './data/mockData';\nimport { ContentPiece, Topic, Domain, User } from './types';\n\ntype AppView = 'landing' | 'universe' | 'content';\n\nexport default function App() {\n  const [currentUser, setCurrentUser] = useState<User | null>(null);\n  const [isAuthModalOpen, setIsAuthModalOpen] = useState(false);\n  const [currentView, setCurrentView] = useState<AppView>('landing');\n  const [selectedContent, setSelectedContent] = useState<{\n    content: ContentPiece;\n    topic: Topic;\n    domain: Domain;\n  } | null>(null);\n\n  const handleLogin = (user: User) => {\n    setCurrentUser(user);\n    setCurrentView('universe');\n  };\n\n  const handleContentSelect = (content: ContentPiece, topic: Topic, domain: Domain) => {\n    setSelectedContent({ content, topic, domain });\n    setCurrentView('content');\n  };\n\n  const handleBackToMap = () => {\n    setSelectedContent(null);\n    setCurrentView('universe');\n  };\n\n  const handleEnterUniverse = () => {\n    setCurrentView('universe');\n  };\n\n  const handleBackToLanding = () => {\n    setCurrentView('landing');\n    setSelectedContent(null);\n  };\n\n\n\n  const handleLoginRequired = () => {\n    setIsAuthModalOpen(true);\n  };\n\n  const renderContent = () => {\n    switch (currentView) {\n      case 'landing':\n        return (\n          <CosmicLandingPage\n            onLoginClick={() => setIsAuthModalOpen(true)}\n          />\n        );\n      case 'universe':\n        return (\n          <div className=\"min-h-screen bg-background\">\n            <Header \n              currentUser={currentUser}\n              onLoginClick={() => setIsAuthModalOpen(true)}\n              onBackToLanding={handleBackToLanding}\n              showBackButton={true}\n            />\n            <KnowledgeMapSpaceship\n              domains={mockDomains}\n              onContentSelect={handleContentSelect}\n              searchQuery=\"\"\n            />\n          </div>\n        );\n      case 'content':\n        if (!selectedContent) {\n          // Safety check: redirect to universe if no content selected\n          setCurrentView('universe');\n          return null;\n        }\n        return (\n          <div className=\"min-h-screen bg-background\">\n            <Header \n              currentUser={currentUser}\n              onLoginClick={() => setIsAuthModalOpen(true)}\n              onBackToLanding={handleBackToLanding}\n              showBackButton={true}\n            />\n            <main className=\"container mx-auto\">\n              <ContentViewer\n                content={selectedContent.content}\n                topic={selectedContent.topic}\n                domain={selectedContent.domain}\n                onBack={handleBackToMap}\n                currentUser={currentUser}\n                onLoginRequired={handleLoginRequired}\n              />\n            </main>\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <>\n      {renderContent()}\n      \n      <AuthModal\n        isOpen={isAuthModalOpen}\n        onClose={() => setIsAuthModalOpen(false)}\n        onLogin={handleLogin}\n      />\n    </>\n  );\n}","size_bytes":3415},"attached_assets/1/components/AuthModal.tsx":{"content":"import { useState } from 'react';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from './ui/dialog';\nimport { Button } from './ui/button';\nimport { Input } from './ui/input';\nimport { Label } from './ui/label';\nimport { RadioGroup, RadioGroupItem } from './ui/radio-group';\nimport { Separator } from './ui/separator';\n\ninterface AuthModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onLogin: (user: any) => void;\n}\n\nexport function AuthModal({ isOpen, onClose, onLogin }: AuthModalProps) {\n  const [isLoginMode, setIsLoginMode] = useState(true);\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    role: 'learner' as 'architect' | 'learner'\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Mock authentication - in real app, this would call an API\n    const user = {\n      id: Date.now().toString(),\n      name: isLoginMode ? 'John Doe' : formData.name,\n      email: isLoginMode ? 'john@example.com' : formData.email,\n      role: isLoginMode ? 'learner' : formData.role\n    };\n    \n    onLogin(user);\n    onClose();\n    \n    // Reset form\n    setFormData({\n      name: '',\n      email: '',\n      password: '',\n      role: 'learner'\n    });\n  };\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const switchMode = () => {\n    setIsLoginMode(!isLoginMode);\n    setFormData({\n      name: '',\n      email: '',\n      password: '',\n      role: 'learner'\n    });\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <span>👤</span>\n            {isLoginMode ? 'Welcome Back' : 'Join the Community'}\n          </DialogTitle>\n          <DialogDescription>\n            {isLoginMode \n              ? 'Login to contribute comments, questions, and suggestions.'\n              : 'Create an account to join the digital twin knowledge community.'\n            }\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {!isLoginMode && (\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">Full Name</Label>\n              <Input\n                id=\"name\"\n                type=\"text\"\n                placeholder=\"Enter your full name\"\n                value={formData.name}\n                onChange={(e) => handleInputChange('name', e.target.value)}\n                required\n              />\n            </div>\n          )}\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\">Email</Label>\n            <Input\n              id=\"email\"\n              type=\"email\"\n              placeholder=\"Enter your email\"\n              value={formData.email}\n              onChange={(e) => handleInputChange('email', e.target.value)}\n              required\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"password\">Password</Label>\n            <Input\n              id=\"password\"\n              type=\"password\"\n              placeholder=\"Enter your password\"\n              value={formData.password}\n              onChange={(e) => handleInputChange('password', e.target.value)}\n              required\n            />\n          </div>\n\n          {!isLoginMode && (\n            <div className=\"space-y-3\">\n              <Label>I am a...</Label>\n              <RadioGroup \n                value={formData.role} \n                onValueChange={(value) => handleInputChange('role', value)}\n              >\n                <div className=\"flex items-center space-x-2 p-3 border rounded-lg hover:bg-muted/50 transition-colors\">\n                  <RadioGroupItem value=\"learner\" id=\"learner\" />\n                  <div className=\"flex items-center gap-2 flex-1\">\n                    <span className=\"text-blue-500\">📖</span>\n                    <div>\n                      <Label htmlFor=\"learner\" className=\"font-medium cursor-pointer\">\n                        Knowledge Seeker\n                      </Label>\n                      <p className=\"text-xs text-muted-foreground\">\n                        Learning about digital twins and seeking knowledge\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2 p-3 border rounded-lg hover:bg-muted/50 transition-colors\">\n                  <RadioGroupItem value=\"architect\" id=\"architect\" />\n                  <div className=\"flex items-center gap-2 flex-1\">\n                    <span className=\"text-green-500\">👥</span>\n                    <div>\n                      <Label htmlFor=\"architect\" className=\"font-medium cursor-pointer\">\n                        Knowledge Contributor\n                      </Label>\n                      <p className=\"text-xs text-muted-foreground\">\n                        Architect or professional contributing expertise\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </RadioGroup>\n            </div>\n          )}\n\n          <Button type=\"submit\" className=\"w-full\">\n            {isLoginMode ? 'Login' : 'Create Account'}\n          </Button>\n        </form>\n\n        <Separator />\n\n        <div className=\"text-center\">\n          <p className=\"text-sm text-muted-foreground\">\n            {isLoginMode ? \"Don't have an account?\" : \"Already have an account?\"}\n          </p>\n          <Button variant=\"link\" onClick={switchMode} className=\"p-0 h-auto\">\n            {isLoginMode ? 'Create one here' : 'Login here'}\n          </Button>\n        </div>\n\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n          <p className=\"text-xs text-blue-800\">\n            <strong>Demo Note:</strong> This is a prototype. Use any email/password to login or create an account.\n          </p>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":6100},"attached_assets/1/components/CommentSection.tsx":{"content":"import { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/card';\nimport { Button } from './ui/button';\nimport { Textarea } from './ui/textarea';\nimport { Avatar, AvatarFallback } from './ui/avatar';\nimport { Badge } from './ui/badge';\nimport { Comment } from '../types';\n\ninterface CommentSectionProps {\n  contentId: string;\n  currentUser: any;\n  onLoginRequired: () => void;\n}\n\nexport function CommentSection({ contentId, currentUser, onLoginRequired }: CommentSectionProps) {\n  const [comments, setComments] = useState<Comment[]>([\n    {\n      id: '1',\n      contentId,\n      userId: 'user1',\n      author: 'Dr. Sarah Chen',\n      content: 'This is an excellent overview of parametric design principles. The examples really help clarify the concepts. I would love to see more case studies on real-world implementations.',\n      createdAt: '2024-03-01',\n      replies: [\n        {\n          id: '2',\n          contentId,\n          userId: 'user2',\n          author: 'Alex Rodriguez',\n          content: 'I agree! The Casa Milà example was particularly insightful. Are there any similar projects using contemporary tools?',\n          createdAt: '2024-03-02'\n        }\n      ]\n    },\n    {\n      id: '3',\n      contentId,\n      userId: 'user3',\n      author: 'Prof. Michael Torres',\n      content: 'For those interested in diving deeper, I recommend checking out the latest research from MIT on algorithmic design. There are some fascinating developments in this field.',\n      createdAt: '2024-03-03'\n    }\n  ]);\n\n  const [newComment, setNewComment] = useState('');\n  const [replyingTo, setReplyingTo] = useState<string | null>(null);\n  const [replyText, setReplyText] = useState('');\n\n  const handleAddComment = () => {\n    if (!currentUser) {\n      onLoginRequired();\n      return;\n    }\n\n    if (newComment.trim()) {\n      const comment: Comment = {\n        id: Date.now().toString(),\n        contentId,\n        userId: currentUser.id,\n        author: currentUser.name,\n        content: newComment,\n        createdAt: new Date().toISOString().split('T')[0]\n      };\n      setComments([...comments, comment]);\n      setNewComment('');\n    }\n  };\n\n  const handleAddReply = (parentId: string) => {\n    if (!currentUser) {\n      onLoginRequired();\n      return;\n    }\n\n    if (replyText.trim()) {\n      const reply: Comment = {\n        id: Date.now().toString(),\n        contentId,\n        userId: currentUser.id,\n        author: currentUser.name,\n        content: replyText,\n        createdAt: new Date().toISOString().split('T')[0]\n      };\n\n      setComments(comments.map(comment => \n        comment.id === parentId \n          ? { ...comment, replies: [...(comment.replies || []), reply] }\n          : comment\n      ));\n      setReplyText('');\n      setReplyingTo(null);\n    }\n  };\n\n  const getUserInitials = (name: string) => {\n    return name.split(' ').map(n => n[0]).join('').toUpperCase();\n  };\n\n  const getUserRole = (author: string) => {\n    if (author.startsWith('Dr.') || author.startsWith('Prof.')) return 'architect';\n    return 'learner';\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <span>💬</span>\n          Discussion ({comments.length} {comments.length === 1 ? 'comment' : 'comments'})\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {/* Add Comment */}\n        <div className=\"space-y-3\">\n          {currentUser ? (\n            <>\n              <Textarea\n                placeholder=\"Share your thoughts, ask questions, or suggest improvements...\"\n                value={newComment}\n                onChange={(e) => setNewComment(e.target.value)}\n                className=\"min-h-[100px]\"\n              />\n              <div className=\"flex justify-between items-center\">\n                <p className=\"text-sm text-muted-foreground\">\n                  Contributing as <strong>{currentUser.name}</strong> ({currentUser.role})\n                </p>\n                <Button onClick={handleAddComment} disabled={!newComment.trim()}>\n                  Post Comment\n                </Button>\n              </div>\n            </>\n          ) : (\n            <div className=\"bg-muted p-4 rounded-lg text-center\">\n              <span className=\"text-4xl mb-2\">⚠️</span>\n              <p className=\"text-muted-foreground mb-3\">Please login to join the discussion</p>\n              <Button onClick={onLoginRequired}>Login to Comment</Button>\n            </div>\n          )}\n        </div>\n\n        {/* Comments List */}\n        <div className=\"space-y-6\">\n          {comments.map((comment) => (\n            <div key={comment.id} className=\"space-y-3\">\n              {/* Main Comment */}\n              <div className=\"flex gap-3\">\n                <Avatar>\n                  <AvatarFallback className=\"bg-gradient-to-br from-blue-400 to-purple-500 text-white\">\n                    {getUserInitials(comment.author)}\n                  </AvatarFallback>\n                </Avatar>\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"font-semibold\">{comment.author}</span>\n                    <Badge \n                      variant={getUserRole(comment.author) === 'architect' ? 'default' : 'secondary'} \n                      className=\"text-xs\"\n                    >\n                      {getUserRole(comment.author)}\n                    </Badge>\n                    <span className=\"text-sm text-muted-foreground\">{comment.createdAt}</span>\n                  </div>\n                  <p className=\"text-sm leading-relaxed\">{comment.content}</p>\n                  <div className=\"flex items-center gap-4\">\n                    <Button variant=\"ghost\" size=\"sm\" className=\"text-xs gap-1\">\n                      <span>👍</span>\n                      Helpful\n                    </Button>\n                    <Button \n                      variant=\"ghost\" \n                      size=\"sm\" \n                      className=\"text-xs gap-1\"\n                      onClick={() => setReplyingTo(replyingTo === comment.id ? null : comment.id)}\n                    >\n                      <span>↩️</span>\n                      Reply\n                    </Button>\n                  </div>\n\n                  {/* Reply Form */}\n                  {replyingTo === comment.id && (\n                    <div className=\"mt-3 space-y-2\">\n                      <Textarea\n                        placeholder=\"Write a reply...\"\n                        value={replyText}\n                        onChange={(e) => setReplyText(e.target.value)}\n                        className=\"min-h-[80px]\"\n                      />\n                      <div className=\"flex gap-2\">\n                        <Button size=\"sm\" onClick={() => handleAddReply(comment.id)}>\n                          Reply\n                        </Button>\n                        <Button \n                          variant=\"ghost\" \n                          size=\"sm\" \n                          onClick={() => setReplyingTo(null)}\n                        >\n                          Cancel\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Replies */}\n              {comment.replies && comment.replies.length > 0 && (\n                <div className=\"ml-12 space-y-3\">\n                  {comment.replies.map((reply) => (\n                    <div key={reply.id} className=\"flex gap-3\">\n                      <Avatar className=\"w-8 h-8\">\n                        <AvatarFallback className=\"bg-gradient-to-br from-green-400 to-blue-500 text-white text-xs\">\n                          {getUserInitials(reply.author)}\n                        </AvatarFallback>\n                      </Avatar>\n                      <div className=\"flex-1 space-y-1\">\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"font-semibold text-sm\">{reply.author}</span>\n                          <Badge \n                            variant={getUserRole(reply.author) === 'architect' ? 'default' : 'secondary'} \n                            className=\"text-xs\"\n                          >\n                            {getUserRole(reply.author)}\n                          </Badge>\n                          <span className=\"text-xs text-muted-foreground\">{reply.createdAt}</span>\n                        </div>\n                        <p className=\"text-sm leading-relaxed\">{reply.content}</p>\n                        <Button variant=\"ghost\" size=\"sm\" className=\"text-xs gap-1\">\n                          <span>👍</span>\n                          Helpful\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n\n        {comments.length === 0 && (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <span className=\"text-6xl opacity-50 mb-3\">💬</span>\n            <p>No comments yet. Start the discussion!</p>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":9298},"attached_assets/1/components/ContentViewer.tsx":{"content":"import { useState } from 'react';\nimport { motion } from 'motion/react';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/card';\nimport { Button } from './ui/button';\nimport { Badge } from './ui/badge';\nimport { Separator } from './ui/separator';\nimport { ContentPiece, Topic, Domain, Comment } from '../types';\nimport { CommentSection } from './CommentSection';\n\ninterface ContentViewerProps {\n  content: ContentPiece;\n  topic: Topic;\n  domain: Domain;\n  onBack: () => void;\n  currentUser: any;\n  onLoginRequired: () => void;\n}\n\nexport function ContentViewer({ content, topic, domain, onBack, currentUser, onLoginRequired }: ContentViewerProps) {\n  const [showComments, setShowComments] = useState(false);\n  const [liked, setLiked] = useState(false);\n\n  const getContentIcon = (type: ContentPiece['type']) => {\n    switch (type) {\n      case 'wiki': return <span className=\"text-lg\">📄</span>;\n      case 'podcast': return <span className=\"text-lg\">🎧</span>;\n      case 'video': return <span className=\"text-lg\">📺</span>;\n      case 'guide': return <span className=\"text-lg\">📖</span>;\n    }\n  };\n\n  const getContentTypeColor = (type: ContentPiece['type']) => {\n    switch (type) {\n      case 'wiki': return 'bg-blue-100 text-blue-700 border-blue-200';\n      case 'podcast': return 'bg-green-100 text-green-700 border-green-200';\n      case 'video': return 'bg-red-100 text-red-700 border-red-200';\n      case 'guide': return 'bg-purple-100 text-purple-700 border-purple-200';\n    }\n  };\n\n  const handleInteraction = (action: string) => {\n    if (!currentUser) {\n      onLoginRequired();\n      return;\n    }\n    \n    if (action === 'like') {\n      setLiked(!liked);\n    }\n  };\n\n  const renderContentBody = () => {\n    const paragraphs = content.content.split('\\n').filter(p => p.trim());\n    \n    return (\n      <div className=\"prose prose-gray max-w-none\">\n        {content.type === 'video' && (\n          <div className=\"aspect-video bg-muted rounded-lg flex items-center justify-center mb-6\">\n            <div className=\"text-center\">\n              <span className=\"text-6xl mb-2\">📺</span>\n              <p className=\"text-muted-foreground\">Video Player Placeholder</p>\n              <p className=\"text-sm text-muted-foreground\">Duration: {content.duration}</p>\n            </div>\n          </div>\n        )}\n        \n        {content.type === 'podcast' && (\n          <div className=\"bg-muted rounded-lg p-6 flex items-center justify-center mb-6\">\n            <div className=\"text-center\">\n              <span className=\"text-6xl mb-2\">🎧</span>\n              <p className=\"text-muted-foreground\">Audio Player Placeholder</p>\n              <p className=\"text-sm text-muted-foreground\">Duration: {content.duration}</p>\n            </div>\n          </div>\n        )}\n\n        {paragraphs.map((paragraph, index) => (\n          <p key={index} className=\"mb-4 leading-relaxed\">\n            {paragraph}\n          </p>\n        ))}\n\n        {content.type === 'guide' && (\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6\">\n            <h4 className=\"font-semibold text-blue-900 mb-2\">Study Guide Features</h4>\n            <ul className=\"text-blue-800 space-y-1\">\n              <li>• Interactive exercises and examples</li>\n              <li>• Self-assessment questions</li>\n              <li>• Additional resources and references</li>\n              <li>• Progress tracking capabilities</li>\n            </ul>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: 20 }}\n      animate={{ opacity: 1, x: 0 }}\n      className=\"max-w-4xl mx-auto p-6\"\n    >\n      {/* Back Navigation */}\n      <Button \n        variant=\"ghost\" \n        onClick={onBack}\n        className=\"mb-6 gap-2\"\n      >\n        <span>←</span>\n        Back to {topic.title}\n      </Button>\n\n      {/* Content Header */}\n      <Card className=\"mb-6\">\n        <CardHeader>\n          <div className=\"flex items-start gap-4\">\n            <div className={`p-3 rounded-lg ${getContentTypeColor(content.type)}`}>\n              {getContentIcon(content.type)}\n            </div>\n            <div className=\"flex-1\">\n              <div className=\"flex items-start justify-between gap-4 mb-3\">\n                <div>\n                  <CardTitle className=\"text-2xl mb-2\">{content.title}</CardTitle>\n                  <p className=\"text-muted-foreground text-lg\">{content.description}</p>\n                </div>\n                <Badge variant=\"secondary\" className=\"capitalize shrink-0\">\n                  {content.type}\n                </Badge>\n              </div>\n              \n              <div className=\"flex items-center gap-6 text-sm text-muted-foreground\">\n                <div className=\"flex items-center gap-1\">\n                  <span>👤</span>\n                  {content.author}\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <span>🕒</span>\n                  {content.readTime || content.duration}\n                </div>\n                <span>{content.publishedAt}</span>\n              </div>\n\n              <div className=\"flex flex-wrap gap-2 mt-3\">\n                {content.tags.map((tag) => (\n                  <Badge key={tag} variant=\"outline\" className=\"text-xs\">\n                    {tag}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n      </Card>\n\n      {/* Breadcrumb */}\n      <div className=\"mb-6 text-sm text-muted-foreground\">\n        <span className={`inline-flex items-center gap-1 px-2 py-1 rounded ${domain.color} text-white`}>\n          {domain.icon} {domain.title}\n        </span>\n        <span className=\"mx-2\">→</span>\n        <span className=\"bg-muted px-2 py-1 rounded\">{topic.title}</span>\n      </div>\n\n      {/* Content Body */}\n      <Card className=\"mb-6\">\n        <CardContent className=\"p-8\">\n          {renderContentBody()}\n        </CardContent>\n      </Card>\n\n      {/* Action Bar */}\n      <Card className=\"mb-6\">\n        <CardContent className=\"p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => handleInteraction('like')}\n                className={`gap-2 ${liked ? 'text-red-600' : ''}`}\n              >\n                <span>{liked ? '❤️' : '🤍'}</span>\n                {liked ? 'Liked' : 'Like'}\n              </Button>\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-2\">\n                <span>📤</span>\n                Share\n              </Button>\n              <Button \n                variant=\"ghost\" \n                size=\"sm\" \n                onClick={() => setShowComments(!showComments)}\n                className=\"gap-2\"\n              >\n                <span>💬</span>\n                Comments\n              </Button>\n            </div>\n            <Button \n              onClick={() => handleInteraction('suggest')}\n              size=\"sm\" \n              className=\"gap-2\"\n            >\n              <span>➕</span>\n              Suggest Addition\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Comments Section */}\n      {showComments && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: 'auto' }}\n        >\n          <CommentSection \n            contentId={content.id}\n            currentUser={currentUser}\n            onLoginRequired={onLoginRequired}\n          />\n        </motion.div>\n      )}\n\n      {/* Related Content Suggestions */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-lg\">Related Content in {topic.title}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n            {topic.content\n              .filter(c => c.id !== content.id)\n              .slice(0, 4)\n              .map((relatedContent) => (\n                <div \n                  key={relatedContent.id}\n                  className=\"flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors cursor-pointer\"\n                >\n                  <div className={`p-2 rounded ${getContentTypeColor(relatedContent.type)}`}>\n                    {getContentIcon(relatedContent.type)}\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"font-medium text-sm truncate\">{relatedContent.title}</p>\n                    <p className=\"text-xs text-muted-foreground\">\n                      {relatedContent.readTime || relatedContent.duration}\n                    </p>\n                  </div>\n                </div>\n              ))}\n          </div>\n        </CardContent>\n      </Card>\n    </motion.div>\n  );\n}","size_bytes":8945},"attached_assets/1/components/CosmicLandingPage.tsx":{"content":"import React, {\n  useState,\n  useEffect,\n  useRef,\n  useMemo,\n} from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { motion } from \"motion/react\";\nimport { ImageWithFallback } from \"./figma/ImageWithFallback\";\nimport { SphereCanvas } from \"./SphereCanvas\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"./ui/select\";\nimport * as THREE from \"three\";\n\nimport cosmicBackground from \"figma:asset/ee1d60b6da6ffbe59028c887ab600f760e18e0fd.png\";\nimport centralHUD from \"figma:asset/4364d10e29a10e9d7b9b34414067d2c590420cc0.png\";\nimport urbanFabricIcon from \"figma:asset/da675ef43a920905acce551f8e42797f4ca0dd62.png\";\nimport futureCitiesIcon from \"figma:asset/ef5503dd4088387aaa2896030c8428aaadf85a66.png\";\nimport buildingLifecycleIcon from \"figma:asset/c80b4788f34c09f4111ad6d7302dc08ac0a6fd28.png\";\nimport infrastructureIcon from \"figma:asset/9a7512aa78450bb20185392d88b764bd99bd1a7f.png\";\nimport twinLabLogo from \"figma:asset/ce140d08c83da0d1ba52cf9a1573bf2859276974.png\";\nimport bumpTextureImage from \"figma:asset/909f56fe8d9ae4adc5edf331a0ec809810ac0469.png\";\n\nconst sphereColorPalette = [\n  { name: \"Dark Gray\", value: \"#404040\" },\n  { name: \"Deep Blue\", value: \"#0066CC\" },\n  { name: \"Purple\", value: \"#8B5CF6\" },\n  { name: \"Indigo\", value: \"#6366F1\" },\n  { name: \"Pink\", value: \"#EC4899\" },\n  { name: \"Red\", value: \"#EF4444\" },\n  { name: \"Emerald\", value: \"#10B981\" },\n  { name: \"Amber\", value: \"#F59E0B\" },\n];\n\ninterface CosmicLandingPageProps {\n  onLoginClick: () => void;\n}\n\nconst contentTypes = [\n  { name: \"Audio Podcast\", icon: \"🎧\", color: \"#FF6B6B\" },\n  { name: \"Video Presentation\", icon: \"🎥\", color: \"#4ECDC4\" },\n  { name: \"TWiki Read\", icon: \"📚\", color: \"#45B7D1\" },\n  { name: \"Study Guide\", icon: \"📝\", color: \"#96CEB4\" },\n];\n\nconst CUBE_FACE_Z_TRANSLATE = 192;\nconst DOMAIN_CIRCLE_WIDTH = 192;\nconst DOMAIN_SPACING_MULTIPLIER = 0.4;\nconst DOMAIN_RADIUS_BASE = 280;\nconst DOMAIN_Y_RADIUS_MULTIPLIER = 0.7;\nconst EPISODE_CUBE_RADIUS = 120;\nconst EPISODE_CUBE_ANGLES = [225, 315, 45, 135]; // Start top-left, go clockwise\nconst MOUSE_ROTATION_SENSITIVITY = 0.5;\nconst ROTATION_DAMPING_FACTOR = 0.95;\nconst ROTATION_VELOCITY_MULTIPLIER = 0.01;\nconst ROTATION_VELOCITY_THRESHOLD = 0.0001;\n\ninterface Episode {\n  id: string;\n  title: string;\n  description: string;\n}\n\ninterface Domain {\n  id: string;\n  title: string;\n  subtitle: string;\n  image: string;\n  angle: number;\n  backgroundColor: string;\n  episodes: Episode[];\n}\n\nexport function CosmicLandingPage({\n  onLoginClick,\n}: CosmicLandingPageProps) {\n  const [showDebugPanel, setShowDebugPanel] = useState(false);\n  const [selectedCube, setSelectedCube] = useState<{\n    chapterId: string;\n    episodeId: string;\n  } | null>(null);\n  const [cubeRotation, setCubeRotation] = useState(0);\n  const [sphereColor, setSphereColor] = useState(\"#8B5CF6\");\n  const [knowledgeDomains, setKnowledgeDomains] = useState<\n    Domain[]\n  >([]);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  const rotationRef = useRef(0);\n\n  useEffect(() => {\n    // Inline knowledge domains data - no external fetch needed\n    const knowledgeDomainsData = [\n      {\n        id: \"chapter-1\",\n        title: \"CHAPTER 1\",\n        subtitle: \"The Mechanics of Transformation\",\n        image:\n          \"figma:asset/da675ef43a920905acce551f8e42797f4ca0dd62.png\",\n        angle: 225,\n        backgroundColor:\n          \"linear-gradient(135deg, #8B5CF6 0%, #A855F7 50%, #9333EA 100%)\",\n        episodes: [\n          {\n            id: \"ep1-1\",\n            title: \"What is an Organizational Transformation?\",\n            description:\n              \"Defines transformation as a fundamental re-engineering of an organization's core logic to meet a new strategic ambition that exceeds its current capacity.\",\n          },\n          {\n            id: \"ep1-2\",\n            title: \"What is a Sector Transformation?\",\n            description:\n              \"Elevates the transformation challenge from a single entity to an entire ecosystem. It redesigns how value flows across multiple, interdependent organizations.\",\n          },\n          {\n            id: \"ep1-3\",\n            title: \"What is the People Transformation?\",\n            description:\n              \"Addresses the human and political resistance inherent in public sector reform. Acknowledging that a perfect plan can be derailed by cultural inertia.\",\n          },\n          {\n            id: \"ep1-4\",\n            title: \"The Entangled Transformation Battleground\",\n            description:\n              'Introduces \"entangled\" transformations where multiple entities must change simultaneously. Presents the Complexity Index (CI) as a risk assessment tool.',\n          },\n        ],\n      },\n      {\n        id: \"chapter-2\",\n        title: \"CHAPTER 2\",\n        subtitle: \"The Architectural Blueprint in Practice\",\n        image:\n          \"figma:asset/ef5503dd4088387aaa2896030c8428aaadf85a66.png\",\n        angle: 315,\n        backgroundColor:\n          \"linear-gradient(135deg, #7C3AED 0%, #8B5CF6 50%, #7C2D12 100%)\",\n        episodes: [\n          {\n            id: \"ep2-1\",\n            title: \"Strategic Performance (KPIs)\",\n            description:\n              'Explains how to create a \"golden thread\" from a high-level national objective (L0) down to a frontline process metric (L3).',\n          },\n          {\n            id: \"ep2-2\",\n            title: \"Portfolios & Initiatives\",\n            description:\n              \"Defines the portfolio as the control system that translates strategy into funded work with direct links to strategic KPIs.\",\n          },\n          {\n            id: \"ep2-3\",\n            title: \"Process Architecture\",\n            description:\n              \"Establishes that strategy is executed through processes. Defining L3 executable processes and linking them to owners and metrics.\",\n          },\n          {\n            id: \"ep2-4\",\n            title: \"Organizational Design\",\n            description:\n              \"Frames organizational structure as the backbone of accountability. A dynamic structure where every role maps to specific L3 processes and KPIs.\",\n          },\n        ],\n      },\n      {\n        id: \"chapter-3\",\n        title: \"CHAPTER 3\",\n        subtitle: \"The Management Operating System\",\n        image:\n          \"figma:asset/c80b4788f34c09f4111ad6d7302dc08ac0a6fd28.png\",\n        angle: 45,\n        backgroundColor:\n          \"linear-gradient(135deg, #6D28D9 0%, #7C3AED 50%, #5B21B6 100%)\",\n        episodes: [\n          {\n            id: \"ep3-1\",\n            title: \"The Integrated Governance\",\n            description:\n              'Defines governance as the decision-making \"operating system\" that integrates strategy, execution (PMO), and operations through structured reviews.',\n          },\n          {\n            id: \"ep3-2\",\n            title: \"The Delivery Engine\",\n            description:\n              \"Outlines the dual disciplines of Value Assurance (Program Management) and Delivery Assurance (Project Management) that execute governance decisions.\",\n          },\n          {\n            id: \"ep3-3\",\n            title: \"Change Architecture\",\n            description:\n              \"Presents Change Architecture as the discipline for mitigating adoption risk by integrating human readiness activities with technical deliverables.\",\n          },\n          {\n            id: \"ep3-4\",\n            title: \"The Enablers\",\n            description:\n              \"Describes foundational capabilities required for sustainable transformation: Digital Support, Corporate Knowledge Management, and talent culture.\",\n          },\n        ],\n      },\n      {\n        id: \"chapter-4\",\n        title: \"CHAPTER 4\",\n        subtitle:\n          \"An Open-Source Toolkit for Your First 90 Days\",\n        image:\n          \"figma:asset/9a7512aa78450bb20185392d88b764bd99bd1a7f.png\",\n        angle: 135,\n        backgroundColor:\n          \"linear-gradient(135deg, #5B21B6 0%, #6D28D9 50%, #4C1D95 100%)\",\n        episodes: [\n          {\n            id: \"ep4-1\",\n            title: \"Day 1-15: Diagnose Your Starting Point\",\n            description:\n              \"Using the Public Sector Complexity Index (CI) to assess your transformation readiness and identify key risk factors.\",\n          },\n          {\n            id: \"ep4-2\",\n            title:\n              \"Day 16-60: Architect Your First Golden Thread\",\n            description:\n              \"Using the open source DTO Entity-Relationship Diagram (ERD) to create your strategic alignment framework.\",\n          },\n          {\n            id: \"ep4-3\",\n            title:\n              \"Day 61-90: Launch Your First GenAI-powered Use Case\",\n            description:\n              \"Implementing your first AI-powered transformation use case to demonstrate value and build momentum for broader adoption.\",\n          },\n          {\n            id: \"ep4-4\",\n            title: \"Beyond 90 Days: Scale and Sustain\",\n            description:\n              \"Strategies for scaling successful transformation initiatives and building sustainable change management capabilities across the organization.\",\n          },\n        ],\n      },\n    ];\n\n    setKnowledgeDomains(knowledgeDomainsData);\n  }, []);\n\n  const handleCubeMouseDown = (\n    e: React.MouseEvent<HTMLDivElement>,\n  ) => {\n    e.preventDefault();\n    const startX = e.clientX;\n    const startRotation = rotationRef.current;\n\n    const handleMouseMove = (moveEvent: MouseEvent) => {\n      const deltaX = moveEvent.clientX - startX;\n      const newRotation =\n        startRotation + deltaX * MOUSE_ROTATION_SENSITIVITY;\n      rotationRef.current = newRotation;\n      setCubeRotation(newRotation); // Update immediately during drag\n    };\n\n    const handleMouseUp = () => {\n      document.removeEventListener(\n        \"mousemove\",\n        handleMouseMove,\n      );\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n      // No need to cancel animationFrame since we're not using continuous animation\n    };\n\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n  };\n\n  const domainElements = useMemo(\n    () =>\n      knowledgeDomains.map((domain, index) => {\n        const spacing =\n          DOMAIN_CIRCLE_WIDTH * DOMAIN_SPACING_MULTIPLIER;\n        const radius = DOMAIN_RADIUS_BASE + spacing;\n        const angleRad = (domain.angle * Math.PI) / 180;\n        const x = Math.cos(angleRad) * radius;\n        const y =\n          Math.sin(angleRad) *\n          radius *\n          DOMAIN_Y_RADIUS_MULTIPLIER;\n\n        return (\n          <motion.div\n            key={domain.id}\n            className=\"absolute group z-20\"\n            style={{\n              left: \"50%\",\n              top: \"50%\",\n              transform: `translate(calc(-50% + ${x}px), calc(-50% + ${y}px))`,\n            }}\n          >\n            <motion.div\n              className=\"w-48 h-48 relative shadow-2xl rounded-full border-8 border-white\"\n              style={{\n                borderColor: \"rgba(255, 255, 255, 0.9)\",\n                borderWidth: \"8px\",\n                boxShadow: \"0 0 10px rgba(255, 255, 255, 0.3)\",\n                background: domain.backgroundColor,\n              }}\n              whileHover={{ scale: 1.05 }}\n              transition={{\n                duration: 0.2,\n                ease: \"easeInOut\",\n                delay: index * 0.7,\n              }}\n            >\n              <ImageWithFallback\n                src={domain.image}\n                alt={domain.title}\n                className=\"w-full h-full object-contain rounded-full opacity-80\"\n              />\n              <div className=\"absolute inset-0 flex flex-col items-center justify-center text-center bg-black/20 rounded-full\">\n                <h3 className=\"text-lg font-inter font-bold text-white mb-1 leading-tight\">\n                  {domain.title}\n                </h3>\n                <p className=\"text-sm font-inter text-white/90 leading-tight whitespace-pre-line\">\n                  {domain.subtitle}\n                </p>\n              </div>\n            </motion.div>\n\n            {domain.episodes?.map(\n              (episode: Episode, episodeIndex: number) => {\n                const cubeAngle =\n                  EPISODE_CUBE_ANGLES[episodeIndex];\n                const cubeAngleRad =\n                  (cubeAngle * Math.PI) / 180;\n                const cubeX =\n                  Math.cos(cubeAngleRad) * EPISODE_CUBE_RADIUS;\n                const cubeY =\n                  Math.sin(cubeAngleRad) * EPISODE_CUBE_RADIUS;\n\n                return (\n                  <motion.div\n                    key={episode.id}\n                    className=\"absolute cursor-pointer z-30\"\n                    style={{\n                      left: `calc(50% + ${cubeX - 16}px)`,\n                      top: `calc(50% + ${cubeY + (episodeIndex === 2 || episodeIndex === 3 ? -16 : 0)}px)`,\n                      transform: \"translate(-50%, -50%)\",\n                      perspective: \"200px\",\n                      width: \"32px\",\n                      height: \"32px\",\n                    }}\n                    whileHover={{ scale: 1.2 }}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      e.preventDefault();\n                      setSelectedCube({\n                        chapterId: domain.id,\n                        episodeId: episode.id,\n                      });\n                    }}\n                    animate={{ y: [0, -5, 0] }}\n                    transition={{\n                      y: {\n                        duration: 3,\n                        repeat: Infinity,\n                        ease: \"easeInOut\",\n                        delay: episodeIndex * 0.5,\n                      },\n                    }}\n                  >\n                    <div\n                      className=\"w-8 h-8 flex items-center justify-center text-xs font-bold text-white border border-white/20\"\n                      style={{\n                        background:\n                          \"linear-gradient(45deg, #7C3AED 0%, #8B5CF6 50%, #A855F7 100%)\",\n                        boxShadow:\n                          \"0 2px 8px rgba(124, 58, 237, 0.4)\",\n                        transform: \"rotateX(15deg) rotateY(-15deg)\",\n                        transformStyle: \"preserve-3d\",\n                      }}\n                    >\n                      {episodeIndex + 1}\n                    </div>\n                  </motion.div>\n                );\n              },\n            )}\n          </motion.div>\n        );\n      }),\n    [knowledgeDomains],\n  );\n\n  return (\n    <div className=\"min-h-screen relative overflow-hidden\">\n      <div className=\"fixed inset-0 z-0\">\n        <img\n          src={cosmicBackground}\n          alt=\"Cosmic Background\"\n          className=\"w-full h-full object-cover object-center\"\n          style={{\n            imageRendering: \"crisp-edges\",\n            transform: \"scale(1.1)\",\n            transformOrigin: \"center center\",\n          }}\n        />\n        <div className=\"absolute inset-0 bg-black/30\" />\n      </div>\n\n      <div className=\"relative z-20 min-h-screen flex flex-col\">\n        <header className=\"pt-8 pb-8\">\n          <div className=\"max-w-7xl mx-auto px-8\">\n            <div className=\"flex items-center justify-center mb-8\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"relative\">\n                  <img\n                    src={twinLabLogo}\n                    alt=\"TwinLab Logo\"\n                    className=\"w-12 h-12 object-contain filter brightness-110\"\n                  />\n                  <div className=\"absolute inset-0 bg-cyan-400/20 rounded-full blur-lg animate-pulse\" />\n                </div>\n                <h1 className=\"text-4xl font-allerta text-white tracking-wider\">\n                  TwinLab - The Future, Ready Today\n                </h1>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-center gap-6\">\n              <button\n                onClick={onLoginClick}\n                className=\"px-8 py-3 border-2 border-white/30 text-white hover:border-white/60 hover:bg-white/10 transition-all duration-300 backdrop-blur-sm font-inter\"\n              >\n                LOGIN / REGISTER\n              </button>\n              <button\n                onClick={onLoginClick}\n                className=\"px-8 py-3 border-2 border-white/30 text-white hover:border-white/60 hover:bg-white/10 transition-all duration-300 backdrop-blur-sm font-inter\"\n              >\n                CONTRIBUTE KNOWLEDGE\n              </button>\n            </div>\n          </div>\n        </header>\n\n        <div className=\"flex-1 flex items-center justify-center py-16\">\n          <div className=\"relative w-full max-w-4xl mx-auto px-8\">\n            {/* Rotating HUD - Isolated */}\n            <div\n              className=\"flex items-center justify-center\"\n              style={{\n                position: \"fixed\",\n                zIndex: 20,\n                top: \"50%\",\n                left: \"50%\",\n                transform: \"translate(-50%, -50%)\",\n              }}\n            >\n              <motion.div\n                className=\"relative z-20\"\n                animate={{ rotate: [0, 360] }}\n                transition={{\n                  rotate: {\n                    duration: 60,\n                    repeat: Infinity,\n                    ease: \"linear\",\n                  },\n                }}\n              >\n                <div className=\"relative\">\n                  <ImageWithFallback\n                    src={centralHUD}\n                    alt=\"Central HUD Interface\"\n                    className=\"object-contain border-none outline-none w-auto h-auto\"\n                    style={{\n                      imageRendering: \"crisp-edges\",\n                      transform: \"scale(0.73)\",\n                      transformOrigin: \"center center\",\n                    }}\n                  />\n                </div>\n              </motion.div>\n            </div>\n\n            {/* Stationary Domain Elements - Separate Container */}\n            <div\n              className=\"flex items-center justify-center\"\n              style={{\n                position: \"fixed\",\n                zIndex: 19,\n                top: \"50%\",\n                left: \"50%\",\n                transform: \"translate(-50%, -50%)\",\n              }}\n            >\n              {domainElements}\n            </div>\n          </div>\n        </div>\n\n        {isMounted &&\n          createPortal(\n            <SphereCanvas color={sphereColor} size={35} />,\n            document.body,\n          )}\n\n        <div className=\"pb-16\">\n          <div className=\"max-w-7xl mx-auto px-8\"></div>\n        </div>\n\n        <div className=\"pb-16\">\n          <div className=\"max-w-7xl mx-auto px-8\">\n            <div className=\"text-center\">\n              <h2 className=\"text-2xl font-inter text-white/90 mb-2\">\n                EXPLORE THE UNIVERSE OF DIGITAL TWIN KNOWLEDGE\n              </h2>\n              <p className=\"text-lg text-white/70 font-inter\">\n                Navigate. Learn. Contribute.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"pb-16\"></div>\n      </div>\n\n      {selectedCube && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n          <div\n            className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"\n            onClick={() => setSelectedCube(null)}\n          />\n\n          <motion.div\n            className=\"relative w-96 h-96\"\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            exit={{ scale: 0 }}\n            transition={{\n              type: \"spring\",\n              stiffness: 300,\n              damping: 30,\n            }}\n            style={{ perspective: \"1000px\" }}\n          >\n            <div\n              className=\"w-full h-full relative cursor-grab active:cursor-grabbing\"\n              style={{\n                transformStyle: \"preserve-3d\",\n                transform: `rotateY(${cubeRotation}deg)`,\n              }}\n              onMouseDown={handleCubeMouseDown}\n            >\n              <div\n                className=\"absolute w-full h-full flex flex-col items-center justify-center cursor-pointer border-4 border-white/50 rounded-lg\"\n                style={{\n                  backgroundColor: contentTypes[0].color,\n                  transform: `translateZ(${CUBE_FACE_Z_TRANSLATE}px)`,\n                  backfaceVisibility: \"hidden\",\n                }}\n                onClick={() => {\n                  const selectedEpisode = knowledgeDomains\n                    .find(\n                      (d) => d.id === selectedCube.chapterId,\n                    )\n                    ?.episodes?.find(\n                      (ep) => ep.id === selectedCube.episodeId,\n                    );\n                  if (selectedEpisode) {\n                    // TODO: Implement a proper modal/UI to display content\n                    console.log(\n                      `Opening ${contentTypes[0].name} for: \"${selectedEpisode.title}\"`,\n                    );\n                  }\n                }}\n              >\n                <div className=\"text-6xl mb-4\">\n                  {contentTypes[0].icon}\n                </div>\n                <h3 className=\"text-xl font-bold text-white text-center px-4\">\n                  {contentTypes[0].name}\n                </h3>\n              </div>\n\n              <div\n                className=\"absolute w-full h-full flex flex-col items-center justify-center cursor-pointer border-4 border-white/50 rounded-lg\"\n                style={{\n                  backgroundColor: contentTypes[1].color,\n                  transform: `rotateY(90deg) translateZ(${CUBE_FACE_Z_TRANSLATE}px)`,\n                  backfaceVisibility: \"hidden\",\n                }}\n                onClick={() => {\n                  const selectedEpisode = knowledgeDomains\n                    .find(\n                      (d) => d.id === selectedCube.chapterId,\n                    )\n                    ?.episodes?.find(\n                      (ep) => ep.id === selectedCube.episodeId,\n                    );\n                  if (selectedEpisode) {\n                    // TODO: Implement a proper modal/UI to display content\n                    console.log(\n                      `Opening ${contentTypes[1].name} for: \"${selectedEpisode.title}\"`,\n                    );\n                  }\n                }}\n              >\n                <div className=\"text-6xl mb-4\">\n                  {contentTypes[1].icon}\n                </div>\n                <h3 className=\"text-xl font-bold text-white text-center px-4\">\n                  {contentTypes[1].name}\n                </h3>\n              </div>\n\n              <div\n                className=\"absolute w-full h-full flex flex-col items-center justify-center cursor-pointer border-4 border-white/50 rounded-lg\"\n                style={{\n                  backgroundColor: contentTypes[2].color,\n                  transform: `rotateY(180deg) translateZ(${CUBE_FACE_Z_TRANSLATE}px)`,\n                  backfaceVisibility: \"hidden\",\n                }}\n                onClick={() => {\n                  const selectedEpisode = knowledgeDomains\n                    .find(\n                      (d) => d.id === selectedCube.chapterId,\n                    )\n                    ?.episodes?.find(\n                      (ep) => ep.id === selectedCube.episodeId,\n                    );\n                  if (selectedEpisode) {\n                    // TODO: Implement a proper modal/UI to display content\n                    console.log(\n                      `Opening ${contentTypes[2].name} for: \"${selectedEpisode.title}\"`,\n                    );\n                  }\n                }}\n              >\n                <div className=\"text-6xl mb-4\">\n                  {contentTypes[2].icon}\n                </div>\n                <h3 className=\"text-xl font-bold text-white text-center px-4\">\n                  {contentTypes[2].name}\n                </h3>\n              </div>\n\n              <div\n                className=\"absolute w-full h-full flex flex-col items-center justify-center cursor-pointer border-4 border-white/50 rounded-lg\"\n                style={{\n                  backgroundColor: contentTypes[3].color,\n                  transform: `rotateY(270deg) translateZ(${CUBE_FACE_Z_TRANSLATE}px)`,\n                  backfaceVisibility: \"hidden\",\n                }}\n                onClick={() => {\n                  const selectedEpisode = knowledgeDomains\n                    .find(\n                      (d) => d.id === selectedCube.chapterId,\n                    )\n                    ?.episodes?.find(\n                      (ep) => ep.id === selectedCube.episodeId,\n                    );\n                  if (selectedEpisode) {\n                    // TODO: Implement a proper modal/UI to display content\n                    console.log(\n                      `Opening ${contentTypes[3].name} for: \"${selectedEpisode.title}\"`,\n                    );\n                  }\n                }}\n              >\n                <div className=\"text-6xl mb-4\">\n                  {contentTypes[3].icon}\n                </div>\n                <h3 className=\"text-xl font-bold text-white text-center px-4\">\n                  {contentTypes[3].name}\n                </h3>\n              </div>\n            </div>\n          </motion.div>\n\n          <button\n            className=\"absolute top-8 right-8 w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/30 transition-colors\"\n            onClick={() => setSelectedCube(null)}\n          >\n            ✕\n          </button>\n\n          <div className=\"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-center text-white\">\n            <p className=\"text-lg mb-2\">\n              Drag to rotate the cube horizontally\n            </p>\n            <p className=\"text-sm opacity-70\">\n              Click on a face to access the content\n            </p>\n          </div>\n        </div>\n      )}\n\n      <div className=\"fixed bottom-4 left-4 z-50\">\n        <div className=\"bg-black/60 backdrop-blur-sm rounded-lg p-4\">\n          <h3 className=\"text-sm font-bold text-white font-inter mb-3\">\n            Sphere Color\n          </h3>\n\n          <div>\n            <Select\n              value={sphereColor}\n              onValueChange={setSphereColor}\n            >\n              <SelectTrigger className=\"w-48 bg-black/40 border-white/20 text-white text-xs\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent className=\"bg-black/90 border-white/20\">\n                {sphereColorPalette.map((color) => (\n                  <SelectItem\n                    key={color.value}\n                    value={color.value}\n                    className=\"text-white hover:bg-white/10\"\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <div\n                        className=\"w-3 h-3 rounded border border-white/30\"\n                        style={{ backgroundColor: color.value }}\n                      />\n                      <span className=\"text-xs\">\n                        {color.name}\n                      </span>\n                    </div>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":27666},"attached_assets/1/components/Header.tsx":{"content":"import { motion } from 'motion/react';\n\ninterface HeaderProps {\n  currentUser: any;\n  onLoginClick: () => void;\n  onBackToLanding?: () => void;\n  showBackButton?: boolean;\n}\n\nexport function Header({ currentUser, onLoginClick, onBackToLanding, showBackButton = false }: HeaderProps) {\n\n  return (\n    <header className=\"sticky top-0 z-50 h-16 bg-gradient-to-r from-stone-500 via-stone-400 to-stone-500 relative\">\n      {/* Rusty Silver Frame with Panel Effects */}\n      <div className=\"absolute inset-0 bg-gradient-to-b from-stone-600/80 to-stone-400/80\">\n        <div className=\"h-0.5 bg-gradient-to-r from-transparent via-cyan-400 to-transparent\"></div>\n        \n        {/* Panel Bolts */}\n        <div className=\"absolute top-2 left-4 w-1 h-1 bg-cyan-400 rounded-full\"></div>\n        <div className=\"absolute top-2 right-4 w-1 h-1 bg-cyan-400 rounded-full\"></div>\n        <div className=\"absolute bottom-2 left-4 w-1 h-1 bg-cyan-400 rounded-full\"></div>\n        <div className=\"absolute bottom-2 right-4 w-1 h-1 bg-cyan-400 rounded-full\"></div>\n        \n        {/* Neon Light Tracks */}\n        <motion.div\n          className=\"absolute left-2 top-0 w-0.5 h-4 bg-gradient-to-b from-cyan-400 to-transparent\"\n          animate={{ y: ['0%', '100%', '0%'] }}\n          transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\n        />\n        <motion.div\n          className=\"absolute right-2 top-0 w-0.5 h-4 bg-gradient-to-b from-cyan-400 to-transparent\"\n          animate={{ y: ['100%', '0%', '100%'] }}\n          transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\n        />\n      </div>\n\n      <div className=\"relative h-full px-8\">\n        <div className=\"flex items-center justify-between h-full\">\n          {/* TwinLab Title */}\n          <div className=\"flex items-center gap-6\">\n            {showBackButton && onBackToLanding && (\n              <button\n                onClick={onBackToLanding}\n                className=\"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white border border-cyan-400/30 transition-colors font-inter text-sm\"\n              >\n                ← Back to Universe\n              </button>\n            )}\n            <div>\n              <h1 className=\"text-3xl font-bold text-white font-allerta\" style={{ \n                textShadow: '0 0 15px rgba(173, 216, 230, 0.8), 0 0 30px rgba(173, 216, 230, 0.6)' \n              }}>\n                TWINLAB\n              </h1>\n              <p className=\"text-sm text-cyan-300 font-inter -mt-1\">The Future, Ready Today</p>\n            </div>\n          </div>\n\n          {/* Right Side - Learn, Share, Grow & User */}\n          <div className=\"flex items-center gap-6\">\n            <div className=\"text-xl font-bold text-cyan-300 font-inter\">\n              Learn, Share, Grow\n            </div>\n            \n            {currentUser ? (\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-8 h-8 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center border border-cyan-400/30\">\n                  <span className=\"text-white text-sm\">👤</span>\n                </div>\n                <div className=\"hidden sm:block\">\n                  <p className=\"text-sm font-medium text-white font-inter\">{currentUser.name}</p>\n                  <p className=\"text-xs text-gray-300 capitalize font-inter\">{currentUser.role}</p>\n                </div>\n              </div>\n            ) : (\n              <button \n                onClick={onLoginClick}\n                className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-700 hover:from-purple-600 hover:to-purple-800 text-white border border-cyan-400/30 transition-colors font-inter text-sm\"\n              >\n                🔑 LOGIN\n              </button>\n            )}\n          </div>\n        </div>\n        \n        {/* Bottom border */}\n        <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-cyan-400 to-transparent\"></div>\n      </div>\n    </header>\n  );\n}","size_bytes":4080},"attached_assets/1/components/KnowledgeMapSpaceship.tsx":{"content":"import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'motion/react';\nimport { Card, CardContent } from './ui/card';\nimport { Badge } from './ui/badge';\nimport { Domain, Topic, ContentPiece } from '../types';\n\ninterface KnowledgeMapSpaceshipProps {\n  domains: Domain[];\n  onContentSelect: (content: ContentPiece, topic: Topic, domain: Domain) => void;\n  searchQuery: string;\n}\n\nexport function KnowledgeMapSpaceship({ domains, onContentSelect, searchQuery }: KnowledgeMapSpaceshipProps) {\n  const [hoveredContent, setHoveredContent] = useState<string | null>(null);\n  const [expandedChapter, setExpandedChapter] = useState<string | null>(null);\n  const [selectedContent, setSelectedContent] = useState<{\n    content: ContentPiece;\n    topic: Topic;\n    domain: Domain;\n  } | null>(null);\n\n  // Podcast state\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(45);\n  const [duration] = useState(180);\n  const [playbackSpeed, setPlaybackSpeed] = useState('1');\n  const [language, setLanguage] = useState('en');\n\n  // Video state\n  const [videoPlaying, setVideoPlaying] = useState(false);\n  const [showCaptions, setShowCaptions] = useState(true);\n  const [quality, setQuality] = useState('1080p');\n  const [audioLang, setAudioLang] = useState('en');\n\n  // Wiki state\n  const [isEditing, setIsEditing] = useState(false);\n  const [wikiContent, setWikiContent] = useState('');\n\n  // Study guide state\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);\n  const [showAnswer, setShowAnswer] = useState(false);\n\n  // Reset state when content changes\n  React.useEffect(() => {\n    if (selectedContent) {\n      // Reset all content-specific state when switching content\n      setIsPlaying(false);\n      setCurrentTime(45);\n      setPlaybackSpeed('1');\n      setLanguage('en');\n      setVideoPlaying(false);\n      setShowCaptions(true);\n      setQuality('1080p');\n      setAudioLang('en');\n      setIsEditing(false);\n      setWikiContent(selectedContent.content.description);\n      setCurrentQuestion(0);\n      setSelectedAnswer(null);\n      setShowAnswer(false);\n    }\n  }, [selectedContent]);\n\n  // Filter content based on search query\n  const filteredDomains = domains.map(domain => ({\n    ...domain,\n    topics: domain.topics.map(topic => ({\n      ...topic,\n      content: topic.content.filter(content =>\n        searchQuery === '' ||\n        content.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        content.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        content.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()))\n      )\n    })).filter(topic => topic.content.length > 0 || searchQuery === '')\n  })).filter(domain => domain.topics.length > 0 || searchQuery === '');\n\n  const getDomainColor = (index: number) => {\n    const colors = [\n      'from-purple-300 to-purple-500',\n      'from-purple-400 to-purple-600', \n      'from-purple-500 to-purple-700',\n      'from-purple-600 to-purple-800'\n    ];\n    return colors[index % colors.length];\n  };\n\n  const getContentTypeInfo = (type: ContentPiece['type']) => {\n    switch (type) {\n      case 'wiki': return { icon: '■', label: 'Wiki Read' };\n      case 'podcast': return { icon: '▶', label: 'Podcast Discussion' };\n      case 'video': return { icon: '▣', label: 'Video Presentation' };\n      case 'guide': return { icon: '≡', label: 'Study Guide' };\n    }\n  };\n\n  const renderPodcastContent = (content: ContentPiece) => {\n\n    return (\n      <div className=\"space-y-6\">\n        {/* Episode Art & Info */}\n        <div className=\"flex gap-6\">\n          <div className=\"w-32 h-32 bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-4xl text-white font-bold border border-cyan-400/30\">\n            EP\n          </div>\n          <div className=\"flex-1 space-y-3\">\n            <h4 className=\"text-xl font-bold text-purple-600 font-inter\">{content.title}</h4>\n            <p className=\"text-gray-700 font-inter\">{content.description}</p>\n            <div className=\"flex items-center gap-4 text-sm text-gray-600 font-inter\">\n              <span>Duration: {content.duration}</span>\n              <span>•</span>\n              <span>Released: March 15, 2024</span>\n              <span>•</span>\n              <span>Host: {content.author}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Audio Controls */}\n        <div className=\"bg-gray-100 border border-gray-300 p-4 space-y-4\">\n          <div className=\"flex items-center gap-4\">\n            <button\n              onClick={() => setIsPlaying(!isPlaying)}\n              className=\"w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-700 hover:from-purple-600 hover:to-purple-800 flex items-center justify-center text-white transition-colors\"\n            >\n              {isPlaying ? '⏸' : '▶'}\n            </button>\n            <div className=\"flex-1\">\n              <div className=\"w-full bg-gray-300 h-2 relative\">\n                <div \n                  className=\"h-full bg-gradient-to-r from-cyan-500 to-purple-600\" \n                  style={{ width: `${(currentTime / duration) * 100}%` }}\n                />\n              </div>\n              <div className=\"flex justify-between text-xs text-gray-600 mt-1 font-inter\">\n                <span>{Math.floor(currentTime / 60)}:{(currentTime % 60).toString().padStart(2, '0')}</span>\n                <span>{Math.floor(duration / 60)}:{(duration % 60).toString().padStart(2, '0')}</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm text-gray-600 font-inter\">Speed:</span>\n              <select \n                value={playbackSpeed} \n                onChange={(e) => setPlaybackSpeed(e.target.value)}\n                className=\"w-20 h-8 bg-white border border-gray-400 text-gray-800 text-sm px-2\"\n              >\n                <option value=\"0.5\">0.5x</option>\n                <option value=\"1\">1x</option>\n                <option value=\"1.25\">1.25x</option>\n                <option value=\"1.5\">1.5x</option>\n                <option value=\"2\">2x</option>\n              </select>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm text-gray-600 font-inter\">Language:</span>\n              <select \n                value={language} \n                onChange={(e) => setLanguage(e.target.value)}\n                className=\"w-28 h-8 bg-white border border-gray-400 text-gray-800 text-sm px-2\"\n              >\n                <option value=\"en\">English</option>\n                <option value=\"es\">Español</option>\n                <option value=\"fr\">Français</option>\n                <option value=\"de\">Deutsch</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Episode Content */}\n        <div className=\"space-y-4 text-gray-700 font-inter\">\n          <h5 className=\"text-lg font-bold text-purple-600\">Episode Notes</h5>\n          <p>In this episode, we dive deep into the fundamental concepts of organizational transformation through digital twin methodologies...</p>\n          <ul className=\"list-disc list-inside space-y-2 ml-4\">\n            <li>Understanding digital twin frameworks for organizations</li>\n            <li>Key metrics and KPIs for transformation success</li>\n            <li>Common pitfalls and how to avoid them</li>\n            <li>Real-world case studies from industry leaders</li>\n          </ul>\n        </div>\n      </div>\n    );\n  };\n\n  const renderVideoContent = (content: ContentPiece) => {\n\n    return (\n      <div className=\"space-y-6\">\n        {/* Video Player */}\n        <div className=\"bg-black border-2 border-cyan-400/30 aspect-video flex items-center justify-center relative\">\n          <div className=\"text-6xl text-gray-600\">📹</div>\n          {!videoPlaying && (\n            <button\n              onClick={() => setVideoPlaying(true)}\n              className=\"absolute inset-0 flex items-center justify-center bg-black/50 hover:bg-black/30 transition-colors\"\n            >\n              <div className=\"w-20 h-20 bg-gradient-to-r from-purple-500 to-purple-700 hover:from-purple-600 hover:to-purple-800 flex items-center justify-center text-white text-2xl transition-colors\">\n                ▶\n              </div>\n            </button>\n          )}\n        </div>\n\n        {/* Video Controls */}\n        <div className=\"bg-gray-100 border border-gray-300 p-4 space-y-4\">\n          <div className=\"flex items-center gap-4\">\n            <h4 className=\"text-xl font-bold text-purple-600 font-inter flex-1\">{content.title}</h4>\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={() => setShowCaptions(!showCaptions)}\n                className={`px-3 py-1 text-sm border transition-colors font-inter ${\n                  showCaptions \n                    ? 'bg-purple-600 text-white border-purple-600' \n                    : 'bg-transparent text-purple-600 border-purple-600/50 hover:border-purple-600'\n                }`}\n              >\n                CC\n              </button>\n              <select \n                value={quality} \n                onChange={(e) => setQuality(e.target.value)}\n                className=\"w-20 h-8 bg-white border border-gray-400 text-gray-800 text-sm px-2\"\n              >\n                <option value=\"480p\">480p</option>\n                <option value=\"720p\">720p</option>\n                <option value=\"1080p\">1080p</option>\n              </select>\n              <select \n                value={audioLang} \n                onChange={(e) => setAudioLang(e.target.value)}\n                className=\"w-28 h-8 bg-white border border-gray-400 text-gray-800 text-sm px-2\"\n              >\n                <option value=\"en\">English</option>\n                <option value=\"es\">Español</option>\n                <option value=\"fr\">Français</option>\n              </select>\n            </div>\n          </div>\n\n          <div className=\"text-gray-700 font-inter\">\n            <p className=\"mb-4\">{content.description}</p>\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-purple-600 font-bold\">Presenter:</span> {content.author}\n              </div>\n              <div>\n                <span className=\"text-purple-600 font-bold\">Duration:</span> {content.duration}\n              </div>\n              <div>\n                <span className=\"text-purple-600 font-bold\">Level:</span> Intermediate\n              </div>\n              <div>\n                <span className=\"text-purple-600 font-bold\">Format:</span> Video Presentation\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderWikiContent = (content: ContentPiece) => {\n\n    return (\n      <div className=\"space-y-6\">\n        {/* Wiki Header */}\n        <div className=\"flex items-center justify-between pb-4 border-b border-gray-300\">\n          <h4 className=\"text-xl font-bold text-purple-600 font-inter\">{content.title}</h4>\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-600 font-inter\">Last edited by {content.author}</span>\n            <button \n              onClick={() => setIsEditing(!isEditing)}\n              className=\"px-4 py-2 border border-purple-600/50 text-purple-600 hover:bg-purple-600/10 text-sm font-inter transition-colors\"\n            >\n              {isEditing ? 'Save' : 'Suggest Edit'}\n            </button>\n          </div>\n        </div>\n\n        {/* Wiki Content */}\n        <div className=\"space-y-4\">\n          {isEditing ? (\n            <textarea\n              value={wikiContent || content.description}\n              onChange={(e) => setWikiContent(e.target.value)}\n              className=\"w-full h-64 bg-gray-50 border border-gray-300 p-4 text-gray-800 font-inter resize-none\"\n              placeholder=\"Edit wiki content...\"\n            />\n          ) : (\n            <div className=\"prose max-w-none\">\n              <div className=\"space-y-4 text-gray-700 font-inter leading-relaxed\">\n                <h5 className=\"text-lg font-bold text-purple-600\">Overview</h5>\n                <p>{content.description}</p>\n                \n                <h5 className=\"text-lg font-bold text-purple-600\">Key Concepts</h5>\n                <ul className=\"list-disc list-inside space-y-2 ml-4\">\n                  <li><strong>Digital Twin Framework:</strong> A comprehensive approach to modeling organizational systems</li>\n                  <li><strong>Transformation Metrics:</strong> KPIs that measure organizational change effectiveness</li>\n                  <li><strong>Change Architecture:</strong> Structured approach to implementing transformation</li>\n                  <li><strong>Governance Models:</strong> Framework for decision-making and accountability</li>\n                </ul>\n\n                <h5 className=\"text-lg font-bold text-purple-600\">Implementation Steps</h5>\n                <ol className=\"list-decimal list-inside space-y-2 ml-4\">\n                  <li>Assess current organizational state</li>\n                  <li>Define transformation objectives</li>\n                  <li>Design digital twin architecture</li>\n                  <li>Implement monitoring systems</li>\n                  <li>Execute transformation plan</li>\n                  <li>Measure and optimize results</li>\n                </ol>\n\n                <h5 className=\"text-lg font-bold text-purple-600\">References</h5>\n                <ul className=\"list-disc list-inside space-y-1 ml-4 text-sm text-gray-600\">\n                  <li>Organizational Transformation Handbook (2024)</li>\n                  <li>Digital Twin Methodologies in Practice</li>\n                  <li>Change Management Best Practices</li>\n                </ul>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Wiki Actions */}\n        <div className=\"flex items-center gap-4 pt-4 border-t border-gray-300\">\n          <button className=\"px-4 py-2 border border-purple-600/50 text-purple-600 hover:bg-purple-600/10 text-sm font-inter transition-colors\">\n            View History\n          </button>\n          <button className=\"px-4 py-2 border border-purple-600/50 text-purple-600 hover:bg-purple-600/10 text-sm font-inter transition-colors\">\n            Discussion\n          </button>\n          <button className=\"px-4 py-2 border border-purple-600/50 text-purple-600 hover:bg-purple-600/10 text-sm font-inter transition-colors\">\n            Export PDF\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  const renderStudyGuideContent = (content: ContentPiece) => {\n\n    const questions = [\n      {\n        question: \"What is the primary goal of organizational transformation?\",\n        options: [\n          \"Increase revenue\",\n          \"Improve operational efficiency and adaptability\",\n          \"Reduce costs\",\n          \"Expand market presence\"\n        ],\n        correct: 1\n      },\n      {\n        question: \"Which component is essential for digital twin implementation?\",\n        options: [\n          \"Data collection systems\",\n          \"AI algorithms\",\n          \"Governance framework\",\n          \"All of the above\"\n        ],\n        correct: 3\n      }\n    ];\n\n    return (\n      <div className=\"space-y-6\">\n        {/* Study Guide Header */}\n        <div className=\"pb-4 border-b border-gray-300\">\n          <h4 className=\"text-xl font-bold text-purple-600 font-inter\">{content.title}</h4>\n          <p className=\"text-gray-600 font-inter\">Interactive learning with self-assessment</p>\n        </div>\n\n        {/* Learning Objectives */}\n        <div className=\"bg-gray-100 border border-gray-300 p-4\">\n          <h5 className=\"text-lg font-bold text-purple-600 mb-3 font-inter\">Learning Objectives</h5>\n          <ul className=\"list-disc list-inside space-y-2 text-gray-700 font-inter\">\n            <li>Understand the core principles of organizational transformation</li>\n            <li>Identify key components of digital twin frameworks</li>\n            <li>Apply transformation metrics to real-world scenarios</li>\n            <li>Develop implementation strategies for your organization</li>\n          </ul>\n        </div>\n\n        {/* Content Sections */}\n        <div className=\"space-y-4\">\n          <h5 className=\"text-lg font-bold text-purple-600 font-inter\">Key Concepts</h5>\n          <div className=\"space-y-3 text-gray-700 font-inter\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"w-6 h-6 bg-gradient-to-r from-purple-500 to-purple-700 flex items-center justify-center text-white text-xs font-bold\">1</div>\n              <p><strong>Strategic Framework:</strong> Establishing clear vision and objectives for transformation</p>\n            </div>\n            <div className=\"flex items-start gap-3\">\n              <div className=\"w-6 h-6 bg-gradient-to-r from-purple-500 to-purple-700 flex items-center justify-center text-white text-xs font-bold\">2</div>\n              <p><strong>Digital Twin Architecture:</strong> Creating virtual representations of organizational systems</p>\n            </div>\n            <div className=\"flex items-start gap-3\">\n              <div className=\"w-6 h-6 bg-gradient-to-r from-purple-500 to-purple-700 flex items-center justify-center text-white text-xs font-bold\">3</div>\n              <p><strong>Change Management:</strong> Guiding people through transformation processes</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Interactive Quiz */}\n        <div className=\"bg-gray-100 border border-gray-300 p-4\">\n          <h5 className=\"text-lg font-bold text-purple-600 mb-4 font-inter\">Self-Assessment Quiz</h5>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-600 font-inter\">Question {currentQuestion + 1} of {questions.length}</span>\n              <div className=\"w-32 h-2 bg-gray-300 relative\">\n                <div \n                  className=\"h-full bg-gradient-to-r from-purple-500 to-purple-700\" \n                  style={{ width: `${((currentQuestion + 1) / questions.length) * 100}%` }}\n                />\n              </div>\n            </div>\n            \n            <h6 className=\"font-bold text-gray-800 font-inter\">{questions[currentQuestion].question}</h6>\n            \n            <div className=\"space-y-2\">\n              {questions[currentQuestion].options.map((option, index) => (\n                <button\n                  key={index}\n                  onClick={() => {\n                    setSelectedAnswer(index);\n                    setShowAnswer(true);\n                  }}\n                  className={`w-full text-left p-3 border transition-colors font-inter ${\n                    showAnswer\n                      ? index === questions[currentQuestion].correct\n                        ? 'bg-green-100 border-green-400 text-green-700'\n                        : index === selectedAnswer && index !== questions[currentQuestion].correct\n                        ? 'bg-red-100 border-red-400 text-red-700'\n                        : 'bg-gray-50 border-gray-300 text-gray-700'\n                      : 'bg-gray-50 border-gray-300 text-gray-700 hover:border-purple-400'\n                  }`}\n                  disabled={showAnswer}\n                >\n                  {String.fromCharCode(65 + index)}. {option}\n                </button>\n              ))}\n            </div>\n\n            {showAnswer && (\n              <div className=\"flex items-center gap-4 pt-4\">\n                <button\n                  onClick={() => {\n                    if (currentQuestion < questions.length - 1) {\n                      setCurrentQuestion(currentQuestion + 1);\n                      setSelectedAnswer(null);\n                      setShowAnswer(false);\n                    }\n                  }}\n                  className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-700 hover:from-purple-600 hover:to-purple-800 text-white font-inter transition-colors disabled:opacity-50\"\n                  disabled={currentQuestion === questions.length - 1}\n                >\n                  Next Question\n                </button>\n                <span className=\"text-sm text-gray-600 font-inter\">\n                  {selectedAnswer === questions[currentQuestion].correct ? '✅ Correct!' : '❌ Try again next time'}\n                </span>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  // Chapter and Episode Names\n  const chapterNames = [\n    \"The Mechanics of Transformation\",\n    \"The Architectural Blueprint in Practice\", \n    \"The Management Operating System\",\n    \"An Open-Source Toolkit for Your First 90 Days\"\n  ];\n\n  const episodeNames = [\n    [\n      \"What is an Organizational Transformation?\",\n      \"What is a Sector Transformation?\", \n      \"What is the People Transformation?\",\n      \"The Entangled Transformation Battleground\"\n    ],\n    [\n      \"Strategic Performance (KPIs)\",\n      \"Portfolios & Initiatives\",\n      \"Process Architecture\", \n      \"Organizational Design\"\n    ],\n    [\n      \"The Integrated Governance\",\n      \"The Delivery Engine\",\n      \"Change Architecture\",\n      \"The Enablers\"\n    ],\n    [\n      \"Day 1-15: Diagnose Your Starting Point\",\n      \"Day 16-60: Architect Your First \\\"Golden Thread\\\"\",\n      \"Day 61-90: Launch Your First GenAI-powered Use Case\",\n      \"\" // Only 3 episodes in this chapter\n    ]\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-800 relative overflow-hidden\">\n      {/* Spaceship Frame - Thin Panel Edges - Rusty Silver */}\n      <div className=\"absolute inset-0\">\n\n\n        {/* Left Panel Edge - 5% width with gray background */}\n        <div className=\"absolute top-0 bottom-12 left-0 w-[5%] bg-gradient-to-r from-stone-500/80 to-stone-500/60\">\n          <div className=\"w-0.5 h-full bg-gradient-to-b from-transparent via-cyan-400 to-transparent\"></div>\n          {/* Panel Bolts */}\n          <div className=\"absolute top-4 left-2 w-1 h-1 bg-cyan-400\"></div>\n          <div className=\"absolute bottom-4 left-2 w-1 h-1 bg-cyan-400\"></div>\n        </div>\n\n        {/* Bottom Panel Edge */}\n        <div className=\"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-stone-500/80 to-transparent\">\n          <div className=\"absolute bottom-0 h-0.5 w-full bg-gradient-to-r from-transparent via-cyan-400 to-transparent\"></div>\n          <div className=\"flex items-center justify-center h-full\">\n            <div className=\"flex items-center gap-8 text-xs text-gray-300 font-inter\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-1 h-1 bg-green-400\"></div>\n                <span>POWER: 100%</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-1 h-1 bg-blue-400\"></div>\n                <span>COMMS: ACTIVE</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-1 h-1 bg-purple-400\"></div>\n                <span>AI: ONLINE</span>\n              </div>\n            </div>\n          </div>\n          {/* Panel Bolts */}\n          <div className=\"absolute bottom-2 left-4 w-1 h-1 bg-cyan-400\"></div>\n          <div className=\"absolute bottom-2 right-4 w-1 h-1 bg-cyan-400\"></div>\n        </div>\n      </div>\n\n      {/* Main Screen Content */}\n      <div className=\"absolute top-0 bottom-12 left-[5%] right-0 bg-black/90 p-8 overflow-y-auto backdrop-blur-sm\">\n\n\n        {/* Knowledge Chapters - Vertical Stack */}\n        <div className=\"space-y-8 max-w-full pt-8\">\n          {filteredDomains.map((domain, domainIndex) => (\n            <motion.div\n              key={domain.id}\n              className=\"w-full\"\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: domainIndex * 0.1 }}\n            >\n              <Card className=\"bg-gray-900/50 border-2 border-cyan-400/30 hover:border-cyan-400/60 transition-all duration-300 backdrop-blur-sm overflow-hidden\">\n                <CardContent className=\"p-8\">\n                  {/* Chapter Header */}\n                  <div className=\"flex items-center gap-4 mb-6\">\n                    <div className={`w-8 h-8 bg-gradient-to-r ${getDomainColor(domainIndex)} shadow-lg flex items-center justify-center`}>\n                      <span className=\"text-white font-bold font-inter\">{domainIndex + 1}</span>\n                    </div>\n                    <div className=\"flex-1\">\n                      <Badge variant=\"outline\" className=\"text-cyan-300 border-cyan-400/50 text-xs mb-2 font-inter\">\n                        CHAPTER {domainIndex + 1}\n                      </Badge>\n                      <h2 className=\"text-2xl font-bold text-cyan-300 font-inter\">\n                        {chapterNames[domainIndex]}\n                      </h2>\n                    </div>\n                  </div>\n\n                  {/* Episodes - Single Row with Aligned Heights */}\n                  <div className=\"grid grid-cols-4 gap-6\">\n                    {domain.topics.map((topic, topicIndex) => (\n                      <div key={topic.id} className=\"flex flex-col\">\n                        {/* Episode Header - Fixed Height */}\n                        <div className=\"h-20 flex items-start gap-3 mb-4\">\n                          <div className=\"w-6 h-6 bg-gradient-to-r from-cyan-400 to-blue-500 border border-cyan-400 flex items-center justify-center text-xs font-bold text-black flex-shrink-0 mt-1\">\n                            {domainIndex + 1}.{topicIndex + 1}\n                          </div>\n                          <h3 className=\"text-lg font-bold text-white font-inter leading-tight flex-1\">\n                            {episodeNames[domainIndex][topicIndex]}\n                          </h3>\n                        </div>\n\n                        {/* Knowledge Grid - 4 Content Types Stacked - Fixed Height */}\n                        <div className=\"grid grid-cols-1 gap-2 flex-1\">\n                          {['wiki', 'podcast', 'video', 'guide'].map((contentType) => {\n                            const content = topic.content.find(c => c.type === contentType);\n                            const typeInfo = getContentTypeInfo(contentType as ContentPiece['type']);\n                            \n                            const handleContentClick = () => {\n                              if (content) {\n                                setSelectedContent({ content, topic, domain });\n                                setExpandedChapter(expandedChapter === domain.id ? null : domain.id);\n                              }\n                            };\n                            \n                            return (\n                              <motion.div\n                                key={contentType}\n                                className={`group relative h-12 border-2 transition-all duration-300 cursor-pointer ${\n                                  content \n                                    ? `bg-gradient-to-r ${getDomainColor(domainIndex)} border-white/60 hover:border-white hover:shadow-lg` \n                                    : 'bg-gray-800/50 border-gray-600/50'\n                                }`}\n                                whileHover={content ? { scale: 1.02 } : {}}\n                                animate={content ? { \n                                  borderColor: [\n                                    'rgba(255, 255, 255, 0.6)',\n                                    'rgba(255, 255, 255, 0.9)',\n                                    'rgba(255, 255, 255, 0.6)'\n                                  ]\n                                } : {}}\n                                transition={content ? { duration: 2, repeat: Infinity, ease: \"easeInOut\" } : {}}\n                                onClick={handleContentClick}\n                                onHoverStart={() => content && setHoveredContent(content.id)}\n                                onHoverEnd={() => setHoveredContent(null)}\n                              >\n                                {/* Content Type Label - Hidden by default, shown on hover */}\n                                <div className={`absolute inset-0 flex items-center justify-center transition-opacity duration-200 ${\n                                  content && hoveredContent === content.id ? 'opacity-100' : 'opacity-0'\n                                }`}>\n                                  <div className=\"flex items-center gap-2 text-white font-inter font-bold\">\n                                    <span className=\"text-lg text-white\">{typeInfo.icon}</span>\n                                    <span>{typeInfo.label}</span>\n                                  </div>\n                                </div>\n\n                                {/* Default state - just the gradient */}\n                                <div className={`absolute inset-0 transition-opacity duration-200 ${\n                                  content && hoveredContent === content.id ? 'opacity-0' : 'opacity-100'\n                                }`}>\n                                  {content && (\n                                    <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-60\"></div>\n                                  )}\n                                </div>\n\n                                {/* Scanning Line Effect on Hover */}\n                                {content && hoveredContent === content.id && (\n                                  <motion.div\n                                    className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent\"\n                                    animate={{ x: ['-100%', '100%'] }}\n                                    transition={{ duration: 1.5, repeat: Infinity }}\n                                  />\n                                )}\n                              </motion.div>\n                            );\n                          })}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n\n                </CardContent>\n              </Card>\n\n              {/* Expanded Content Section - Slides up from under THIS chapter */}\n              <div className=\"relative overflow-hidden\">\n                <AnimatePresence>\n                  {expandedChapter === domain.id && selectedContent && (\n                    <motion.div\n                      className=\"bg-white border-2 border-cyan-400/30 backdrop-blur-sm mx-[2%]\"\n                      initial={{ y: '100%', opacity: 1 }}\n                      animate={{ y: 0, opacity: 1 }}\n                      exit={{ y: '100%', opacity: 1 }}\n                      transition={{ duration: 0.5, ease: 'easeOut' }}\n                    >\n                    <div className=\"p-8 text-gray-800\">\n                      <div className=\"flex items-center justify-between mb-6\">\n                        <div className=\"flex items-center gap-4\">\n                          <div className={`w-6 h-6 bg-gradient-to-r ${getDomainColor(domainIndex)} flex items-center justify-center`}>\n                            <span className=\"text-white font-bold text-xs font-inter\">{getContentTypeInfo(selectedContent.content.type).icon}</span>\n                          </div>\n                          <h3 className=\"text-2xl font-bold text-purple-600 font-inter\">\n                            {getContentTypeInfo(selectedContent.content.type).label}\n                          </h3>\n                        </div>\n                        <button\n                          onClick={() => {\n                            setExpandedChapter(null);\n                            setSelectedContent(null);\n                          }}\n                          className=\"text-gray-600 hover:text-gray-800 transition-colors font-inter text-sm px-4 py-2 border border-gray-400 hover:border-gray-600\"\n                        >\n                          ✕ CLOSE\n                        </button>\n                      </div>\n\n                      {/* Content-Type Specific Rendering */}\n                      {selectedContent.content.type === 'podcast' && renderPodcastContent(selectedContent.content)}\n                      {selectedContent.content.type === 'video' && renderVideoContent(selectedContent.content)}\n                      {selectedContent.content.type === 'wiki' && renderWikiContent(selectedContent.content)}\n                      {selectedContent.content.type === 'guide' && renderStudyGuideContent(selectedContent.content)}\n\n                      {/* Content Tags */}\n                      <div className=\"flex flex-wrap gap-2 pt-6 border-t border-gray-300 mt-6\">\n                        {selectedContent.content.tags.map((tag) => (\n                          <span \n                            key={tag}\n                            className=\"px-3 py-1 bg-gradient-to-r from-purple-100 to-purple-200 border border-purple-300 text-purple-700 text-sm font-inter\"\n                          >\n                            {tag}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n              </div>\n\n              {/* Scanning Line Effect */}\n              <motion.div\n                className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent opacity-0 group-hover:opacity-100\"\n                animate={{ x: ['-100%', '100%'] }}\n                transition={{ duration: 2, repeat: Infinity }}\n              />\n            </motion.div>\n          ))}\n        </div>\n      </div>\n\n      {/* Empty State */}\n      {searchQuery && filteredDomains.length === 0 && (\n        <div className=\"absolute top-16 bottom-16 left-16 right-16 flex items-center justify-center\">\n          <motion.div \n            className=\"text-center max-w-md\"\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n          >\n            <div className=\"text-6xl mb-6 text-cyan-400\">🔍</div>\n            <h3 className=\"text-2xl font-bold text-cyan-300 mb-4 font-inter\">NO DATA FOUND</h3>\n            <p className=\"text-gray-400 mb-6 font-inter\">\n              Search parameters returned zero results.\n            </p>\n          </motion.div>\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":34937},"attached_assets/1/components/SphereCanvas.tsx":{"content":"import React, { useState, useEffect, useRef } from 'react';\nimport { Canvas, useFrame, useThree } from '@react-three/fiber';\nimport { Sphere, useTexture } from '@react-three/drei';\nimport * as THREE from 'three';\n\nimport bumpTextureImage from 'figma:asset/909f56fe8d9ae4adc5edf331a0ec809810ac0469.png';\n\nconst ROTATION_DAMPING_FACTOR = 0.95;\nconst ROTATION_VELOCITY_MULTIPLIER = 0.01;\nconst ROTATION_VELOCITY_THRESHOLD = 0.0001;\n\nconst CentralBumpSphere = React.memo(function CentralBumpSphere({ \n  color, \n  size \n}: { \n  color: string; \n  size: number; \n}) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const [isDragging, setIsDragging] = React.useState(false);\n  const rotationVelocity = useRef({ x: 0, y: 0 });\n  const lastMousePosition = useRef({ x: 0, y: 0 });\n  \n  const bumpTexture = useTexture(bumpTextureImage);\n\n  const { gl } = useThree();\n\n  const handlePointerDown = (event: any) => {\n    setIsDragging(true);\n    lastMousePosition.current = { x: event.clientX, y: event.clientY };\n    gl.domElement.style.cursor = 'grabbing';\n    // Stop propagation to prevent other elements from receiving the event\n    event.stopPropagation();\n  };\n\n  const handlePointerUp = () => {\n    setIsDragging(false);\n    gl.domElement.style.cursor = 'auto';\n  };\n\n  const handlePointerMove = (event: any) => {\n    if (!isDragging) return;\n    const deltaX = event.clientX - lastMousePosition.current.x;\n    const deltaY = event.clientY - lastMousePosition.current.y;\n    \n    rotationVelocity.current.x = deltaY * ROTATION_VELOCITY_MULTIPLIER;\n    rotationVelocity.current.y = deltaX * ROTATION_VELOCITY_MULTIPLIER;\n    \n    lastMousePosition.current = { x: event.clientX, y: event.clientY };\n    event.stopPropagation();\n  };\n\n  useEffect(() => {\n    // We add the move and up listeners to the window so that the user can\n    // drag the mouse outside the sphere and it still works.\n    if (isDragging) {\n      window.addEventListener('pointermove', handlePointerMove);\n      window.addEventListener('pointerup', handlePointerUp);\n    }\n    \n    return () => {\n      window.removeEventListener('pointermove', handlePointerMove);\n      window.removeEventListener('pointerup', handlePointerUp);\n    };\n  }, [isDragging, handlePointerMove, handlePointerUp]);\n\n  useFrame(() => {\n    if (!meshRef.current) return;\n    \n    // Apply current velocity to rotation\n    meshRef.current.rotation.x += rotationVelocity.current.x;\n    meshRef.current.rotation.y += rotationVelocity.current.y;\n    \n    // Apply damping when not dragging to create momentum effect\n    if (!isDragging) {\n      rotationVelocity.current.x *= ROTATION_DAMPING_FACTOR;\n      rotationVelocity.current.y *= ROTATION_DAMPING_FACTOR;\n      \n      // Stop the frame loop when velocity becomes negligible\n      if (Math.abs(rotationVelocity.current.x) < ROTATION_VELOCITY_THRESHOLD && \n          Math.abs(rotationVelocity.current.y) < ROTATION_VELOCITY_THRESHOLD) {\n        rotationVelocity.current.x = 0;\n        rotationVelocity.current.y = 0;\n      }\n    }\n  });\n\n  return (\n    <Sphere \n      ref={meshRef} \n      args={[1.45, 32, 32]} \n      position={[0, 0, 0]}\n      onPointerDown={handlePointerDown}\n      onPointerMove={handlePointerMove}\n      onPointerUp={handlePointerUp}\n      onPointerOut={handlePointerUp} // Also stop dragging if mouse leaves the sphere\n    >\n      <meshPhysicalMaterial \n        color={color}\n        transparent={false}\n        opacity={1.0}\n        depthWrite={true}\n        depthTest={true}\n        side={THREE.DoubleSide}\n        metalness={0.25}\n        roughness={0.5}\n        emissive={new THREE.Color(0x000000)}\n        emissiveIntensity={0.0}\n        bumpMap={bumpTexture}\n        bumpScale={1.0}\n        polygonOffset={true}\n        polygonOffsetFactor={-4}\n        polygonOffsetUnits={-4}\n      />\n    </Sphere>\n  );\n});\n\nfunction MaterialTestLighting() {\n  return (\n    <>\n      <ambientLight intensity={0.1} />\n      <directionalLight\n        position={[10, 6, 8]}\n        intensity={4}\n        castShadow\n      />\n      <directionalLight\n        position={[-5, -3, 6]}\n        intensity={2}\n        color=\"#FFFFFF\"\n      />\n    </>\n  );\n}\n\ninterface SphereCanvasProps {\n    color: string;\n    size: number;\n}\n\nexport function SphereCanvas({ color, size }: SphereCanvasProps) {\n    return (\n        <div \n            style={{\n                position: 'fixed',\n                top: '50%',\n                left: '50%',\n                transform: 'translate(-50%, -50%)',\n                width: '140px',\n                height: '140px',\n                zIndex: 50,\n            }}\n        >\n            <Canvas\n              camera={{ position: [0, 0, 3.5], fov: 60 }}\n              gl={{\n                antialias: true,\n                alpha: true,\n                powerPreference: \"high-performance\",\n                preserveDrawingBuffer: false,\n                logarithmicDepthBuffer: false\n              }}\n              dpr={1}\n              frameloop=\"always\"\n            >\n              <MaterialTestLighting />\n              <React.Suspense fallback={null}>\n                <CentralBumpSphere color={color} size={size} />\n              </React.Suspense>\n            </Canvas>\n        </div>\n    );\n}\n","size_bytes":5211},"attached_assets/1/components/figma/ImageWithFallback.tsx":{"content":"import React, { useState } from 'react'\n\nconst ERROR_IMG_SRC =\n  'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg=='\n\nexport function ImageWithFallback(props: React.ImgHTMLAttributes<HTMLImageElement>) {\n  const [didError, setDidError] = useState(false)\n\n  const handleError = () => {\n    setDidError(true)\n  }\n\n  const { src, alt, style, className, ...rest } = props\n\n  return didError ? (\n    <div\n      className={`inline-block bg-gray-100 text-center align-middle ${className ?? ''}`}\n      style={style}\n    >\n      <div className=\"flex items-center justify-center w-full h-full\">\n        <img src={ERROR_IMG_SRC} alt=\"Error loading image\" {...rest} data-original-url={src} />\n      </div>\n    </div>\n  ) : (\n    <img src={src} alt={alt} className={className} style={style} {...rest} onError={handleError} />\n  )\n}\n","size_bytes":1153},"attached_assets/1/components/ui/avatar.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar@1.1.3\";\n\nimport { cn } from \"./utils\";\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        \"relative flex size-10 shrink-0 overflow-hidden rounded-full\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn(\"aspect-square size-full\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        \"bg-muted flex size-full items-center justify-center rounded-full\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Avatar, AvatarImage, AvatarFallback };\n","size_bytes":1110},"attached_assets/1/components/ui/badge.tsx":{"content":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\";\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  );\n}\n\nexport { Badge, badgeVariants };\n","size_bytes":1648},"attached_assets/1/components/ui/button.tsx":{"content":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9 rounded-md\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n  }) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  );\n}\n\nexport { Button, buttonVariants };\n","size_bytes":2118},"attached_assets/1/components/ui/card.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"./utils\";\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <h4\n      data-slot=\"card-title\"\n      className={cn(\"leading-none\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <p\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6 [&:last-child]:pb-6\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 pb-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n};\n","size_bytes":1988},"attached_assets/1/components/ui/dialog.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog@1.1.6\";\n// import { XIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />;\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />;\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />;\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />;\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DialogContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content>) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <DialogPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none text-lg\">\n          ✕\n          <span className=\"sr-only\">Close</span>\n        </DialogPrimitive.Close>\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  );\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n};\n","size_bytes":3765},"attached_assets/1/components/ui/input.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"./utils\";\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Input };\n","size_bytes":963},"attached_assets/1/components/ui/label.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label@2.1.2\";\n\nimport { cn } from \"./utils\";\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Label };\n","size_bytes":620},"attached_assets/1/components/ui/radio-group.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group@1.2.3\";\n// import { CircleIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction RadioGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof RadioGroupPrimitive.Root>) {\n  return (\n    <RadioGroupPrimitive.Root\n      data-slot=\"radio-group\"\n      className={cn(\"grid gap-3\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction RadioGroupItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof RadioGroupPrimitive.Item>) {\n  return (\n    <RadioGroupPrimitive.Item\n      data-slot=\"radio-group-item\"\n      className={cn(\n        \"border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator\n        data-slot=\"radio-group-indicator\"\n        className=\"relative flex items-center justify-center\"\n      >\n        <div className=\"bg-primary absolute top-1/2 left-1/2 w-2 h-2 rounded-full -translate-x-1/2 -translate-y-1/2\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  );\n}\n\nexport { RadioGroup, RadioGroupItem };\n","size_bytes":1493},"attached_assets/1/components/ui/select.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select@2.1.6\";\nimport {\n  CheckIcon,\n  ChevronDownIcon,\n  ChevronUpIcon,\n} from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />;\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />;\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />;\n}\n\nfunction SelectTrigger({\n  className,\n  size = \"default\",\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: \"sm\" | \"default\";\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  );\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = \"popper\",\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\n          position === \"popper\" &&\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            \"p-1\",\n            position === \"popper\" &&\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\",\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  );\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  );\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  );\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  );\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n};\n","size_bytes":6289},"attached_assets/1/components/ui/separator.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator@1.1.2\";\n\nimport { cn } from \"./utils\";\n\nfunction Separator({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator-root\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Separator };\n","size_bytes":713},"attached_assets/1/components/ui/textarea.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"./utils\";\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Textarea };\n","size_bytes":767},"attached_assets/1/data/mockData.ts":{"content":"import { Domain } from '../types';\n\nexport const mockDomains: Domain[] = [\n  {\n    id: 'bim-modeling',\n    title: 'BIM & 3D Modeling',\n    description: 'Building Information Modeling and 3D digital representations',\n    color: 'bg-blue-500',\n    icon: '🏗️',\n    topics: [\n      {\n        id: 'parametric-design',\n        title: 'Parametric Design',\n        description: 'Algorithm-driven design methodologies and tools',\n        content: [\n          {\n            id: 'param-wiki',\n            title: 'Introduction to Parametric Design',\n            type: 'wiki',\n            description: 'Comprehensive guide to parametric design principles',\n            content: 'Parametric design is a process where the design is generated by algorithms...',\n            readTime: '12 min read',\n            author: 'Dr. Sarah Chen',\n            publishedAt: '2024-01-15',\n            tags: ['parametric', 'algorithms', 'design']\n          },\n          {\n            id: 'param-podcast',\n            title: 'The Future of Parametric Architecture',\n            type: 'podcast',\n            description: 'Expert discussion on emerging trends in parametric design',\n            content: 'A deep dive conversation with leading architects...',\n            duration: '45 min',\n            author: 'Architecture Today Podcast',\n            publishedAt: '2024-01-20',\n            tags: ['future', 'trends', 'discussion']\n          },\n          {\n            id: 'param-video',\n            title: 'Grasshopper Tutorial: Parametric Facades',\n            type: 'video',\n            description: 'Step-by-step tutorial for creating parametric building facades',\n            content: 'Learn how to create dynamic building facades using Grasshopper...',\n            duration: '28 min',\n            author: 'ArchTech Academy',\n            publishedAt: '2024-01-25',\n            tags: ['grasshopper', 'tutorial', 'facades']\n          },\n          {\n            id: 'param-guide',\n            title: 'Parametric Design Study Guide',\n            type: 'guide',\n            description: 'Essential concepts and practice exercises',\n            content: 'Key learning objectives and practice exercises for mastering parametric design...',\n            readTime: '8 min read',\n            author: 'Prof. Michael Torres',\n            publishedAt: '2024-01-30',\n            tags: ['study', 'exercises', 'learning']\n          }\n        ]\n      },\n      {\n        id: 'bim-workflows',\n        title: 'BIM Workflows',\n        description: 'Collaborative workflows and best practices in BIM',\n        content: [\n          {\n            id: 'workflow-wiki',\n            title: 'BIM Collaboration Protocols',\n            type: 'wiki',\n            description: 'Standard protocols for multi-disciplinary BIM collaboration',\n            content: 'Effective BIM collaboration requires clear protocols and standards...',\n            readTime: '15 min read',\n            author: 'Dr. James Rodriguez',\n            publishedAt: '2024-02-01',\n            tags: ['collaboration', 'protocols', 'standards']\n          },\n          {\n            id: 'workflow-podcast',\n            title: 'BIM Implementation Challenges',\n            type: 'podcast',\n            description: 'Real-world experiences in BIM implementation',\n            content: 'Industry leaders share their experiences with BIM adoption...',\n            duration: '52 min',\n            author: 'BIM Talks',\n            publishedAt: '2024-02-05',\n            tags: ['implementation', 'challenges', 'experience']\n          },\n          {\n            id: 'workflow-video',\n            title: 'Revit to Digital Twin Workflow',\n            type: 'video',\n            description: 'Complete workflow from BIM to operational digital twin',\n            content: 'End-to-end process for creating operational digital twins from BIM models...',\n            duration: '35 min',\n            author: 'Digital Twin Solutions',\n            publishedAt: '2024-02-10',\n            tags: ['revit', 'workflow', 'operations']\n          },\n          {\n            id: 'workflow-guide',\n            title: 'BIM Quality Control Checklist',\n            type: 'guide',\n            description: 'Essential quality control measures for BIM projects',\n            content: 'Comprehensive checklist for ensuring BIM model quality and accuracy...',\n            readTime: '6 min read',\n            author: 'Quality Assurance Institute',\n            publishedAt: '2024-02-15',\n            tags: ['quality', 'checklist', 'standards']\n          }\n        ]\n      },\n      {\n        id: 'reality-capture',\n        title: 'Reality Capture',\n        description: 'Scanning and photogrammetry for existing structures',\n        content: [\n          {\n            id: 'capture-wiki',\n            title: 'LiDAR vs Photogrammetry Comparison',\n            type: 'wiki',\n            description: 'Technical comparison of reality capture methods',\n            content: 'Understanding the differences between LiDAR and photogrammetry techniques...',\n            readTime: '10 min read',\n            author: 'Dr. Lisa Wang',\n            publishedAt: '2024-02-20',\n            tags: ['lidar', 'photogrammetry', 'comparison']\n          },\n          {\n            id: 'capture-podcast',\n            title: 'Future of Building Scanning',\n            type: 'podcast',\n            description: 'Emerging technologies in reality capture',\n            content: 'Exploring new technologies revolutionizing building documentation...',\n            duration: '38 min',\n            author: 'Tech Architecture Podcast',\n            publishedAt: '2024-02-25',\n            tags: ['scanning', 'technology', 'future']\n          },\n          {\n            id: 'capture-video',\n            title: 'Drone Photogrammetry Techniques',\n            type: 'video',\n            description: 'Professional drone scanning workflows',\n            content: 'Learn professional techniques for aerial photogrammetry surveys...',\n            duration: '42 min',\n            author: 'Aerial Survey Pro',\n            publishedAt: '2024-03-01',\n            tags: ['drone', 'aerial', 'techniques']\n          },\n          {\n            id: 'capture-guide',\n            title: 'Reality Capture Planning Guide',\n            type: 'guide',\n            description: 'Pre-project planning for successful reality capture',\n            content: 'Essential planning steps for successful reality capture projects...',\n            readTime: '9 min read',\n            author: 'Survey Planning Institute',\n            publishedAt: '2024-03-05',\n            tags: ['planning', 'preparation', 'workflow']\n          }\n        ]\n      },\n      {\n        id: 'model-optimization',\n        title: 'Model Optimization',\n        description: 'Techniques for efficient 3D model processing',\n        content: [\n          {\n            id: 'optimization-wiki',\n            title: 'Mesh Optimization Fundamentals',\n            type: 'wiki',\n            description: 'Core principles of 3D mesh optimization',\n            content: 'Understanding mesh topology and optimization techniques for better performance...',\n            readTime: '14 min read',\n            author: 'Dr. Alex Kumar',\n            publishedAt: '2024-03-10',\n            tags: ['mesh', 'optimization', 'performance']\n          },\n          {\n            id: 'optimization-podcast',\n            title: 'Performance in Large-Scale Models',\n            type: 'podcast',\n            description: 'Managing performance in complex architectural models',\n            content: 'Strategies for maintaining performance in large-scale digital twin models...',\n            duration: '47 min',\n            author: 'Performance Matters',\n            publishedAt: '2024-03-15',\n            tags: ['performance', 'large-scale', 'optimization']\n          },\n          {\n            id: 'optimization-video',\n            title: 'LOD Strategies for Digital Twins',\n            type: 'video',\n            description: 'Level of Detail implementation in digital twin models',\n            content: 'Implementing effective Level of Detail strategies for optimal performance...',\n            duration: '33 min',\n            author: 'Model Optimization Lab',\n            publishedAt: '2024-03-20',\n            tags: ['lod', 'detail', 'strategy']\n          },\n          {\n            id: 'optimization-guide',\n            title: 'Model Optimization Checklist',\n            type: 'guide',\n            description: 'Step-by-step optimization workflow',\n            content: 'Systematic approach to optimizing 3D models for digital twin applications...',\n            readTime: '7 min read',\n            author: 'Optimization Guild',\n            publishedAt: '2024-03-25',\n            tags: ['checklist', 'workflow', 'systematic']\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: 'iot-sensors',\n    title: 'IoT & Sensors',\n    description: 'Internet of Things integration and sensor networks',\n    color: 'bg-green-500',\n    icon: '📡',\n    topics: [\n      {\n        id: 'sensor-networks',\n        title: 'Sensor Networks',\n        description: 'Design and deployment of building sensor networks',\n        content: [\n          {\n            id: 'network-wiki',\n            title: 'Building Sensor Network Architecture',\n            type: 'wiki',\n            description: 'Comprehensive guide to sensor network design',\n            content: 'Designing effective sensor networks for building monitoring and control...',\n            readTime: '16 min read',\n            author: 'Dr. Emily Foster',\n            publishedAt: '2024-01-10',\n            tags: ['sensors', 'networks', 'architecture']\n          },\n          {\n            id: 'network-podcast',\n            title: 'Smart Building Sensor Strategies',\n            type: 'podcast',\n            description: 'Expert insights on sensor deployment strategies',\n            content: 'Leading experts discuss optimal sensor placement and configuration...',\n            duration: '41 min',\n            author: 'Smart Building Today',\n            publishedAt: '2024-01-15',\n            tags: ['smart', 'deployment', 'strategy']\n          },\n          {\n            id: 'network-video',\n            title: 'Wireless Sensor Installation Guide',\n            type: 'video',\n            description: 'Practical guide to wireless sensor installation',\n            content: 'Step-by-step installation and configuration of wireless building sensors...',\n            duration: '29 min',\n            author: 'IoT Install Pro',\n            publishedAt: '2024-01-20',\n            tags: ['wireless', 'installation', 'configuration']\n          },\n          {\n            id: 'network-guide',\n            title: 'Sensor Network Troubleshooting',\n            type: 'guide',\n            description: 'Common issues and solutions for sensor networks',\n            content: 'Troubleshooting guide for common sensor network problems and solutions...',\n            readTime: '11 min read',\n            author: 'Network Support Team',\n            publishedAt: '2024-01-25',\n            tags: ['troubleshooting', 'problems', 'solutions']\n          }\n        ]\n      },\n      {\n        id: 'data-acquisition',\n        title: 'Data Acquisition',\n        description: 'Methods for collecting and processing sensor data',\n        content: [\n          {\n            id: 'acquisition-wiki',\n            title: 'Real-time Data Collection Systems',\n            type: 'wiki',\n            description: 'Architecture for real-time building data collection',\n            content: 'Designing systems for continuous real-time data collection from building sensors...',\n            readTime: '13 min read',\n            author: 'Data Systems Lab',\n            publishedAt: '2024-02-01',\n            tags: ['real-time', 'collection', 'systems']\n          },\n          {\n            id: 'acquisition-podcast',\n            title: 'Edge Computing in Buildings',\n            type: 'podcast',\n            description: 'Edge computing applications for building data',\n            content: 'Exploring edge computing solutions for building data processing...',\n            duration: '36 min',\n            author: 'Edge Computing Weekly',\n            publishedAt: '2024-02-05',\n            tags: ['edge', 'computing', 'processing']\n          },\n          {\n            id: 'acquisition-video',\n            title: 'MQTT Protocol for Building Data',\n            type: 'video',\n            description: 'Implementing MQTT for building sensor communication',\n            content: 'Learn how to implement MQTT protocol for efficient sensor data transmission...',\n            duration: '31 min',\n            author: 'Protocol Academy',\n            publishedAt: '2024-02-10',\n            tags: ['mqtt', 'protocol', 'communication']\n          },\n          {\n            id: 'acquisition-guide',\n            title: 'Data Quality Assurance Framework',\n            type: 'guide',\n            description: 'Ensuring quality in sensor data collection',\n            content: 'Framework for maintaining high quality in building sensor data collection...',\n            readTime: '8 min read',\n            author: 'Quality Data Institute',\n            publishedAt: '2024-02-15',\n            tags: ['quality', 'assurance', 'framework']\n          }\n        ]\n      },\n      {\n        id: 'predictive-maintenance',\n        title: 'Predictive Maintenance',\n        description: 'AI-driven maintenance and system optimization',\n        content: [\n          {\n            id: 'maintenance-wiki',\n            title: 'Machine Learning for Building Systems',\n            type: 'wiki',\n            description: 'ML applications in building system maintenance',\n            content: 'Applying machine learning techniques to predict building system failures...',\n            readTime: '18 min read',\n            author: 'Dr. Robert Kim',\n            publishedAt: '2024-02-20',\n            tags: ['machine-learning', 'prediction', 'maintenance']\n          },\n          {\n            id: 'maintenance-podcast',\n            title: 'AI in Facility Management',\n            type: 'podcast',\n            description: 'Artificial intelligence transforming facility operations',\n            content: 'How AI is revolutionizing facility management and building operations...',\n            duration: '44 min',\n            author: 'AI Facilities Podcast',\n            publishedAt: '2024-02-25',\n            tags: ['ai', 'facilities', 'operations']\n          },\n          {\n            id: 'maintenance-video',\n            title: 'Building Anomaly Detection Systems',\n            type: 'video',\n            description: 'Implementing anomaly detection for building systems',\n            content: 'Build and deploy anomaly detection systems for building equipment monitoring...',\n            duration: '39 min',\n            author: 'Anomaly Detection Lab',\n            publishedAt: '2024-03-01',\n            tags: ['anomaly', 'detection', 'monitoring']\n          },\n          {\n            id: 'maintenance-guide',\n            title: 'Predictive Maintenance Implementation',\n            type: 'guide',\n            description: 'Step-by-step guide to implementing predictive maintenance',\n            content: 'Complete implementation guide for predictive maintenance programs...',\n            readTime: '12 min read',\n            author: 'Maintenance Excellence',\n            publishedAt: '2024-03-05',\n            tags: ['implementation', 'program', 'excellence']\n          }\n        ]\n      },\n      {\n        id: 'energy-monitoring',\n        title: 'Energy Monitoring',\n        description: 'Smart energy management and optimization',\n        content: [\n          {\n            id: 'energy-wiki',\n            title: 'Smart Grid Integration for Buildings',\n            type: 'wiki',\n            description: 'Connecting buildings to smart grid infrastructure',\n            content: 'Understanding smart grid integration and its benefits for building energy management...',\n            readTime: '15 min read',\n            author: 'Smart Grid Institute',\n            publishedAt: '2024-03-10',\n            tags: ['smart-grid', 'integration', 'energy']\n          },\n          {\n            id: 'energy-podcast',\n            title: 'Net Zero Building Technologies',\n            type: 'podcast',\n            description: 'Technologies enabling net zero energy buildings',\n            content: 'Exploring technologies and strategies for achieving net zero energy buildings...',\n            duration: '48 min',\n            author: 'Net Zero Today',\n            publishedAt: '2024-03-15',\n            tags: ['net-zero', 'technologies', 'sustainability']\n          },\n          {\n            id: 'energy-video',\n            title: 'Energy Dashboard Development',\n            type: 'video',\n            description: 'Creating real-time energy monitoring dashboards',\n            content: 'Learn to create comprehensive energy monitoring dashboards for buildings...',\n            duration: '34 min',\n            author: 'Dashboard Developer',\n            publishedAt: '2024-03-20',\n            tags: ['dashboard', 'monitoring', 'visualization']\n          },\n          {\n            id: 'energy-guide',\n            title: 'Energy Optimization Strategies',\n            type: 'guide',\n            description: 'Proven strategies for building energy optimization',\n            content: 'Comprehensive guide to optimizing building energy consumption and efficiency...',\n            readTime: '10 min read',\n            author: 'Energy Efficiency Council',\n            publishedAt: '2024-03-25',\n            tags: ['optimization', 'efficiency', 'strategies']\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: 'data-analytics',\n    title: 'Data Analytics',\n    description: 'Advanced analytics and machine learning for building data',\n    color: 'bg-purple-500',\n    icon: '📊',\n    topics: [\n      {\n        id: 'time-series',\n        title: 'Time Series Analysis',\n        description: 'Analyzing temporal patterns in building data',\n        content: [\n          {\n            id: 'timeseries-wiki',\n            title: 'Time Series Fundamentals for Buildings',\n            type: 'wiki',\n            description: 'Core concepts of time series analysis in building contexts',\n            content: 'Understanding time series analysis techniques for building data interpretation...',\n            readTime: '17 min read',\n            author: 'Dr. Maria Santos',\n            publishedAt: '2024-01-12',\n            tags: ['time-series', 'analysis', 'fundamentals']\n          },\n          {\n            id: 'timeseries-podcast',\n            title: 'Seasonal Patterns in Building Data',\n            type: 'podcast',\n            description: 'Understanding seasonal variations in building performance',\n            content: 'Analyzing seasonal patterns and their impact on building operations...',\n            duration: '42 min',\n            author: 'Building Analytics Weekly',\n            publishedAt: '2024-01-17',\n            tags: ['seasonal', 'patterns', 'performance']\n          },\n          {\n            id: 'timeseries-video',\n            title: 'Python for Building Data Analysis',\n            type: 'video',\n            description: 'Using Python libraries for building data time series analysis',\n            content: 'Practical Python techniques for analyzing building sensor time series data...',\n            duration: '46 min',\n            author: 'Python Analytics Lab',\n            publishedAt: '2024-01-22',\n            tags: ['python', 'libraries', 'practical']\n          },\n          {\n            id: 'timeseries-guide',\n            title: 'Time Series Visualization Best Practices',\n            type: 'guide',\n            description: 'Effective visualization techniques for temporal building data',\n            content: 'Best practices for visualizing time series data from building systems...',\n            readTime: '9 min read',\n            author: 'Visualization Experts',\n            publishedAt: '2024-01-27',\n            tags: ['visualization', 'best-practices', 'temporal']\n          }\n        ]\n      },\n      {\n        id: 'pattern-recognition',\n        title: 'Pattern Recognition',\n        description: 'Identifying patterns and anomalies in building behavior',\n        content: [\n          {\n            id: 'pattern-wiki',\n            title: 'Occupancy Pattern Detection',\n            type: 'wiki',\n            description: 'Methods for detecting and analyzing occupancy patterns',\n            content: 'Advanced techniques for detecting occupancy patterns in smart buildings...',\n            readTime: '14 min read',\n            author: 'Occupancy Analytics Team',\n            publishedAt: '2024-02-02',\n            tags: ['occupancy', 'detection', 'patterns']\n          },\n          {\n            id: 'pattern-podcast',\n            title: 'Behavioral Analytics in Buildings',\n            type: 'podcast',\n            description: 'Understanding human behavior through building data',\n            content: 'How building data reveals insights about human behavior and comfort...',\n            duration: '39 min',\n            author: 'Behavioral Building Science',\n            publishedAt: '2024-02-07',\n            tags: ['behavioral', 'analytics', 'insights']\n          },\n          {\n            id: 'pattern-video',\n            title: 'Clustering Algorithms for Building Data',\n            type: 'video',\n            description: 'Applying clustering techniques to building datasets',\n            content: 'Learn to apply various clustering algorithms to identify building usage patterns...',\n            duration: '37 min',\n            author: 'Machine Learning for Buildings',\n            publishedAt: '2024-02-12',\n            tags: ['clustering', 'algorithms', 'usage']\n          },\n          {\n            id: 'pattern-guide',\n            title: 'Anomaly Detection Framework',\n            type: 'guide',\n            description: 'Building robust anomaly detection systems',\n            content: 'Framework for implementing effective anomaly detection in building systems...',\n            readTime: '11 min read',\n            author: 'Anomaly Detection Institute',\n            publishedAt: '2024-02-17',\n            tags: ['framework', 'detection', 'robust']\n          }\n        ]\n      },\n      {\n        id: 'predictive-modeling',\n        title: 'Predictive Modeling',\n        description: 'Forecasting building performance and energy consumption',\n        content: [\n          {\n            id: 'modeling-wiki',\n            title: 'Energy Consumption Forecasting',\n            type: 'wiki',\n            description: 'Advanced models for predicting building energy usage',\n            content: 'Comprehensive guide to energy consumption forecasting methodologies...',\n            readTime: '19 min read',\n            author: 'Dr. Ahmed Hassan',\n            publishedAt: '2024-02-22',\n            tags: ['forecasting', 'energy', 'consumption']\n          },\n          {\n            id: 'modeling-podcast',\n            title: 'Deep Learning for Building Prediction',\n            type: 'podcast',\n            description: 'Deep learning applications in building performance prediction',\n            content: 'Exploring deep learning techniques for building performance prediction...',\n            duration: '51 min',\n            author: 'Deep Learning Buildings',\n            publishedAt: '2024-02-27',\n            tags: ['deep-learning', 'prediction', 'performance']\n          },\n          {\n            id: 'modeling-video',\n            title: 'LSTM Networks for Building Data',\n            type: 'video',\n            description: 'Implementing LSTM networks for building time series prediction',\n            content: 'Build and train LSTM networks for accurate building performance prediction...',\n            duration: '43 min',\n            author: 'Neural Networks Lab',\n            publishedAt: '2024-03-03',\n            tags: ['lstm', 'networks', 'training']\n          },\n          {\n            id: 'modeling-guide',\n            title: 'Model Validation Strategies',\n            type: 'guide',\n            description: 'Validating predictive models for building applications',\n            content: 'Essential strategies for validating and testing building prediction models...',\n            readTime: '13 min read',\n            author: 'Model Validation Team',\n            publishedAt: '2024-03-08',\n            tags: ['validation', 'testing', 'strategies']\n          }\n        ]\n      },\n      {\n        id: 'performance-metrics',\n        title: 'Performance Metrics',\n        description: 'KPIs and benchmarking for building performance',\n        content: [\n          {\n            id: 'metrics-wiki',\n            title: 'Building Performance Indicators',\n            type: 'wiki',\n            description: 'Key performance indicators for smart buildings',\n            content: 'Comprehensive overview of KPIs for measuring building performance and efficiency...',\n            readTime: '16 min read',\n            author: 'Performance Metrics Institute',\n            publishedAt: '2024-03-12',\n            tags: ['kpi', 'indicators', 'efficiency']\n          },\n          {\n            id: 'metrics-podcast',\n            title: 'Benchmarking Smart Buildings',\n            type: 'podcast',\n            description: 'Industry benchmarks for smart building performance',\n            content: 'Understanding industry benchmarks and best practices for building performance...',\n            duration: '45 min',\n            author: 'Building Benchmarks',\n            publishedAt: '2024-03-17',\n            tags: ['benchmarking', 'industry', 'best-practices']\n          },\n          {\n            id: 'metrics-video',\n            title: 'Creating Performance Dashboards',\n            type: 'video',\n            description: 'Building comprehensive performance monitoring dashboards',\n            content: 'Design and implement effective performance dashboards for building operations...',\n            duration: '38 min',\n            author: 'Dashboard Design Pro',\n            publishedAt: '2024-03-22',\n            tags: ['dashboards', 'monitoring', 'operations']\n          },\n          {\n            id: 'metrics-guide',\n            title: 'Performance Reporting Framework',\n            type: 'guide',\n            description: 'Structured approach to building performance reporting',\n            content: 'Framework for systematic building performance reporting and analysis...',\n            readTime: '10 min read',\n            author: 'Reporting Standards Group',\n            publishedAt: '2024-03-27',\n            tags: ['reporting', 'framework', 'systematic']\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: 'visualization-vr',\n    title: 'Visualization & VR',\n    description: 'Immersive visualization and virtual reality applications',\n    color: 'bg-orange-500',\n    icon: '🥽',\n    topics: [\n      {\n        id: 'immersive-visualization',\n        title: 'Immersive Visualization',\n        description: 'Creating compelling 3D visualizations and walkthroughs',\n        content: [\n          {\n            id: 'immersive-wiki',\n            title: 'Real-time Rendering for Architecture',\n            type: 'wiki',\n            description: 'Techniques for real-time architectural visualization',\n            content: 'Advanced real-time rendering techniques for architectural visualization...',\n            readTime: '18 min read',\n            author: 'Dr. Rachel Morgan',\n            publishedAt: '2024-01-14',\n            tags: ['real-time', 'rendering', 'visualization']\n          },\n          {\n            id: 'immersive-podcast',\n            title: 'The Future of Architectural Visualization',\n            type: 'podcast',\n            description: 'Emerging trends in architectural visualization technology',\n            content: 'Exploring the future of architectural visualization and emerging technologies...',\n            duration: '47 min',\n            author: 'Viz Future Podcast',\n            publishedAt: '2024-01-19',\n            tags: ['future', 'trends', 'technology']\n          },\n          {\n            id: 'immersive-video',\n            title: 'Unreal Engine for Architecture',\n            type: 'video',\n            description: 'Using Unreal Engine for architectural visualization',\n            content: 'Complete guide to using Unreal Engine for stunning architectural visualizations...',\n            duration: '52 min',\n            author: 'Arch Viz Academy',\n            publishedAt: '2024-01-24',\n            tags: ['unreal', 'engine', 'tutorial']\n          },\n          {\n            id: 'immersive-guide',\n            title: 'Lighting Design for Architectural Visualization',\n            type: 'guide',\n            description: 'Best practices for lighting in architectural renders',\n            content: 'Essential lighting techniques for creating compelling architectural visualizations...',\n            readTime: '12 min read',\n            author: 'Lighting Design Studio',\n            publishedAt: '2024-01-29',\n            tags: ['lighting', 'design', 'rendering']\n          }\n        ]\n      },\n      {\n        id: 'vr-experiences',\n        title: 'VR Experiences',\n        description: 'Virtual reality applications for architecture and construction',\n        content: [\n          {\n            id: 'vr-wiki',\n            title: 'VR for Design Review and Collaboration',\n            type: 'wiki',\n            description: 'Using VR for effective design review processes',\n            content: 'Implementing VR technologies for enhanced design review and collaboration...',\n            readTime: '15 min read',\n            author: 'VR Design Lab',\n            publishedAt: '2024-02-03',\n            tags: ['vr', 'design-review', 'collaboration']\n          },\n          {\n            id: 'vr-podcast',\n            title: 'VR in Construction Training',\n            type: 'podcast',\n            description: 'Virtual reality applications in construction safety training',\n            content: 'How VR is transforming construction safety training and education...',\n            duration: '41 min',\n            author: 'Construction Tech Talk',\n            publishedAt: '2024-02-08',\n            tags: ['construction', 'training', 'safety']\n          },\n          {\n            id: 'vr-video',\n            title: 'Building VR Experiences with Unity',\n            type: 'video',\n            description: 'Creating architectural VR experiences using Unity',\n            content: 'Step-by-step guide to creating immersive architectural VR experiences...',\n            duration: '49 min',\n            author: 'Unity for Architecture',\n            publishedAt: '2024-02-13',\n            tags: ['unity', 'development', 'immersive']\n          },\n          {\n            id: 'vr-guide',\n            title: 'VR Hardware Selection Guide',\n            type: 'guide',\n            description: 'Choosing the right VR hardware for architectural applications',\n            content: 'Comprehensive guide to selecting VR hardware for architectural workflows...',\n            readTime: '11 min read',\n            author: 'VR Hardware Review',\n            publishedAt: '2024-02-18',\n            tags: ['hardware', 'selection', 'comparison']\n          }\n        ]\n      },\n      {\n        id: 'ar-applications',\n        title: 'AR Applications',\n        description: 'Augmented reality for construction and facility management',\n        content: [\n          {\n            id: 'ar-wiki',\n            title: 'AR for On-site Construction Guidance',\n            type: 'wiki',\n            description: 'Augmented reality applications in construction workflows',\n            content: 'Implementing AR technologies for on-site construction guidance and quality control...',\n            readTime: '17 min read',\n            author: 'AR Construction Institute',\n            publishedAt: '2024-02-23',\n            tags: ['ar', 'construction', 'guidance']\n          },\n          {\n            id: 'ar-podcast',\n            title: 'Mixed Reality in Facility Management',\n            type: 'podcast',\n            description: 'Mixed reality applications for building operations',\n            content: 'Exploring mixed reality solutions for facility management and maintenance...',\n            duration: '44 min',\n            author: 'Mixed Reality FM',\n            publishedAt: '2024-02-28',\n            tags: ['mixed-reality', 'facility', 'maintenance']\n          },\n          {\n            id: 'ar-video',\n            title: 'HoloLens for Building Information',\n            type: 'video',\n            description: 'Using Microsoft HoloLens for building data visualization',\n            content: 'Practical applications of HoloLens for visualizing building information and systems...',\n            duration: '36 min',\n            author: 'Holographic Buildings',\n            publishedAt: '2024-03-04',\n            tags: ['hololens', 'microsoft', 'systems']\n          },\n          {\n            id: 'ar-guide',\n            title: 'AR Development for Architecture',\n            type: 'guide',\n            description: 'Getting started with AR development for architectural applications',\n            content: 'Beginner-friendly guide to developing AR applications for architecture...',\n            readTime: '14 min read',\n            author: 'AR Development Team',\n            publishedAt: '2024-03-09',\n            tags: ['development', 'beginner', 'applications']\n          }\n        ]\n      },\n      {\n        id: 'data-visualization',\n        title: 'Data Visualization',\n        description: 'Visual representation of building and sensor data',\n        content: [\n          {\n            id: 'dataviz-wiki',\n            title: 'Spatial Data Visualization Techniques',\n            type: 'wiki',\n            description: 'Advanced techniques for visualizing spatial building data',\n            content: 'Comprehensive guide to spatial data visualization for building analytics...',\n            readTime: '16 min read',\n            author: 'Spatial Viz Lab',\n            publishedAt: '2024-03-13',\n            tags: ['spatial', 'techniques', 'analytics']\n          },\n          {\n            id: 'dataviz-podcast',\n            title: 'Interactive Building Dashboards',\n            type: 'podcast',\n            description: 'Creating engaging interactive dashboards for building data',\n            content: 'Best practices for creating interactive and engaging building data dashboards...',\n            duration: '40 min',\n            author: 'Dashboard Design Weekly',\n            publishedAt: '2024-03-18',\n            tags: ['interactive', 'dashboards', 'engaging']\n          },\n          {\n            id: 'dataviz-video',\n            title: 'D3.js for Building Data Visualization',\n            type: 'video',\n            description: 'Using D3.js for custom building data visualizations',\n            content: 'Learn to create custom building data visualizations using D3.js library...',\n            duration: '45 min',\n            author: 'D3 for Buildings',\n            publishedAt: '2024-03-23',\n            tags: ['d3js', 'custom', 'library']\n          },\n          {\n            id: 'dataviz-guide',\n            title: 'Color Theory for Data Visualization',\n            type: 'guide',\n            description: 'Effective color schemes for building data visualization',\n            content: 'Guide to choosing effective color schemes for building data visualization...',\n            readTime: '8 min read',\n            author: 'Color Design Institute',\n            publishedAt: '2024-03-28',\n            tags: ['color', 'schemes', 'effective']\n          }\n        ]\n      }\n    ]\n  }\n];","size_bytes":35741},"attached_assets/1/styles/globals.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Allerta+Stencil&display=swap');\n\n@custom-variant dark (&:is(.dark *));\n\n:root {\n  --font-size: 16px;\n  --background: #ffffff;\n  --foreground: oklch(0.145 0 0);\n  --card: #ffffff;\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: #030213;\n  --primary-foreground: oklch(1 0 0);\n  --secondary: oklch(0.95 0.0058 264.53);\n  --secondary-foreground: #030213;\n  --muted: #ececf0;\n  --muted-foreground: #717182;\n  --accent: #e9ebef;\n  --accent-foreground: #030213;\n  --destructive: #d4183d;\n  --destructive-foreground: #ffffff;\n  --border: rgba(0, 0, 0, 0.1);\n  --input: transparent;\n  --input-background: #f3f3f5;\n  --switch-background: #cbced4;\n  --font-weight-medium: 500;\n  --font-weight-normal: 400;\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.646 0.222 41.116);\n  --chart-2: oklch(0.6 0.118 184.704);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --radius: 0.625rem;\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: #030213;\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n}\n\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.145 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.145 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.985 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.269 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.396 0.141 25.723);\n  --destructive-foreground: oklch(0.637 0.237 25.331);\n  --border: oklch(0.269 0 0);\n  --input: oklch(0.269 0 0);\n  --ring: oklch(0.439 0 0);\n  --font-weight-medium: 500;\n  --font-weight-normal: 400;\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(0.269 0 0);\n  --sidebar-ring: oklch(0.439 0 0);\n}\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-input-background: var(--input-background);\n  --color-switch-background: var(--switch-background);\n  --color-ring: var(--ring);\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n\n/**\n * Base typography. This is not applied to elements which have an ancestor with a Tailwind text class.\n */\n@layer base {\n  :where(:not(:has([class*=\" text-\"]), :not(:has([class^=\"text-\"])))) {\n    h1 {\n      font-size: var(--text-2xl);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    h2 {\n      font-size: var(--text-xl);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    h3 {\n      font-size: var(--text-lg);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    h4 {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    p {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-normal);\n      line-height: 1.5;\n    }\n\n    label {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    button {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-medium);\n      line-height: 1.5;\n    }\n\n    input {\n      font-size: var(--text-base);\n      font-weight: var(--font-weight-normal);\n      line-height: 1.5;\n    }\n  }\n}\n\nhtml {\n  font-size: var(--font-size);\n}\n\n.font-inter {\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n}\n\n.font-allerta {\n  font-family: 'Allerta Stencil', monospace;\n}\n","size_bytes":5933},"attached_assets/1/types/index.ts":{"content":"export interface ContentPiece {\n  id: string;\n  title: string;\n  type: 'wiki' | 'podcast' | 'video' | 'guide';\n  description: string;\n  content: string;\n  duration?: string; // for podcasts/videos\n  readTime?: string; // for wiki/guides\n  author: string;\n  publishedAt: string;\n  tags: string[];\n}\n\nexport interface Topic {\n  id: string;\n  title: string;\n  description: string;\n  content: ContentPiece[];\n}\n\nexport interface Domain {\n  id: string;\n  title: string;\n  description: string;\n  color: string;\n  icon: string;\n  topics: Topic[];\n}\n\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  role: 'architect' | 'learner';\n  avatar?: string;\n}\n\nexport interface Comment {\n  id: string;\n  contentId: string;\n  userId: string;\n  author: string;\n  content: string;\n  createdAt: string;\n  replies?: Comment[];\n}","size_bytes":831},"attached_assets/App_1757616904870.tsx":{"content":"import React, { useState } from 'react';\nimport { Header } from './components/Header';\nimport { KnowledgeMapSpaceship } from './components/KnowledgeMapSpaceship';\nimport { CosmicLandingPage } from './components/CosmicLandingPage';\nimport { ContentViewer } from './components/ContentViewer';\nimport { AuthModal } from './components/AuthModal';\n\nimport { mockDomains } from './data/mockData';\nimport { ContentPiece, Topic, Domain, User } from './types';\n\ntype AppView = 'landing' | 'universe' | 'content';\n\nexport default function App() {\n  const [currentUser, setCurrentUser] = useState<User | null>(null);\n  const [isAuthModalOpen, setIsAuthModalOpen] = useState(false);\n  const [currentView, setCurrentView] = useState<AppView>('landing');\n  const [selectedContent, setSelectedContent] = useState<{\n    content: ContentPiece;\n    topic: Topic;\n    domain: Domain;\n  } | null>(null);\n\n  const handleLogin = (user: User) => {\n    setCurrentUser(user);\n    setCurrentView('universe');\n  };\n\n  const handleContentSelect = (content: ContentPiece, topic: Topic, domain: Domain) => {\n    setSelectedContent({ content, topic, domain });\n    setCurrentView('content');\n  };\n\n  const handleBackToMap = () => {\n    setSelectedContent(null);\n    setCurrentView('universe');\n  };\n\n  const handleEnterUniverse = () => {\n    setCurrentView('universe');\n  };\n\n  const handleBackToLanding = () => {\n    setCurrentView('landing');\n    setSelectedContent(null);\n  };\n\n\n\n  const handleLoginRequired = () => {\n    setIsAuthModalOpen(true);\n  };\n\n  const renderContent = () => {\n    switch (currentView) {\n      case 'landing':\n        return (\n          <CosmicLandingPage\n            onLoginClick={() => setIsAuthModalOpen(true)}\n          />\n        );\n      case 'universe':\n        return (\n          <div className=\"min-h-screen bg-background\">\n            <Header \n              currentUser={currentUser}\n              onLoginClick={() => setIsAuthModalOpen(true)}\n              onBackToLanding={handleBackToLanding}\n              showBackButton={true}\n            />\n            <KnowledgeMapSpaceship\n              domains={mockDomains}\n              onContentSelect={handleContentSelect}\n              searchQuery=\"\"\n            />\n          </div>\n        );\n      case 'content':\n        if (!selectedContent) {\n          // Safety check: redirect to universe if no content selected\n          setCurrentView('universe');\n          return null;\n        }\n        return (\n          <div className=\"min-h-screen bg-background\">\n            <Header \n              currentUser={currentUser}\n              onLoginClick={() => setIsAuthModalOpen(true)}\n              onBackToLanding={handleBackToLanding}\n              showBackButton={true}\n            />\n            <main className=\"container mx-auto\">\n              <ContentViewer\n                content={selectedContent.content}\n                topic={selectedContent.topic}\n                domain={selectedContent.domain}\n                onBack={handleBackToMap}\n                currentUser={currentUser}\n                onLoginRequired={handleLoginRequired}\n              />\n            </main>\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <>\n      {renderContent()}\n      \n      <AuthModal\n        isOpen={isAuthModalOpen}\n        onClose={() => setIsAuthModalOpen(false)}\n        onLogin={handleLogin}\n      />\n    </>\n  );\n}","size_bytes":3415},"src/components/cosmic/CosmicLandingPage.tsx":{"content":"import React, {\n  useState,\n  useEffect,\n  useRef,\n  useMemo,\n} from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { motion } from \"framer-motion\";\nimport { ImageWithFallback } from \"./figma/ImageWithFallback\";\nimport { SphereCanvas } from \"./SphereCanvas\";\n// Removed unused Select imports\nimport * as THREE from \"three\";\n\n// Import assets\nconst cosmicBackground = \"/assets/cosmic/cosmic-background.png\";\nconst centralHUD = \"/assets/cosmic/central-hud.png\";\nconst urbanFabricIcon = \"/assets/cosmic/chapter1-icon.svg\";\nconst futureCitiesIcon = \"/assets/cosmic/chapter2-icon.svg\";\nconst buildingLifecycleIcon = \"/assets/cosmic/chapter3-icon.svg\";\nconst infrastructureIcon = \"/assets/cosmic/chapter4-icon.svg\";\nconst twinLabLogo = \"/assets/cosmic/twinlab-logo.png\";\n\nconst sphereColorPalette = [\n  { name: \"Dark Gray\", value: \"#404040\" },\n  { name: \"Deep Blue\", value: \"#0066CC\" },\n  { name: \"Purple\", value: \"#8B5CF6\" },\n  { name: \"Indigo\", value: \"#6366F1\" },\n  { name: \"Pink\", value: \"#EC4899\" },\n  { name: \"Red\", value: \"#EF4444\" },\n  { name: \"Emerald\", value: \"#10B981\" },\n  { name: \"Amber\", value: \"#F59E0B\" },\n];\n\ninterface CosmicLandingPageProps {\n  onLoginClick: () => void;\n}\n\nconst contentTypes = [\n  { name: \"Audio Podcast\", icon: \"🎧\", color: \"#FF6B6B\" },\n  { name: \"Video Presentation\", icon: \"🎥\", color: \"#4ECDC4\" },\n  { name: \"TWiki Read\", icon: \"📚\", color: \"#45B7D1\" },\n  { name: \"Study Guide\", icon: \"📝\", color: \"#96CEB4\" },\n];\n\nconst CUBE_FACE_Z_TRANSLATE = 192;\nconst DOMAIN_CIRCLE_WIDTH = 192;\nconst DOMAIN_SPACING_MULTIPLIER = 0.4;\nconst DOMAIN_RADIUS_BASE = 320; // Fixed radius for all circles - just outside HUD edge\nconst EPISODE_CUBE_RADIUS = 120;\nconst EPISODE_CUBE_ANGLES = [225, 315, 45, 135]; // Start top-left, go clockwise\nconst MOUSE_ROTATION_SENSITIVITY = 0.5;\nconst ROTATION_DAMPING_FACTOR = 0.95;\nconst ROTATION_VELOCITY_MULTIPLIER = 0.01;\nconst ROTATION_VELOCITY_THRESHOLD = 0.0001;\n\ninterface Episode {\n  id: string;\n  title: string;\n  description: string;\n}\n\ninterface Domain {\n  id: string;\n  title: string;\n  subtitle: string;\n  image: string;\n  angle: number;\n  backgroundColor: string;\n  episodes: Episode[];\n}\n\nexport function CosmicLandingPage({\n  onLoginClick,\n}: CosmicLandingPageProps) {\n  const [showDebugPanel, setShowDebugPanel] = useState(false);\n  const [selectedCube, setSelectedCube] = useState<{\n    chapterId: string;\n    episodeId: string;\n  } | null>(null);\n  const [cubeRotation, setCubeRotation] = useState(0);\n  const [sphereColor, setSphereColor] = useState(\"#8B5CF6\");\n  const [knowledgeDomains, setKnowledgeDomains] = useState<\n    Domain[]\n  >([]);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  const rotationRef = useRef(0);\n\n  useEffect(() => {\n    // Inline knowledge domains data - no external fetch needed\n    const knowledgeDomainsData = [\n      {\n        id: \"chapter-1\",\n        title: \"CHAPTER 1\",\n        subtitle: \"The Mechanics of Transformation\",\n        image: urbanFabricIcon,\n        angle: 225, // Bottom-left corner\n        backgroundColor:\n          \"linear-gradient(135deg, #8B5CF6 0%, #A855F7 50%, #9333EA 100%)\",\n        episodes: [\n          {\n            id: \"episode-1-1\",\n            title: \"Understanding Digital Twin Foundations\",\n            description: \"Core concepts and principles of digital twin technology\",\n          },\n          {\n            id: \"episode-1-2\",\n            title: \"Data Integration Strategies\",\n            description: \"How to effectively collect and organize data for digital twins\",\n          },\n          {\n            id: \"episode-1-3\",\n            title: \"Real-time Synchronization\",\n            description: \"Keeping your digital twin updated with physical reality\",\n          },\n          {\n            id: \"episode-1-4\",\n            title: \"Performance Optimization\",\n            description: \"Making your digital twin efficient and responsive\",\n          },\n        ],\n      },\n      {\n        id: \"chapter-2\",\n        title: \"CHAPTER 2\",\n        subtitle: \"The Architectural Blueprint in Practice\",\n        image: futureCitiesIcon,\n        angle: 315, // Bottom-right corner\n        backgroundColor:\n          \"linear-gradient(135deg, #06B6D4 0%, #0891B2 50%, #0E7490 100%)\",\n        episodes: [\n          {\n            id: \"episode-2-1\",\n            title: \"System Architecture Design\",\n            description: \"Building scalable digital twin architectures\",\n          },\n          {\n            id: \"episode-2-2\",\n            title: \"Integration Patterns\",\n            description: \"Common patterns for connecting systems and data sources\",\n          },\n          {\n            id: \"episode-2-3\",\n            title: \"Security and Compliance\",\n            description: \"Protecting your digital twin infrastructure\",\n          },\n          {\n            id: \"episode-2-4\",\n            title: \"Deployment Strategies\",\n            description: \"Moving from development to production environments\",\n          },\n        ],\n      },\n      {\n        id: \"chapter-3\",\n        title: \"CHAPTER 3\",\n        subtitle: \"The Management Operating System\",\n        image: buildingLifecycleIcon,\n        angle: 45, // Top-right corner\n        backgroundColor:\n          \"linear-gradient(135deg, #10B981 0%, #059669 50%, #047857 100%)\",\n        episodes: [\n          {\n            id: \"episode-3-1\",\n            title: \"Governance Frameworks\",\n            description: \"Establishing proper governance for digital twin projects\",\n          },\n          {\n            id: \"episode-3-2\",\n            title: \"Team Collaboration\",\n            description: \"Managing cross-functional teams in digital twin development\",\n          },\n          {\n            id: \"episode-3-3\",\n            title: \"Process Optimization\",\n            description: \"Streamlining workflows and improving efficiency\",\n          },\n          {\n            id: \"episode-3-4\",\n            title: \"Change Management\",\n            description: \"Handling updates and evolution in digital twin systems\",\n          },\n        ],\n      },\n      {\n        id: \"chapter-4\",\n        title: \"CHAPTER 4\",\n        subtitle: \"An Open-Source Toolkit for Your First 90 Days\",\n        image: infrastructureIcon,\n        angle: 135, // Top-left corner\n        backgroundColor:\n          \"linear-gradient(135deg, #F59E0B 0%, #D97706 50%, #B45309 100%)\",\n        episodes: [\n          {\n            id: \"episode-4-1\",\n            title: \"Quick Start Guide\",\n            description: \"Get your first digital twin up and running\",\n          },\n          {\n            id: \"episode-4-2\",\n            title: \"Essential Tools and Libraries\",\n            description: \"Open-source tools to accelerate development\",\n          },\n          {\n            id: \"episode-4-3\",\n            title: \"Best Practices Checklist\",\n            description: \"Proven practices for successful implementation\",\n          },\n          {\n            id: \"episode-4-4\",\n            title: \"Community Resources\",\n            description: \"Connecting with the digital twin community\",\n          },\n        ],\n      },\n    ];\n\n    setKnowledgeDomains(knowledgeDomainsData);\n  }, []);\n\n  const handleCubeMouseDown = (e: React.MouseEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    const startX = e.clientX;\n    let currentRotation = cubeRotation;\n\n    const handleMouseMove = (moveEvent: MouseEvent) => {\n      const deltaX = moveEvent.clientX - startX;\n      const rotationDelta = deltaX * MOUSE_ROTATION_SENSITIVITY;\n      setCubeRotation(currentRotation + rotationDelta);\n    };\n\n    const handleMouseUp = () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n  };\n\n  const domainElements = useMemo(\n    () =>\n      knowledgeDomains.map((domain, index) => {\n        const angle = (domain.angle * Math.PI) / 180;\n        const radius = DOMAIN_RADIUS_BASE; // Same distance for all circles\n        const x = Math.cos(angle) * radius;\n        const y = Math.sin(angle) * radius; // No Y multiplier - perfect circle positioning\n\n        return (\n          <motion.div\n            key={domain.id}\n            className=\"absolute group z-20\"\n            style={{\n              left: \"50%\",\n              top: \"50%\",\n              transform: `translate(calc(-50% + ${x}px), calc(-50% + ${y}px))`,\n            }}\n          >\n            <motion.div\n              className=\"w-48 h-48 relative rounded-full\"\n              style={{\n                border: \"6px solid white\",\n                boxShadow: \"0 8px 25px rgba(0, 0, 0, 0.3), inset 0 2px 0 rgba(255, 255, 255, 0.6), inset 0 -2px 0 rgba(0, 0, 0, 0.2)\",\n                backgroundColor: \"var(--sphere-base)\",\n              }}\n              whileHover={{ scale: 1.05 }}\n              transition={{\n                duration: 0.2,\n                ease: \"easeInOut\",\n                delay: index * 0.7,\n              }}\n            >\n              <div className=\"absolute inset-0 flex flex-col items-center justify-center text-center rounded-full\">\n                <h3 className=\"text-xl font-bold text-white/90 tracking-wide mb-2\">\n                  {domain.title}\n                </h3>\n                <p className=\"text-sm text-white/80 px-4 leading-tight\">\n                  {domain.subtitle}\n                </p>\n              </div>\n            </motion.div>\n\n            {domain.episodes.map((episode, episodeIndex) => {\n              const episodeAngle = (EPISODE_CUBE_ANGLES[episodeIndex] * Math.PI) / 180;\n              const cubeX = Math.cos(episodeAngle) * EPISODE_CUBE_RADIUS;\n              const cubeY = Math.sin(episodeAngle) * EPISODE_CUBE_RADIUS;\n\n              return (\n                <motion.div\n                  key={episode.id}\n                  className=\"absolute cursor-pointer z-30\"\n                  style={{\n                    left: `calc(50% + ${cubeX - 16}px)`,\n                    top: `calc(50% + ${cubeY + (episodeIndex === 2 || episodeIndex === 3 ? -16 : 0)}px)`,\n                    transform: \"translate(-50%, -50%)\",\n                    perspective: \"300px\",\n                    width: \"32px\",\n                    height: \"32px\",\n                  }}\n                  whileHover={{ scale: 1.2 }}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    setSelectedCube({\n                      chapterId: domain.id,\n                      episodeId: episode.id,\n                    });\n                  }}\n                  animate={{ y: [0, -5, 0] }}\n                  transition={{\n                    y: {\n                      duration: 3,\n                      repeat: Infinity,\n                      ease: \"easeInOut\",\n                      delay: episodeIndex * 0.5,\n                    },\n                  }}\n                >\n                  <div\n                    className=\"w-8 h-8 relative\"\n                    style={{\n                      transformStyle: \"preserve-3d\",\n                      transform: \"rotateX(-15deg) rotateY(15deg)\",\n                    }}\n                  >\n                    {/* Cube faces */}\n                    {[\n                      { name: 'front', transform: 'translateZ(16px)' },\n                      { name: 'back', transform: 'translateZ(-16px) rotateY(180deg)' },\n                      { name: 'right', transform: 'rotateY(90deg) translateZ(16px)' },\n                      { name: 'left', transform: 'rotateY(-90deg) translateZ(16px)' },\n                      { name: 'top', transform: 'rotateX(90deg) translateZ(16px)' },\n                      { name: 'bottom', transform: 'rotateX(-90deg) translateZ(16px)' },\n                    ].map((face, faceIndex) => (\n                      <div\n                        key={face.name}\n                        className=\"absolute w-8 h-8 flex items-center justify-center text-xs font-bold text-white border border-white/30\"\n                        style={{\n                          backgroundColor: \"var(--sphere-base)\",\n                          transform: face.transform,\n                          boxShadow: faceIndex === 0 \n                            ? \"0 2px 8px rgba(0, 0, 0, 0.35)\"\n                            : \"0 1px 4px rgba(0, 0, 0, 0.2)\",\n                        }}\n                      >\n                        {faceIndex === 0 ? episodeIndex + 1 : ''}\n                      </div>\n                    ))}\n                  </div>\n                </motion.div>\n              );\n            })}\n          </motion.div>\n        );\n      }),\n    [knowledgeDomains],\n  );\n\n  return (\n    <div className=\"min-h-screen relative overflow-hidden\" style={{\"--sphere-base\": sphereColor}}>\n      {/* Background */}\n      <div className=\"fixed inset-0 z-0\">\n        <img\n          src={cosmicBackground}\n          alt=\"Cosmic Background\"\n          className=\"w-full h-full object-cover object-center\"\n          style={{\n            imageRendering: \"crisp-edges\",\n            transform: \"scale(1.1)\",\n            transformOrigin: \"center center\",\n          }}\n        />\n        <div className=\"absolute inset-0 bg-black/30\" />\n      </div>\n\n      {/* CONSTELLATION AREA - Full space between header and footer */}\n      <div className=\"fixed left-0 right-0 z-10\" style={{ top: '80px', bottom: '80px', overflow: 'hidden' }}>\n        <div className=\"relative w-full h-full flex items-center justify-center\">\n          {/* Rotating HUD - Centered in middle frame only */}\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <motion.div\n              className=\"relative z-12\"\n              animate={{ rotate: [0, 360] }}\n              transition={{\n                rotate: {\n                  duration: 60,\n                  repeat: Infinity,\n                  ease: \"linear\",\n                },\n              }}\n            >\n              <div className=\"relative\">\n                <ImageWithFallback\n                  src={centralHUD}\n                  alt=\"Central HUD Interface\"\n                  className=\"object-contain border-none outline-none w-auto h-auto\"\n                  style={{\n                    imageRendering: \"crisp-edges\",\n                    transform: \"scale(0.73)\",\n                    transformOrigin: \"center center\",\n                  }}\n                />\n              </div>\n            </motion.div>\n          </div>\n\n          {/* Stationary Domain Elements - Centered in middle frame only */}\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"relative\">\n              {domainElements}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Sphere Canvas */}\n      {isMounted &&\n        createPortal(\n          <SphereCanvas color={sphereColor} size={35} />,\n          document.body,\n        )}\n\n      {/* BOTTOM ROW - Fixed footer */}\n      <div className=\"fixed bottom-8 left-0 right-0 z-100\">\n        <div className=\"flex items-center justify-center\">\n          <h2 className=\"text-2xl font-inter text-white/90 text-center\">\n            Shape the Future - Learn. Share. Grow.\n          </h2>\n        </div>\n      </div>\n\n      {/* Selected Cube Modal */}\n      {selectedCube && (\n        <div className=\"fixed inset-0 z-60 flex items-center justify-center\">\n          <div\n            className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"\n            onClick={() => setSelectedCube(null)}\n          />\n\n          <motion.div\n            className=\"relative w-96 h-96\"\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            exit={{ scale: 0 }}\n            transition={{\n              type: \"spring\",\n              stiffness: 300,\n              damping: 30,\n            }}\n            style={{ perspective: \"1000px\" }}\n          >\n            <div\n              className=\"w-full h-full relative cursor-grab active:cursor-grabbing\"\n              style={{\n                transformStyle: \"preserve-3d\",\n                transform: `rotateY(${cubeRotation}deg)`,\n              }}\n              onMouseDown={handleCubeMouseDown}\n            >\n              {contentTypes.map((contentType, faceIndex) => (\n                <div\n                  key={faceIndex}\n                  className=\"absolute w-full h-full flex flex-col items-center justify-center cursor-pointer border-4 border-white/50 rounded-lg\"\n                  style={{\n                    backgroundColor: contentType.color,\n                    transform: `rotateY(${faceIndex * 90}deg) translateZ(${CUBE_FACE_Z_TRANSLATE}px)`,\n                    backfaceVisibility: \"hidden\",\n                  }}\n                  onClick={() => {\n                    if (selectedCube) {\n                      const selectedEpisode = knowledgeDomains\n                        .find(\n                          (d) => d.id === selectedCube.chapterId,\n                        )\n                        ?.episodes?.find(\n                          (ep) => ep.id === selectedCube.episodeId,\n                        );\n                      if (selectedEpisode) {\n                        // TODO: Implement a proper modal/UI to display content\n                        console.log(\n                          `Opening ${contentType.name} for: \"${selectedEpisode.title}\"`,\n                        );\n                      }\n                    }\n                  }}\n                >\n                  <div className=\"text-6xl mb-4\">\n                    {contentType.icon}\n                  </div>\n                  <h3 className=\"text-xl font-bold text-white text-center px-4\">\n                    {contentType.name}\n                  </h3>\n                </div>\n              ))}\n            </div>\n          </motion.div>\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":17984},"src/components/cosmic/SphereCanvas.tsx":{"content":"import React, { useState, useEffect, useRef } from 'react';\nimport { Canvas, useFrame, useThree } from '@react-three/fiber';\nimport { Sphere, useTexture } from '@react-three/drei';\nimport * as THREE from 'three';\n\n// Placeholder for bump texture - you can replace with actual texture\nconst bumpTextureImage = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxwYXR0ZXJuIGlkPSJub2lzZSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPGNpcmNsZSBjeD0iNSIgY3k9IjUiIHI9IjIiIGZpbGw9IiNjY2MiLz4KICAgIDwvcGF0dGVybj4KICA8L2RlZnM+CiAgPHJlY3Qgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIGZpbGw9InVybCgjbm9pc2UpIi8+Cjwvc3ZnPgo=';\n\nconst ROTATION_DAMPING_FACTOR = 0.95;\nconst ROTATION_VELOCITY_MULTIPLIER = 0.01;\nconst ROTATION_VELOCITY_THRESHOLD = 0.0001;\n\nconst CentralBumpSphere = React.memo(function CentralBumpSphere({ \n  color, \n  size \n}: { \n  color: string; \n  size: number; \n}) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const [isDragging, setIsDragging] = React.useState(false);\n  const rotationVelocity = useRef({ x: 0, y: 0 });\n  const lastMousePosition = useRef({ x: 0, y: 0 });\n  \n  const bumpTexture = useTexture(bumpTextureImage);\n\n  const { gl } = useThree();\n\n  const handlePointerDown = (event: any) => {\n    setIsDragging(true);\n    lastMousePosition.current = { x: event.clientX, y: event.clientY };\n    gl.domElement.style.cursor = 'grabbing';\n    // Stop propagation to prevent other elements from receiving the event\n    event.stopPropagation();\n  };\n\n  const handlePointerUp = () => {\n    setIsDragging(false);\n    gl.domElement.style.cursor = 'auto';\n  };\n\n  const handlePointerMove = (event: any) => {\n    if (!isDragging) return;\n    const deltaX = event.clientX - lastMousePosition.current.x;\n    const deltaY = event.clientY - lastMousePosition.current.y;\n    \n    rotationVelocity.current.x = deltaY * ROTATION_VELOCITY_MULTIPLIER;\n    rotationVelocity.current.y = deltaX * ROTATION_VELOCITY_MULTIPLIER;\n    \n    lastMousePosition.current = { x: event.clientX, y: event.clientY };\n    event.stopPropagation();\n  };\n\n  useEffect(() => {\n    // We add the move and up listeners to the window so that the user can\n    // drag the mouse outside the sphere and it still works.\n    if (isDragging) {\n      window.addEventListener('pointermove', handlePointerMove);\n      window.addEventListener('pointerup', handlePointerUp);\n    }\n    \n    return () => {\n      window.removeEventListener('pointermove', handlePointerMove);\n      window.removeEventListener('pointerup', handlePointerUp);\n    };\n  }, [isDragging, handlePointerMove, handlePointerUp]);\n\n  useFrame(() => {\n    if (!meshRef.current) return;\n    \n    // Apply current velocity to rotation\n    meshRef.current.rotation.x += rotationVelocity.current.x;\n    meshRef.current.rotation.y += rotationVelocity.current.y;\n    \n    // Apply damping when not dragging to create momentum effect\n    if (!isDragging) {\n      rotationVelocity.current.x *= ROTATION_DAMPING_FACTOR;\n      rotationVelocity.current.y *= ROTATION_DAMPING_FACTOR;\n      \n      // Stop the frame loop when velocity becomes negligible\n      if (Math.abs(rotationVelocity.current.x) < ROTATION_VELOCITY_THRESHOLD && \n          Math.abs(rotationVelocity.current.y) < ROTATION_VELOCITY_THRESHOLD) {\n        rotationVelocity.current.x = 0;\n        rotationVelocity.current.y = 0;\n      }\n    }\n  });\n\n  return (\n    <Sphere \n      ref={meshRef} \n      args={[1.45, 32, 32]} \n      position={[0, 0, 0]}\n      onPointerDown={handlePointerDown}\n      onPointerMove={handlePointerMove}\n      onPointerUp={handlePointerUp}\n      onPointerOut={handlePointerUp} // Also stop dragging if mouse leaves the sphere\n    >\n      <meshPhysicalMaterial \n        color={color}\n        transparent={false}\n        opacity={1.0}\n        depthWrite={true}\n        depthTest={true}\n        side={THREE.DoubleSide}\n        metalness={0.25}\n        roughness={0.5}\n        emissive={new THREE.Color(0x000000)}\n        emissiveIntensity={0.0}\n        bumpMap={bumpTexture}\n        bumpScale={1.0}\n        polygonOffset={true}\n        polygonOffsetFactor={-4}\n        polygonOffsetUnits={-4}\n      />\n    </Sphere>\n  );\n});\n\nfunction MaterialTestLighting() {\n  return (\n    <>\n      <ambientLight intensity={0.1} />\n      <directionalLight\n        position={[10, 6, 8]}\n        intensity={4}\n        castShadow\n      />\n      <directionalLight\n        position={[-5, -3, 6]}\n        intensity={2}\n        color=\"#FFFFFF\"\n      />\n    </>\n  );\n}\n\ninterface SphereCanvasProps {\n    color: string;\n    size: number;\n}\n\nexport function SphereCanvas({ color, size }: SphereCanvasProps) {\n    return (\n        <div \n            style={{\n                position: 'fixed',\n                top: 'calc(80px + (100vh - 80px - 80px) / 2)', // Centered within constellation area\n                left: '50%',\n                transform: 'translate(-50%, -50%)',\n                width: '140px',\n                height: '140px',\n                zIndex: 25, // Between HUD (z-20) and header/footer (z-50)\n            }}\n        >\n            <Canvas\n              camera={{ position: [0, 0, 3.5], fov: 60 }}\n              gl={{\n                antialias: true,\n                alpha: true,\n                powerPreference: \"high-performance\",\n                preserveDrawingBuffer: false,\n                logarithmicDepthBuffer: false\n              }}\n              dpr={1}\n              frameloop=\"always\"\n            >\n              <MaterialTestLighting />\n              <React.Suspense fallback={null}>\n                <CentralBumpSphere color={color} size={size} />\n              </React.Suspense>\n            </Canvas>\n        </div>\n    );\n}","size_bytes":5750},"src/components/cosmic/figma/ImageWithFallback.tsx":{"content":"import React, { useState } from 'react'\n\nconst ERROR_IMG_SRC =\n  'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg=='\n\nexport function ImageWithFallback(props: React.ImgHTMLAttributes<HTMLImageElement>) {\n  const [didError, setDidError] = useState(false)\n\n  const handleError = () => {\n    setDidError(true)\n  }\n\n  const { src, alt, style, className, ...rest } = props\n\n  return didError ? (\n    <div\n      className={`inline-block bg-gray-100 text-center align-middle ${className ?? ''}`}\n      style={style}\n    >\n      <div className=\"flex items-center justify-center w-full h-full\">\n        <img src={ERROR_IMG_SRC} alt=\"Error loading image\" {...rest} data-original-url={src} />\n      </div>\n    </div>\n  ) : (\n    <img src={src} alt={alt} className={className} style={style} {...rest} onError={handleError} />\n  )\n}\n","size_bytes":1153},"src/components/cosmic/ui/avatar.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar@1.1.3\";\n\nimport { cn } from \"./utils\";\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        \"relative flex size-10 shrink-0 overflow-hidden rounded-full\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn(\"aspect-square size-full\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        \"bg-muted flex size-full items-center justify-center rounded-full\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Avatar, AvatarImage, AvatarFallback };\n","size_bytes":1110},"src/components/cosmic/ui/badge.tsx":{"content":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\";\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  );\n}\n\nexport { Badge, badgeVariants };\n","size_bytes":1648},"src/components/cosmic/ui/button.tsx":{"content":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot@1.1.2\";\nimport { cva, type VariantProps } from \"class-variance-authority@0.7.1\";\n\nimport { cn } from \"./utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9 rounded-md\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n  }) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  );\n}\n\nexport { Button, buttonVariants };\n","size_bytes":2118},"src/components/cosmic/ui/card.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"./utils\";\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <h4\n      data-slot=\"card-title\"\n      className={cn(\"leading-none\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <p\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6 [&:last-child]:pb-6\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 pb-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n};\n","size_bytes":1988},"src/components/cosmic/ui/dialog.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog@1.1.6\";\n// import { XIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />;\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />;\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />;\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />;\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DialogContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content>) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <DialogPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none text-lg\">\n          ✕\n          <span className=\"sr-only\">Close</span>\n        </DialogPrimitive.Close>\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  );\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n};\n","size_bytes":3765},"src/components/cosmic/ui/input.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"./utils\";\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Input };\n","size_bytes":963},"src/components/cosmic/ui/label.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label@2.1.2\";\n\nimport { cn } from \"./utils\";\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Label };\n","size_bytes":620},"src/components/cosmic/ui/radio-group.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group@1.2.3\";\n// import { CircleIcon } from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction RadioGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof RadioGroupPrimitive.Root>) {\n  return (\n    <RadioGroupPrimitive.Root\n      data-slot=\"radio-group\"\n      className={cn(\"grid gap-3\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction RadioGroupItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof RadioGroupPrimitive.Item>) {\n  return (\n    <RadioGroupPrimitive.Item\n      data-slot=\"radio-group-item\"\n      className={cn(\n        \"border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator\n        data-slot=\"radio-group-indicator\"\n        className=\"relative flex items-center justify-center\"\n      >\n        <div className=\"bg-primary absolute top-1/2 left-1/2 w-2 h-2 rounded-full -translate-x-1/2 -translate-y-1/2\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  );\n}\n\nexport { RadioGroup, RadioGroupItem };\n","size_bytes":1493},"src/components/cosmic/ui/select.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select@2.1.6\";\nimport {\n  CheckIcon,\n  ChevronDownIcon,\n  ChevronUpIcon,\n} from \"lucide-react@0.487.0\";\n\nimport { cn } from \"./utils\";\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />;\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />;\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />;\n}\n\nfunction SelectTrigger({\n  className,\n  size = \"default\",\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: \"sm\" | \"default\";\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  );\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = \"popper\",\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\n          position === \"popper\" &&\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            \"p-1\",\n            position === \"popper\" &&\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\",\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  );\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  );\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  );\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  );\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n};\n","size_bytes":6289},"src/components/cosmic/ui/separator.tsx":{"content":"\"use client\";\n\nimport * as React from \"react\";\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator@1.1.2\";\n\nimport { cn } from \"./utils\";\n\nfunction Separator({\n  className,\n  orientation = \"horizontal\",\n  decorative = true,\n  ...props\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\n  return (\n    <SeparatorPrimitive.Root\n      data-slot=\"separator-root\"\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Separator };\n","size_bytes":713},"src/components/cosmic/ui/textarea.tsx":{"content":"import * as React from \"react\";\n\nimport { cn } from \"./utils\";\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Textarea };\n","size_bytes":767},"src/data/cosmic/mockData.ts":{"content":"import { Domain } from '../types';\n\nexport const mockDomains: Domain[] = [\n  {\n    id: 'bim-modeling',\n    title: 'BIM & 3D Modeling',\n    description: 'Building Information Modeling and 3D digital representations',\n    color: 'bg-blue-500',\n    icon: '🏗️',\n    topics: [\n      {\n        id: 'parametric-design',\n        title: 'Parametric Design',\n        description: 'Algorithm-driven design methodologies and tools',\n        content: [\n          {\n            id: 'param-wiki',\n            title: 'Introduction to Parametric Design',\n            type: 'wiki',\n            description: 'Comprehensive guide to parametric design principles',\n            content: 'Parametric design is a process where the design is generated by algorithms...',\n            readTime: '12 min read',\n            author: 'Dr. Sarah Chen',\n            publishedAt: '2024-01-15',\n            tags: ['parametric', 'algorithms', 'design']\n          },\n          {\n            id: 'param-podcast',\n            title: 'The Future of Parametric Architecture',\n            type: 'podcast',\n            description: 'Expert discussion on emerging trends in parametric design',\n            content: 'A deep dive conversation with leading architects...',\n            duration: '45 min',\n            author: 'Architecture Today Podcast',\n            publishedAt: '2024-01-20',\n            tags: ['future', 'trends', 'discussion']\n          },\n          {\n            id: 'param-video',\n            title: 'Grasshopper Tutorial: Parametric Facades',\n            type: 'video',\n            description: 'Step-by-step tutorial for creating parametric building facades',\n            content: 'Learn how to create dynamic building facades using Grasshopper...',\n            duration: '28 min',\n            author: 'ArchTech Academy',\n            publishedAt: '2024-01-25',\n            tags: ['grasshopper', 'tutorial', 'facades']\n          },\n          {\n            id: 'param-guide',\n            title: 'Parametric Design Study Guide',\n            type: 'guide',\n            description: 'Essential concepts and practice exercises',\n            content: 'Key learning objectives and practice exercises for mastering parametric design...',\n            readTime: '8 min read',\n            author: 'Prof. Michael Torres',\n            publishedAt: '2024-01-30',\n            tags: ['study', 'exercises', 'learning']\n          }\n        ]\n      },\n      {\n        id: 'bim-workflows',\n        title: 'BIM Workflows',\n        description: 'Collaborative workflows and best practices in BIM',\n        content: [\n          {\n            id: 'workflow-wiki',\n            title: 'BIM Collaboration Protocols',\n            type: 'wiki',\n            description: 'Standard protocols for multi-disciplinary BIM collaboration',\n            content: 'Effective BIM collaboration requires clear protocols and standards...',\n            readTime: '15 min read',\n            author: 'Dr. James Rodriguez',\n            publishedAt: '2024-02-01',\n            tags: ['collaboration', 'protocols', 'standards']\n          },\n          {\n            id: 'workflow-podcast',\n            title: 'BIM Implementation Challenges',\n            type: 'podcast',\n            description: 'Real-world experiences in BIM implementation',\n            content: 'Industry leaders share their experiences with BIM adoption...',\n            duration: '52 min',\n            author: 'BIM Talks',\n            publishedAt: '2024-02-05',\n            tags: ['implementation', 'challenges', 'experience']\n          },\n          {\n            id: 'workflow-video',\n            title: 'Revit to Digital Twin Workflow',\n            type: 'video',\n            description: 'Complete workflow from BIM to operational digital twin',\n            content: 'End-to-end process for creating operational digital twins from BIM models...',\n            duration: '35 min',\n            author: 'Digital Twin Solutions',\n            publishedAt: '2024-02-10',\n            tags: ['revit', 'workflow', 'operations']\n          },\n          {\n            id: 'workflow-guide',\n            title: 'BIM Quality Control Checklist',\n            type: 'guide',\n            description: 'Essential quality control measures for BIM projects',\n            content: 'Comprehensive checklist for ensuring BIM model quality and accuracy...',\n            readTime: '6 min read',\n            author: 'Quality Assurance Institute',\n            publishedAt: '2024-02-15',\n            tags: ['quality', 'checklist', 'standards']\n          }\n        ]\n      },\n      {\n        id: 'reality-capture',\n        title: 'Reality Capture',\n        description: 'Scanning and photogrammetry for existing structures',\n        content: [\n          {\n            id: 'capture-wiki',\n            title: 'LiDAR vs Photogrammetry Comparison',\n            type: 'wiki',\n            description: 'Technical comparison of reality capture methods',\n            content: 'Understanding the differences between LiDAR and photogrammetry techniques...',\n            readTime: '10 min read',\n            author: 'Dr. Lisa Wang',\n            publishedAt: '2024-02-20',\n            tags: ['lidar', 'photogrammetry', 'comparison']\n          },\n          {\n            id: 'capture-podcast',\n            title: 'Future of Building Scanning',\n            type: 'podcast',\n            description: 'Emerging technologies in reality capture',\n            content: 'Exploring new technologies revolutionizing building documentation...',\n            duration: '38 min',\n            author: 'Tech Architecture Podcast',\n            publishedAt: '2024-02-25',\n            tags: ['scanning', 'technology', 'future']\n          },\n          {\n            id: 'capture-video',\n            title: 'Drone Photogrammetry Techniques',\n            type: 'video',\n            description: 'Professional drone scanning workflows',\n            content: 'Learn professional techniques for aerial photogrammetry surveys...',\n            duration: '42 min',\n            author: 'Aerial Survey Pro',\n            publishedAt: '2024-03-01',\n            tags: ['drone', 'aerial', 'techniques']\n          },\n          {\n            id: 'capture-guide',\n            title: 'Reality Capture Planning Guide',\n            type: 'guide',\n            description: 'Pre-project planning for successful reality capture',\n            content: 'Essential planning steps for successful reality capture projects...',\n            readTime: '9 min read',\n            author: 'Survey Planning Institute',\n            publishedAt: '2024-03-05',\n            tags: ['planning', 'preparation', 'workflow']\n          }\n        ]\n      },\n      {\n        id: 'model-optimization',\n        title: 'Model Optimization',\n        description: 'Techniques for efficient 3D model processing',\n        content: [\n          {\n            id: 'optimization-wiki',\n            title: 'Mesh Optimization Fundamentals',\n            type: 'wiki',\n            description: 'Core principles of 3D mesh optimization',\n            content: 'Understanding mesh topology and optimization techniques for better performance...',\n            readTime: '14 min read',\n            author: 'Dr. Alex Kumar',\n            publishedAt: '2024-03-10',\n            tags: ['mesh', 'optimization', 'performance']\n          },\n          {\n            id: 'optimization-podcast',\n            title: 'Performance in Large-Scale Models',\n            type: 'podcast',\n            description: 'Managing performance in complex architectural models',\n            content: 'Strategies for maintaining performance in large-scale digital twin models...',\n            duration: '47 min',\n            author: 'Performance Matters',\n            publishedAt: '2024-03-15',\n            tags: ['performance', 'large-scale', 'optimization']\n          },\n          {\n            id: 'optimization-video',\n            title: 'LOD Strategies for Digital Twins',\n            type: 'video',\n            description: 'Level of Detail implementation in digital twin models',\n            content: 'Implementing effective Level of Detail strategies for optimal performance...',\n            duration: '33 min',\n            author: 'Model Optimization Lab',\n            publishedAt: '2024-03-20',\n            tags: ['lod', 'detail', 'strategy']\n          },\n          {\n            id: 'optimization-guide',\n            title: 'Model Optimization Checklist',\n            type: 'guide',\n            description: 'Step-by-step optimization workflow',\n            content: 'Systematic approach to optimizing 3D models for digital twin applications...',\n            readTime: '7 min read',\n            author: 'Optimization Guild',\n            publishedAt: '2024-03-25',\n            tags: ['checklist', 'workflow', 'systematic']\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: 'iot-sensors',\n    title: 'IoT & Sensors',\n    description: 'Internet of Things integration and sensor networks',\n    color: 'bg-green-500',\n    icon: '📡',\n    topics: [\n      {\n        id: 'sensor-networks',\n        title: 'Sensor Networks',\n        description: 'Design and deployment of building sensor networks',\n        content: [\n          {\n            id: 'network-wiki',\n            title: 'Building Sensor Network Architecture',\n            type: 'wiki',\n            description: 'Comprehensive guide to sensor network design',\n            content: 'Designing effective sensor networks for building monitoring and control...',\n            readTime: '16 min read',\n            author: 'Dr. Emily Foster',\n            publishedAt: '2024-01-10',\n            tags: ['sensors', 'networks', 'architecture']\n          },\n          {\n            id: 'network-podcast',\n            title: 'Smart Building Sensor Strategies',\n            type: 'podcast',\n            description: 'Expert insights on sensor deployment strategies',\n            content: 'Leading experts discuss optimal sensor placement and configuration...',\n            duration: '41 min',\n            author: 'Smart Building Today',\n            publishedAt: '2024-01-15',\n            tags: ['smart', 'deployment', 'strategy']\n          },\n          {\n            id: 'network-video',\n            title: 'Wireless Sensor Installation Guide',\n            type: 'video',\n            description: 'Practical guide to wireless sensor installation',\n            content: 'Step-by-step installation and configuration of wireless building sensors...',\n            duration: '29 min',\n            author: 'IoT Install Pro',\n            publishedAt: '2024-01-20',\n            tags: ['wireless', 'installation', 'configuration']\n          },\n          {\n            id: 'network-guide',\n            title: 'Sensor Network Troubleshooting',\n            type: 'guide',\n            description: 'Common issues and solutions for sensor networks',\n            content: 'Troubleshooting guide for common sensor network problems and solutions...',\n            readTime: '11 min read',\n            author: 'Network Support Team',\n            publishedAt: '2024-01-25',\n            tags: ['troubleshooting', 'problems', 'solutions']\n          }\n        ]\n      },\n      {\n        id: 'data-acquisition',\n        title: 'Data Acquisition',\n        description: 'Methods for collecting and processing sensor data',\n        content: [\n          {\n            id: 'acquisition-wiki',\n            title: 'Real-time Data Collection Systems',\n            type: 'wiki',\n            description: 'Architecture for real-time building data collection',\n            content: 'Designing systems for continuous real-time data collection from building sensors...',\n            readTime: '13 min read',\n            author: 'Data Systems Lab',\n            publishedAt: '2024-02-01',\n            tags: ['real-time', 'collection', 'systems']\n          },\n          {\n            id: 'acquisition-podcast',\n            title: 'Edge Computing in Buildings',\n            type: 'podcast',\n            description: 'Edge computing applications for building data',\n            content: 'Exploring edge computing solutions for building data processing...',\n            duration: '36 min',\n            author: 'Edge Computing Weekly',\n            publishedAt: '2024-02-05',\n            tags: ['edge', 'computing', 'processing']\n          },\n          {\n            id: 'acquisition-video',\n            title: 'MQTT Protocol for Building Data',\n            type: 'video',\n            description: 'Implementing MQTT for building sensor communication',\n            content: 'Learn how to implement MQTT protocol for efficient sensor data transmission...',\n            duration: '31 min',\n            author: 'Protocol Academy',\n            publishedAt: '2024-02-10',\n            tags: ['mqtt', 'protocol', 'communication']\n          },\n          {\n            id: 'acquisition-guide',\n            title: 'Data Quality Assurance Framework',\n            type: 'guide',\n            description: 'Ensuring quality in sensor data collection',\n            content: 'Framework for maintaining high quality in building sensor data collection...',\n            readTime: '8 min read',\n            author: 'Quality Data Institute',\n            publishedAt: '2024-02-15',\n            tags: ['quality', 'assurance', 'framework']\n          }\n        ]\n      },\n      {\n        id: 'predictive-maintenance',\n        title: 'Predictive Maintenance',\n        description: 'AI-driven maintenance and system optimization',\n        content: [\n          {\n            id: 'maintenance-wiki',\n            title: 'Machine Learning for Building Systems',\n            type: 'wiki',\n            description: 'ML applications in building system maintenance',\n            content: 'Applying machine learning techniques to predict building system failures...',\n            readTime: '18 min read',\n            author: 'Dr. Robert Kim',\n            publishedAt: '2024-02-20',\n            tags: ['machine-learning', 'prediction', 'maintenance']\n          },\n          {\n            id: 'maintenance-podcast',\n            title: 'AI in Facility Management',\n            type: 'podcast',\n            description: 'Artificial intelligence transforming facility operations',\n            content: 'How AI is revolutionizing facility management and building operations...',\n            duration: '44 min',\n            author: 'AI Facilities Podcast',\n            publishedAt: '2024-02-25',\n            tags: ['ai', 'facilities', 'operations']\n          },\n          {\n            id: 'maintenance-video',\n            title: 'Building Anomaly Detection Systems',\n            type: 'video',\n            description: 'Implementing anomaly detection for building systems',\n            content: 'Build and deploy anomaly detection systems for building equipment monitoring...',\n            duration: '39 min',\n            author: 'Anomaly Detection Lab',\n            publishedAt: '2024-03-01',\n            tags: ['anomaly', 'detection', 'monitoring']\n          },\n          {\n            id: 'maintenance-guide',\n            title: 'Predictive Maintenance Implementation',\n            type: 'guide',\n            description: 'Step-by-step guide to implementing predictive maintenance',\n            content: 'Complete implementation guide for predictive maintenance programs...',\n            readTime: '12 min read',\n            author: 'Maintenance Excellence',\n            publishedAt: '2024-03-05',\n            tags: ['implementation', 'program', 'excellence']\n          }\n        ]\n      },\n      {\n        id: 'energy-monitoring',\n        title: 'Energy Monitoring',\n        description: 'Smart energy management and optimization',\n        content: [\n          {\n            id: 'energy-wiki',\n            title: 'Smart Grid Integration for Buildings',\n            type: 'wiki',\n            description: 'Connecting buildings to smart grid infrastructure',\n            content: 'Understanding smart grid integration and its benefits for building energy management...',\n            readTime: '15 min read',\n            author: 'Smart Grid Institute',\n            publishedAt: '2024-03-10',\n            tags: ['smart-grid', 'integration', 'energy']\n          },\n          {\n            id: 'energy-podcast',\n            title: 'Net Zero Building Technologies',\n            type: 'podcast',\n            description: 'Technologies enabling net zero energy buildings',\n            content: 'Exploring technologies and strategies for achieving net zero energy buildings...',\n            duration: '48 min',\n            author: 'Net Zero Today',\n            publishedAt: '2024-03-15',\n            tags: ['net-zero', 'technologies', 'sustainability']\n          },\n          {\n            id: 'energy-video',\n            title: 'Energy Dashboard Development',\n            type: 'video',\n            description: 'Creating real-time energy monitoring dashboards',\n            content: 'Learn to create comprehensive energy monitoring dashboards for buildings...',\n            duration: '34 min',\n            author: 'Dashboard Developer',\n            publishedAt: '2024-03-20',\n            tags: ['dashboard', 'monitoring', 'visualization']\n          },\n          {\n            id: 'energy-guide',\n            title: 'Energy Optimization Strategies',\n            type: 'guide',\n            description: 'Proven strategies for building energy optimization',\n            content: 'Comprehensive guide to optimizing building energy consumption and efficiency...',\n            readTime: '10 min read',\n            author: 'Energy Efficiency Council',\n            publishedAt: '2024-03-25',\n            tags: ['optimization', 'efficiency', 'strategies']\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: 'data-analytics',\n    title: 'Data Analytics',\n    description: 'Advanced analytics and machine learning for building data',\n    color: 'bg-purple-500',\n    icon: '📊',\n    topics: [\n      {\n        id: 'time-series',\n        title: 'Time Series Analysis',\n        description: 'Analyzing temporal patterns in building data',\n        content: [\n          {\n            id: 'timeseries-wiki',\n            title: 'Time Series Fundamentals for Buildings',\n            type: 'wiki',\n            description: 'Core concepts of time series analysis in building contexts',\n            content: 'Understanding time series analysis techniques for building data interpretation...',\n            readTime: '17 min read',\n            author: 'Dr. Maria Santos',\n            publishedAt: '2024-01-12',\n            tags: ['time-series', 'analysis', 'fundamentals']\n          },\n          {\n            id: 'timeseries-podcast',\n            title: 'Seasonal Patterns in Building Data',\n            type: 'podcast',\n            description: 'Understanding seasonal variations in building performance',\n            content: 'Analyzing seasonal patterns and their impact on building operations...',\n            duration: '42 min',\n            author: 'Building Analytics Weekly',\n            publishedAt: '2024-01-17',\n            tags: ['seasonal', 'patterns', 'performance']\n          },\n          {\n            id: 'timeseries-video',\n            title: 'Python for Building Data Analysis',\n            type: 'video',\n            description: 'Using Python libraries for building data time series analysis',\n            content: 'Practical Python techniques for analyzing building sensor time series data...',\n            duration: '46 min',\n            author: 'Python Analytics Lab',\n            publishedAt: '2024-01-22',\n            tags: ['python', 'libraries', 'practical']\n          },\n          {\n            id: 'timeseries-guide',\n            title: 'Time Series Visualization Best Practices',\n            type: 'guide',\n            description: 'Effective visualization techniques for temporal building data',\n            content: 'Best practices for visualizing time series data from building systems...',\n            readTime: '9 min read',\n            author: 'Visualization Experts',\n            publishedAt: '2024-01-27',\n            tags: ['visualization', 'best-practices', 'temporal']\n          }\n        ]\n      },\n      {\n        id: 'pattern-recognition',\n        title: 'Pattern Recognition',\n        description: 'Identifying patterns and anomalies in building behavior',\n        content: [\n          {\n            id: 'pattern-wiki',\n            title: 'Occupancy Pattern Detection',\n            type: 'wiki',\n            description: 'Methods for detecting and analyzing occupancy patterns',\n            content: 'Advanced techniques for detecting occupancy patterns in smart buildings...',\n            readTime: '14 min read',\n            author: 'Occupancy Analytics Team',\n            publishedAt: '2024-02-02',\n            tags: ['occupancy', 'detection', 'patterns']\n          },\n          {\n            id: 'pattern-podcast',\n            title: 'Behavioral Analytics in Buildings',\n            type: 'podcast',\n            description: 'Understanding human behavior through building data',\n            content: 'How building data reveals insights about human behavior and comfort...',\n            duration: '39 min',\n            author: 'Behavioral Building Science',\n            publishedAt: '2024-02-07',\n            tags: ['behavioral', 'analytics', 'insights']\n          },\n          {\n            id: 'pattern-video',\n            title: 'Clustering Algorithms for Building Data',\n            type: 'video',\n            description: 'Applying clustering techniques to building datasets',\n            content: 'Learn to apply various clustering algorithms to identify building usage patterns...',\n            duration: '37 min',\n            author: 'Machine Learning for Buildings',\n            publishedAt: '2024-02-12',\n            tags: ['clustering', 'algorithms', 'usage']\n          },\n          {\n            id: 'pattern-guide',\n            title: 'Anomaly Detection Framework',\n            type: 'guide',\n            description: 'Building robust anomaly detection systems',\n            content: 'Framework for implementing effective anomaly detection in building systems...',\n            readTime: '11 min read',\n            author: 'Anomaly Detection Institute',\n            publishedAt: '2024-02-17',\n            tags: ['framework', 'detection', 'robust']\n          }\n        ]\n      },\n      {\n        id: 'predictive-modeling',\n        title: 'Predictive Modeling',\n        description: 'Forecasting building performance and energy consumption',\n        content: [\n          {\n            id: 'modeling-wiki',\n            title: 'Energy Consumption Forecasting',\n            type: 'wiki',\n            description: 'Advanced models for predicting building energy usage',\n            content: 'Comprehensive guide to energy consumption forecasting methodologies...',\n            readTime: '19 min read',\n            author: 'Dr. Ahmed Hassan',\n            publishedAt: '2024-02-22',\n            tags: ['forecasting', 'energy', 'consumption']\n          },\n          {\n            id: 'modeling-podcast',\n            title: 'Deep Learning for Building Prediction',\n            type: 'podcast',\n            description: 'Deep learning applications in building performance prediction',\n            content: 'Exploring deep learning techniques for building performance prediction...',\n            duration: '51 min',\n            author: 'Deep Learning Buildings',\n            publishedAt: '2024-02-27',\n            tags: ['deep-learning', 'prediction', 'performance']\n          },\n          {\n            id: 'modeling-video',\n            title: 'LSTM Networks for Building Data',\n            type: 'video',\n            description: 'Implementing LSTM networks for building time series prediction',\n            content: 'Build and train LSTM networks for accurate building performance prediction...',\n            duration: '43 min',\n            author: 'Neural Networks Lab',\n            publishedAt: '2024-03-03',\n            tags: ['lstm', 'networks', 'training']\n          },\n          {\n            id: 'modeling-guide',\n            title: 'Model Validation Strategies',\n            type: 'guide',\n            description: 'Validating predictive models for building applications',\n            content: 'Essential strategies for validating and testing building prediction models...',\n            readTime: '13 min read',\n            author: 'Model Validation Team',\n            publishedAt: '2024-03-08',\n            tags: ['validation', 'testing', 'strategies']\n          }\n        ]\n      },\n      {\n        id: 'performance-metrics',\n        title: 'Performance Metrics',\n        description: 'KPIs and benchmarking for building performance',\n        content: [\n          {\n            id: 'metrics-wiki',\n            title: 'Building Performance Indicators',\n            type: 'wiki',\n            description: 'Key performance indicators for smart buildings',\n            content: 'Comprehensive overview of KPIs for measuring building performance and efficiency...',\n            readTime: '16 min read',\n            author: 'Performance Metrics Institute',\n            publishedAt: '2024-03-12',\n            tags: ['kpi', 'indicators', 'efficiency']\n          },\n          {\n            id: 'metrics-podcast',\n            title: 'Benchmarking Smart Buildings',\n            type: 'podcast',\n            description: 'Industry benchmarks for smart building performance',\n            content: 'Understanding industry benchmarks and best practices for building performance...',\n            duration: '45 min',\n            author: 'Building Benchmarks',\n            publishedAt: '2024-03-17',\n            tags: ['benchmarking', 'industry', 'best-practices']\n          },\n          {\n            id: 'metrics-video',\n            title: 'Creating Performance Dashboards',\n            type: 'video',\n            description: 'Building comprehensive performance monitoring dashboards',\n            content: 'Design and implement effective performance dashboards for building operations...',\n            duration: '38 min',\n            author: 'Dashboard Design Pro',\n            publishedAt: '2024-03-22',\n            tags: ['dashboards', 'monitoring', 'operations']\n          },\n          {\n            id: 'metrics-guide',\n            title: 'Performance Reporting Framework',\n            type: 'guide',\n            description: 'Structured approach to building performance reporting',\n            content: 'Framework for systematic building performance reporting and analysis...',\n            readTime: '10 min read',\n            author: 'Reporting Standards Group',\n            publishedAt: '2024-03-27',\n            tags: ['reporting', 'framework', 'systematic']\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: 'visualization-vr',\n    title: 'Visualization & VR',\n    description: 'Immersive visualization and virtual reality applications',\n    color: 'bg-orange-500',\n    icon: '🥽',\n    topics: [\n      {\n        id: 'immersive-visualization',\n        title: 'Immersive Visualization',\n        description: 'Creating compelling 3D visualizations and walkthroughs',\n        content: [\n          {\n            id: 'immersive-wiki',\n            title: 'Real-time Rendering for Architecture',\n            type: 'wiki',\n            description: 'Techniques for real-time architectural visualization',\n            content: 'Advanced real-time rendering techniques for architectural visualization...',\n            readTime: '18 min read',\n            author: 'Dr. Rachel Morgan',\n            publishedAt: '2024-01-14',\n            tags: ['real-time', 'rendering', 'visualization']\n          },\n          {\n            id: 'immersive-podcast',\n            title: 'The Future of Architectural Visualization',\n            type: 'podcast',\n            description: 'Emerging trends in architectural visualization technology',\n            content: 'Exploring the future of architectural visualization and emerging technologies...',\n            duration: '47 min',\n            author: 'Viz Future Podcast',\n            publishedAt: '2024-01-19',\n            tags: ['future', 'trends', 'technology']\n          },\n          {\n            id: 'immersive-video',\n            title: 'Unreal Engine for Architecture',\n            type: 'video',\n            description: 'Using Unreal Engine for architectural visualization',\n            content: 'Complete guide to using Unreal Engine for stunning architectural visualizations...',\n            duration: '52 min',\n            author: 'Arch Viz Academy',\n            publishedAt: '2024-01-24',\n            tags: ['unreal', 'engine', 'tutorial']\n          },\n          {\n            id: 'immersive-guide',\n            title: 'Lighting Design for Architectural Visualization',\n            type: 'guide',\n            description: 'Best practices for lighting in architectural renders',\n            content: 'Essential lighting techniques for creating compelling architectural visualizations...',\n            readTime: '12 min read',\n            author: 'Lighting Design Studio',\n            publishedAt: '2024-01-29',\n            tags: ['lighting', 'design', 'rendering']\n          }\n        ]\n      },\n      {\n        id: 'vr-experiences',\n        title: 'VR Experiences',\n        description: 'Virtual reality applications for architecture and construction',\n        content: [\n          {\n            id: 'vr-wiki',\n            title: 'VR for Design Review and Collaboration',\n            type: 'wiki',\n            description: 'Using VR for effective design review processes',\n            content: 'Implementing VR technologies for enhanced design review and collaboration...',\n            readTime: '15 min read',\n            author: 'VR Design Lab',\n            publishedAt: '2024-02-03',\n            tags: ['vr', 'design-review', 'collaboration']\n          },\n          {\n            id: 'vr-podcast',\n            title: 'VR in Construction Training',\n            type: 'podcast',\n            description: 'Virtual reality applications in construction safety training',\n            content: 'How VR is transforming construction safety training and education...',\n            duration: '41 min',\n            author: 'Construction Tech Talk',\n            publishedAt: '2024-02-08',\n            tags: ['construction', 'training', 'safety']\n          },\n          {\n            id: 'vr-video',\n            title: 'Building VR Experiences with Unity',\n            type: 'video',\n            description: 'Creating architectural VR experiences using Unity',\n            content: 'Step-by-step guide to creating immersive architectural VR experiences...',\n            duration: '49 min',\n            author: 'Unity for Architecture',\n            publishedAt: '2024-02-13',\n            tags: ['unity', 'development', 'immersive']\n          },\n          {\n            id: 'vr-guide',\n            title: 'VR Hardware Selection Guide',\n            type: 'guide',\n            description: 'Choosing the right VR hardware for architectural applications',\n            content: 'Comprehensive guide to selecting VR hardware for architectural workflows...',\n            readTime: '11 min read',\n            author: 'VR Hardware Review',\n            publishedAt: '2024-02-18',\n            tags: ['hardware', 'selection', 'comparison']\n          }\n        ]\n      },\n      {\n        id: 'ar-applications',\n        title: 'AR Applications',\n        description: 'Augmented reality for construction and facility management',\n        content: [\n          {\n            id: 'ar-wiki',\n            title: 'AR for On-site Construction Guidance',\n            type: 'wiki',\n            description: 'Augmented reality applications in construction workflows',\n            content: 'Implementing AR technologies for on-site construction guidance and quality control...',\n            readTime: '17 min read',\n            author: 'AR Construction Institute',\n            publishedAt: '2024-02-23',\n            tags: ['ar', 'construction', 'guidance']\n          },\n          {\n            id: 'ar-podcast',\n            title: 'Mixed Reality in Facility Management',\n            type: 'podcast',\n            description: 'Mixed reality applications for building operations',\n            content: 'Exploring mixed reality solutions for facility management and maintenance...',\n            duration: '44 min',\n            author: 'Mixed Reality FM',\n            publishedAt: '2024-02-28',\n            tags: ['mixed-reality', 'facility', 'maintenance']\n          },\n          {\n            id: 'ar-video',\n            title: 'HoloLens for Building Information',\n            type: 'video',\n            description: 'Using Microsoft HoloLens for building data visualization',\n            content: 'Practical applications of HoloLens for visualizing building information and systems...',\n            duration: '36 min',\n            author: 'Holographic Buildings',\n            publishedAt: '2024-03-04',\n            tags: ['hololens', 'microsoft', 'systems']\n          },\n          {\n            id: 'ar-guide',\n            title: 'AR Development for Architecture',\n            type: 'guide',\n            description: 'Getting started with AR development for architectural applications',\n            content: 'Beginner-friendly guide to developing AR applications for architecture...',\n            readTime: '14 min read',\n            author: 'AR Development Team',\n            publishedAt: '2024-03-09',\n            tags: ['development', 'beginner', 'applications']\n          }\n        ]\n      },\n      {\n        id: 'data-visualization',\n        title: 'Data Visualization',\n        description: 'Visual representation of building and sensor data',\n        content: [\n          {\n            id: 'dataviz-wiki',\n            title: 'Spatial Data Visualization Techniques',\n            type: 'wiki',\n            description: 'Advanced techniques for visualizing spatial building data',\n            content: 'Comprehensive guide to spatial data visualization for building analytics...',\n            readTime: '16 min read',\n            author: 'Spatial Viz Lab',\n            publishedAt: '2024-03-13',\n            tags: ['spatial', 'techniques', 'analytics']\n          },\n          {\n            id: 'dataviz-podcast',\n            title: 'Interactive Building Dashboards',\n            type: 'podcast',\n            description: 'Creating engaging interactive dashboards for building data',\n            content: 'Best practices for creating interactive and engaging building data dashboards...',\n            duration: '40 min',\n            author: 'Dashboard Design Weekly',\n            publishedAt: '2024-03-18',\n            tags: ['interactive', 'dashboards', 'engaging']\n          },\n          {\n            id: 'dataviz-video',\n            title: 'D3.js for Building Data Visualization',\n            type: 'video',\n            description: 'Using D3.js for custom building data visualizations',\n            content: 'Learn to create custom building data visualizations using D3.js library...',\n            duration: '45 min',\n            author: 'D3 for Buildings',\n            publishedAt: '2024-03-23',\n            tags: ['d3js', 'custom', 'library']\n          },\n          {\n            id: 'dataviz-guide',\n            title: 'Color Theory for Data Visualization',\n            type: 'guide',\n            description: 'Effective color schemes for building data visualization',\n            content: 'Guide to choosing effective color schemes for building data visualization...',\n            readTime: '8 min read',\n            author: 'Color Design Institute',\n            publishedAt: '2024-03-28',\n            tags: ['color', 'schemes', 'effective']\n          }\n        ]\n      }\n    ]\n  }\n];","size_bytes":35741},"src/types/cosmic/index.ts":{"content":"export interface ContentPiece {\n  id: string;\n  title: string;\n  type: 'wiki' | 'podcast' | 'video' | 'guide';\n  description: string;\n  content: string;\n  duration?: string; // for podcasts/videos\n  readTime?: string; // for wiki/guides\n  author: string;\n  publishedAt: string;\n  tags: string[];\n}\n\nexport interface Topic {\n  id: string;\n  title: string;\n  description: string;\n  content: ContentPiece[];\n}\n\nexport interface Domain {\n  id: string;\n  title: string;\n  description: string;\n  color: string;\n  icon: string;\n  topics: Topic[];\n}\n\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  role: 'architect' | 'learner';\n  avatar?: string;\n}\n\nexport interface Comment {\n  id: string;\n  contentId: string;\n  userId: string;\n  author: string;\n  content: string;\n  createdAt: string;\n  replies?: Comment[];\n}","size_bytes":831},"node_modules/.vite/deps/react-dom_client.js":{"content":"import {\n  require_client\n} from \"./chunk-QKVRGLAZ.js\";\nimport \"./chunk-MUNRXGQE.js\";\nimport \"./chunk-E3WV3ANG.js\";\nimport \"./chunk-EWTE5DHJ.js\";\nexport default require_client();\n","size_bytes":179}},"version":1}