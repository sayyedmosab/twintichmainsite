# TwinLab: Technical Architecture

## 1.0 Overview

The technical architecture of the TwinLab is centered around creating a highly interactive and visually stunning 3D user experience. It leverages modern frontend technologies to deliver a smooth and responsive application.

## 2.0 Frontend

*   **Framework:** The frontend is built using **React 18** with **Vite** as the build tool.
*   **Language:** The code is written in **TypeScript**.
*   **3D Rendering:** **React Three Fiber** is used for rendering the 3D scene, including the chapter spheres and episode cubes. This library provides a declarative and component-based approach to building 3D experiences with `three.js`.
    *   **Why React Three Fiber?** Chosen for its ability to seamlessly integrate `three.js` into a React component-based architecture, simplifying 3D scene management and state handling. It allows for declarative 3D rendering, making complex 3D scenes easier to build and maintain within a familiar React paradigm.
*   **Animation:** **Framer Motion** is used for creating fluid and complex animations for the UI elements.
    *   **Why Framer Motion?** Selected for its powerful yet easy-to-use animation primitives, enabling complex, physics-based, and gesture-driven animations with minimal code. It integrates well with React and allows for highly performant and visually rich UI transitions.
*   **Styling:** **Tailwind CSS** is used for styling the 2D UI elements.
    *   **Why Tailwind CSS?** Chosen for its utility-first approach, which enables rapid UI development and highly customizable designs without writing custom CSS. Its integration with React allows for efficient styling of both 2D overlays and general component layouts.

## 3.0 Data Structure

*   **Data Source:** The educational content for the TwinLab is currently **hardcoded** as a JSON-like structure within the `CosmicLandingPage.tsx` component.
*   **Data Model:** The data is organized into a hierarchy of "knowledge domains" (chapters) and "episodes". Each chapter has a title, subtitle, and a list of episodes. Each episode has a title and a description. The detailed JSON schema is as follows:

    ```json
    [
      {
        "id": "string",
        "title": "string",
        "subtitle": "string",
        "image": "string",
        "angle": "number",
        "backgroundColor": "string",
        "episodes": [
          {
            "id": "string",
            "title": "string",
            "description": "string"
          }
        ]
      }
    ]
    ```

## 4.0 Infrastructure

*   **Deployment:** The TwinLab is part of the main website and is deployed on **Vercel** along with the rest of the frontend application.

## 5.0 Performance Optimization

Given the 3D nature of the TwinLab, performance optimization is critical to ensure a smooth and responsive user experience. The following strategies are employed:

*   **3D Model Optimization:**
    *   **Polygon Count Reduction:** Ensuring that 3D models (e.g., spheres, cubes) have optimized polygon counts to minimize rendering overhead.
    *   **Texture Compression:** Using compressed texture formats (e.g., KTX2, WebP) to reduce VRAM usage and accelerate texture loading.
*   **Lazy Loading of Assets:** Loading 3D models, textures, and other heavy assets only when they are needed, rather than all at once, to improve initial load times.
*   **Instancing for Repeated Geometries:** For elements like the episode cubes, which are repeated many times, `three.js` instancing is used. This allows rendering multiple copies of the same geometry with a single draw call, significantly reducing CPU and GPU overhead.
*   **Frustum Culling:** `three.js` automatically performs frustum culling, rendering only objects that are within the camera's view frustum.
*   **Animation Optimization:** Using `framer-motion`'s optimized animation engine and avoiding unnecessary re-renders in React components.
*   **WebGL Context Management:** Ensuring proper disposal of `three.js` objects and geometries to prevent memory leaks.
